(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();var av=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Em={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(n){(function(t,e){n.exports=t.document?e(t,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return e(i)}})(typeof window<"u"?window:av,function(t,e){var i=[],r=Object.getPrototypeOf,s=i.slice,o=i.flat?function(h){return i.flat.call(h)}:function(h){return i.concat.apply([],h)},a=i.push,l=i.indexOf,u={},f=u.toString,d=u.hasOwnProperty,y=d.toString,m=y.call(Object),w={},S=function(g){return typeof g=="function"&&typeof g.nodeType!="number"&&typeof g.item!="function"},L=function(g){return g!=null&&g===g.window},E=t.document,I={type:!0,src:!0,nonce:!0,noModule:!0};function j(h,g,x){x=x||E;var C,R,N=x.createElement("script");if(N.text=h,g)for(C in I)R=g[C]||g.getAttribute&&g.getAttribute(C),R&&N.setAttribute(C,R);x.head.appendChild(N).parentNode.removeChild(N)}function G(h){return h==null?h+"":typeof h=="object"||typeof h=="function"?u[f.call(h)]||"object":typeof h}var Z="3.7.1",at=/HTML$/i,v=function(h,g){return new v.fn.init(h,g)};v.fn=v.prototype={jquery:Z,constructor:v,length:0,toArray:function(){return s.call(this)},get:function(h){return h==null?s.call(this):h<0?this[h+this.length]:this[h]},pushStack:function(h){var g=v.merge(this.constructor(),h);return g.prevObject=this,g},each:function(h){return v.each(this,h)},map:function(h){return this.pushStack(v.map(this,function(g,x){return h.call(g,x,g)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(v.grep(this,function(h,g){return(g+1)%2}))},odd:function(){return this.pushStack(v.grep(this,function(h,g){return g%2}))},eq:function(h){var g=this.length,x=+h+(h<0?g:0);return this.pushStack(x>=0&&x<g?[this[x]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:i.sort,splice:i.splice},v.extend=v.fn.extend=function(){var h,g,x,C,R,N,O=arguments[0]||{},rt=1,Q=arguments.length,pt=!1;for(typeof O=="boolean"&&(pt=O,O=arguments[rt]||{},rt++),typeof O!="object"&&!S(O)&&(O={}),rt===Q&&(O=this,rt--);rt<Q;rt++)if((h=arguments[rt])!=null)for(g in h)C=h[g],!(g==="__proto__"||O===C)&&(pt&&C&&(v.isPlainObject(C)||(R=Array.isArray(C)))?(x=O[g],R&&!Array.isArray(x)?N=[]:!R&&!v.isPlainObject(x)?N={}:N=x,R=!1,O[g]=v.extend(pt,N,C)):C!==void 0&&(O[g]=C));return O},v.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(h){throw new Error(h)},noop:function(){},isPlainObject:function(h){var g,x;return!h||f.call(h)!=="[object Object]"?!1:(g=r(h),g?(x=d.call(g,"constructor")&&g.constructor,typeof x=="function"&&y.call(x)===m):!0)},isEmptyObject:function(h){var g;for(g in h)return!1;return!0},globalEval:function(h,g,x){j(h,{nonce:g&&g.nonce},x)},each:function(h,g){var x,C=0;if(B(h))for(x=h.length;C<x&&g.call(h[C],C,h[C])!==!1;C++);else for(C in h)if(g.call(h[C],C,h[C])===!1)break;return h},text:function(h){var g,x="",C=0,R=h.nodeType;if(!R)for(;g=h[C++];)x+=v.text(g);return R===1||R===11?h.textContent:R===9?h.documentElement.textContent:R===3||R===4?h.nodeValue:x},makeArray:function(h,g){var x=g||[];return h!=null&&(B(Object(h))?v.merge(x,typeof h=="string"?[h]:h):a.call(x,h)),x},inArray:function(h,g,x){return g==null?-1:l.call(g,h,x)},isXMLDoc:function(h){var g=h&&h.namespaceURI,x=h&&(h.ownerDocument||h).documentElement;return!at.test(g||x&&x.nodeName||"HTML")},merge:function(h,g){for(var x=+g.length,C=0,R=h.length;C<x;C++)h[R++]=g[C];return h.length=R,h},grep:function(h,g,x){for(var C,R=[],N=0,O=h.length,rt=!x;N<O;N++)C=!g(h[N],N),C!==rt&&R.push(h[N]);return R},map:function(h,g,x){var C,R,N=0,O=[];if(B(h))for(C=h.length;N<C;N++)R=g(h[N],N,x),R!=null&&O.push(R);else for(N in h)R=g(h[N],N,x),R!=null&&O.push(R);return o(O)},guid:1,support:w}),typeof Symbol=="function"&&(v.fn[Symbol.iterator]=i[Symbol.iterator]),v.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(h,g){u["[object "+g+"]"]=g.toLowerCase()});function B(h){var g=!!h&&"length"in h&&h.length,x=G(h);return S(h)||L(h)?!1:x==="array"||g===0||typeof g=="number"&&g>0&&g-1 in h}function it(h,g){return h.nodeName&&h.nodeName.toLowerCase()===g.toLowerCase()}var mt=i.pop,q=i.sort,F=i.splice,V="[\\x20\\t\\r\\n\\f]",W=new RegExp("^"+V+"+|((?:^|[^\\\\])(?:\\\\.)*)"+V+"+$","g");v.contains=function(h,g){var x=g&&g.parentNode;return h===x||!!(x&&x.nodeType===1&&(h.contains?h.contains(x):h.compareDocumentPosition&&h.compareDocumentPosition(x)&16))};var et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function st(h,g){return g?h==="\0"?"\uFFFD":h.slice(0,-1)+"\\"+h.charCodeAt(h.length-1).toString(16)+" ":"\\"+h}v.escapeSelector=function(h){return(h+"").replace(et,st)};var lt=E,ct=a;(function(){var h,g,x,C,R,N=ct,O,rt,Q,pt,Rt,Ot=v.expando,Tt=0,Xt=0,Le=is(),Ze=is(),De=is(),Jn=is(),_=function($,ut){return $===ut&&(R=!0),0},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="(?:\\\\[\\da-fA-F]{1,6}"+V+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",tt="\\["+V+"*("+K+")(?:"+V+"*([*^$|!~]?=)"+V+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+K+"))|)"+V+"*\\]",vt=":("+K+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+tt+")*)|.*)\\)|)",Ct=new RegExp(V+"+","g"),Dt=new RegExp("^"+V+"*,"+V+"*"),ue=new RegExp("^"+V+"*([>+~]|"+V+")"+V+"*"),Se=new RegExp(V+"|>"),Te=new RegExp(vt),Ue=new RegExp("^"+K+"$"),Ge={ID:new RegExp("^#("+K+")"),CLASS:new RegExp("^\\.("+K+")"),TAG:new RegExp("^("+K+"|[*])"),ATTR:new RegExp("^"+tt),PSEUDO:new RegExp("^"+vt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+V+"*(even|odd|(([+-]|)(\\d*)n|)"+V+"*(?:([+-]|)"+V+"*(\\d+)|))"+V+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+V+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+V+"*((?:-\\d)?\\d*)"+V+"*\\)|)(?=[^-]|$)","i")},_n=/^(?:input|select|textarea|button)$/i,Sn=/^h\d$/i,mn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ui=/[+~]/,kn=new RegExp("\\\\[\\da-fA-F]{1,6}"+V+"?|\\\\([^\\r\\n\\f])","g"),ri=function($,ut){var xt="0x"+$.slice(1)-65536;return ut||(xt<0?String.fromCharCode(xt+65536):String.fromCharCode(xt>>10|55296,xt&1023|56320))},qi=function(){Ui()},Br=ss(function($){return $.disabled===!0&&it($,"fieldset")},{dir:"parentNode",next:"legend"});function Fa(){try{return O.activeElement}catch{}}try{N.apply(i=s.call(lt.childNodes),lt.childNodes),i[lt.childNodes.length].nodeType}catch{N={apply:function(ut,xt){ct.apply(ut,s.call(xt))},call:function(ut){ct.apply(ut,s.call(arguments,1))}}}function un($,ut,xt,It){var Ft,Qt,ce,ge,oe,qe,Ae,Ne=ut&&ut.ownerDocument,We=ut?ut.nodeType:9;if(xt=xt||[],typeof $!="string"||!$||We!==1&&We!==9&&We!==11)return xt;if(!It&&(Ui(ut),ut=ut||O,Q)){if(We!==11&&(oe=mn.exec($)))if(Ft=oe[1]){if(We===9)if(ce=ut.getElementById(Ft)){if(ce.id===Ft)return N.call(xt,ce),xt}else return xt;else if(Ne&&(ce=Ne.getElementById(Ft))&&un.contains(ut,ce)&&ce.id===Ft)return N.call(xt,ce),xt}else{if(oe[2])return N.apply(xt,ut.getElementsByTagName($)),xt;if((Ft=oe[3])&&ut.getElementsByClassName)return N.apply(xt,ut.getElementsByClassName(Ft)),xt}if(!Jn[$+" "]&&(!pt||!pt.test($))){if(Ae=$,Ne=ut,We===1&&(Se.test($)||ue.test($))){for(Ne=ui.test($)&&rs(ut.parentNode)||ut,(Ne!=ut||!w.scope)&&((ge=ut.getAttribute("id"))?ge=v.escapeSelector(ge):ut.setAttribute("id",ge=Ot)),qe=ci($),Qt=qe.length;Qt--;)qe[Qt]=(ge?"#"+ge:":scope")+" "+io(qe[Qt]);Ae=qe.join(",")}try{return N.apply(xt,Ne.querySelectorAll(Ae)),xt}catch{Jn($,!0)}finally{ge===Ot&&ut.removeAttribute("id")}}}return Ki($.replace(W,"$1"),ut,xt,It)}function is(){var $=[];function ut(xt,It){return $.push(xt+" ")>g.cacheLength&&delete ut[$.shift()],ut[xt+" "]=It}return ut}function wi($){return $[Ot]=!0,$}function Sr($){var ut=O.createElement("fieldset");try{return!!$(ut)}catch{return!1}finally{ut.parentNode&&ut.parentNode.removeChild(ut),ut=null}}function Ko($){return function(ut){return it(ut,"input")&&ut.type===$}}function eo($){return function(ut){return(it(ut,"input")||it(ut,"button"))&&ut.type===$}}function Ai($){return function(ut){return"form"in ut?ut.parentNode&&ut.disabled===!1?"label"in ut?"label"in ut.parentNode?ut.parentNode.disabled===$:ut.disabled===$:ut.isDisabled===$||ut.isDisabled!==!$&&Br(ut)===$:ut.disabled===$:"label"in ut?ut.disabled===$:!1}}function Yi($){return wi(function(ut){return ut=+ut,wi(function(xt,It){for(var Ft,Qt=$([],xt.length,ut),ce=Qt.length;ce--;)xt[Ft=Qt[ce]]&&(xt[Ft]=!(It[Ft]=xt[Ft]))})})}function rs($){return $&&typeof $.getElementsByTagName<"u"&&$}function Ui($){var ut,xt=$?$.ownerDocument||$:lt;return xt==O||xt.nodeType!==9||!xt.documentElement||(O=xt,rt=O.documentElement,Q=!v.isXMLDoc(O),Rt=rt.matches||rt.webkitMatchesSelector||rt.msMatchesSelector,rt.msMatchesSelector&&lt!=O&&(ut=O.defaultView)&&ut.top!==ut&&ut.addEventListener("unload",qi),w.getById=Sr(function(It){return rt.appendChild(It).id=v.expando,!O.getElementsByName||!O.getElementsByName(v.expando).length}),w.disconnectedMatch=Sr(function(It){return Rt.call(It,"*")}),w.scope=Sr(function(){return O.querySelectorAll(":scope")}),w.cssHas=Sr(function(){try{return O.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),w.getById?(g.filter.ID=function(It){var Ft=It.replace(kn,ri);return function(Qt){return Qt.getAttribute("id")===Ft}},g.find.ID=function(It,Ft){if(typeof Ft.getElementById<"u"&&Q){var Qt=Ft.getElementById(It);return Qt?[Qt]:[]}}):(g.filter.ID=function(It){var Ft=It.replace(kn,ri);return function(Qt){var ce=typeof Qt.getAttributeNode<"u"&&Qt.getAttributeNode("id");return ce&&ce.value===Ft}},g.find.ID=function(It,Ft){if(typeof Ft.getElementById<"u"&&Q){var Qt,ce,ge,oe=Ft.getElementById(It);if(oe){if(Qt=oe.getAttributeNode("id"),Qt&&Qt.value===It)return[oe];for(ge=Ft.getElementsByName(It),ce=0;oe=ge[ce++];)if(Qt=oe.getAttributeNode("id"),Qt&&Qt.value===It)return[oe]}return[]}}),g.find.TAG=function(It,Ft){return typeof Ft.getElementsByTagName<"u"?Ft.getElementsByTagName(It):Ft.querySelectorAll(It)},g.find.CLASS=function(It,Ft){if(typeof Ft.getElementsByClassName<"u"&&Q)return Ft.getElementsByClassName(It)},pt=[],Sr(function(It){var Ft;rt.appendChild(It).innerHTML="<a id='"+Ot+"' href='' disabled='disabled'></a><select id='"+Ot+"-\r\\' disabled='disabled'><option selected=''></option></select>",It.querySelectorAll("[selected]").length||pt.push("\\["+V+"*(?:value|"+P+")"),It.querySelectorAll("[id~="+Ot+"-]").length||pt.push("~="),It.querySelectorAll("a#"+Ot+"+*").length||pt.push(".#.+[+~]"),It.querySelectorAll(":checked").length||pt.push(":checked"),Ft=O.createElement("input"),Ft.setAttribute("type","hidden"),It.appendChild(Ft).setAttribute("name","D"),rt.appendChild(It).disabled=!0,It.querySelectorAll(":disabled").length!==2&&pt.push(":enabled",":disabled"),Ft=O.createElement("input"),Ft.setAttribute("name",""),It.appendChild(Ft),It.querySelectorAll("[name='']").length||pt.push("\\["+V+"*name"+V+"*="+V+`*(?:''|"")`)}),w.cssHas||pt.push(":has"),pt=pt.length&&new RegExp(pt.join("|")),_=function(It,Ft){if(It===Ft)return R=!0,0;var Qt=!It.compareDocumentPosition-!Ft.compareDocumentPosition;return Qt||(Qt=(It.ownerDocument||It)==(Ft.ownerDocument||Ft)?It.compareDocumentPosition(Ft):1,Qt&1||!w.sortDetached&&Ft.compareDocumentPosition(It)===Qt?It===O||It.ownerDocument==lt&&un.contains(lt,It)?-1:Ft===O||Ft.ownerDocument==lt&&un.contains(lt,Ft)?1:C?l.call(C,It)-l.call(C,Ft):0:Qt&4?-1:1)}),O}un.matches=function($,ut){return un($,null,null,ut)},un.matchesSelector=function($,ut){if(Ui($),Q&&!Jn[ut+" "]&&(!pt||!pt.test(ut)))try{var xt=Rt.call($,ut);if(xt||w.disconnectedMatch||$.document&&$.document.nodeType!==11)return xt}catch{Jn(ut,!0)}return un(ut,O,null,[$]).length>0},un.contains=function($,ut){return($.ownerDocument||$)!=O&&Ui($),v.contains($,ut)},un.attr=function($,ut){($.ownerDocument||$)!=O&&Ui($);var xt=g.attrHandle[ut.toLowerCase()],It=xt&&d.call(g.attrHandle,ut.toLowerCase())?xt($,ut,!Q):void 0;return It!==void 0?It:$.getAttribute(ut)},un.error=function($){throw new Error("Syntax error, unrecognized expression: "+$)},v.uniqueSort=function($){var ut,xt=[],It=0,Ft=0;if(R=!w.sortStable,C=!w.sortStable&&s.call($,0),q.call($,_),R){for(;ut=$[Ft++];)ut===$[Ft]&&(It=xt.push(Ft));for(;It--;)F.call($,xt[It],1)}return C=null,$},v.fn.uniqueSort=function(){return this.pushStack(v.uniqueSort(s.apply(this)))},g=v.expr={cacheLength:50,createPseudo:wi,match:Ge,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function($){return $[1]=$[1].replace(kn,ri),$[3]=($[3]||$[4]||$[5]||"").replace(kn,ri),$[2]==="~="&&($[3]=" "+$[3]+" "),$.slice(0,4)},CHILD:function($){return $[1]=$[1].toLowerCase(),$[1].slice(0,3)==="nth"?($[3]||un.error($[0]),$[4]=+($[4]?$[5]+($[6]||1):2*($[3]==="even"||$[3]==="odd")),$[5]=+($[7]+$[8]||$[3]==="odd")):$[3]&&un.error($[0]),$},PSEUDO:function($){var ut,xt=!$[6]&&$[2];return Ge.CHILD.test($[0])?null:($[3]?$[2]=$[4]||$[5]||"":xt&&Te.test(xt)&&(ut=ci(xt,!0))&&(ut=xt.indexOf(")",xt.length-ut)-xt.length)&&($[0]=$[0].slice(0,ut),$[2]=xt.slice(0,ut)),$.slice(0,3))}},filter:{TAG:function($){var ut=$.replace(kn,ri).toLowerCase();return $==="*"?function(){return!0}:function(xt){return it(xt,ut)}},CLASS:function($){var ut=Le[$+" "];return ut||(ut=new RegExp("(^|"+V+")"+$+"("+V+"|$)"))&&Le($,function(xt){return ut.test(typeof xt.className=="string"&&xt.className||typeof xt.getAttribute<"u"&&xt.getAttribute("class")||"")})},ATTR:function($,ut,xt){return function(It){var Ft=un.attr(It,$);return Ft==null?ut==="!=":ut?(Ft+="",ut==="="?Ft===xt:ut==="!="?Ft!==xt:ut==="^="?xt&&Ft.indexOf(xt)===0:ut==="*="?xt&&Ft.indexOf(xt)>-1:ut==="$="?xt&&Ft.slice(-xt.length)===xt:ut==="~="?(" "+Ft.replace(Ct," ")+" ").indexOf(xt)>-1:ut==="|="?Ft===xt||Ft.slice(0,xt.length+1)===xt+"-":!1):!0}},CHILD:function($,ut,xt,It,Ft){var Qt=$.slice(0,3)!=="nth",ce=$.slice(-4)!=="last",ge=ut==="of-type";return It===1&&Ft===0?function(oe){return!!oe.parentNode}:function(oe,qe,Ae){var Ne,We,be,bn,Dn,Un=Qt!==ce?"nextSibling":"previousSibling",en=oe.parentNode,rn=ge&&oe.nodeName.toLowerCase(),Fn=!Ae&&!ge,cn=!1;if(en){if(Qt){for(;Un;){for(be=oe;be=be[Un];)if(ge?it(be,rn):be.nodeType===1)return!1;Dn=Un=$==="only"&&!Dn&&"nextSibling"}return!0}if(Dn=[ce?en.firstChild:en.lastChild],ce&&Fn){for(We=en[Ot]||(en[Ot]={}),Ne=We[$]||[],bn=Ne[0]===Tt&&Ne[1],cn=bn&&Ne[2],be=bn&&en.childNodes[bn];be=++bn&&be&&be[Un]||(cn=bn=0)||Dn.pop();)if(be.nodeType===1&&++cn&&be===oe){We[$]=[Tt,bn,cn];break}}else if(Fn&&(We=oe[Ot]||(oe[Ot]={}),Ne=We[$]||[],bn=Ne[0]===Tt&&Ne[1],cn=bn),cn===!1)for(;(be=++bn&&be&&be[Un]||(cn=bn=0)||Dn.pop())&&!((ge?it(be,rn):be.nodeType===1)&&++cn&&(Fn&&(We=be[Ot]||(be[Ot]={}),We[$]=[Tt,cn]),be===oe)););return cn-=Ft,cn===It||cn%It===0&&cn/It>=0}}},PSEUDO:function($,ut){var xt,It=g.pseudos[$]||g.setFilters[$.toLowerCase()]||un.error("unsupported pseudo: "+$);return It[Ot]?It(ut):It.length>1?(xt=[$,$,"",ut],g.setFilters.hasOwnProperty($.toLowerCase())?wi(function(Ft,Qt){for(var ce,ge=It(Ft,ut),oe=ge.length;oe--;)ce=l.call(Ft,ge[oe]),Ft[ce]=!(Qt[ce]=ge[oe])}):function(Ft){return It(Ft,0,xt)}):It}},pseudos:{not:wi(function($){var ut=[],xt=[],It=Ri($.replace(W,"$1"));return It[Ot]?wi(function(Ft,Qt,ce,ge){for(var oe,qe=It(Ft,null,ge,[]),Ae=Ft.length;Ae--;)(oe=qe[Ae])&&(Ft[Ae]=!(Qt[Ae]=oe))}):function(Ft,Qt,ce){return ut[0]=Ft,It(ut,null,ce,xt),ut[0]=null,!xt.pop()}}),has:wi(function($){return function(ut){return un($,ut).length>0}}),contains:wi(function($){return $=$.replace(kn,ri),function(ut){return(ut.textContent||v.text(ut)).indexOf($)>-1}}),lang:wi(function($){return Ue.test($||"")||un.error("unsupported lang: "+$),$=$.replace(kn,ri).toLowerCase(),function(ut){var xt;do if(xt=Q?ut.lang:ut.getAttribute("xml:lang")||ut.getAttribute("lang"))return xt=xt.toLowerCase(),xt===$||xt.indexOf($+"-")===0;while((ut=ut.parentNode)&&ut.nodeType===1);return!1}}),target:function($){var ut=t.location&&t.location.hash;return ut&&ut.slice(1)===$.id},root:function($){return $===rt},focus:function($){return $===Fa()&&O.hasFocus()&&!!($.type||$.href||~$.tabIndex)},enabled:Ai(!1),disabled:Ai(!0),checked:function($){return it($,"input")&&!!$.checked||it($,"option")&&!!$.selected},selected:function($){return $.parentNode&&$.parentNode.selectedIndex,$.selected===!0},empty:function($){for($=$.firstChild;$;$=$.nextSibling)if($.nodeType<6)return!1;return!0},parent:function($){return!g.pseudos.empty($)},header:function($){return Sn.test($.nodeName)},input:function($){return _n.test($.nodeName)},button:function($){return it($,"input")&&$.type==="button"||it($,"button")},text:function($){var ut;return it($,"input")&&$.type==="text"&&((ut=$.getAttribute("type"))==null||ut.toLowerCase()==="text")},first:Yi(function(){return[0]}),last:Yi(function($,ut){return[ut-1]}),eq:Yi(function($,ut,xt){return[xt<0?xt+ut:xt]}),even:Yi(function($,ut){for(var xt=0;xt<ut;xt+=2)$.push(xt);return $}),odd:Yi(function($,ut){for(var xt=1;xt<ut;xt+=2)$.push(xt);return $}),lt:Yi(function($,ut,xt){var It;for(xt<0?It=xt+ut:xt>ut?It=ut:It=xt;--It>=0;)$.push(It);return $}),gt:Yi(function($,ut,xt){for(var It=xt<0?xt+ut:xt;++It<ut;)$.push(It);return $})}},g.pseudos.nth=g.pseudos.eq;for(h in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})g.pseudos[h]=Ko(h);for(h in{submit:!0,reset:!0})g.pseudos[h]=eo(h);function no(){}no.prototype=g.filters=g.pseudos,g.setFilters=new no;function ci($,ut){var xt,It,Ft,Qt,ce,ge,oe,qe=Ze[$+" "];if(qe)return ut?0:qe.slice(0);for(ce=$,ge=[],oe=g.preFilter;ce;){(!xt||(It=Dt.exec(ce)))&&(It&&(ce=ce.slice(It[0].length)||ce),ge.push(Ft=[])),xt=!1,(It=ue.exec(ce))&&(xt=It.shift(),Ft.push({value:xt,type:It[0].replace(W," ")}),ce=ce.slice(xt.length));for(Qt in g.filter)(It=Ge[Qt].exec(ce))&&(!oe[Qt]||(It=oe[Qt](It)))&&(xt=It.shift(),Ft.push({value:xt,type:Qt,matches:It}),ce=ce.slice(xt.length));if(!xt)break}return ut?ce.length:ce?un.error($):Ze($,ge).slice(0)}function io($){for(var ut=0,xt=$.length,It="";ut<xt;ut++)It+=$[ut].value;return It}function ss($,ut,xt){var It=ut.dir,Ft=ut.next,Qt=Ft||It,ce=xt&&Qt==="parentNode",ge=Xt++;return ut.first?function(oe,qe,Ae){for(;oe=oe[It];)if(oe.nodeType===1||ce)return $(oe,qe,Ae);return!1}:function(oe,qe,Ae){var Ne,We,be=[Tt,ge];if(Ae){for(;oe=oe[It];)if((oe.nodeType===1||ce)&&$(oe,qe,Ae))return!0}else for(;oe=oe[It];)if(oe.nodeType===1||ce)if(We=oe[Ot]||(oe[Ot]={}),Ft&&it(oe,Ft))oe=oe[It]||oe;else{if((Ne=We[Qt])&&Ne[0]===Tt&&Ne[1]===ge)return be[2]=Ne[2];if(We[Qt]=be,be[2]=$(oe,qe,Ae))return!0}return!1}}function ro($){return $.length>1?function(ut,xt,It){for(var Ft=$.length;Ft--;)if(!$[Ft](ut,xt,It))return!1;return!0}:$[0]}function lr($,ut,xt){for(var It=0,Ft=ut.length;It<Ft;It++)un($,ut[It],xt);return xt}function os($,ut,xt,It,Ft){for(var Qt,ce=[],ge=0,oe=$.length,qe=ut!=null;ge<oe;ge++)(Qt=$[ge])&&(!xt||xt(Qt,It,Ft))&&(ce.push(Qt),qe&&ut.push(ge));return ce}function Zo($,ut,xt,It,Ft,Qt){return It&&!It[Ot]&&(It=Zo(It)),Ft&&!Ft[Ot]&&(Ft=Zo(Ft,Qt)),wi(function(ce,ge,oe,qe){var Ae,Ne,We,be,bn=[],Dn=[],Un=ge.length,en=ce||lr(ut||"*",oe.nodeType?[oe]:oe,[]),rn=$&&(ce||!ut)?os(en,bn,$,oe,qe):en;if(xt?(be=Ft||(ce?$:Un||It)?[]:ge,xt(rn,be,oe,qe)):be=rn,It)for(Ae=os(be,Dn),It(Ae,[],oe,qe),Ne=Ae.length;Ne--;)(We=Ae[Ne])&&(be[Dn[Ne]]=!(rn[Dn[Ne]]=We));if(ce){if(Ft||$){if(Ft){for(Ae=[],Ne=be.length;Ne--;)(We=be[Ne])&&Ae.push(rn[Ne]=We);Ft(null,be=[],Ae,qe)}for(Ne=be.length;Ne--;)(We=be[Ne])&&(Ae=Ft?l.call(ce,We):bn[Ne])>-1&&(ce[Ae]=!(ge[Ae]=We))}}else be=os(be===ge?be.splice(Un,be.length):be),Ft?Ft(null,ge,be,qe):N.apply(ge,be)})}function Jo($){for(var ut,xt,It,Ft=$.length,Qt=g.relative[$[0].type],ce=Qt||g.relative[" "],ge=Qt?1:0,oe=ss(function(Ne){return Ne===ut},ce,!0),qe=ss(function(Ne){return l.call(ut,Ne)>-1},ce,!0),Ae=[function(Ne,We,be){var bn=!Qt&&(be||We!=x)||((ut=We).nodeType?oe(Ne,We,be):qe(Ne,We,be));return ut=null,bn}];ge<Ft;ge++)if(xt=g.relative[$[ge].type])Ae=[ss(ro(Ae),xt)];else{if(xt=g.filter[$[ge].type].apply(null,$[ge].matches),xt[Ot]){for(It=++ge;It<Ft&&!g.relative[$[It].type];It++);return Zo(ge>1&&ro(Ae),ge>1&&io($.slice(0,ge-1).concat({value:$[ge-2].type===" "?"*":""})).replace(W,"$1"),xt,ge<It&&Jo($.slice(ge,It)),It<Ft&&Jo($=$.slice(It)),It<Ft&&io($))}Ae.push(xt)}return ro(Ae)}function as($,ut){var xt=ut.length>0,It=$.length>0,Ft=function(Qt,ce,ge,oe,qe){var Ae,Ne,We,be=0,bn="0",Dn=Qt&&[],Un=[],en=x,rn=Qt||It&&g.find.TAG("*",qe),Fn=Tt+=en==null?1:Math.random()||.1,cn=rn.length;for(qe&&(x=ce==O||ce||qe);bn!==cn&&(Ae=rn[bn])!=null;bn++){if(It&&Ae){for(Ne=0,!ce&&Ae.ownerDocument!=O&&(Ui(Ae),ge=!Q);We=$[Ne++];)if(We(Ae,ce||O,ge)){N.call(oe,Ae);break}qe&&(Tt=Fn)}xt&&((Ae=!We&&Ae)&&be--,Qt&&Dn.push(Ae))}if(be+=bn,xt&&bn!==be){for(Ne=0;We=ut[Ne++];)We(Dn,Un,ce,ge);if(Qt){if(be>0)for(;bn--;)Dn[bn]||Un[bn]||(Un[bn]=mt.call(oe));Un=os(Un)}N.apply(oe,Un),qe&&!Qt&&Un.length>0&&be+ut.length>1&&v.uniqueSort(oe)}return qe&&(Tt=Fn,x=en),Dn};return xt?wi(Ft):Ft}function Ri($,ut){var xt,It=[],Ft=[],Qt=De[$+" "];if(!Qt){for(ut||(ut=ci($)),xt=ut.length;xt--;)Qt=Jo(ut[xt]),Qt[Ot]?It.push(Qt):Ft.push(Qt);Qt=De($,as(Ft,It)),Qt.selector=$}return Qt}function Ki($,ut,xt,It){var Ft,Qt,ce,ge,oe,qe=typeof $=="function"&&$,Ae=!It&&ci($=qe.selector||$);if(xt=xt||[],Ae.length===1){if(Qt=Ae[0]=Ae[0].slice(0),Qt.length>2&&(ce=Qt[0]).type==="ID"&&ut.nodeType===9&&Q&&g.relative[Qt[1].type]){if(ut=(g.find.ID(ce.matches[0].replace(kn,ri),ut)||[])[0],ut)qe&&(ut=ut.parentNode);else return xt;$=$.slice(Qt.shift().value.length)}for(Ft=Ge.needsContext.test($)?0:Qt.length;Ft--&&(ce=Qt[Ft],!g.relative[ge=ce.type]);)if((oe=g.find[ge])&&(It=oe(ce.matches[0].replace(kn,ri),ui.test(Qt[0].type)&&rs(ut.parentNode)||ut))){if(Qt.splice(Ft,1),$=It.length&&io(Qt),!$)return N.apply(xt,It),xt;break}}return(qe||Ri($,Ae))(It,ut,!Q,xt,!ut||ui.test($)&&rs(ut.parentNode)||ut),xt}w.sortStable=Ot.split("").sort(_).join("")===Ot,Ui(),w.sortDetached=Sr(function($){return $.compareDocumentPosition(O.createElement("fieldset"))&1}),v.find=un,v.expr[":"]=v.expr.pseudos,v.unique=v.uniqueSort,un.compile=Ri,un.select=Ki,un.setDocument=Ui,un.tokenize=ci,un.escape=v.escapeSelector,un.getText=v.text,un.isXML=v.isXMLDoc,un.selectors=v.expr,un.support=v.support,un.uniqueSort=v.uniqueSort})();var Et=function(h,g,x){for(var C=[],R=x!==void 0;(h=h[g])&&h.nodeType!==9;)if(h.nodeType===1){if(R&&v(h).is(x))break;C.push(h)}return C},ot=function(h,g){for(var x=[];h;h=h.nextSibling)h.nodeType===1&&h!==g&&x.push(h);return x},Yt=v.expr.match.needsContext,T=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function H(h,g,x){return S(g)?v.grep(h,function(C,R){return!!g.call(C,R,C)!==x}):g.nodeType?v.grep(h,function(C){return C===g!==x}):typeof g!="string"?v.grep(h,function(C){return l.call(g,C)>-1!==x}):v.filter(g,h,x)}v.filter=function(h,g,x){var C=g[0];return x&&(h=":not("+h+")"),g.length===1&&C.nodeType===1?v.find.matchesSelector(C,h)?[C]:[]:v.find.matches(h,v.grep(g,function(R){return R.nodeType===1}))},v.fn.extend({find:function(h){var g,x,C=this.length,R=this;if(typeof h!="string")return this.pushStack(v(h).filter(function(){for(g=0;g<C;g++)if(v.contains(R[g],this))return!0}));for(x=this.pushStack([]),g=0;g<C;g++)v.find(h,R[g],x);return C>1?v.uniqueSort(x):x},filter:function(h){return this.pushStack(H(this,h||[],!1))},not:function(h){return this.pushStack(H(this,h||[],!0))},is:function(h){return!!H(this,typeof h=="string"&&Yt.test(h)?v(h):h||[],!1).length}});var Y,nt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,dt=v.fn.init=function(h,g,x){var C,R;if(!h)return this;if(x=x||Y,typeof h=="string")if(h[0]==="<"&&h[h.length-1]===">"&&h.length>=3?C=[null,h,null]:C=nt.exec(h),C&&(C[1]||!g))if(C[1]){if(g=g instanceof v?g[0]:g,v.merge(this,v.parseHTML(C[1],g&&g.nodeType?g.ownerDocument||g:E,!0)),T.test(C[1])&&v.isPlainObject(g))for(C in g)S(this[C])?this[C](g[C]):this.attr(C,g[C]);return this}else return R=E.getElementById(C[2]),R&&(this[0]=R,this.length=1),this;else return!g||g.jquery?(g||x).find(h):this.constructor(g).find(h);else{if(h.nodeType)return this[0]=h,this.length=1,this;if(S(h))return x.ready!==void 0?x.ready(h):h(v)}return v.makeArray(h,this)};dt.prototype=v.fn,Y=v(E);var wt=/^(?:parents|prev(?:Until|All))/,_t={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({has:function(h){var g=v(h,this),x=g.length;return this.filter(function(){for(var C=0;C<x;C++)if(v.contains(this,g[C]))return!0})},closest:function(h,g){var x,C=0,R=this.length,N=[],O=typeof h!="string"&&v(h);if(!Yt.test(h)){for(;C<R;C++)for(x=this[C];x&&x!==g;x=x.parentNode)if(x.nodeType<11&&(O?O.index(x)>-1:x.nodeType===1&&v.find.matchesSelector(x,h))){N.push(x);break}}return this.pushStack(N.length>1?v.uniqueSort(N):N)},index:function(h){return h?typeof h=="string"?l.call(v(h),this[0]):l.call(this,h.jquery?h[0]:h):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(h,g){return this.pushStack(v.uniqueSort(v.merge(this.get(),v(h,g))))},addBack:function(h){return this.add(h==null?this.prevObject:this.prevObject.filter(h))}});function St(h,g){for(;(h=h[g])&&h.nodeType!==1;);return h}v.each({parent:function(h){var g=h.parentNode;return g&&g.nodeType!==11?g:null},parents:function(h){return Et(h,"parentNode")},parentsUntil:function(h,g,x){return Et(h,"parentNode",x)},next:function(h){return St(h,"nextSibling")},prev:function(h){return St(h,"previousSibling")},nextAll:function(h){return Et(h,"nextSibling")},prevAll:function(h){return Et(h,"previousSibling")},nextUntil:function(h,g,x){return Et(h,"nextSibling",x)},prevUntil:function(h,g,x){return Et(h,"previousSibling",x)},siblings:function(h){return ot((h.parentNode||{}).firstChild,h)},children:function(h){return ot(h.firstChild)},contents:function(h){return h.contentDocument!=null&&r(h.contentDocument)?h.contentDocument:(it(h,"template")&&(h=h.content||h),v.merge([],h.childNodes))}},function(h,g){v.fn[h]=function(x,C){var R=v.map(this,g,x);return h.slice(-5)!=="Until"&&(C=x),C&&typeof C=="string"&&(R=v.filter(C,R)),this.length>1&&(_t[h]||v.uniqueSort(R),wt.test(h)&&R.reverse()),this.pushStack(R)}});var bt=/[^\x20\t\r\n\f]+/g;function $t(h){var g={};return v.each(h.match(bt)||[],function(x,C){g[C]=!0}),g}v.Callbacks=function(h){h=typeof h=="string"?$t(h):v.extend({},h);var g,x,C,R,N=[],O=[],rt=-1,Q=function(){for(R=R||h.once,C=g=!0;O.length;rt=-1)for(x=O.shift();++rt<N.length;)N[rt].apply(x[0],x[1])===!1&&h.stopOnFalse&&(rt=N.length,x=!1);h.memory||(x=!1),g=!1,R&&(x?N=[]:N="")},pt={add:function(){return N&&(x&&!g&&(rt=N.length-1,O.push(x)),function Rt(Ot){v.each(Ot,function(Tt,Xt){S(Xt)?(!h.unique||!pt.has(Xt))&&N.push(Xt):Xt&&Xt.length&&G(Xt)!=="string"&&Rt(Xt)})}(arguments),x&&!g&&Q()),this},remove:function(){return v.each(arguments,function(Rt,Ot){for(var Tt;(Tt=v.inArray(Ot,N,Tt))>-1;)N.splice(Tt,1),Tt<=rt&&rt--}),this},has:function(Rt){return Rt?v.inArray(Rt,N)>-1:N.length>0},empty:function(){return N&&(N=[]),this},disable:function(){return R=O=[],N=x="",this},disabled:function(){return!N},lock:function(){return R=O=[],!x&&!g&&(N=x=""),this},locked:function(){return!!R},fireWith:function(Rt,Ot){return R||(Ot=Ot||[],Ot=[Rt,Ot.slice?Ot.slice():Ot],O.push(Ot),g||Q()),this},fire:function(){return pt.fireWith(this,arguments),this},fired:function(){return!!C}};return pt};function Jt(h){return h}function Ht(h){throw h}function ye(h,g,x,C){var R;try{h&&S(R=h.promise)?R.call(h).done(g).fail(x):h&&S(R=h.then)?R.call(h,g,x):g.apply(void 0,[h].slice(C))}catch(N){x.apply(void 0,[N])}}v.extend({Deferred:function(h){var g=[["notify","progress",v.Callbacks("memory"),v.Callbacks("memory"),2],["resolve","done",v.Callbacks("once memory"),v.Callbacks("once memory"),0,"resolved"],["reject","fail",v.Callbacks("once memory"),v.Callbacks("once memory"),1,"rejected"]],x="pending",C={state:function(){return x},always:function(){return R.done(arguments).fail(arguments),this},catch:function(N){return C.then(null,N)},pipe:function(){var N=arguments;return v.Deferred(function(O){v.each(g,function(rt,Q){var pt=S(N[Q[4]])&&N[Q[4]];R[Q[1]](function(){var Rt=pt&&pt.apply(this,arguments);Rt&&S(Rt.promise)?Rt.promise().progress(O.notify).done(O.resolve).fail(O.reject):O[Q[0]+"With"](this,pt?[Rt]:arguments)})}),N=null}).promise()},then:function(N,O,rt){var Q=0;function pt(Rt,Ot,Tt,Xt){return function(){var Le=this,Ze=arguments,De=function(){var _,P;if(!(Rt<Q)){if(_=Tt.apply(Le,Ze),_===Ot.promise())throw new TypeError("Thenable self-resolution");P=_&&(typeof _=="object"||typeof _=="function")&&_.then,S(P)?Xt?P.call(_,pt(Q,Ot,Jt,Xt),pt(Q,Ot,Ht,Xt)):(Q++,P.call(_,pt(Q,Ot,Jt,Xt),pt(Q,Ot,Ht,Xt),pt(Q,Ot,Jt,Ot.notifyWith))):(Tt!==Jt&&(Le=void 0,Ze=[_]),(Xt||Ot.resolveWith)(Le,Ze))}},Jn=Xt?De:function(){try{De()}catch(_){v.Deferred.exceptionHook&&v.Deferred.exceptionHook(_,Jn.error),Rt+1>=Q&&(Tt!==Ht&&(Le=void 0,Ze=[_]),Ot.rejectWith(Le,Ze))}};Rt?Jn():(v.Deferred.getErrorHook?Jn.error=v.Deferred.getErrorHook():v.Deferred.getStackHook&&(Jn.error=v.Deferred.getStackHook()),t.setTimeout(Jn))}}return v.Deferred(function(Rt){g[0][3].add(pt(0,Rt,S(rt)?rt:Jt,Rt.notifyWith)),g[1][3].add(pt(0,Rt,S(N)?N:Jt)),g[2][3].add(pt(0,Rt,S(O)?O:Ht))}).promise()},promise:function(N){return N!=null?v.extend(N,C):C}},R={};return v.each(g,function(N,O){var rt=O[2],Q=O[5];C[O[1]]=rt.add,Q&&rt.add(function(){x=Q},g[3-N][2].disable,g[3-N][3].disable,g[0][2].lock,g[0][3].lock),rt.add(O[3].fire),R[O[0]]=function(){return R[O[0]+"With"](this===R?void 0:this,arguments),this},R[O[0]+"With"]=rt.fireWith}),C.promise(R),h&&h.call(R,R),R},when:function(h){var g=arguments.length,x=g,C=Array(x),R=s.call(arguments),N=v.Deferred(),O=function(rt){return function(Q){C[rt]=this,R[rt]=arguments.length>1?s.call(arguments):Q,--g||N.resolveWith(C,R)}};if(g<=1&&(ye(h,N.done(O(x)).resolve,N.reject,!g),N.state()==="pending"||S(R[x]&&R[x].then)))return N.then();for(;x--;)ye(R[x],O(x),N.reject);return N.promise()}});var Nt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;v.Deferred.exceptionHook=function(h,g){t.console&&t.console.warn&&h&&Nt.test(h.name)&&t.console.warn("jQuery.Deferred exception: "+h.message,h.stack,g)},v.readyException=function(h){t.setTimeout(function(){throw h})};var J=v.Deferred();v.fn.ready=function(h){return J.then(h).catch(function(g){v.readyException(g)}),this},v.extend({isReady:!1,readyWait:1,ready:function(h){(h===!0?--v.readyWait:v.isReady)||(v.isReady=!0,!(h!==!0&&--v.readyWait>0)&&J.resolveWith(E,[v]))}}),v.ready.then=J.then;function Ce(){E.removeEventListener("DOMContentLoaded",Ce),t.removeEventListener("load",Ce),v.ready()}E.readyState==="complete"||E.readyState!=="loading"&&!E.documentElement.doScroll?t.setTimeout(v.ready):(E.addEventListener("DOMContentLoaded",Ce),t.addEventListener("load",Ce));var Zt=function(h,g,x,C,R,N,O){var rt=0,Q=h.length,pt=x==null;if(G(x)==="object"){R=!0;for(rt in x)Zt(h,g,rt,x[rt],!0,N,O)}else if(C!==void 0&&(R=!0,S(C)||(O=!0),pt&&(O?(g.call(h,C),g=null):(pt=g,g=function(Rt,Ot,Tt){return pt.call(v(Rt),Tt)})),g))for(;rt<Q;rt++)g(h[rt],x,O?C:C.call(h[rt],rt,g(h[rt],x)));return R?h:pt?g.call(h):Q?g(h[0],x):N},Wt=/^-ms-/,Kt=/-([a-z])/g;function ee(h,g){return g.toUpperCase()}function Gt(h){return h.replace(Wt,"ms-").replace(Kt,ee)}var le=function(h){return h.nodeType===1||h.nodeType===9||!+h.nodeType};function ie(){this.expando=v.expando+ie.uid++}ie.uid=1,ie.prototype={cache:function(h){var g=h[this.expando];return g||(g={},le(h)&&(h.nodeType?h[this.expando]=g:Object.defineProperty(h,this.expando,{value:g,configurable:!0}))),g},set:function(h,g,x){var C,R=this.cache(h);if(typeof g=="string")R[Gt(g)]=x;else for(C in g)R[Gt(C)]=g[C];return R},get:function(h,g){return g===void 0?this.cache(h):h[this.expando]&&h[this.expando][Gt(g)]},access:function(h,g,x){return g===void 0||g&&typeof g=="string"&&x===void 0?this.get(h,g):(this.set(h,g,x),x!==void 0?x:g)},remove:function(h,g){var x,C=h[this.expando];if(C!==void 0){if(g!==void 0)for(Array.isArray(g)?g=g.map(Gt):(g=Gt(g),g=g in C?[g]:g.match(bt)||[]),x=g.length;x--;)delete C[g[x]];(g===void 0||v.isEmptyObject(C))&&(h.nodeType?h[this.expando]=void 0:delete h[this.expando])}},hasData:function(h){var g=h[this.expando];return g!==void 0&&!v.isEmptyObject(g)}};var kt=new ie,ne=new ie,me=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,de=/[A-Z]/g;function re(h){return h==="true"?!0:h==="false"?!1:h==="null"?null:h===+h+""?+h:me.test(h)?JSON.parse(h):h}function _e(h,g,x){var C;if(x===void 0&&h.nodeType===1)if(C="data-"+g.replace(de,"-$&").toLowerCase(),x=h.getAttribute(C),typeof x=="string"){try{x=re(x)}catch{}ne.set(h,g,x)}else x=void 0;return x}v.extend({hasData:function(h){return ne.hasData(h)||kt.hasData(h)},data:function(h,g,x){return ne.access(h,g,x)},removeData:function(h,g){ne.remove(h,g)},_data:function(h,g,x){return kt.access(h,g,x)},_removeData:function(h,g){kt.remove(h,g)}}),v.fn.extend({data:function(h,g){var x,C,R,N=this[0],O=N&&N.attributes;if(h===void 0){if(this.length&&(R=ne.get(N),N.nodeType===1&&!kt.get(N,"hasDataAttrs"))){for(x=O.length;x--;)O[x]&&(C=O[x].name,C.indexOf("data-")===0&&(C=Gt(C.slice(5)),_e(N,C,R[C])));kt.set(N,"hasDataAttrs",!0)}return R}return typeof h=="object"?this.each(function(){ne.set(this,h)}):Zt(this,function(rt){var Q;if(N&&rt===void 0)return Q=ne.get(N,h),Q!==void 0||(Q=_e(N,h),Q!==void 0)?Q:void 0;this.each(function(){ne.set(this,h,rt)})},null,g,arguments.length>1,null,!0)},removeData:function(h){return this.each(function(){ne.remove(this,h)})}}),v.extend({queue:function(h,g,x){var C;if(h)return g=(g||"fx")+"queue",C=kt.get(h,g),x&&(!C||Array.isArray(x)?C=kt.access(h,g,v.makeArray(x)):C.push(x)),C||[]},dequeue:function(h,g){g=g||"fx";var x=v.queue(h,g),C=x.length,R=x.shift(),N=v._queueHooks(h,g),O=function(){v.dequeue(h,g)};R==="inprogress"&&(R=x.shift(),C--),R&&(g==="fx"&&x.unshift("inprogress"),delete N.stop,R.call(h,O,N)),!C&&N&&N.empty.fire()},_queueHooks:function(h,g){var x=g+"queueHooks";return kt.get(h,x)||kt.access(h,x,{empty:v.Callbacks("once memory").add(function(){kt.remove(h,[g+"queue",x])})})}}),v.fn.extend({queue:function(h,g){var x=2;return typeof h!="string"&&(g=h,h="fx",x--),arguments.length<x?v.queue(this[0],h):g===void 0?this:this.each(function(){var C=v.queue(this,h,g);v._queueHooks(this,h),h==="fx"&&C[0]!=="inprogress"&&v.dequeue(this,h)})},dequeue:function(h){return this.each(function(){v.dequeue(this,h)})},clearQueue:function(h){return this.queue(h||"fx",[])},promise:function(h,g){var x,C=1,R=v.Deferred(),N=this,O=this.length,rt=function(){--C||R.resolveWith(N,[N])};for(typeof h!="string"&&(g=h,h=void 0),h=h||"fx";O--;)x=kt.get(N[O],h+"queueHooks"),x&&x.empty&&(C++,x.empty.add(rt));return rt(),R.promise(g)}});var qt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ke=new RegExp("^(?:([+-])=|)("+qt+")([a-z%]*)$","i"),we=["Top","Right","Bottom","Left"],on=E.documentElement,ke=function(h){return v.contains(h.ownerDocument,h)},Ie={composed:!0};on.getRootNode&&(ke=function(h){return v.contains(h.ownerDocument,h)||h.getRootNode(Ie)===h.ownerDocument});var ln=function(h,g){return h=g||h,h.style.display==="none"||h.style.display===""&&ke(h)&&v.css(h,"display")==="none"};function Oe(h,g,x,C){var R,N,O=20,rt=C?function(){return C.cur()}:function(){return v.css(h,g,"")},Q=rt(),pt=x&&x[3]||(v.cssNumber[g]?"":"px"),Rt=h.nodeType&&(v.cssNumber[g]||pt!=="px"&&+Q)&&Ke.exec(v.css(h,g));if(Rt&&Rt[3]!==pt){for(Q=Q/2,pt=pt||Rt[3],Rt=+Q||1;O--;)v.style(h,g,Rt+pt),(1-N)*(1-(N=rt()/Q||.5))<=0&&(O=0),Rt=Rt/N;Rt=Rt*2,v.style(h,g,Rt+pt),x=x||[]}return x&&(Rt=+Rt||+Q||0,R=x[1]?Rt+(x[1]+1)*x[2]:+x[2],C&&(C.unit=pt,C.start=Rt,C.end=R)),R}var fn={};function nn(h){var g,x=h.ownerDocument,C=h.nodeName,R=fn[C];return R||(g=x.body.appendChild(x.createElement(C)),R=v.css(g,"display"),g.parentNode.removeChild(g),R==="none"&&(R="block"),fn[C]=R,R)}function qn(h,g){for(var x,C,R=[],N=0,O=h.length;N<O;N++)C=h[N],C.style&&(x=C.style.display,g?(x==="none"&&(R[N]=kt.get(C,"display")||null,R[N]||(C.style.display="")),C.style.display===""&&ln(C)&&(R[N]=nn(C))):x!=="none"&&(R[N]="none",kt.set(C,"display",x)));for(N=0;N<O;N++)R[N]!=null&&(h[N].style.display=R[N]);return h}v.fn.extend({show:function(){return qn(this,!0)},hide:function(){return qn(this)},toggle:function(h){return typeof h=="boolean"?h?this.show():this.hide():this.each(function(){ln(this)?v(this).show():v(this).hide()})}});var Kn=/^(?:checkbox|radio)$/i,An=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Re=/^$|^module$|\/(?:java|ecma)script/i;(function(){var h=E.createDocumentFragment(),g=h.appendChild(E.createElement("div")),x=E.createElement("input");x.setAttribute("type","radio"),x.setAttribute("checked","checked"),x.setAttribute("name","t"),g.appendChild(x),w.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,g.innerHTML="<textarea>x</textarea>",w.noCloneChecked=!!g.cloneNode(!0).lastChild.defaultValue,g.innerHTML="<option></option>",w.option=!!g.lastChild})();var Ee={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ee.tbody=Ee.tfoot=Ee.colgroup=Ee.caption=Ee.thead,Ee.th=Ee.td,w.option||(Ee.optgroup=Ee.option=[1,"<select multiple='multiple'>","</select>"]);function Tn(h,g){var x;return typeof h.getElementsByTagName<"u"?x=h.getElementsByTagName(g||"*"):typeof h.querySelectorAll<"u"?x=h.querySelectorAll(g||"*"):x=[],g===void 0||g&&it(h,g)?v.merge([h],x):x}function dn(h,g){for(var x=0,C=h.length;x<C;x++)kt.set(h[x],"globalEval",!g||kt.get(g[x],"globalEval"))}var Qn=/<|&#?\w+;/;function On(h,g,x,C,R){for(var N,O,rt,Q,pt,Rt,Ot=g.createDocumentFragment(),Tt=[],Xt=0,Le=h.length;Xt<Le;Xt++)if(N=h[Xt],N||N===0)if(G(N)==="object")v.merge(Tt,N.nodeType?[N]:N);else if(!Qn.test(N))Tt.push(g.createTextNode(N));else{for(O=O||Ot.appendChild(g.createElement("div")),rt=(An.exec(N)||["",""])[1].toLowerCase(),Q=Ee[rt]||Ee._default,O.innerHTML=Q[1]+v.htmlPrefilter(N)+Q[2],Rt=Q[0];Rt--;)O=O.lastChild;v.merge(Tt,O.childNodes),O=Ot.firstChild,O.textContent=""}for(Ot.textContent="",Xt=0;N=Tt[Xt++];){if(C&&v.inArray(N,C)>-1){R&&R.push(N);continue}if(pt=ke(N),O=Tn(Ot.appendChild(N),"script"),pt&&dn(O),x)for(Rt=0;N=O[Rt++];)Re.test(N.type||"")&&x.push(N)}return Ot}var xe=/^([^.]*)(?:\.(.+)|)/;function Zn(){return!0}function vn(){return!1}function xn(h,g,x,C,R,N){var O,rt;if(typeof g=="object"){typeof x!="string"&&(C=C||x,x=void 0);for(rt in g)xn(h,rt,x,C,g[rt],N);return h}if(C==null&&R==null?(R=x,C=x=void 0):R==null&&(typeof x=="string"?(R=C,C=void 0):(R=C,C=x,x=void 0)),R===!1)R=vn;else if(!R)return h;return N===1&&(O=R,R=function(Q){return v().off(Q),O.apply(this,arguments)},R.guid=O.guid||(O.guid=v.guid++)),h.each(function(){v.event.add(this,g,R,C,x)})}v.event={global:{},add:function(h,g,x,C,R){var N,O,rt,Q,pt,Rt,Ot,Tt,Xt,Le,Ze,De=kt.get(h);if(!!le(h))for(x.handler&&(N=x,x=N.handler,R=N.selector),R&&v.find.matchesSelector(on,R),x.guid||(x.guid=v.guid++),(Q=De.events)||(Q=De.events=Object.create(null)),(O=De.handle)||(O=De.handle=function(Jn){return typeof v<"u"&&v.event.triggered!==Jn.type?v.event.dispatch.apply(h,arguments):void 0}),g=(g||"").match(bt)||[""],pt=g.length;pt--;)rt=xe.exec(g[pt])||[],Xt=Ze=rt[1],Le=(rt[2]||"").split(".").sort(),Xt&&(Ot=v.event.special[Xt]||{},Xt=(R?Ot.delegateType:Ot.bindType)||Xt,Ot=v.event.special[Xt]||{},Rt=v.extend({type:Xt,origType:Ze,data:C,handler:x,guid:x.guid,selector:R,needsContext:R&&v.expr.match.needsContext.test(R),namespace:Le.join(".")},N),(Tt=Q[Xt])||(Tt=Q[Xt]=[],Tt.delegateCount=0,(!Ot.setup||Ot.setup.call(h,C,Le,O)===!1)&&h.addEventListener&&h.addEventListener(Xt,O)),Ot.add&&(Ot.add.call(h,Rt),Rt.handler.guid||(Rt.handler.guid=x.guid)),R?Tt.splice(Tt.delegateCount++,0,Rt):Tt.push(Rt),v.event.global[Xt]=!0)},remove:function(h,g,x,C,R){var N,O,rt,Q,pt,Rt,Ot,Tt,Xt,Le,Ze,De=kt.hasData(h)&&kt.get(h);if(!(!De||!(Q=De.events))){for(g=(g||"").match(bt)||[""],pt=g.length;pt--;){if(rt=xe.exec(g[pt])||[],Xt=Ze=rt[1],Le=(rt[2]||"").split(".").sort(),!Xt){for(Xt in Q)v.event.remove(h,Xt+g[pt],x,C,!0);continue}for(Ot=v.event.special[Xt]||{},Xt=(C?Ot.delegateType:Ot.bindType)||Xt,Tt=Q[Xt]||[],rt=rt[2]&&new RegExp("(^|\\.)"+Le.join("\\.(?:.*\\.|)")+"(\\.|$)"),O=N=Tt.length;N--;)Rt=Tt[N],(R||Ze===Rt.origType)&&(!x||x.guid===Rt.guid)&&(!rt||rt.test(Rt.namespace))&&(!C||C===Rt.selector||C==="**"&&Rt.selector)&&(Tt.splice(N,1),Rt.selector&&Tt.delegateCount--,Ot.remove&&Ot.remove.call(h,Rt));O&&!Tt.length&&((!Ot.teardown||Ot.teardown.call(h,Le,De.handle)===!1)&&v.removeEvent(h,Xt,De.handle),delete Q[Xt])}v.isEmptyObject(Q)&&kt.remove(h,"handle events")}},dispatch:function(h){var g,x,C,R,N,O,rt=new Array(arguments.length),Q=v.event.fix(h),pt=(kt.get(this,"events")||Object.create(null))[Q.type]||[],Rt=v.event.special[Q.type]||{};for(rt[0]=Q,g=1;g<arguments.length;g++)rt[g]=arguments[g];if(Q.delegateTarget=this,!(Rt.preDispatch&&Rt.preDispatch.call(this,Q)===!1)){for(O=v.event.handlers.call(this,Q,pt),g=0;(R=O[g++])&&!Q.isPropagationStopped();)for(Q.currentTarget=R.elem,x=0;(N=R.handlers[x++])&&!Q.isImmediatePropagationStopped();)(!Q.rnamespace||N.namespace===!1||Q.rnamespace.test(N.namespace))&&(Q.handleObj=N,Q.data=N.data,C=((v.event.special[N.origType]||{}).handle||N.handler).apply(R.elem,rt),C!==void 0&&(Q.result=C)===!1&&(Q.preventDefault(),Q.stopPropagation()));return Rt.postDispatch&&Rt.postDispatch.call(this,Q),Q.result}},handlers:function(h,g){var x,C,R,N,O,rt=[],Q=g.delegateCount,pt=h.target;if(Q&&pt.nodeType&&!(h.type==="click"&&h.button>=1)){for(;pt!==this;pt=pt.parentNode||this)if(pt.nodeType===1&&!(h.type==="click"&&pt.disabled===!0)){for(N=[],O={},x=0;x<Q;x++)C=g[x],R=C.selector+" ",O[R]===void 0&&(O[R]=C.needsContext?v(R,this).index(pt)>-1:v.find(R,this,null,[pt]).length),O[R]&&N.push(C);N.length&&rt.push({elem:pt,handlers:N})}}return pt=this,Q<g.length&&rt.push({elem:pt,handlers:g.slice(Q)}),rt},addProp:function(h,g){Object.defineProperty(v.Event.prototype,h,{enumerable:!0,configurable:!0,get:S(g)?function(){if(this.originalEvent)return g(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[h]},set:function(x){Object.defineProperty(this,h,{enumerable:!0,configurable:!0,writable:!0,value:x})}})},fix:function(h){return h[v.expando]?h:new v.Event(h)},special:{load:{noBubble:!0},click:{setup:function(h){var g=this||h;return Kn.test(g.type)&&g.click&&it(g,"input")&&pn(g,"click",!0),!1},trigger:function(h){var g=this||h;return Kn.test(g.type)&&g.click&&it(g,"input")&&pn(g,"click"),!0},_default:function(h){var g=h.target;return Kn.test(g.type)&&g.click&&it(g,"input")&&kt.get(g,"click")||it(g,"a")}},beforeunload:{postDispatch:function(h){h.result!==void 0&&h.originalEvent&&(h.originalEvent.returnValue=h.result)}}}};function pn(h,g,x){if(!x){kt.get(h,g)===void 0&&v.event.add(h,g,Zn);return}kt.set(h,g,!1),v.event.add(h,g,{namespace:!1,handler:function(C){var R,N=kt.get(this,g);if(C.isTrigger&1&&this[g]){if(N)(v.event.special[g]||{}).delegateType&&C.stopPropagation();else if(N=s.call(arguments),kt.set(this,g,N),this[g](),R=kt.get(this,g),kt.set(this,g,!1),N!==R)return C.stopImmediatePropagation(),C.preventDefault(),R}else N&&(kt.set(this,g,v.event.trigger(N[0],N.slice(1),this)),C.stopPropagation(),C.isImmediatePropagationStopped=Zn)}})}v.removeEvent=function(h,g,x){h.removeEventListener&&h.removeEventListener(g,x)},v.Event=function(h,g){if(!(this instanceof v.Event))return new v.Event(h,g);h&&h.type?(this.originalEvent=h,this.type=h.type,this.isDefaultPrevented=h.defaultPrevented||h.defaultPrevented===void 0&&h.returnValue===!1?Zn:vn,this.target=h.target&&h.target.nodeType===3?h.target.parentNode:h.target,this.currentTarget=h.currentTarget,this.relatedTarget=h.relatedTarget):this.type=h,g&&v.extend(this,g),this.timeStamp=h&&h.timeStamp||Date.now(),this[v.expando]=!0},v.Event.prototype={constructor:v.Event,isDefaultPrevented:vn,isPropagationStopped:vn,isImmediatePropagationStopped:vn,isSimulated:!1,preventDefault:function(){var h=this.originalEvent;this.isDefaultPrevented=Zn,h&&!this.isSimulated&&h.preventDefault()},stopPropagation:function(){var h=this.originalEvent;this.isPropagationStopped=Zn,h&&!this.isSimulated&&h.stopPropagation()},stopImmediatePropagation:function(){var h=this.originalEvent;this.isImmediatePropagationStopped=Zn,h&&!this.isSimulated&&h.stopImmediatePropagation(),this.stopPropagation()}},v.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},v.event.addProp),v.each({focus:"focusin",blur:"focusout"},function(h,g){function x(C){if(E.documentMode){var R=kt.get(this,"handle"),N=v.event.fix(C);N.type=C.type==="focusin"?"focus":"blur",N.isSimulated=!0,R(C),N.target===N.currentTarget&&R(N)}else v.event.simulate(g,C.target,v.event.fix(C))}v.event.special[h]={setup:function(){var C;if(pn(this,h,!0),E.documentMode)C=kt.get(this,g),C||this.addEventListener(g,x),kt.set(this,g,(C||0)+1);else return!1},trigger:function(){return pn(this,h),!0},teardown:function(){var C;if(E.documentMode)C=kt.get(this,g)-1,C?kt.set(this,g,C):(this.removeEventListener(g,x),kt.remove(this,g));else return!1},_default:function(C){return kt.get(C.target,h)},delegateType:g},v.event.special[g]={setup:function(){var C=this.ownerDocument||this.document||this,R=E.documentMode?this:C,N=kt.get(R,g);N||(E.documentMode?this.addEventListener(g,x):C.addEventListener(h,x,!0)),kt.set(R,g,(N||0)+1)},teardown:function(){var C=this.ownerDocument||this.document||this,R=E.documentMode?this:C,N=kt.get(R,g)-1;N?kt.set(R,g,N):(E.documentMode?this.removeEventListener(g,x):C.removeEventListener(h,x,!0),kt.remove(R,g))}}}),v.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(h,g){v.event.special[h]={delegateType:g,bindType:g,handle:function(x){var C,R=this,N=x.relatedTarget,O=x.handleObj;return(!N||N!==R&&!v.contains(R,N))&&(x.type=O.origType,C=O.handler.apply(this,arguments),x.type=g),C}}}),v.fn.extend({on:function(h,g,x,C){return xn(this,h,g,x,C)},one:function(h,g,x,C){return xn(this,h,g,x,C,1)},off:function(h,g,x){var C,R;if(h&&h.preventDefault&&h.handleObj)return C=h.handleObj,v(h.delegateTarget).off(C.namespace?C.origType+"."+C.namespace:C.origType,C.selector,C.handler),this;if(typeof h=="object"){for(R in h)this.off(R,g,h[R]);return this}return(g===!1||typeof g=="function")&&(x=g,g=void 0),x===!1&&(x=vn),this.each(function(){v.event.remove(this,h,x,g)})}});var Hn=/<script|<style|<link/i,zi=/checked\s*(?:[^=]|=\s*.checked.)/i,Xs=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function vr(h,g){return it(h,"table")&&it(g.nodeType!==11?g:g.firstChild,"tr")&&v(h).children("tbody")[0]||h}function rr(h){return h.type=(h.getAttribute("type")!==null)+"/"+h.type,h}function sr(h){return(h.type||"").slice(0,5)==="true/"?h.type=h.type.slice(5):h.removeAttribute("type"),h}function $i(h,g){var x,C,R,N,O,rt,Q;if(g.nodeType===1){if(kt.hasData(h)&&(N=kt.get(h),Q=N.events,Q)){kt.remove(g,"handle events");for(R in Q)for(x=0,C=Q[R].length;x<C;x++)v.event.add(g,R,Q[R][x])}ne.hasData(h)&&(O=ne.access(h),rt=v.extend({},O),ne.set(g,rt))}}function _r(h,g){var x=g.nodeName.toLowerCase();x==="input"&&Kn.test(h.type)?g.checked=h.checked:(x==="input"||x==="textarea")&&(g.defaultValue=h.defaultValue)}function gi(h,g,x,C){g=o(g);var R,N,O,rt,Q,pt,Rt=0,Ot=h.length,Tt=Ot-1,Xt=g[0],Le=S(Xt);if(Le||Ot>1&&typeof Xt=="string"&&!w.checkClone&&zi.test(Xt))return h.each(function(Ze){var De=h.eq(Ze);Le&&(g[0]=Xt.call(this,Ze,De.html())),gi(De,g,x,C)});if(Ot&&(R=On(g,h[0].ownerDocument,!1,h,C),N=R.firstChild,R.childNodes.length===1&&(R=N),N||C)){for(O=v.map(Tn(R,"script"),rr),rt=O.length;Rt<Ot;Rt++)Q=R,Rt!==Tt&&(Q=v.clone(Q,!0,!0),rt&&v.merge(O,Tn(Q,"script"))),x.call(h[Rt],Q,Rt);if(rt)for(pt=O[O.length-1].ownerDocument,v.map(O,sr),Rt=0;Rt<rt;Rt++)Q=O[Rt],Re.test(Q.type||"")&&!kt.access(Q,"globalEval")&&v.contains(pt,Q)&&(Q.src&&(Q.type||"").toLowerCase()!=="module"?v._evalUrl&&!Q.noModule&&v._evalUrl(Q.src,{nonce:Q.nonce||Q.getAttribute("nonce")},pt):j(Q.textContent.replace(Xs,""),Q,pt))}return h}function or(h,g,x){for(var C,R=g?v.filter(g,h):h,N=0;(C=R[N])!=null;N++)!x&&C.nodeType===1&&v.cleanData(Tn(C)),C.parentNode&&(x&&ke(C)&&dn(Tn(C,"script")),C.parentNode.removeChild(C));return h}v.extend({htmlPrefilter:function(h){return h},clone:function(h,g,x){var C,R,N,O,rt=h.cloneNode(!0),Q=ke(h);if(!w.noCloneChecked&&(h.nodeType===1||h.nodeType===11)&&!v.isXMLDoc(h))for(O=Tn(rt),N=Tn(h),C=0,R=N.length;C<R;C++)_r(N[C],O[C]);if(g)if(x)for(N=N||Tn(h),O=O||Tn(rt),C=0,R=N.length;C<R;C++)$i(N[C],O[C]);else $i(h,rt);return O=Tn(rt,"script"),O.length>0&&dn(O,!Q&&Tn(h,"script")),rt},cleanData:function(h){for(var g,x,C,R=v.event.special,N=0;(x=h[N])!==void 0;N++)if(le(x)){if(g=x[kt.expando]){if(g.events)for(C in g.events)R[C]?v.event.remove(x,C):v.removeEvent(x,C,g.handle);x[kt.expando]=void 0}x[ne.expando]&&(x[ne.expando]=void 0)}}}),v.fn.extend({detach:function(h){return or(this,h,!0)},remove:function(h){return or(this,h)},text:function(h){return Zt(this,function(g){return g===void 0?v.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=g)})},null,h,arguments.length)},append:function(){return gi(this,arguments,function(h){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var g=vr(this,h);g.appendChild(h)}})},prepend:function(){return gi(this,arguments,function(h){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var g=vr(this,h);g.insertBefore(h,g.firstChild)}})},before:function(){return gi(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this)})},after:function(){return gi(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this.nextSibling)})},empty:function(){for(var h,g=0;(h=this[g])!=null;g++)h.nodeType===1&&(v.cleanData(Tn(h,!1)),h.textContent="");return this},clone:function(h,g){return h=h==null?!1:h,g=g==null?h:g,this.map(function(){return v.clone(this,h,g)})},html:function(h){return Zt(this,function(g){var x=this[0]||{},C=0,R=this.length;if(g===void 0&&x.nodeType===1)return x.innerHTML;if(typeof g=="string"&&!Hn.test(g)&&!Ee[(An.exec(g)||["",""])[1].toLowerCase()]){g=v.htmlPrefilter(g);try{for(;C<R;C++)x=this[C]||{},x.nodeType===1&&(v.cleanData(Tn(x,!1)),x.innerHTML=g);x=0}catch{}}x&&this.empty().append(g)},null,h,arguments.length)},replaceWith:function(){var h=[];return gi(this,arguments,function(g){var x=this.parentNode;v.inArray(this,h)<0&&(v.cleanData(Tn(this)),x&&x.replaceChild(g,this))},h)}}),v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(h,g){v.fn[h]=function(x){for(var C,R=[],N=v(x),O=N.length-1,rt=0;rt<=O;rt++)C=rt===O?this:this.clone(!0),v(N[rt])[g](C),a.apply(R,C.get());return this.pushStack(R)}});var Pr=new RegExp("^("+qt+")(?!px)[a-z%]+$","i"),Kr=/^--/,kr=function(h){var g=h.ownerDocument.defaultView;return(!g||!g.opener)&&(g=t),g.getComputedStyle(h)},Cs=function(h,g,x){var C,R,N={};for(R in g)N[R]=h.style[R],h.style[R]=g[R];C=x.call(h);for(R in g)h.style[R]=N[R];return C},Ys=new RegExp(we.join("|"),"i");(function(){function h(){if(!!pt){Q.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",pt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",on.appendChild(Q).appendChild(pt);var Rt=t.getComputedStyle(pt);x=Rt.top!=="1%",rt=g(Rt.marginLeft)===12,pt.style.right="60%",N=g(Rt.right)===36,C=g(Rt.width)===36,pt.style.position="absolute",R=g(pt.offsetWidth/3)===12,on.removeChild(Q),pt=null}}function g(Rt){return Math.round(parseFloat(Rt))}var x,C,R,N,O,rt,Q=E.createElement("div"),pt=E.createElement("div");!pt.style||(pt.style.backgroundClip="content-box",pt.cloneNode(!0).style.backgroundClip="",w.clearCloneStyle=pt.style.backgroundClip==="content-box",v.extend(w,{boxSizingReliable:function(){return h(),C},pixelBoxStyles:function(){return h(),N},pixelPosition:function(){return h(),x},reliableMarginLeft:function(){return h(),rt},scrollboxSize:function(){return h(),R},reliableTrDimensions:function(){var Rt,Ot,Tt,Xt;return O==null&&(Rt=E.createElement("table"),Ot=E.createElement("tr"),Tt=E.createElement("div"),Rt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ot.style.cssText="box-sizing:content-box;border:1px solid",Ot.style.height="1px",Tt.style.height="9px",Tt.style.display="block",on.appendChild(Rt).appendChild(Ot).appendChild(Tt),Xt=t.getComputedStyle(Ot),O=parseInt(Xt.height,10)+parseInt(Xt.borderTopWidth,10)+parseInt(Xt.borderBottomWidth,10)===Ot.offsetHeight,on.removeChild(Rt)),O}}))})();function Zr(h,g,x){var C,R,N,O,rt=Kr.test(g),Q=h.style;return x=x||kr(h),x&&(O=x.getPropertyValue(g)||x[g],rt&&O&&(O=O.replace(W,"$1")||void 0),O===""&&!ke(h)&&(O=v.style(h,g)),!w.pixelBoxStyles()&&Pr.test(O)&&Ys.test(g)&&(C=Q.width,R=Q.minWidth,N=Q.maxWidth,Q.minWidth=Q.maxWidth=Q.width=O,O=x.width,Q.width=C,Q.minWidth=R,Q.maxWidth=N)),O!==void 0?O+"":O}function wa(h,g){return{get:function(){if(h()){delete this.get;return}return(this.get=g).apply(this,arguments)}}}var xa=["Webkit","Moz","ms"],Es=E.createElement("div").style,Go={};function Ol(h){for(var g=h[0].toUpperCase()+h.slice(1),x=xa.length;x--;)if(h=xa[x]+g,h in Es)return h}function As(h){var g=v.cssProps[h]||Go[h];return g||(h in Es?h:Go[h]=Ol(h)||h)}var Dl=/^(none|table(?!-c[ea]).+)/,Sa={position:"absolute",visibility:"hidden",display:"block"},Ca={letterSpacing:"0",fontWeight:"400"};function Ls(h,g,x){var C=Ke.exec(g);return C?Math.max(0,C[2]-(x||0))+(C[3]||"px"):g}function Wo(h,g,x,C,R,N){var O=g==="width"?1:0,rt=0,Q=0,pt=0;if(x===(C?"border":"content"))return 0;for(;O<4;O+=2)x==="margin"&&(pt+=v.css(h,x+we[O],!0,R)),C?(x==="content"&&(Q-=v.css(h,"padding"+we[O],!0,R)),x!=="margin"&&(Q-=v.css(h,"border"+we[O]+"Width",!0,R))):(Q+=v.css(h,"padding"+we[O],!0,R),x!=="padding"?Q+=v.css(h,"border"+we[O]+"Width",!0,R):rt+=v.css(h,"border"+we[O]+"Width",!0,R));return!C&&N>=0&&(Q+=Math.max(0,Math.ceil(h["offset"+g[0].toUpperCase()+g.slice(1)]-N-Q-rt-.5))||0),Q+pt}function $n(h,g,x){var C=kr(h),R=!w.boxSizingReliable()||x,N=R&&v.css(h,"boxSizing",!1,C)==="border-box",O=N,rt=Zr(h,g,C),Q="offset"+g[0].toUpperCase()+g.slice(1);if(Pr.test(rt)){if(!x)return rt;rt="auto"}return(!w.boxSizingReliable()&&N||!w.reliableTrDimensions()&&it(h,"tr")||rt==="auto"||!parseFloat(rt)&&v.css(h,"display",!1,C)==="inline")&&h.getClientRects().length&&(N=v.css(h,"boxSizing",!1,C)==="border-box",O=Q in h,O&&(rt=h[Q])),rt=parseFloat(rt)||0,rt+Wo(h,g,x||(N?"border":"content"),O,C,rt)+"px"}v.extend({cssHooks:{opacity:{get:function(h,g){if(g){var x=Zr(h,"opacity");return x===""?"1":x}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(h,g,x,C){if(!(!h||h.nodeType===3||h.nodeType===8||!h.style)){var R,N,O,rt=Gt(g),Q=Kr.test(g),pt=h.style;if(Q||(g=As(rt)),O=v.cssHooks[g]||v.cssHooks[rt],x!==void 0){if(N=typeof x,N==="string"&&(R=Ke.exec(x))&&R[1]&&(x=Oe(h,g,R),N="number"),x==null||x!==x)return;N==="number"&&!Q&&(x+=R&&R[3]||(v.cssNumber[rt]?"":"px")),!w.clearCloneStyle&&x===""&&g.indexOf("background")===0&&(pt[g]="inherit"),(!O||!("set"in O)||(x=O.set(h,x,C))!==void 0)&&(Q?pt.setProperty(g,x):pt[g]=x)}else return O&&"get"in O&&(R=O.get(h,!1,C))!==void 0?R:pt[g]}},css:function(h,g,x,C){var R,N,O,rt=Gt(g),Q=Kr.test(g);return Q||(g=As(rt)),O=v.cssHooks[g]||v.cssHooks[rt],O&&"get"in O&&(R=O.get(h,!0,x)),R===void 0&&(R=Zr(h,g,C)),R==="normal"&&g in Ca&&(R=Ca[g]),x===""||x?(N=parseFloat(R),x===!0||isFinite(N)?N||0:R):R}}),v.each(["height","width"],function(h,g){v.cssHooks[g]={get:function(x,C,R){if(C)return Dl.test(v.css(x,"display"))&&(!x.getClientRects().length||!x.getBoundingClientRect().width)?Cs(x,Sa,function(){return $n(x,g,R)}):$n(x,g,R)},set:function(x,C,R){var N,O=kr(x),rt=!w.scrollboxSize()&&O.position==="absolute",Q=rt||R,pt=Q&&v.css(x,"boxSizing",!1,O)==="border-box",Rt=R?Wo(x,g,R,pt,O):0;return pt&&rt&&(Rt-=Math.ceil(x["offset"+g[0].toUpperCase()+g.slice(1)]-parseFloat(O[g])-Wo(x,g,"border",!1,O)-.5)),Rt&&(N=Ke.exec(C))&&(N[3]||"px")!=="px"&&(x.style[g]=C,C=v.css(x,g)),Ls(x,C,Rt)}}}),v.cssHooks.marginLeft=wa(w.reliableMarginLeft,function(h,g){if(g)return(parseFloat(Zr(h,"marginLeft"))||h.getBoundingClientRect().left-Cs(h,{marginLeft:0},function(){return h.getBoundingClientRect().left}))+"px"}),v.each({margin:"",padding:"",border:"Width"},function(h,g){v.cssHooks[h+g]={expand:function(x){for(var C=0,R={},N=typeof x=="string"?x.split(" "):[x];C<4;C++)R[h+we[C]+g]=N[C]||N[C-2]||N[0];return R}},h!=="margin"&&(v.cssHooks[h+g].set=Ls)}),v.fn.extend({css:function(h,g){return Zt(this,function(x,C,R){var N,O,rt={},Q=0;if(Array.isArray(C)){for(N=kr(x),O=C.length;Q<O;Q++)rt[C[Q]]=v.css(x,C[Q],!1,N);return rt}return R!==void 0?v.style(x,C,R):v.css(x,C)},h,g,arguments.length>1)}});function mi(h,g,x,C,R){return new mi.prototype.init(h,g,x,C,R)}v.Tween=mi,mi.prototype={constructor:mi,init:function(h,g,x,C,R,N){this.elem=h,this.prop=x,this.easing=R||v.easing._default,this.options=g,this.start=this.now=this.cur(),this.end=C,this.unit=N||(v.cssNumber[x]?"":"px")},cur:function(){var h=mi.propHooks[this.prop];return h&&h.get?h.get(this):mi.propHooks._default.get(this)},run:function(h){var g,x=mi.propHooks[this.prop];return this.options.duration?this.pos=g=v.easing[this.easing](h,this.options.duration*h,0,1,this.options.duration):this.pos=g=h,this.now=(this.end-this.start)*g+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),x&&x.set?x.set(this):mi.propHooks._default.set(this),this}},mi.prototype.init.prototype=mi.prototype,mi.propHooks={_default:{get:function(h){var g;return h.elem.nodeType!==1||h.elem[h.prop]!=null&&h.elem.style[h.prop]==null?h.elem[h.prop]:(g=v.css(h.elem,h.prop,""),!g||g==="auto"?0:g)},set:function(h){v.fx.step[h.prop]?v.fx.step[h.prop](h):h.elem.nodeType===1&&(v.cssHooks[h.prop]||h.elem.style[As(h.prop)]!=null)?v.style(h.elem,h.prop,h.now+h.unit):h.elem[h.prop]=h.now}}},mi.propHooks.scrollTop=mi.propHooks.scrollLeft={set:function(h){h.elem.nodeType&&h.elem.parentNode&&(h.elem[h.prop]=h.now)}},v.easing={linear:function(h){return h},swing:function(h){return .5-Math.cos(h*Math.PI)/2},_default:"swing"},v.fx=mi.prototype.init,v.fx.step={};var Fr,Ts,Vo=/^(?:toggle|show|hide)$/,jl=/queueHooks$/;function Bi(){Ts&&(E.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Bi):t.setTimeout(Bi,v.fx.interval),v.fx.tick())}function Is(){return t.setTimeout(function(){Fr=void 0}),Fr=Date.now()}function yi(h,g){var x,C=0,R={height:h};for(g=g?1:0;C<4;C+=2-g)x=we[C],R["margin"+x]=R["padding"+x]=h;return g&&(R.opacity=R.width=h),R}function Ks(h,g,x){for(var C,R=(Ii.tweeners[g]||[]).concat(Ii.tweeners["*"]),N=0,O=R.length;N<O;N++)if(C=R[N].call(x,g,h))return C}function Ea(h,g,x){var C,R,N,O,rt,Q,pt,Rt,Ot="width"in g||"height"in g,Tt=this,Xt={},Le=h.style,Ze=h.nodeType&&ln(h),De=kt.get(h,"fxshow");x.queue||(O=v._queueHooks(h,"fx"),O.unqueued==null&&(O.unqueued=0,rt=O.empty.fire,O.empty.fire=function(){O.unqueued||rt()}),O.unqueued++,Tt.always(function(){Tt.always(function(){O.unqueued--,v.queue(h,"fx").length||O.empty.fire()})}));for(C in g)if(R=g[C],Vo.test(R)){if(delete g[C],N=N||R==="toggle",R===(Ze?"hide":"show"))if(R==="show"&&De&&De[C]!==void 0)Ze=!0;else continue;Xt[C]=De&&De[C]||v.style(h,C)}if(Q=!v.isEmptyObject(g),!(!Q&&v.isEmptyObject(Xt))){Ot&&h.nodeType===1&&(x.overflow=[Le.overflow,Le.overflowX,Le.overflowY],pt=De&&De.display,pt==null&&(pt=kt.get(h,"display")),Rt=v.css(h,"display"),Rt==="none"&&(pt?Rt=pt:(qn([h],!0),pt=h.style.display||pt,Rt=v.css(h,"display"),qn([h]))),(Rt==="inline"||Rt==="inline-block"&&pt!=null)&&v.css(h,"float")==="none"&&(Q||(Tt.done(function(){Le.display=pt}),pt==null&&(Rt=Le.display,pt=Rt==="none"?"":Rt)),Le.display="inline-block")),x.overflow&&(Le.overflow="hidden",Tt.always(function(){Le.overflow=x.overflow[0],Le.overflowX=x.overflow[1],Le.overflowY=x.overflow[2]})),Q=!1;for(C in Xt)Q||(De?"hidden"in De&&(Ze=De.hidden):De=kt.access(h,"fxshow",{display:pt}),N&&(De.hidden=!Ze),Ze&&qn([h],!0),Tt.done(function(){Ze||qn([h]),kt.remove(h,"fxshow");for(C in Xt)v.style(h,C,Xt[C])})),Q=Ks(Ze?De[C]:0,C,Tt),C in De||(De[C]=Q.start,Ze&&(Q.end=Q.start,Q.start=0))}}function zl(h,g){var x,C,R,N,O;for(x in h)if(C=Gt(x),R=g[C],N=h[x],Array.isArray(N)&&(R=N[1],N=h[x]=N[0]),x!==C&&(h[C]=N,delete h[x]),O=v.cssHooks[C],O&&"expand"in O){N=O.expand(N),delete h[C];for(x in N)x in h||(h[x]=N[x],g[x]=R)}else g[C]=R}function Ii(h,g,x){var C,R,N=0,O=Ii.prefilters.length,rt=v.Deferred().always(function(){delete Q.elem}),Q=function(){if(R)return!1;for(var Ot=Fr||Is(),Tt=Math.max(0,pt.startTime+pt.duration-Ot),Xt=Tt/pt.duration||0,Le=1-Xt,Ze=0,De=pt.tweens.length;Ze<De;Ze++)pt.tweens[Ze].run(Le);return rt.notifyWith(h,[pt,Le,Tt]),Le<1&&De?Tt:(De||rt.notifyWith(h,[pt,1,0]),rt.resolveWith(h,[pt]),!1)},pt=rt.promise({elem:h,props:v.extend({},g),opts:v.extend(!0,{specialEasing:{},easing:v.easing._default},x),originalProperties:g,originalOptions:x,startTime:Fr||Is(),duration:x.duration,tweens:[],createTween:function(Ot,Tt){var Xt=v.Tween(h,pt.opts,Ot,Tt,pt.opts.specialEasing[Ot]||pt.opts.easing);return pt.tweens.push(Xt),Xt},stop:function(Ot){var Tt=0,Xt=Ot?pt.tweens.length:0;if(R)return this;for(R=!0;Tt<Xt;Tt++)pt.tweens[Tt].run(1);return Ot?(rt.notifyWith(h,[pt,1,0]),rt.resolveWith(h,[pt,Ot])):rt.rejectWith(h,[pt,Ot]),this}}),Rt=pt.props;for(zl(Rt,pt.opts.specialEasing);N<O;N++)if(C=Ii.prefilters[N].call(pt,h,Rt,pt.opts),C)return S(C.stop)&&(v._queueHooks(pt.elem,pt.opts.queue).stop=C.stop.bind(C)),C;return v.map(Rt,Ks,pt),S(pt.opts.start)&&pt.opts.start.call(h,pt),pt.progress(pt.opts.progress).done(pt.opts.done,pt.opts.complete).fail(pt.opts.fail).always(pt.opts.always),v.fx.timer(v.extend(Q,{elem:h,anim:pt,queue:pt.opts.queue})),pt}v.Animation=v.extend(Ii,{tweeners:{"*":[function(h,g){var x=this.createTween(h,g);return Oe(x.elem,h,Ke.exec(g),x),x}]},tweener:function(h,g){S(h)?(g=h,h=["*"]):h=h.match(bt);for(var x,C=0,R=h.length;C<R;C++)x=h[C],Ii.tweeners[x]=Ii.tweeners[x]||[],Ii.tweeners[x].unshift(g)},prefilters:[Ea],prefilter:function(h,g){g?Ii.prefilters.unshift(h):Ii.prefilters.push(h)}}),v.speed=function(h,g,x){var C=h&&typeof h=="object"?v.extend({},h):{complete:x||!x&&g||S(h)&&h,duration:h,easing:x&&g||g&&!S(g)&&g};return v.fx.off?C.duration=0:typeof C.duration!="number"&&(C.duration in v.fx.speeds?C.duration=v.fx.speeds[C.duration]:C.duration=v.fx.speeds._default),(C.queue==null||C.queue===!0)&&(C.queue="fx"),C.old=C.complete,C.complete=function(){S(C.old)&&C.old.call(this),C.queue&&v.dequeue(this,C.queue)},C},v.fn.extend({fadeTo:function(h,g,x,C){return this.filter(ln).css("opacity",0).show().end().animate({opacity:g},h,x,C)},animate:function(h,g,x,C){var R=v.isEmptyObject(h),N=v.speed(g,x,C),O=function(){var rt=Ii(this,v.extend({},h),N);(R||kt.get(this,"finish"))&&rt.stop(!0)};return O.finish=O,R||N.queue===!1?this.each(O):this.queue(N.queue,O)},stop:function(h,g,x){var C=function(R){var N=R.stop;delete R.stop,N(x)};return typeof h!="string"&&(x=g,g=h,h=void 0),g&&this.queue(h||"fx",[]),this.each(function(){var R=!0,N=h!=null&&h+"queueHooks",O=v.timers,rt=kt.get(this);if(N)rt[N]&&rt[N].stop&&C(rt[N]);else for(N in rt)rt[N]&&rt[N].stop&&jl.test(N)&&C(rt[N]);for(N=O.length;N--;)O[N].elem===this&&(h==null||O[N].queue===h)&&(O[N].anim.stop(x),R=!1,O.splice(N,1));(R||!x)&&v.dequeue(this,h)})},finish:function(h){return h!==!1&&(h=h||"fx"),this.each(function(){var g,x=kt.get(this),C=x[h+"queue"],R=x[h+"queueHooks"],N=v.timers,O=C?C.length:0;for(x.finish=!0,v.queue(this,h,[]),R&&R.stop&&R.stop.call(this,!0),g=N.length;g--;)N[g].elem===this&&N[g].queue===h&&(N[g].anim.stop(!0),N.splice(g,1));for(g=0;g<O;g++)C[g]&&C[g].finish&&C[g].finish.call(this);delete x.finish})}}),v.each(["toggle","show","hide"],function(h,g){var x=v.fn[g];v.fn[g]=function(C,R,N){return C==null||typeof C=="boolean"?x.apply(this,arguments):this.animate(yi(g,!0),C,R,N)}}),v.each({slideDown:yi("show"),slideUp:yi("hide"),slideToggle:yi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(h,g){v.fn[h]=function(x,C,R){return this.animate(g,x,C,R)}}),v.timers=[],v.fx.tick=function(){var h,g=0,x=v.timers;for(Fr=Date.now();g<x.length;g++)h=x[g],!h()&&x[g]===h&&x.splice(g--,1);x.length||v.fx.stop(),Fr=void 0},v.fx.timer=function(h){v.timers.push(h),v.fx.start()},v.fx.interval=13,v.fx.start=function(){Ts||(Ts=!0,Bi())},v.fx.stop=function(){Ts=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fn.delay=function(h,g){return h=v.fx&&v.fx.speeds[h]||h,g=g||"fx",this.queue(g,function(x,C){var R=t.setTimeout(x,h);C.stop=function(){t.clearTimeout(R)}})},function(){var h=E.createElement("input"),g=E.createElement("select"),x=g.appendChild(E.createElement("option"));h.type="checkbox",w.checkOn=h.value!=="",w.optSelected=x.selected,h=E.createElement("input"),h.value="t",h.type="radio",w.radioValue=h.value==="t"}();var Aa,Jr=v.expr.attrHandle;v.fn.extend({attr:function(h,g){return Zt(this,v.attr,h,g,arguments.length>1)},removeAttr:function(h){return this.each(function(){v.removeAttr(this,h)})}}),v.extend({attr:function(h,g,x){var C,R,N=h.nodeType;if(!(N===3||N===8||N===2)){if(typeof h.getAttribute>"u")return v.prop(h,g,x);if((N!==1||!v.isXMLDoc(h))&&(R=v.attrHooks[g.toLowerCase()]||(v.expr.match.bool.test(g)?Aa:void 0)),x!==void 0){if(x===null){v.removeAttr(h,g);return}return R&&"set"in R&&(C=R.set(h,x,g))!==void 0?C:(h.setAttribute(g,x+""),x)}return R&&"get"in R&&(C=R.get(h,g))!==null?C:(C=v.find.attr(h,g),C==null?void 0:C)}},attrHooks:{type:{set:function(h,g){if(!w.radioValue&&g==="radio"&&it(h,"input")){var x=h.value;return h.setAttribute("type",g),x&&(h.value=x),g}}}},removeAttr:function(h,g){var x,C=0,R=g&&g.match(bt);if(R&&h.nodeType===1)for(;x=R[C++];)h.removeAttribute(x)}}),Aa={set:function(h,g,x){return g===!1?v.removeAttr(h,x):h.setAttribute(x,x),x}},v.each(v.expr.match.bool.source.match(/\w+/g),function(h,g){var x=Jr[g]||v.find.attr;Jr[g]=function(C,R,N){var O,rt,Q=R.toLowerCase();return N||(rt=Jr[Q],Jr[Q]=O,O=x(C,R,N)!=null?Q:null,Jr[Q]=rt),O}});var Bl=/^(?:input|select|textarea|button)$/i,Ho=/^(?:a|area)$/i;v.fn.extend({prop:function(h,g){return Zt(this,v.prop,h,g,arguments.length>1)},removeProp:function(h){return this.each(function(){delete this[v.propFix[h]||h]})}}),v.extend({prop:function(h,g,x){var C,R,N=h.nodeType;if(!(N===3||N===8||N===2))return(N!==1||!v.isXMLDoc(h))&&(g=v.propFix[g]||g,R=v.propHooks[g]),x!==void 0?R&&"set"in R&&(C=R.set(h,x,g))!==void 0?C:h[g]=x:R&&"get"in R&&(C=R.get(h,g))!==null?C:h[g]},propHooks:{tabIndex:{get:function(h){var g=v.find.attr(h,"tabindex");return g?parseInt(g,10):Bl.test(h.nodeName)||Ho.test(h.nodeName)&&h.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),w.optSelected||(v.propHooks.selected={get:function(h){var g=h.parentNode;return g&&g.parentNode&&g.parentNode.selectedIndex,null},set:function(h){var g=h.parentNode;g&&(g.selectedIndex,g.parentNode&&g.parentNode.selectedIndex)}}),v.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){v.propFix[this.toLowerCase()]=this});function Mr(h){var g=h.match(bt)||[];return g.join(" ")}function Or(h){return h.getAttribute&&h.getAttribute("class")||""}function $o(h){return Array.isArray(h)?h:typeof h=="string"?h.match(bt)||[]:[]}v.fn.extend({addClass:function(h){var g,x,C,R,N,O;return S(h)?this.each(function(rt){v(this).addClass(h.call(this,rt,Or(this)))}):(g=$o(h),g.length?this.each(function(){if(C=Or(this),x=this.nodeType===1&&" "+Mr(C)+" ",x){for(N=0;N<g.length;N++)R=g[N],x.indexOf(" "+R+" ")<0&&(x+=R+" ");O=Mr(x),C!==O&&this.setAttribute("class",O)}}):this)},removeClass:function(h){var g,x,C,R,N,O;return S(h)?this.each(function(rt){v(this).removeClass(h.call(this,rt,Or(this)))}):arguments.length?(g=$o(h),g.length?this.each(function(){if(C=Or(this),x=this.nodeType===1&&" "+Mr(C)+" ",x){for(N=0;N<g.length;N++)for(R=g[N];x.indexOf(" "+R+" ")>-1;)x=x.replace(" "+R+" "," ");O=Mr(x),C!==O&&this.setAttribute("class",O)}}):this):this.attr("class","")},toggleClass:function(h,g){var x,C,R,N,O=typeof h,rt=O==="string"||Array.isArray(h);return S(h)?this.each(function(Q){v(this).toggleClass(h.call(this,Q,Or(this),g),g)}):typeof g=="boolean"&&rt?g?this.addClass(h):this.removeClass(h):(x=$o(h),this.each(function(){if(rt)for(N=v(this),R=0;R<x.length;R++)C=x[R],N.hasClass(C)?N.removeClass(C):N.addClass(C);else(h===void 0||O==="boolean")&&(C=Or(this),C&&kt.set(this,"__className__",C),this.setAttribute&&this.setAttribute("class",C||h===!1?"":kt.get(this,"__className__")||""))}))},hasClass:function(h){var g,x,C=0;for(g=" "+h+" ";x=this[C++];)if(x.nodeType===1&&(" "+Mr(Or(x))+" ").indexOf(g)>-1)return!0;return!1}});var Dr=/\r/g;v.fn.extend({val:function(h){var g,x,C,R=this[0];return arguments.length?(C=S(h),this.each(function(N){var O;this.nodeType===1&&(C?O=h.call(this,N,v(this).val()):O=h,O==null?O="":typeof O=="number"?O+="":Array.isArray(O)&&(O=v.map(O,function(rt){return rt==null?"":rt+""})),g=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()],(!g||!("set"in g)||g.set(this,O,"value")===void 0)&&(this.value=O))})):R?(g=v.valHooks[R.type]||v.valHooks[R.nodeName.toLowerCase()],g&&"get"in g&&(x=g.get(R,"value"))!==void 0?x:(x=R.value,typeof x=="string"?x.replace(Dr,""):x==null?"":x)):void 0}}),v.extend({valHooks:{option:{get:function(h){var g=v.find.attr(h,"value");return g!=null?g:Mr(v.text(h))}},select:{get:function(h){var g,x,C,R=h.options,N=h.selectedIndex,O=h.type==="select-one",rt=O?null:[],Q=O?N+1:R.length;for(N<0?C=Q:C=O?N:0;C<Q;C++)if(x=R[C],(x.selected||C===N)&&!x.disabled&&(!x.parentNode.disabled||!it(x.parentNode,"optgroup"))){if(g=v(x).val(),O)return g;rt.push(g)}return rt},set:function(h,g){for(var x,C,R=h.options,N=v.makeArray(g),O=R.length;O--;)C=R[O],(C.selected=v.inArray(v.valHooks.option.get(C),N)>-1)&&(x=!0);return x||(h.selectedIndex=-1),N}}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]={set:function(h,g){if(Array.isArray(g))return h.checked=v.inArray(v(h).val(),g)>-1}},w.checkOn||(v.valHooks[this].get=function(h){return h.getAttribute("value")===null?"on":h.value})});var br=t.location,Rs={guid:Date.now()},Zs=/\?/;v.parseXML=function(h){var g,x;if(!h||typeof h!="string")return null;try{g=new t.DOMParser().parseFromString(h,"text/xml")}catch{}return x=g&&g.getElementsByTagName("parsererror")[0],(!g||x)&&v.error("Invalid XML: "+(x?v.map(x.childNodes,function(C){return C.textContent}).join(`
`):h)),g};var vi=/^(?:focusinfocus|focusoutblur)$/,La=function(h){h.stopPropagation()};v.extend(v.event,{trigger:function(h,g,x,C){var R,N,O,rt,Q,pt,Rt,Ot,Tt=[x||E],Xt=d.call(h,"type")?h.type:h,Le=d.call(h,"namespace")?h.namespace.split("."):[];if(N=Ot=O=x=x||E,!(x.nodeType===3||x.nodeType===8)&&!vi.test(Xt+v.event.triggered)&&(Xt.indexOf(".")>-1&&(Le=Xt.split("."),Xt=Le.shift(),Le.sort()),Q=Xt.indexOf(":")<0&&"on"+Xt,h=h[v.expando]?h:new v.Event(Xt,typeof h=="object"&&h),h.isTrigger=C?2:3,h.namespace=Le.join("."),h.rnamespace=h.namespace?new RegExp("(^|\\.)"+Le.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h.result=void 0,h.target||(h.target=x),g=g==null?[h]:v.makeArray(g,[h]),Rt=v.event.special[Xt]||{},!(!C&&Rt.trigger&&Rt.trigger.apply(x,g)===!1))){if(!C&&!Rt.noBubble&&!L(x)){for(rt=Rt.delegateType||Xt,vi.test(rt+Xt)||(N=N.parentNode);N;N=N.parentNode)Tt.push(N),O=N;O===(x.ownerDocument||E)&&Tt.push(O.defaultView||O.parentWindow||t)}for(R=0;(N=Tt[R++])&&!h.isPropagationStopped();)Ot=N,h.type=R>1?rt:Rt.bindType||Xt,pt=(kt.get(N,"events")||Object.create(null))[h.type]&&kt.get(N,"handle"),pt&&pt.apply(N,g),pt=Q&&N[Q],pt&&pt.apply&&le(N)&&(h.result=pt.apply(N,g),h.result===!1&&h.preventDefault());return h.type=Xt,!C&&!h.isDefaultPrevented()&&(!Rt._default||Rt._default.apply(Tt.pop(),g)===!1)&&le(x)&&Q&&S(x[Xt])&&!L(x)&&(O=x[Q],O&&(x[Q]=null),v.event.triggered=Xt,h.isPropagationStopped()&&Ot.addEventListener(Xt,La),x[Xt](),h.isPropagationStopped()&&Ot.removeEventListener(Xt,La),v.event.triggered=void 0,O&&(x[Q]=O)),h.result}},simulate:function(h,g,x){var C=v.extend(new v.Event,x,{type:h,isSimulated:!0});v.event.trigger(C,null,g)}}),v.fn.extend({trigger:function(h,g){return this.each(function(){v.event.trigger(h,g,this)})},triggerHandler:function(h,g){var x=this[0];if(x)return v.event.trigger(h,g,x,!0)}});var Ta=/\[\]$/,Be=/\r?\n/g,ql=/^(?:submit|button|image|reset|file)$/i,Ul=/^(?:input|select|textarea|keygen)/i;function Xi(h,g,x,C){var R;if(Array.isArray(g))v.each(g,function(N,O){x||Ta.test(h)?C(h,O):Xi(h+"["+(typeof O=="object"&&O!=null?N:"")+"]",O,x,C)});else if(!x&&G(g)==="object")for(R in g)Xi(h+"["+R+"]",g[R],x,C);else C(h,g)}v.param=function(h,g){var x,C=[],R=function(N,O){var rt=S(O)?O():O;C[C.length]=encodeURIComponent(N)+"="+encodeURIComponent(rt==null?"":rt)};if(h==null)return"";if(Array.isArray(h)||h.jquery&&!v.isPlainObject(h))v.each(h,function(){R(this.name,this.value)});else for(x in h)Xi(x,h[x],g,R);return C.join("&")},v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var h=v.prop(this,"elements");return h?v.makeArray(h):this}).filter(function(){var h=this.type;return this.name&&!v(this).is(":disabled")&&Ul.test(this.nodeName)&&!ql.test(h)&&(this.checked||!Kn.test(h))}).map(function(h,g){var x=v(this).val();return x==null?null:Array.isArray(x)?v.map(x,function(C){return{name:g.name,value:C.replace(Be,`\r
`)}}):{name:g.name,value:x.replace(Be,`\r
`)}}).get()}});var Ia=/%20/g,Ra=/#.*$/,Js=/([?&])_=[^&]*/,Xo=/^(.*?):[ \t]*([^\r\n]*)$/mg,Gl=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Wl=/^(?:GET|HEAD)$/,Vl=/^\/\//,Qs={},jr={},zr="*/".concat("*"),Yo=E.createElement("a");Yo.href=br.href;function Qr(h){return function(g,x){typeof g!="string"&&(x=g,g="*");var C,R=0,N=g.toLowerCase().match(bt)||[];if(S(x))for(;C=N[R++];)C[0]==="+"?(C=C.slice(1)||"*",(h[C]=h[C]||[]).unshift(x)):(h[C]=h[C]||[]).push(x)}}function to(h,g,x,C){var R={},N=h===jr;function O(rt){var Q;return R[rt]=!0,v.each(h[rt]||[],function(pt,Rt){var Ot=Rt(g,x,C);if(typeof Ot=="string"&&!N&&!R[Ot])return g.dataTypes.unshift(Ot),O(Ot),!1;if(N)return!(Q=Ot)}),Q}return O(g.dataTypes[0])||!R["*"]&&O("*")}function ts(h,g){var x,C,R=v.ajaxSettings.flatOptions||{};for(x in g)g[x]!==void 0&&((R[x]?h:C||(C={}))[x]=g[x]);return C&&v.extend(!0,h,C),h}function Na(h,g,x){for(var C,R,N,O,rt=h.contents,Q=h.dataTypes;Q[0]==="*";)Q.shift(),C===void 0&&(C=h.mimeType||g.getResponseHeader("Content-Type"));if(C){for(R in rt)if(rt[R]&&rt[R].test(C)){Q.unshift(R);break}}if(Q[0]in x)N=Q[0];else{for(R in x){if(!Q[0]||h.converters[R+" "+Q[0]]){N=R;break}O||(O=R)}N=N||O}if(N)return N!==Q[0]&&Q.unshift(N),x[N]}function Pa(h,g,x,C){var R,N,O,rt,Q,pt={},Rt=h.dataTypes.slice();if(Rt[1])for(O in h.converters)pt[O.toLowerCase()]=h.converters[O];for(N=Rt.shift();N;)if(h.responseFields[N]&&(x[h.responseFields[N]]=g),!Q&&C&&h.dataFilter&&(g=h.dataFilter(g,h.dataType)),Q=N,N=Rt.shift(),N){if(N==="*")N=Q;else if(Q!=="*"&&Q!==N){if(O=pt[Q+" "+N]||pt["* "+N],!O){for(R in pt)if(rt=R.split(" "),rt[1]===N&&(O=pt[Q+" "+rt[0]]||pt["* "+rt[0]],O)){O===!0?O=pt[R]:pt[R]!==!0&&(N=rt[0],Rt.unshift(rt[1]));break}}if(O!==!0)if(O&&h.throws)g=O(g);else try{g=O(g)}catch(Ot){return{state:"parsererror",error:O?Ot:"No conversion from "+Q+" to "+N}}}}return{state:"success",data:g}}v.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:br.href,type:"GET",isLocal:Gl.test(br.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zr,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":v.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(h,g){return g?ts(ts(h,v.ajaxSettings),g):ts(v.ajaxSettings,h)},ajaxPrefilter:Qr(Qs),ajaxTransport:Qr(jr),ajax:function(h,g){typeof h=="object"&&(g=h,h=void 0),g=g||{};var x,C,R,N,O,rt,Q,pt,Rt,Ot,Tt=v.ajaxSetup({},g),Xt=Tt.context||Tt,Le=Tt.context&&(Xt.nodeType||Xt.jquery)?v(Xt):v.event,Ze=v.Deferred(),De=v.Callbacks("once memory"),Jn=Tt.statusCode||{},_={},P={},K="canceled",tt={readyState:0,getResponseHeader:function(Ct){var Dt;if(Q){if(!N)for(N={};Dt=Xo.exec(R);)N[Dt[1].toLowerCase()+" "]=(N[Dt[1].toLowerCase()+" "]||[]).concat(Dt[2]);Dt=N[Ct.toLowerCase()+" "]}return Dt==null?null:Dt.join(", ")},getAllResponseHeaders:function(){return Q?R:null},setRequestHeader:function(Ct,Dt){return Q==null&&(Ct=P[Ct.toLowerCase()]=P[Ct.toLowerCase()]||Ct,_[Ct]=Dt),this},overrideMimeType:function(Ct){return Q==null&&(Tt.mimeType=Ct),this},statusCode:function(Ct){var Dt;if(Ct)if(Q)tt.always(Ct[tt.status]);else for(Dt in Ct)Jn[Dt]=[Jn[Dt],Ct[Dt]];return this},abort:function(Ct){var Dt=Ct||K;return x&&x.abort(Dt),vt(0,Dt),this}};if(Ze.promise(tt),Tt.url=((h||Tt.url||br.href)+"").replace(Vl,br.protocol+"//"),Tt.type=g.method||g.type||Tt.method||Tt.type,Tt.dataTypes=(Tt.dataType||"*").toLowerCase().match(bt)||[""],Tt.crossDomain==null){rt=E.createElement("a");try{rt.href=Tt.url,rt.href=rt.href,Tt.crossDomain=Yo.protocol+"//"+Yo.host!=rt.protocol+"//"+rt.host}catch{Tt.crossDomain=!0}}if(Tt.data&&Tt.processData&&typeof Tt.data!="string"&&(Tt.data=v.param(Tt.data,Tt.traditional)),to(Qs,Tt,g,tt),Q)return tt;pt=v.event&&Tt.global,pt&&v.active++===0&&v.event.trigger("ajaxStart"),Tt.type=Tt.type.toUpperCase(),Tt.hasContent=!Wl.test(Tt.type),C=Tt.url.replace(Ra,""),Tt.hasContent?Tt.data&&Tt.processData&&(Tt.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Tt.data=Tt.data.replace(Ia,"+")):(Ot=Tt.url.slice(C.length),Tt.data&&(Tt.processData||typeof Tt.data=="string")&&(C+=(Zs.test(C)?"&":"?")+Tt.data,delete Tt.data),Tt.cache===!1&&(C=C.replace(Js,"$1"),Ot=(Zs.test(C)?"&":"?")+"_="+Rs.guid+++Ot),Tt.url=C+Ot),Tt.ifModified&&(v.lastModified[C]&&tt.setRequestHeader("If-Modified-Since",v.lastModified[C]),v.etag[C]&&tt.setRequestHeader("If-None-Match",v.etag[C])),(Tt.data&&Tt.hasContent&&Tt.contentType!==!1||g.contentType)&&tt.setRequestHeader("Content-Type",Tt.contentType),tt.setRequestHeader("Accept",Tt.dataTypes[0]&&Tt.accepts[Tt.dataTypes[0]]?Tt.accepts[Tt.dataTypes[0]]+(Tt.dataTypes[0]!=="*"?", "+zr+"; q=0.01":""):Tt.accepts["*"]);for(Rt in Tt.headers)tt.setRequestHeader(Rt,Tt.headers[Rt]);if(Tt.beforeSend&&(Tt.beforeSend.call(Xt,tt,Tt)===!1||Q))return tt.abort();if(K="abort",De.add(Tt.complete),tt.done(Tt.success),tt.fail(Tt.error),x=to(jr,Tt,g,tt),!x)vt(-1,"No Transport");else{if(tt.readyState=1,pt&&Le.trigger("ajaxSend",[tt,Tt]),Q)return tt;Tt.async&&Tt.timeout>0&&(O=t.setTimeout(function(){tt.abort("timeout")},Tt.timeout));try{Q=!1,x.send(_,vt)}catch(Ct){if(Q)throw Ct;vt(-1,Ct)}}function vt(Ct,Dt,ue,Se){var Te,Ue,Ge,_n,Sn,mn=Dt;Q||(Q=!0,O&&t.clearTimeout(O),x=void 0,R=Se||"",tt.readyState=Ct>0?4:0,Te=Ct>=200&&Ct<300||Ct===304,ue&&(_n=Na(Tt,tt,ue)),!Te&&v.inArray("script",Tt.dataTypes)>-1&&v.inArray("json",Tt.dataTypes)<0&&(Tt.converters["text script"]=function(){}),_n=Pa(Tt,_n,tt,Te),Te?(Tt.ifModified&&(Sn=tt.getResponseHeader("Last-Modified"),Sn&&(v.lastModified[C]=Sn),Sn=tt.getResponseHeader("etag"),Sn&&(v.etag[C]=Sn)),Ct===204||Tt.type==="HEAD"?mn="nocontent":Ct===304?mn="notmodified":(mn=_n.state,Ue=_n.data,Ge=_n.error,Te=!Ge)):(Ge=mn,(Ct||!mn)&&(mn="error",Ct<0&&(Ct=0))),tt.status=Ct,tt.statusText=(Dt||mn)+"",Te?Ze.resolveWith(Xt,[Ue,mn,tt]):Ze.rejectWith(Xt,[tt,mn,Ge]),tt.statusCode(Jn),Jn=void 0,pt&&Le.trigger(Te?"ajaxSuccess":"ajaxError",[tt,Tt,Te?Ue:Ge]),De.fireWith(Xt,[tt,mn]),pt&&(Le.trigger("ajaxComplete",[tt,Tt]),--v.active||v.event.trigger("ajaxStop")))}return tt},getJSON:function(h,g,x){return v.get(h,g,x,"json")},getScript:function(h,g){return v.get(h,void 0,g,"script")}}),v.each(["get","post"],function(h,g){v[g]=function(x,C,R,N){return S(C)&&(N=N||R,R=C,C=void 0),v.ajax(v.extend({url:x,type:g,dataType:N,data:C,success:R},v.isPlainObject(x)&&x))}}),v.ajaxPrefilter(function(h){var g;for(g in h.headers)g.toLowerCase()==="content-type"&&(h.contentType=h.headers[g]||"")}),v._evalUrl=function(h,g,x){return v.ajax({url:h,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(C){v.globalEval(C,g,x)}})},v.fn.extend({wrapAll:function(h){var g;return this[0]&&(S(h)&&(h=h.call(this[0])),g=v(h,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&g.insertBefore(this[0]),g.map(function(){for(var x=this;x.firstElementChild;)x=x.firstElementChild;return x}).append(this)),this},wrapInner:function(h){return S(h)?this.each(function(g){v(this).wrapInner(h.call(this,g))}):this.each(function(){var g=v(this),x=g.contents();x.length?x.wrapAll(h):g.append(h)})},wrap:function(h){var g=S(h);return this.each(function(x){v(this).wrapAll(g?h.call(this,x):h)})},unwrap:function(h){return this.parent(h).not("body").each(function(){v(this).replaceWith(this.childNodes)}),this}}),v.expr.pseudos.hidden=function(h){return!v.expr.pseudos.visible(h)},v.expr.pseudos.visible=function(h){return!!(h.offsetWidth||h.offsetHeight||h.getClientRects().length)},v.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var ka={0:200,1223:204},es=v.ajaxSettings.xhr();w.cors=!!es&&"withCredentials"in es,w.ajax=es=!!es,v.ajaxTransport(function(h){var g,x;if(w.cors||es&&!h.crossDomain)return{send:function(C,R){var N,O=h.xhr();if(O.open(h.type,h.url,h.async,h.username,h.password),h.xhrFields)for(N in h.xhrFields)O[N]=h.xhrFields[N];h.mimeType&&O.overrideMimeType&&O.overrideMimeType(h.mimeType),!h.crossDomain&&!C["X-Requested-With"]&&(C["X-Requested-With"]="XMLHttpRequest");for(N in C)O.setRequestHeader(N,C[N]);g=function(rt){return function(){g&&(g=x=O.onload=O.onerror=O.onabort=O.ontimeout=O.onreadystatechange=null,rt==="abort"?O.abort():rt==="error"?typeof O.status!="number"?R(0,"error"):R(O.status,O.statusText):R(ka[O.status]||O.status,O.statusText,(O.responseType||"text")!=="text"||typeof O.responseText!="string"?{binary:O.response}:{text:O.responseText},O.getAllResponseHeaders()))}},O.onload=g(),x=O.onerror=O.ontimeout=g("error"),O.onabort!==void 0?O.onabort=x:O.onreadystatechange=function(){O.readyState===4&&t.setTimeout(function(){g&&x()})},g=g("abort");try{O.send(h.hasContent&&h.data||null)}catch(rt){if(g)throw rt}},abort:function(){g&&g()}}}),v.ajaxPrefilter(function(h){h.crossDomain&&(h.contents.script=!1)}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(h){return v.globalEval(h),h}}}),v.ajaxPrefilter("script",function(h){h.cache===void 0&&(h.cache=!1),h.crossDomain&&(h.type="GET")}),v.ajaxTransport("script",function(h){if(h.crossDomain||h.scriptAttrs){var g,x;return{send:function(C,R){g=v("<script>").attr(h.scriptAttrs||{}).prop({charset:h.scriptCharset,src:h.url}).on("load error",x=function(N){g.remove(),x=null,N&&R(N.type==="error"?404:200,N.type)}),E.head.appendChild(g[0])},abort:function(){x&&x()}}}});var wr=[],xr=/(=)\?(?=&|$)|\?\?/;v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var h=wr.pop()||v.expando+"_"+Rs.guid++;return this[h]=!0,h}}),v.ajaxPrefilter("json jsonp",function(h,g,x){var C,R,N,O=h.jsonp!==!1&&(xr.test(h.url)?"url":typeof h.data=="string"&&(h.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&xr.test(h.data)&&"data");if(O||h.dataTypes[0]==="jsonp")return C=h.jsonpCallback=S(h.jsonpCallback)?h.jsonpCallback():h.jsonpCallback,O?h[O]=h[O].replace(xr,"$1"+C):h.jsonp!==!1&&(h.url+=(Zs.test(h.url)?"&":"?")+h.jsonp+"="+C),h.converters["script json"]=function(){return N||v.error(C+" was not called"),N[0]},h.dataTypes[0]="json",R=t[C],t[C]=function(){N=arguments},x.always(function(){R===void 0?v(t).removeProp(C):t[C]=R,h[C]&&(h.jsonpCallback=g.jsonpCallback,wr.push(C)),N&&S(R)&&R(N[0]),N=R=void 0}),"script"}),w.createHTMLDocument=function(){var h=E.implementation.createHTMLDocument("").body;return h.innerHTML="<form></form><form></form>",h.childNodes.length===2}(),v.parseHTML=function(h,g,x){if(typeof h!="string")return[];typeof g=="boolean"&&(x=g,g=!1);var C,R,N;return g||(w.createHTMLDocument?(g=E.implementation.createHTMLDocument(""),C=g.createElement("base"),C.href=E.location.href,g.head.appendChild(C)):g=E),R=T.exec(h),N=!x&&[],R?[g.createElement(R[1])]:(R=On([h],g,N),N&&N.length&&v(N).remove(),v.merge([],R.childNodes))},v.fn.load=function(h,g,x){var C,R,N,O=this,rt=h.indexOf(" ");return rt>-1&&(C=Mr(h.slice(rt)),h=h.slice(0,rt)),S(g)?(x=g,g=void 0):g&&typeof g=="object"&&(R="POST"),O.length>0&&v.ajax({url:h,type:R||"GET",dataType:"html",data:g}).done(function(Q){N=arguments,O.html(C?v("<div>").append(v.parseHTML(Q)).find(C):Q)}).always(x&&function(Q,pt){O.each(function(){x.apply(this,N||[Q.responseText,pt,Q])})}),this},v.expr.pseudos.animated=function(h){return v.grep(v.timers,function(g){return h===g.elem}).length},v.offset={setOffset:function(h,g,x){var C,R,N,O,rt,Q,pt,Rt=v.css(h,"position"),Ot=v(h),Tt={};Rt==="static"&&(h.style.position="relative"),rt=Ot.offset(),N=v.css(h,"top"),Q=v.css(h,"left"),pt=(Rt==="absolute"||Rt==="fixed")&&(N+Q).indexOf("auto")>-1,pt?(C=Ot.position(),O=C.top,R=C.left):(O=parseFloat(N)||0,R=parseFloat(Q)||0),S(g)&&(g=g.call(h,x,v.extend({},rt))),g.top!=null&&(Tt.top=g.top-rt.top+O),g.left!=null&&(Tt.left=g.left-rt.left+R),"using"in g?g.using.call(h,Tt):Ot.css(Tt)}},v.fn.extend({offset:function(h){if(arguments.length)return h===void 0?this:this.each(function(R){v.offset.setOffset(this,h,R)});var g,x,C=this[0];if(!!C)return C.getClientRects().length?(g=C.getBoundingClientRect(),x=C.ownerDocument.defaultView,{top:g.top+x.pageYOffset,left:g.left+x.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var h,g,x,C=this[0],R={top:0,left:0};if(v.css(C,"position")==="fixed")g=C.getBoundingClientRect();else{for(g=this.offset(),x=C.ownerDocument,h=C.offsetParent||x.documentElement;h&&(h===x.body||h===x.documentElement)&&v.css(h,"position")==="static";)h=h.parentNode;h&&h!==C&&h.nodeType===1&&(R=v(h).offset(),R.top+=v.css(h,"borderTopWidth",!0),R.left+=v.css(h,"borderLeftWidth",!0))}return{top:g.top-R.top-v.css(C,"marginTop",!0),left:g.left-R.left-v.css(C,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var h=this.offsetParent;h&&v.css(h,"position")==="static";)h=h.offsetParent;return h||on})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(h,g){var x=g==="pageYOffset";v.fn[h]=function(C){return Zt(this,function(R,N,O){var rt;if(L(R)?rt=R:R.nodeType===9&&(rt=R.defaultView),O===void 0)return rt?rt[g]:R[N];rt?rt.scrollTo(x?rt.pageXOffset:O,x?O:rt.pageYOffset):R[N]=O},h,C,arguments.length)}}),v.each(["top","left"],function(h,g){v.cssHooks[g]=wa(w.pixelPosition,function(x,C){if(C)return C=Zr(x,g),Pr.test(C)?v(x).position()[g]+"px":C})}),v.each({Height:"height",Width:"width"},function(h,g){v.each({padding:"inner"+h,content:g,"":"outer"+h},function(x,C){v.fn[C]=function(R,N){var O=arguments.length&&(x||typeof R!="boolean"),rt=x||(R===!0||N===!0?"margin":"border");return Zt(this,function(Q,pt,Rt){var Ot;return L(Q)?C.indexOf("outer")===0?Q["inner"+h]:Q.document.documentElement["client"+h]:Q.nodeType===9?(Ot=Q.documentElement,Math.max(Q.body["scroll"+h],Ot["scroll"+h],Q.body["offset"+h],Ot["offset"+h],Ot["client"+h])):Rt===void 0?v.css(Q,pt,rt):v.style(Q,pt,Rt,rt)},g,O?R:void 0,O)}})}),v.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(h,g){v.fn[g]=function(x){return this.on(g,x)}}),v.fn.extend({bind:function(h,g,x){return this.on(h,null,g,x)},unbind:function(h,g){return this.off(h,null,g)},delegate:function(h,g,x,C){return this.on(g,h,x,C)},undelegate:function(h,g,x){return arguments.length===1?this.off(h,"**"):this.off(g,h||"**",x)},hover:function(h,g){return this.on("mouseenter",h).on("mouseleave",g||h)}}),v.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(h,g){v.fn[g]=function(x,C){return arguments.length>0?this.on(g,null,x,C):this.trigger(g)}});var Hl=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;v.proxy=function(h,g){var x,C,R;if(typeof g=="string"&&(x=h[g],g=h,h=x),!!S(h))return C=s.call(arguments,2),R=function(){return h.apply(g||this,C.concat(s.call(arguments)))},R.guid=h.guid=h.guid||v.guid++,R},v.holdReady=function(h){h?v.readyWait++:v.ready(!0)},v.isArray=Array.isArray,v.parseJSON=JSON.parse,v.nodeName=it,v.isFunction=S,v.isWindow=L,v.camelCase=Gt,v.type=G,v.now=Date.now,v.isNumeric=function(h){var g=v.type(h);return(g==="number"||g==="string")&&!isNaN(h-parseFloat(h))},v.trim=function(h){return h==null?"":(h+"").replace(Hl,"$1")};var ns=t.jQuery,ar=t.$;return v.noConflict=function(h){return t.$===v&&(t.$=ar),h&&t.jQuery===v&&(t.jQuery=ns),v},typeof e>"u"&&(t.jQuery=t.$=v),v})})(Em);const Mt=Em.exports;window.$=Mt;const Am=()=>{const n=new Date,t=n.getHours().toString().padStart(2,"0"),e=n.getMinutes().toString().padStart(2,"0");Mt("#clock").text(`${t} : ${e}`)};setInterval(Am,6e4);Am();window.$=Mt;const lv=()=>{navigator.onLine?Mt("#download-map").show():Mt("#download-map").hide()},uv=()=>{Mt("#download-map").on("click",async()=>{Mt("#download-map").animate({fontSize:"1.5rem"},300,()=>{Mt("#download-map").animate({fontSize:"1rem"},300),Mt("#download-progress").show()}),await gv()})},cv=()=>{let n=Mt("#download-progress").val(),t=100/2107;n+=t,Mt("#download-progress").val(n)};lv();uv();window.$=Mt;const hv="tiles",fv=1;let Eh;const dv=()=>Eh=new Promise((n,t)=>{const e=indexedDB.open(hv,fv);e.onerror=i=>{t("Error while opening database: ",i.target.error)},e.onsuccess=i=>{n(i.target.result)},e.onupgradeneeded=i=>{const r=i.target.result;for(var s=8;s<15;s++)r.createObjectStore(s.toString(),{keyPath:["x","y"],autoIncrement:!1}).createIndex("xyIndex",["x","y"],{unique:!0})}}),Lm=(n,t,e,i)=>new Promise((r,s)=>{Eh.then(o=>{o||s("DB not open for adding tile!");const a=o.transaction([t.toString()],"readwrite"),l=a.objectStore(t.toString()),u={x:e,y:i,tile:n},f=l.put(u);f.onsuccess=()=>{r(`layer with coordinates ${t}-${e}-${i} added`)},f.onerror=d=>{s(`Failed to add tile ${i}: `,d.target.error)},a.oncomplete=()=>{r("Transaction complete!")},a.onerror=d=>{s("Transaction error in addTile: ",d.target.error)}}).catch(o=>{r("Error whilst adding tile to IndexedDB",o)})}),pv=(n,t,e)=>new Promise((i,r)=>{Eh.then(s=>{s||r("Database not open for retrieving items!");const u=s.transaction([n.toString()],"readonly").objectStore(n.toString()).index("xyIndex").openCursor([t,e]);u.onerror=()=>{i(null)},u.onsuccess=f=>{const d=f.target.result;i(d?d.value.tile:null)}}).catch(s=>{r("Database promise error in retrieving items",s)})}),gv=async()=>new Promise(async(n,t)=>{for(let e=8;e<15;e++)try{(await(await fetch(`https://offline-html5-map.onrender.com/offline/tiles?zoom_level=${e}`)).json()).forEach(async s=>{const o=s.tile_column,a=(1<<e)-1-s.tile_row;try{await Tm(e,o,a,0)}catch(l){t(`ERROR while fetching tile for IndexedDB: ${l}`)}})}catch(i){t(`ERROR in fetching tile coordinates: ${i}`)}n(200)}),Tm=async(n,t,e,i)=>{const r=`https://offline-html5-map.onrender.com/data/tiles/${n}/${t}/${e}.pbf`;try{const s=await fetch(r);if(!s.ok)return;const o=await s.arrayBuffer();try{await Lm(o,n,t,e)===`layer with coordinates ${n}-${t}-${e} added`&&cv()}catch{return}}catch{i<3&&setTimeout(()=>{Tm(n,t,e,i+1)},3e3)}};try{Eh=dv()}catch(n){console.log(`ERROR: ${n}`)}window.$=Mt;const mv=()=>{Mt("#panel-content").is(":hidden")?(Mt(".panel").addClass("background-img"),Mt("#panel-content").css("display","flex"),Mt("#map").css({width:"60vw"}),lp()):(Mt(".panel").removeClass("background-img"),Mt("#panel-content").hide(),Mt("#map").css({width:"100vw"}),_a())},yv=()=>{Mt("#map").css({width:"100vw"});const n=Mt(".panel").attr("status");Mt("#map").css({width:"100vw"}),n==="close"?(Im(),lp()):(ku(),_a())};Mt("#close").on("click",()=>{window.innerWidth>800?mv():yv()});const Im=()=>{Mt(".panel").attr("status","open"),Mt(".panel").animate({top:"0%"},800)},ku=n=>{Mt(".panel").attr("status","close");const t=window.innerHeight-3*parseFloat(getComputedStyle(document.documentElement).fontSize);Mt(".panel").animate({top:n||t},800)},Rm=()=>{Mt("#close").on("touchstart",()=>{Mt("#close").addClass("drag"),Mt(".drag").on("touchmove",n=>{n.preventDefault();const t=window.innerHeight*.3,e=parseInt(Mt(".panel").css("top")),i=n.touches[0].clientY,r=e+t,s=parseFloat(getComputedStyle(document.documentElement).fontSize),o=window.innerHeight-3*s;let a=e+(i-r);a=Math.min(a,o),a=Math.max(a,0),a<e?(Mt(".panel").stop().animate({top:0+"px"},1e3),lp()):(Mt(".panel").stop().animate({top:o+"px"},1e3),_a())})}),Mt("#close").on("touchend",()=>{Mt("#close").removeClass("drag")})},_a=()=>{Mt("#close-arrow").attr("src","./icons/angles-right-solid.svg")},lp=()=>{Mt("#close-arrow").attr("src","./icons/angles-left-solid.svg")};window.innerWidth<701&&Rm();Mt(window).on("resize",()=>{window.innerWidth<701?Rm():(Mt(".panel").css("top","0%"),Mt(".panel").removeClass("drag"),Mt("#close").off("touchstart touchmove"))});window.$=Mt;let au=1;const vv=(n,t)=>{let e,i=document.getElementsByClassName(`trip-imgs ${t}`);if(i.length!==0){for(n>i.length?au=1:n<1&&(au=i.length),e=0;e<i.length;e++)i[e].style.display="none";i[au-1].style.display="block"}},_v=(n,t)=>{au+=n,vv(au,t)};window.$=Mt;const Nm=(n,t)=>{const e=Mt("<div>");e.addClass("trip-container"),e.attr("id",`trip-${t}`);const i=Mt("<div>");return i.addClass("trip-container-header"),i.append(xv(t)),i.append(`<img class=delete-trip id=trash-${t} src='./icons/trash-can-regular.svg'>`),e.append(i),e.append(`<p class='trip-title'>${n.title}</p>`),e.append(wv(n.images,t)),e.append(bv(n.rating)),e.append(`<p class='location'>${n.address}</p>`),e.append(`<p class='description'>${n.description}</p>`),e.css({"box-shadow":"rgba(17, 17, 26, 0.1) 0px 1px 0px",width:"65%"}),e},bv=n=>{const t=Mt("<div>");t.addClass("star-container");for(let e=0;e<n;e++){const i=`<div class='star-outline-static'>
                  <div class='star-fill-static filled'></div>
                  </div>`;t.append(i)}for(let e=0;e<5-n;e++){const i=`<div class='star-outline-static'>
                  <div class='star-fill-static'></div>
                  </div>`;t.append(i)}return t},wv=(n,t)=>{const e=Mt("<div class='trip-images'></div>");return n.length>1&&e.append(E0(t,-1,"left")),e.append(`<img class='trip-imgs ${t}' src=${n[0]}>`),n.slice(1,n.length).forEach(r=>{e.append(`<img class='trip-imgs ${t}' src=${r} hidden>`)}),n.length>1&&e.append(E0(t,1,"right")),e},E0=(n,t,e)=>{const i=Mt(`<img class='img-nav ${e}' id='${n} ${e}' src='./icons/angle-left-solid.svg'>`);return i.on("click",()=>{const r=i.attr("id").split(" ")[0];_v(t,r)}),i},xv=n=>{const t=Mt("<div>");return t.addClass("trip-box"),t.attr("id",`trip-box-${n}`),t},Sv=()=>{Mt(document).on("click",".trip-box",function(){const t=Mt(this).attr("id").split("-")[2];Mt(`#trip-box-${t}`).toggleClass("selected-trip")})};Sv();const Cv="trips",Ev=1;let du;const Av=()=>(du=new Promise((n,t)=>{const e=indexedDB.open(Cv,Ev);e.onerror=i=>{t("Error while opening trips database: ",i.target.error)},e.onsuccess=i=>{n(i.target.result)},e.onupgradeneeded=i=>{i.target.result.createObjectStore("trips",{keyPath:"id",autoIncrement:!0})}}),du),Lv=n=>new Promise((t,e)=>{du.then(i=>{if(!i){e("Database not open for adding trip.");return}const r=i.transaction(["trips"],"readwrite"),o=r.objectStore("trips").add(n);o.onsuccess=a=>{t(a.target.result)},o.onerror=a=>{e("Error whilst adding trip to IndexedDB",a)},r.oncomplete=()=>{t("Transaction complete!")},r.onerror=a=>{e("Transaction error: ",a.target.error)}})}),Tv=()=>new Promise((n,t)=>{du.then(e=>{if(!e){t("Trip database not open to retrieve trips!");return}const s=e.transaction(["trips"],"readonly").objectStore("trips").getAll();s.onsuccess=o=>{const a=o.target.result;n(a)},s.onerror=function(o){t("Error retrieving trips from IndexedDB:",o.target.error)}})}),Iv=n=>new Promise((t,e)=>{du.then(i=>{if(!i){e("Trip database not open to delete trips!");return}const o=i.transaction(["trips"],"readwrite").objectStore("trips").delete(parseInt(n));o.onsuccess=a=>{t("Trip deleted")},o.onerror=function(a){e("Error deleting trip in IndexedDB:",a.target.error)}})});Av();function Qe(){throw new Error("Unimplemented abstract method.")}let Rv=0;function tn(n){return n.ol_uid||(n.ol_uid=String(++Rv))}const pu={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Nv{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||pu[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const up=Nv,Fu=6378137,nl=Math.PI*Fu,Pv=[-nl,-nl,nl,nl],kv=[-180,-85,180,85],gc=Fu*Math.log(Math.tan(Math.PI/2));class Ba extends up{constructor(t){super({code:t,units:"m",extent:Pv,global:!0,worldExtent:kv,getPointResolution:function(e,i){return e/Math.cosh(i[1]/Fu)}})}}const A0=[new Ba("EPSG:3857"),new Ba("EPSG:102100"),new Ba("EPSG:102113"),new Ba("EPSG:900913"),new Ba("http://www.opengis.net/def/crs/EPSG/0/3857"),new Ba("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Fv(n,t,e){const i=n.length;e=e>1?e:2,t===void 0&&(e>2?t=n.slice():t=new Array(i));for(let r=0;r<i;r+=e){t[r]=nl*n[r]/180;let s=Fu*Math.log(Math.tan(Math.PI*(+n[r+1]+90)/360));s>gc?s=gc:s<-gc&&(s=-gc),t[r+1]=s}return t}function Mv(n,t,e){const i=n.length;e=e>1?e:2,t===void 0&&(e>2?t=n.slice():t=new Array(i));for(let r=0;r<i;r+=e)t[r]=180*n[r]/nl,t[r+1]=360*Math.atan(Math.exp(n[r+1]/Fu))/Math.PI-90;return t}const Ov=6378137,L0=[-180,-90,180,90],Dv=Math.PI*Ov/180;class ta extends up{constructor(t,e){super({code:t,units:"degrees",extent:L0,axisOrientation:e,global:!0,metersPerUnit:Dv,worldExtent:L0})}}const T0=[new ta("CRS:84"),new ta("EPSG:4326","neu"),new ta("urn:ogc:def:crs:OGC:1.3:CRS84"),new ta("urn:ogc:def:crs:OGC:2:84"),new ta("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ta("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ta("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let pd={};function jv(n){return pd[n]||pd[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function zv(n,t){pd[n]=t}function Mu(n){for(const t in n)delete n[t]}function _l(n){let t;for(t in n)return!1;return!t}let ll={};function $c(n,t,e){const i=n.getCode(),r=t.getCode();i in ll||(ll[i]={}),ll[i][r]=e}function Bv(n,t){let e;return n in ll&&t in ll[n]&&(e=ll[n][t]),e}const Ci={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function gd(n){const t=Rr();for(let e=0,i=n.length;e<i;++e)lu(t,n[e]);return t}function qv(n,t,e){const i=Math.min.apply(null,n),r=Math.min.apply(null,t),s=Math.max.apply(null,n),o=Math.max.apply(null,t);return bs(i,r,s,o,e)}function Ro(n,t,e){return e?(e[0]=n[0]-t,e[1]=n[1]-t,e[2]=n[2]+t,e[3]=n[3]+t,e):[n[0]-t,n[1]-t,n[2]+t,n[3]+t]}function Pm(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n.slice()}function Il(n,t,e){let i,r;return t<n[0]?i=n[0]-t:n[2]<t?i=t-n[2]:i=0,e<n[1]?r=n[1]-e:n[3]<e?r=e-n[3]:r=0,i*i+r*r}function Ah(n,t){return cp(n,t[0],t[1])}function la(n,t){return n[0]<=t[0]&&t[2]<=n[2]&&n[1]<=t[1]&&t[3]<=n[3]}function cp(n,t,e){return n[0]<=t&&t<=n[2]&&n[1]<=e&&e<=n[3]}function md(n,t){const e=n[0],i=n[1],r=n[2],s=n[3],o=t[0],a=t[1];let l=Ci.UNKNOWN;return o<e?l=l|Ci.LEFT:o>r&&(l=l|Ci.RIGHT),a<i?l=l|Ci.BELOW:a>s&&(l=l|Ci.ABOVE),l===Ci.UNKNOWN&&(l=Ci.INTERSECTING),l}function Rr(){return[1/0,1/0,-1/0,-1/0]}function bs(n,t,e,i,r){return r?(r[0]=n,r[1]=t,r[2]=e,r[3]=i,r):[n,t,e,i]}function Ou(n){return bs(1/0,1/0,-1/0,-1/0,n)}function km(n,t){const e=n[0],i=n[1];return bs(e,i,e,i,t)}function hp(n,t,e,i,r){const s=Ou(r);return Fm(s,n,t,e,i)}function bl(n,t){return n[0]==t[0]&&n[2]==t[2]&&n[1]==t[1]&&n[3]==t[3]}function Uv(n,t){return t[0]<n[0]&&(n[0]=t[0]),t[2]>n[2]&&(n[2]=t[2]),t[1]<n[1]&&(n[1]=t[1]),t[3]>n[3]&&(n[3]=t[3]),n}function lu(n,t){t[0]<n[0]&&(n[0]=t[0]),t[0]>n[2]&&(n[2]=t[0]),t[1]<n[1]&&(n[1]=t[1]),t[1]>n[3]&&(n[3]=t[1])}function Fm(n,t,e,i,r){for(;e<i;e+=r)Gv(n,t[e],t[e+1]);return n}function Gv(n,t,e){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}function fp(n,t){let e;return e=t(Lh(n)),e||(e=t(Th(n)),e)||(e=t(Ih(n)),e)||(e=t(jo(n)),e)?e:!1}function yd(n){let t=0;return Du(n)||(t=Wn(n)*Nr(n)),t}function Lh(n){return[n[0],n[1]]}function Th(n){return[n[2],n[1]]}function ya(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function Wv(n,t){let e;if(t==="bottom-left")e=Lh(n);else if(t==="bottom-right")e=Th(n);else if(t==="top-left")e=jo(n);else if(t==="top-right")e=Ih(n);else throw new Error("Invalid corner");return e}function vd(n,t,e,i,r){const[s,o,a,l,u,f,d,y]=_d(n,t,e,i);return bs(Math.min(s,a,u,d),Math.min(o,l,f,y),Math.max(s,a,u,d),Math.max(o,l,f,y),r)}function _d(n,t,e,i){const r=t*i[0]/2,s=t*i[1]/2,o=Math.cos(e),a=Math.sin(e),l=r*o,u=r*a,f=s*o,d=s*a,y=n[0],m=n[1];return[y-l+d,m-u-f,y-l-d,m-u+f,y+l-d,m+u+f,y+l+d,m+u-f,y-l+d,m-u-f]}function Nr(n){return n[3]-n[1]}function da(n,t,e){const i=e||Rr();return li(n,t)?(n[0]>t[0]?i[0]=n[0]:i[0]=t[0],n[1]>t[1]?i[1]=n[1]:i[1]=t[1],n[2]<t[2]?i[2]=n[2]:i[2]=t[2],n[3]<t[3]?i[3]=n[3]:i[3]=t[3]):Ou(i),i}function jo(n){return[n[0],n[3]]}function Ih(n){return[n[2],n[3]]}function Wn(n){return n[2]-n[0]}function li(n,t){return n[0]<=t[2]&&n[2]>=t[0]&&n[1]<=t[3]&&n[3]>=t[1]}function Du(n){return n[2]<n[0]||n[3]<n[1]}function Vv(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n}function Hv(n,t,e){let i=!1;const r=md(n,t),s=md(n,e);if(r===Ci.INTERSECTING||s===Ci.INTERSECTING)i=!0;else{const o=n[0],a=n[1],l=n[2],u=n[3],f=t[0],d=t[1],y=e[0],m=e[1],w=(m-d)/(y-f);let S,L;!!(s&Ci.ABOVE)&&!(r&Ci.ABOVE)&&(S=y-(m-u)/w,i=S>=o&&S<=l),!i&&!!(s&Ci.RIGHT)&&!(r&Ci.RIGHT)&&(L=m-(y-l)*w,i=L>=a&&L<=u),!i&&!!(s&Ci.BELOW)&&!(r&Ci.BELOW)&&(S=y-(m-a)/w,i=S>=o&&S<=l),!i&&!!(s&Ci.LEFT)&&!(r&Ci.LEFT)&&(L=m-(y-o)*w,i=L>=a&&L<=u)}return i}function $v(n,t,e,i){if(Du(n))return Ou(e);let r=[];if(i>1){const a=n[2]-n[0],l=n[3]-n[1];for(let u=0;u<i;++u)r.push(n[0]+a*u/i,n[1],n[2],n[1]+l*u/i,n[2]-a*u/i,n[3],n[0],n[3]-l*u/i)}else r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]];t(r,r,2);const s=[],o=[];for(let a=0,l=r.length;a<l;a+=2)s.push(r[a]),o.push(r[a+1]);return qv(s,o,e)}function Mm(n,t){const e=t.getExtent(),i=ya(n);if(t.canWrapX()&&(i[0]<e[0]||i[0]>=e[2])){const r=Wn(e),o=Math.floor((i[0]-e[0])/r)*r;n[0]-=o,n[2]-=o}return n}function Xv(n,t){if(t.canWrapX()){const e=t.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[e[0],n[1],e[2],n[3]]];Mm(n,t);const i=Wn(e);if(Wn(n)>i)return[[e[0],n[1],e[2],n[3]]];if(n[0]<e[0])return[[n[0]+i,n[1],e[2],n[3]],[e[0],n[1],n[2],n[3]]];if(n[2]>e[2])return[[n[0],n[1],e[2],n[3]],[e[0],n[1],n[2]-i,n[3]]]}return[n]}function di(n,t,e){return Math.min(Math.max(n,t),e)}function Yv(n,t,e,i,r,s){const o=r-e,a=s-i;if(o!==0||a!==0){const l=((n-e)*o+(t-i)*a)/(o*o+a*a);l>1?(e=r,i=s):l>0&&(e+=o*l,i+=a*l)}return pa(n,t,e,i)}function pa(n,t,e,i){const r=e-n,s=i-t;return r*r+s*s}function Kv(n){const t=n.length;for(let i=0;i<t;i++){let r=i,s=Math.abs(n[i][i]);for(let a=i+1;a<t;a++){const l=Math.abs(n[a][i]);l>s&&(s=l,r=a)}if(s===0)return null;const o=n[r];n[r]=n[i],n[i]=o;for(let a=i+1;a<t;a++){const l=-n[a][i]/n[i][i];for(let u=i;u<t+1;u++)i==u?n[a][u]=0:n[a][u]+=l*n[i][u]}}const e=new Array(t);for(let i=t-1;i>=0;i--){e[i]=n[i][t]/n[i][i];for(let r=i-1;r>=0;r--)n[r][t]-=n[r][i]*e[i]}return e}function Dc(n){return n*Math.PI/180}function ul(n,t){const e=n%t;return e*t<0?e+t:e}function fr(n,t,e){return n+e*(t-n)}function dp(n,t){const e=Math.pow(10,t);return Math.round(n*e)/e}function mc(n,t){return Math.floor(dp(n,t))}function yc(n,t){return Math.ceil(dp(n,t))}function Zv(n,t){return n[0]+=+t[0],n[1]+=+t[1],n}function Xc(n,t){let e=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=t[i]){e=!1;break}return e}function pp(n,t){const e=Math.cos(t),i=Math.sin(t),r=n[0]*e-n[1]*i,s=n[1]*e+n[0]*i;return n[0]=r,n[1]=s,n}function Jv(n,t){return n[0]*=t,n[1]*=t,n}function gp(n,t){if(t.canWrapX()){const e=Wn(t.getExtent()),i=Qv(n,t,e);i&&(n[0]-=i*e)}return n}function Qv(n,t,e){const i=t.getExtent();let r=0;return t.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(e=e||Wn(i),r=Math.floor((n[0]-i[0])/e)),r}const t_=63710088e-1;function I0(n,t,e){e=e||t_;const i=Dc(n[1]),r=Dc(t[1]),s=(r-i)/2,o=Dc(t[0]-n[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*e*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const Om={info:1,warn:2,error:3,none:4};let e_=Om.info;function Dm(...n){e_>Om.warn||console.warn(...n)}let bd=!0;function jm(n){bd=!(n===void 0?!0:n)}function mp(n,t){if(t!==void 0){for(let e=0,i=n.length;e<i;++e)t[e]=n[e];t=t}else t=n.slice();return t}function zm(n,t){if(t!==void 0&&n!==t){for(let e=0,i=n.length;e<i;++e)t[e]=n[e];n=t}return n}function n_(n){zv(n.getCode(),n),$c(n,n,mp)}function i_(n){n.forEach(n_)}function Di(n){return typeof n=="string"?jv(n):n||null}function R0(n,t,e,i){n=Di(n);let r;const s=n.getPointResolutionFunc();if(s){if(r=s(t,e),i&&i!==n.getUnits()){const o=n.getMetersPerUnit();o&&(r=r*o/pu[i])}}else{const o=n.getUnits();if(o=="degrees"&&!i||i=="degrees")r=t;else{const a=vp(n,Di("EPSG:4326"));if(a===zm&&o!=="degrees")r=t*n.getMetersPerUnit();else{let u=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];u=a(u,u,2);const f=I0(u.slice(0,2),u.slice(2,4)),d=I0(u.slice(4,6),u.slice(6,8));r=(f+d)/2}const l=i?pu[i]:n.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function N0(n){i_(n),n.forEach(function(t){n.forEach(function(e){t!==e&&$c(t,e,mp)})})}function r_(n,t,e,i){n.forEach(function(r){t.forEach(function(s){$c(r,s,e),$c(s,r,i)})})}function yp(n,t){return n?typeof n=="string"?Di(n):n:Di(t)}function Rh(n,t){return jm(),qm(n,"EPSG:4326",t!==void 0?t:"EPSG:3857")}function Bm(n,t){if(n===t)return!0;const e=n.getUnits()===t.getUnits();return(n.getCode()===t.getCode()||vp(n,t)===mp)&&e}function vp(n,t){const e=n.getCode(),i=t.getCode();let r=Bv(e,i);return r||(r=zm),r}function gu(n,t){const e=Di(n),i=Di(t);return vp(e,i)}function qm(n,t,e){return gu(t,e)(n,void 0,n.length)}function s_(n,t,e,i){const r=gu(t,e);return $v(n,r,void 0,i)}function wd(n,t){return n}function zs(n,t){return bd&&!Xc(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(bd=!1,Dm("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function Um(n,t){return n}function ua(n,t){return n}function o_(){N0(A0),N0(T0),r_(T0,A0,Fv,Mv)}o_();class a_{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?Di(e.dataProjection):this.readProjection(t);e.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Di(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return Qe()}readFeature(t,e){return Qe()}readFeatures(t,e){return Qe()}readGeometry(t,e){return Qe()}readProjection(t){return Qe()}writeFeature(t,e){return Qe()}writeFeatures(t,e){return Qe()}writeGeometry(t,e){return Qe()}}const l_=a_;function u_(n,t,e){const i=e?Di(e.featureProjection):null,r=e?Di(e.dataProjection):null;let s;if(i&&r&&!Bm(i,r)?s=(t?n.clone():n).transform(t?i:r,t?r:i):s=n,t&&e&&e.decimals!==void 0){const o=Math.pow(10,e.decimals),a=function(l){for(let u=0,f=l.length;u<f;++u)l[u]=Math.round(l[u]*o)/o;return l};s===n&&(s=n.clone()),s.applyTransform(a)}return s}class c_{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const $s=c_,wl={PROPERTYCHANGE:"propertychange"};class h_{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const _p=h_;function f_(n,t,e){let i,r;e=e||ko;let s=0,o=n.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+e(n[i],t),r<0?s=i+1:(o=i,a=!r);return a?s:~s}function ko(n,t){return n>t?1:n<t?-1:0}function bp(n,t,e){if(n[0]<=t)return 0;const i=n.length;if(t<=n[i-1])return i-1;if(typeof e=="function"){for(let r=1;r<i;++r){const s=n[r];if(s===t)return r;if(s<t)return e(t,n[r-1],s)>0?r-1:r}return i-1}if(e>0){for(let r=1;r<i;++r)if(n[r]<t)return r-1;return i-1}if(e<0){for(let r=1;r<i;++r)if(n[r]<=t)return r;return i-1}for(let r=1;r<i;++r){if(n[r]==t)return r;if(n[r]<t)return n[r-1]-t<t-n[r]?r-1:r}return i-1}function d_(n,t,e){for(;t<e;){const i=n[t];n[t]=n[e],n[e]=i,++t,--e}}function ms(n,t){const e=Array.isArray(t)?t:[t],i=e.length;for(let r=0;r<i;r++)n[n.length]=e[r]}function zo(n,t){const e=n.length;if(e!==t.length)return!1;for(let i=0;i<e;i++)if(n[i]!==t[i])return!1;return!0}function p_(n,t,e){const i=t||ko;return n.every(function(r,s){if(s===0)return!0;const o=i(n[s-1],r);return!(o>0||e&&o===0)})}function mu(){return!0}function Nh(){return!1}function xl(){}function g_(n){let t=!1,e,i,r;return function(){const s=Array.prototype.slice.call(arguments);return(!t||this!==r||!zo(s,i))&&(t=!0,r=this,i=s,e=n.apply(this,arguments)),e}}function m_(n){function t(){let e;try{e=n()}catch(i){return Promise.reject(i)}return e instanceof Promise?e:Promise.resolve(e)}return t()}class y_ extends _p{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),r=i[t]||(i[t]=[]);r.includes(e)||r.push(e)}dispatchEvent(t){const e=typeof t=="string",i=e?t:t.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=e?new $s(t):t;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let u=0,f=r.length;u<f;++u)if("handleEvent"in r[u]?l=r[u].handleEvent(s):l=r[u].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let u=a[i];for(delete a[i];u--;)this.removeEventListener(i,xl);delete o[i]}return l}disposeInternal(){this.listeners_&&Mu(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){const i=this.listeners_&&this.listeners_[t];if(i){const r=i.indexOf(e);r!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[r]=xl,++this.pendingRemovals_[t]):(i.splice(r,1),i.length===0&&delete this.listeners_[t]))}}}const Ph=y_,Ye={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function wn(n,t,e,i,r){if(i&&i!==n&&(e=e.bind(i)),r){const o=e;e=function(){n.removeEventListener(t,e),o.apply(this,arguments)}}const s={target:n,type:t,listener:e};return n.addEventListener(t,e),s}function Yc(n,t,e,i){return wn(n,t,e,i,!0)}function Xn(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Mu(n))}class kh extends Ph{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ye.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=wn(this,t[s],e);return r}return wn(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const r=t.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=Yc(this,t[s],e)}else i=Yc(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)v_(i);else if(Array.isArray(t))for(let r=0,s=t.length;r<s;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)}}kh.prototype.on;kh.prototype.once;kh.prototype.un;function v_(n){if(Array.isArray(n))for(let t=0,e=n.length;t<e;++t)Xn(n[t]);else Xn(n)}const Gm=kh;class P0 extends $s{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}class __ extends Gm{constructor(t){super(),this.on,this.once,this.un,tn(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new P0(i,t,e)),i=wl.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new P0(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const r=this.values_||(this.values_={});if(i)r[t]=e;else{const s=r[t];r[t]=e,s!==e&&this.notify(t,s)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){!t.values_||Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],_l(this.values_)&&(this.values_=null),e||this.notify(t,i)}}}const ws=__,Fo=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",b_=Fo.includes("firefox"),w_=Fo.includes("safari")&&!Fo.includes("chrom");w_&&(Fo.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Fo));const x_=Fo.includes("webkit")&&!Fo.includes("edge"),Wm=Fo.includes("macintosh"),Vm=typeof devicePixelRatio<"u"?devicePixelRatio:1,wp=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Hm=typeof Image<"u"&&Image.prototype.decode,$m=function(){let n=!1;try{const t=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return n}();function hn(n,t){if(!n)throw new Error(t)}const Xm=new Array(6);function Tr(){return[1,0,0,1,0,0]}function k0(n){return Fh(n,1,0,0,1,0,0)}function xp(n,t){const e=n[0],i=n[1],r=n[2],s=n[3],o=n[4],a=n[5],l=t[0],u=t[1],f=t[2],d=t[3],y=t[4],m=t[5];return n[0]=e*l+r*u,n[1]=i*l+s*u,n[2]=e*f+r*d,n[3]=i*f+s*d,n[4]=e*y+r*m+o,n[5]=i*y+s*m+a,n}function Fh(n,t,e,i,r,s,o){return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n[4]=s,n[5]=o,n}function S_(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function _i(n,t){const e=t[0],i=t[1];return t[0]=n[0]*e+n[2]*i+n[4],t[1]=n[1]*e+n[3]*i+n[5],t}function Af(n,t,e){return xp(n,Fh(Xm,t,0,0,e,0,0))}function C_(n,t,e){return Fh(n,t,0,0,e,0,0)}function E_(n,t,e){return xp(n,Fh(Xm,1,0,0,1,t,e))}function Hs(n,t,e,i,r,s,o,a){const l=Math.sin(s),u=Math.cos(s);return n[0]=i*u,n[1]=r*l,n[2]=-i*l,n[3]=r*u,n[4]=o*i*u-a*i*l+t,n[5]=o*r*l+a*r*u+e,n}function Sp(n,t){const e=A_(t);hn(e!==0,"Transformation matrix cannot be inverted");const i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5];return n[0]=o/e,n[1]=-r/e,n[2]=-s/e,n[3]=i/e,n[4]=(s*l-o*a)/e,n[5]=-(i*l-r*a)/e,n}function A_(n){return n[0]*n[3]-n[1]*n[2]}let F0;function Ym(n){const t="matrix("+n.join(", ")+")";if(wp)return t;const e=F0||(F0=document.createElement("div"));return e.style.transform=t,e.style.transform}function No(n,t,e,i,r,s){s=s||[];let o=0;for(let a=t;a<e;a+=i){const l=n[a],u=n[a+1];s[o++]=r[0]*l+r[2]*u+r[4],s[o++]=r[1]*l+r[3]*u+r[5]}return s&&s.length!=o&&(s.length=o),s}function Cp(n,t,e,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),u=s[0],f=s[1];let d=0;for(let y=t;y<e;y+=i){const m=n[y]-u,w=n[y+1]-f;o[d++]=u+m*a-w*l,o[d++]=f+m*l+w*a;for(let S=y+2;S<y+i;++S)o[d++]=n[S]}return o&&o.length!=d&&(o.length=d),o}function L_(n,t,e,i,r,s,o,a){a=a||[];const l=o[0],u=o[1];let f=0;for(let d=t;d<e;d+=i){const y=n[d]-l,m=n[d+1]-u;a[f++]=l+r*y,a[f++]=u+s*m;for(let w=d+2;w<d+i;++w)a[f++]=n[w]}return a&&a.length!=f&&(a.length=f),a}function T_(n,t,e,i,r,s,o){o=o||[];let a=0;for(let l=t;l<e;l+=i){o[a++]=n[l]+r,o[a++]=n[l+1]+s;for(let u=l+2;u<l+i;++u)o[a++]=n[u]}return o&&o.length!=a&&(o.length=a),o}const M0=Tr();class I_ extends ws{constructor(){super(),this.extent_=Rr(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=g_(function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return Qe()}closestPointXY(t,e,i,r){return Qe()}containsXY(t,e){const i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Qe()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Ou(e),this.extentRevision_=this.getRevision()}return Vv(this.extent_,t)}rotate(t,e){Qe()}scale(t,e,i){Qe()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Qe()}getType(){return Qe()}applyTransform(t){Qe()}intersectsExtent(t){return Qe()}translate(t,e){Qe()}transform(t,e){const i=Di(t),r=i.getUnits()=="tile-pixels"?function(s,o,a){const l=i.getExtent(),u=i.getWorldExtent(),f=Nr(u)/Nr(l);return Hs(M0,u[0],u[3],f,-f,0,0,0),No(s,0,s.length,a,M0,o),gu(i,e)(s,o,a)}:gu(i,e);return this.applyTransform(r),this}}const R_=I_;class N_ extends R_{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return hp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Qe()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=O0(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){Qe()}setLayout(t,e,i){let r;if(t)r=O0(t);else{for(let s=0;s<i;++s){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}r=e.length,t=P_(r)}this.layout=t,this.stride=r}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const r=this.getStride();Cp(i,0,i.length,r,t,e,i),this.changed()}}scale(t,e,i){e===void 0&&(e=t),i||(i=ya(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();L_(r,0,r.length,s,t,e,i,r),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const r=this.getStride();T_(i,0,i.length,r,t,e,i),this.changed()}}}function P_(n){let t;return n==2?t="XY":n==3?t="XYZ":n==4&&(t="XYZM"),t}function O0(n){let t;return n=="XY"?t=2:n=="XYZ"||n=="XYM"?t=3:n=="XYZM"&&(t=4),t}function k_(n,t,e){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return No(i,0,i.length,r,t,e)}const Bo=N_;function D0(n,t,e,i,r,s,o){const a=n[t],l=n[t+1],u=n[e]-a,f=n[e+1]-l;let d;if(u===0&&f===0)d=t;else{const y=((r-a)*u+(s-l)*f)/(u*u+f*f);if(y>1)d=e;else if(y>0){for(let m=0;m<i;++m)o[m]=fr(n[t+m],n[e+m],y);o.length=i;return}else d=t}for(let y=0;y<i;++y)o[y]=n[d+y];o.length=i}function Ep(n,t,e,i,r){let s=n[t],o=n[t+1];for(t+=i;t<e;t+=i){const a=n[t],l=n[t+1],u=pa(s,o,a,l);u>r&&(r=u),s=a,o=l}return r}function Ap(n,t,e,i,r){for(let s=0,o=e.length;s<o;++s){const a=e[s];r=Ep(n,t,a,i,r),t=a}return r}function F_(n,t,e,i,r){for(let s=0,o=e.length;s<o;++s){const a=e[s];r=Ap(n,t,a,i,r),t=a[a.length-1]}return r}function Lp(n,t,e,i,r,s,o,a,l,u,f){if(t==e)return u;let d,y;if(r===0){if(y=pa(o,a,n[t],n[t+1]),y<u){for(d=0;d<i;++d)l[d]=n[t+d];return l.length=i,y}return u}f=f||[NaN,NaN];let m=t+i;for(;m<e;)if(D0(n,m-i,m,i,o,a,f),y=pa(o,a,f[0],f[1]),y<u){for(u=y,d=0;d<i;++d)l[d]=f[d];l.length=i,m+=i}else m+=i*Math.max((Math.sqrt(y)-Math.sqrt(u))/r|0,1);if(s&&(D0(n,e-i,t,i,o,a,f),y=pa(o,a,f[0],f[1]),y<u)){for(u=y,d=0;d<i;++d)l[d]=f[d];l.length=i}return u}function Tp(n,t,e,i,r,s,o,a,l,u,f){f=f||[NaN,NaN];for(let d=0,y=e.length;d<y;++d){const m=e[d];u=Lp(n,t,m,i,r,s,o,a,l,u,f),t=m}return u}function M_(n,t,e,i,r,s,o,a,l,u,f){f=f||[NaN,NaN];for(let d=0,y=e.length;d<y;++d){const m=e[d];u=Tp(n,t,m,i,r,s,o,a,l,u,f),t=m[m.length-1]}return u}function Km(n,t,e,i){for(let r=0,s=e.length;r<s;++r)n[t++]=e[r];return t}function Mh(n,t,e,i){for(let r=0,s=e.length;r<s;++r){const o=e[r];for(let a=0;a<i;++a)n[t++]=o[a]}return t}function Ip(n,t,e,i,r){r=r||[];let s=0;for(let o=0,a=e.length;o<a;++o){const l=Mh(n,t,e[o],i);r[s++]=l,t=l}return r.length=s,r}function O_(n,t,e,i,r){r=r||[];let s=0;for(let o=0,a=e.length;o<a;++o){const l=Ip(n,t,e[o],i,r[s]);l.length===0&&(l[0]=t),r[s++]=l,t=l[l.length-1]}return r.length=s,r}function Rp(n,t,e,i,r,s,o){const a=(e-t)/i;if(a<3){for(;t<e;t+=i)s[o++]=n[t],s[o++]=n[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const u=[t,e-i];let f=0;for(;u.length>0;){const d=u.pop(),y=u.pop();let m=0;const w=n[y],S=n[y+1],L=n[d],E=n[d+1];for(let I=y+i;I<d;I+=i){const j=n[I],G=n[I+1],Z=Yv(j,G,w,S,L,E);Z>m&&(f=I,m=Z)}m>r&&(l[(f-t)/i]=1,y+i<f&&u.push(y,f),f+i<d&&u.push(f,d))}for(let d=0;d<a;++d)l[d]&&(s[o++]=n[t+d*i],s[o++]=n[t+d*i+1]);return o}function D_(n,t,e,i,r,s,o,a){for(let l=0,u=e.length;l<u;++l){const f=e[l];o=Rp(n,t,f,i,r,s,o),a.push(o),t=f}return o}function sa(n,t){return t*Math.round(n/t)}function j_(n,t,e,i,r,s,o){if(t==e)return o;let a=sa(n[t],r),l=sa(n[t+1],r);t+=i,s[o++]=a,s[o++]=l;let u,f;do if(u=sa(n[t],r),f=sa(n[t+1],r),t+=i,t==e)return s[o++]=u,s[o++]=f,o;while(u==a&&f==l);for(;t<e;){const d=sa(n[t],r),y=sa(n[t+1],r);if(t+=i,d==u&&y==f)continue;const m=u-a,w=f-l,S=d-a,L=y-l;if(m*L==w*S&&(m<0&&S<m||m==S||m>0&&S>m)&&(w<0&&L<w||w==L||w>0&&L>w)){u=d,f=y;continue}s[o++]=u,s[o++]=f,a=u,l=f,u=d,f=y}return s[o++]=u,s[o++]=f,o}function Zm(n,t,e,i,r,s,o,a){for(let l=0,u=e.length;l<u;++l){const f=e[l];o=j_(n,t,f,i,r,s,o),a.push(o),t=f}return o}function z_(n,t,e,i,r,s,o,a){for(let l=0,u=e.length;l<u;++l){const f=e[l],d=[];o=Zm(n,t,f,i,r,s,o,d),a.push(d),t=f[f.length-1]}return o}function Jm(n,t,e,i,r){let s;for(t+=i;t<e;t+=i)if(s=r(n.slice(t-i,t),n.slice(t,t+i)),s)return s;return!1}function Eo(n,t,e,i,r){r=r!==void 0?r:[];let s=0;for(let o=t;o<e;o+=i)r[s++]=n.slice(o,o+i);return r.length=s,r}function yu(n,t,e,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=e.length;o<a;++o){const l=e[o];r[s++]=Eo(n,t,l,i,r[s]),t=l}return r.length=s,r}function xd(n,t,e,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=e.length;o<a;++o){const l=e[o];r[s++]=l.length===1&&l[0]===t?[]:yu(n,t,l,i,r[s]),t=l[l.length-1]}return r.length=s,r}function Kc(n,t,e,i,r,s,o){let a,l;const u=(e-t)/i;if(u===1)a=t;else if(u===2)a=t,l=r;else if(u!==0){let f=n[t],d=n[t+1],y=0;const m=[0];for(let L=t+i;L<e;L+=i){const E=n[L],I=n[L+1];y+=Math.sqrt((E-f)*(E-f)+(I-d)*(I-d)),m.push(y),f=E,d=I}const w=r*y,S=f_(m,w);S<0?(l=(w-m[-S-2])/(m[-S-1]-m[-S-2]),a=t+(-S-2)*i):a=t+S*i}o=o>1?o:2,s=s||new Array(o);for(let f=0;f<o;++f)s[f]=a===void 0?NaN:l===void 0?n[a+f]:fr(n[a+f],n[a+i+f],l);return s}function Sd(n,t,e,i,r,s){if(e==t)return null;let o;if(r<n[t+i-1])return s?(o=n.slice(t,t+i),o[i-1]=r,o):null;if(n[e-1]<r)return s?(o=n.slice(e-i,e),o[i-1]=r,o):null;if(r==n[t+i-1])return n.slice(t,t+i);let a=t/i,l=e/i;for(;a<l;){const y=a+l>>1;r<n[(y+1)*i-1]?l=y:a=y+1}const u=n[a*i-1];if(r==u)return n.slice((a-1)*i,(a-1)*i+i);const f=n[(a+1)*i-1],d=(r-u)/(f-u);o=[];for(let y=0;y<i-1;++y)o.push(fr(n[(a-1)*i+y],n[a*i+y],d));return o.push(r),o}function B_(n,t,e,i,r,s,o){if(o)return Sd(n,t,e[e.length-1],i,r,s);let a;if(r<n[i-1])return s?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return s?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let l=0,u=e.length;l<u;++l){const f=e[l];if(t!=f){if(r<n[t+i-1])return null;if(r<=n[f-1])return Sd(n,t,f,i,r,!1);t=f}}return null}function q_(n,t,e,i,r){return!fp(r,function(o){return!ca(n,t,e,i,o[0],o[1])})}function ca(n,t,e,i,r,s){let o=0,a=n[e-i],l=n[e-i+1];for(;t<e;t+=i){const u=n[t],f=n[t+1];l<=s?f>s&&(u-a)*(s-l)-(r-a)*(f-l)>0&&o++:f<=s&&(u-a)*(s-l)-(r-a)*(f-l)<0&&o--,a=u,l=f}return o!==0}function Np(n,t,e,i,r,s){if(e.length===0||!ca(n,t,e[0],i,r,s))return!1;for(let o=1,a=e.length;o<a;++o)if(ca(n,e[o-1],e[o],i,r,s))return!1;return!0}function U_(n,t,e,i,r,s){if(e.length===0)return!1;for(let o=0,a=e.length;o<a;++o){const l=e[o];if(Np(n,t,l,i,r,s))return!0;t=l[l.length-1]}return!1}function Oh(n,t,e,i,r){const s=Fm(Rr(),n,t,e,i);return li(r,s)?la(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:Jm(n,t,e,i,function(o,a){return Hv(r,o,a)}):!1}function G_(n,t,e,i,r){for(let s=0,o=e.length;s<o;++s){if(Oh(n,t,e[s],i,r))return!0;t=e[s]}return!1}function Qm(n,t,e,i,r){return!!(Oh(n,t,e,i,r)||ca(n,t,e,i,r[0],r[1])||ca(n,t,e,i,r[0],r[3])||ca(n,t,e,i,r[2],r[1])||ca(n,t,e,i,r[2],r[3]))}function t2(n,t,e,i,r){if(!Qm(n,t,e[0],i,r))return!1;if(e.length===1)return!0;for(let s=1,o=e.length;s<o;++s)if(q_(n,e[s-1],e[s],i,r)&&!Oh(n,e[s-1],e[s],i,r))return!1;return!0}function W_(n,t,e,i,r){for(let s=0,o=e.length;s<o;++s){const a=e[s];if(t2(n,t,a,i,r))return!0;t=a[a.length-1]}return!1}function e2(n,t,e,i){let r=n[t],s=n[t+1],o=0;for(let a=t+i;a<e;a+=i){const l=n[a],u=n[a+1];o+=Math.sqrt((l-r)*(l-r)+(u-s)*(u-s)),r=l,s=u}return o}class Zc extends Bo{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){this.flatCoordinates?ms(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new Zc(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,r){return r<Il(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ep(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Lp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,r))}forEachSegment(t){return Jm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,Sd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return Eo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return Kc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return e2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=Rp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Zc(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return Oh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Mh(this.flatCoordinates,0,t,this.stride),this.changed()}}const Cd=Zc;class Jc extends Bo{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{let r=this.getLayout();const s=t,o=[],a=[];for(let l=0,u=s.length;l<u;++l){const f=s[l];l===0&&(r=f.getLayout()),ms(o,f.getFlatCoordinates()),a.push(o.length)}this.setFlatCoordinates(r,o),this.ends_=a}}appendLineString(t){this.flatCoordinates?ms(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Jc(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,r){return r<Il(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ap(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Tp(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,r))}getCoordinateAtM(t,e,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,i=i!==void 0?i:!1,B_(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return yu(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Cd(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=e.length;o<a;++o){const l=e[o],u=new Cd(t.slice(s,l),i);r.push(u),s=l}return r}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],u=Kc(e,i,l,s,.5);ms(t,u),i=l}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=D_(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new Jc(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return G_(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Ip(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const V_=Jc;class Pp extends Bo{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new Pp(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,r){const s=this.flatCoordinates,o=pa(t,e,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return km(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return cp(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Km(this.flatCoordinates,0,t,this.stride),this.changed()}}const Sl=Pp;class kp extends Bo{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?ms(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new kp(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,r){if(r<Il(this.getExtent(),t,e))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const u=pa(t,e,s[a],s[a+1]);if(u<r){r=u;for(let f=0;f<o;++f)i[f]=s[a+f];i.length=o}}return r}getCoordinates(){return Eo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new Sl(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,r=[];for(let s=0,o=t.length;s<o;s+=i){const a=new Sl(t.slice(s,s+i),e);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let r=0,s=e.length;r<s;r+=i){const o=e[r],a=e[r+1];if(cp(t,o,a))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Mh(this.flatCoordinates,0,t,this.stride),this.changed()}}const n2=kp;function i2(n,t,e,i){let r=0,s=n[e-i],o=n[e-i+1];for(;t<e;t+=i){const a=n[t],l=n[t+1];r+=o*a-s*l,s=a,o=l}return r/2}function r2(n,t,e,i){let r=0;for(let s=0,o=e.length;s<o;++s){const a=e[s];r+=i2(n,t,a,i),t=a}return r}function H_(n,t,e,i){let r=0;for(let s=0,o=e.length;s<o;++s){const a=e[s];r+=r2(n,t,a,i),t=a[a.length-1]}return r}class Qc extends Bo{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new Qc(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,r){return r<Il(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ep(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Lp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,r))}getArea(){return i2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Eo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=Rp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Qc(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Mh(this.flatCoordinates,0,t,this.stride),this.changed()}}const j0=Qc;function Fp(n,t,e,i,r,s,o){let a,l,u,f,d,y,m;const w=r[s+1],S=[];for(let I=0,j=e.length;I<j;++I){const G=e[I];for(f=n[G-i],y=n[G-i+1],a=t;a<G;a+=i)d=n[a],m=n[a+1],(w<=y&&m<=w||y<=w&&w<=m)&&(u=(w-y)/(m-y)*(d-f)+f,S.push(u)),f=d,y=m}let L=NaN,E=-1/0;for(S.sort(ko),f=S[0],a=1,l=S.length;a<l;++a){d=S[a];const I=Math.abs(d-f);I>E&&(u=(f+d)/2,Np(n,t,e,i,u,w)&&(L=u,E=I)),f=d}return isNaN(L)&&(L=r[s]),o?(o.push(L,w,E),o):[L,w,E]}function s2(n,t,e,i,r){let s=[];for(let o=0,a=e.length;o<a;++o){const l=e[o];s=Fp(n,t,l,i,r,2*o,s),t=l[l.length-1]}return s}function $_(n,t,e,i){for(;t<e-i;){for(let r=0;r<i;++r){const s=n[t+r];n[t+r]=n[e-i+r],n[e-i+r]=s}t+=i,e-=i}}function Mp(n,t,e,i){let r=0,s=n[e-i],o=n[e-i+1];for(;t<e;t+=i){const a=n[t],l=n[t+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function o2(n,t,e,i,r){r=r!==void 0?r:!1;for(let s=0,o=e.length;s<o;++s){const a=e[s],l=Mp(n,t,a,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;t=a}return!0}function X_(n,t,e,i,r){for(let s=0,o=e.length;s<o;++s){const a=e[s];if(!o2(n,t,a,i,r))return!1;a.length&&(t=a[a.length-1])}return!0}function Ed(n,t,e,i,r){r=r!==void 0?r:!1;for(let s=0,o=e.length;s<o;++s){const a=e[s],l=Mp(n,t,a,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&$_(n,t,a,i),t=a}return t}function z0(n,t,e,i,r){for(let s=0,o=e.length;s<o;++s)t=Ed(n,t,e[s],i,r);return t}function Y_(n,t){const e=[];let i=0,r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!Mp(n,i,a,2))e.push(t.slice(r,s+1));else{if(e.length===0)continue;e[e.length-1].push(t[r])}r=s+1,i=a}return e}class Mo extends Bo{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?ms(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Mo(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,r){return r<Il(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ap(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Tp(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,r))}containsXY(t,e){return Np(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return r2(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),Ed(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,yu(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=ya(this.getExtent());this.flatInteriorPoint_=Fp(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Sl(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new j0(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],u=new j0(e.slice(s,l),t);r.push(u),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;o2(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Ed(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=Zm(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new Mo(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return t2(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Ip(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function B0(n){if(Du(n))throw new Error("Cannot create polygon from empty extent");const t=n[0],e=n[1],i=n[2],r=n[3],s=[t,e,t,r,i,r,i,e,t,e];return new Mo(s,"XY",[s.length])}function a2(n,t,e,i){const r=[];let s=Rr();for(let o=0,a=e.length;o<a;++o){const l=e[o];s=hp(n,t,l[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),t=l[l.length-1]}return r}class th extends Bo{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let r=this.getLayout();const s=t,o=[],a=[];for(let l=0,u=s.length;l<u;++l){const f=s[l];l===0&&(r=f.getLayout());const d=o.length,y=f.getEnds();for(let m=0,w=y.length;m<w;++m)y[m]+=d;ms(o,f.getFlatCoordinates()),a.push(y)}e=r,t=o,i=a}e!==void 0&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;ms(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let r=0,s=e.length;r<s;++r)e[r]+=i}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let r=0;r<t;++r)e[r]=this.endss_[r].slice();const i=new th(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,r){return r<Il(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(F_(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),M_(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,r))}containsXY(t,e){return U_(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return H_(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),z0(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,xd(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=a2(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=s2(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new n2(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;X_(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=z0(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=z_(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new th(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const s=this.endss_[t-1];e=s[s.length-1]}const i=this.endss_[t].slice(),r=i[i.length-1];if(e!==0)for(let s=0,o=i.length;s<o;++s)i[s]-=e;return new Mo(this.flatCoordinates.slice(e,r),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),u=l[l.length-1];if(s!==0)for(let d=0,y=l.length;d<y;++d)l[d]-=s;const f=new Mo(e.slice(s,u),t,l);r.push(f),s=u}return r}getType(){return"MultiPolygon"}intersectsExtent(t){return W_(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=O_(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const K_=th;var Op={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Op.read=function(n,t,e,i,r){var s,o,a=r*8-i-1,l=(1<<a)-1,u=l>>1,f=-7,d=e?r-1:0,y=e?-1:1,m=n[t+d];for(d+=y,s=m&(1<<-f)-1,m>>=-f,f+=a;f>0;s=s*256+n[t+d],d+=y,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=i;f>0;o=o*256+n[t+d],d+=y,f-=8);if(s===0)s=1-u;else{if(s===l)return o?NaN:(m?-1:1)*(1/0);o=o+Math.pow(2,i),s=s-u}return(m?-1:1)*o*Math.pow(2,s-i)};Op.write=function(n,t,e,i,r,s){var o,a,l,u=s*8-r-1,f=(1<<u)-1,d=f>>1,y=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=i?0:s-1,w=i?1:-1,S=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+d>=1?t+=y/l:t+=y*Math.pow(2,1-d),t*l>=2&&(o++,l/=2),o+d>=f?(a=0,o=f):o+d>=1?(a=(t*l-1)*Math.pow(2,r),o=o+d):(a=t*Math.pow(2,d-1)*Math.pow(2,r),o=0));r>=8;n[e+m]=a&255,m+=w,a/=256,r-=8);for(o=o<<r|a,u+=r;u>0;n[e+m]=o&255,m+=w,o/=256,u-=8);n[e+m-w]|=S*128};var Z_=En,vc=Op;function En(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}En.Varint=0;En.Fixed64=1;En.Bytes=2;En.Fixed32=5;var Ad=(1<<16)*(1<<16),q0=1/Ad,J_=12,l2=typeof TextDecoder>"u"?null:new TextDecoder("utf8");En.prototype={destroy:function(){this.buf=null},readFields:function(n,t,e){for(e=e||this.length;this.pos<e;){var i=this.readVarint(),r=i>>3,s=this.pos;this.type=i&7,n(r,t,this),this.pos===s&&this.skip(i)}return t},readMessage:function(n,t){return this.readFields(n,t,this.readVarint()+this.pos)},readFixed32:function(){var n=_c(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=G0(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=_c(this.buf,this.pos)+_c(this.buf,this.pos+4)*Ad;return this.pos+=8,n},readSFixed64:function(){var n=_c(this.buf,this.pos)+G0(this.buf,this.pos+4)*Ad;return this.pos+=8,n},readFloat:function(){var n=vc.read(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=vc.read(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var t=this.buf,e,i;return i=t[this.pos++],e=i&127,i<128||(i=t[this.pos++],e|=(i&127)<<7,i<128)||(i=t[this.pos++],e|=(i&127)<<14,i<128)||(i=t[this.pos++],e|=(i&127)<<21,i<128)?e:(i=t[this.pos],e|=(i&15)<<28,Q_(e,n,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2===1?(n+1)/-2:n/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var n=this.readVarint()+this.pos,t=this.pos;return this.pos=n,n-t>=J_&&l2?db(this.buf,t,n):fb(this.buf,t,n)},readBytes:function(){var n=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,n);return this.pos=n,t},readPackedVarint:function(n,t){if(this.type!==En.Bytes)return n.push(this.readVarint(t));var e=Ms(this);for(n=n||[];this.pos<e;)n.push(this.readVarint(t));return n},readPackedSVarint:function(n){if(this.type!==En.Bytes)return n.push(this.readSVarint());var t=Ms(this);for(n=n||[];this.pos<t;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==En.Bytes)return n.push(this.readBoolean());var t=Ms(this);for(n=n||[];this.pos<t;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==En.Bytes)return n.push(this.readFloat());var t=Ms(this);for(n=n||[];this.pos<t;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==En.Bytes)return n.push(this.readDouble());var t=Ms(this);for(n=n||[];this.pos<t;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==En.Bytes)return n.push(this.readFixed32());var t=Ms(this);for(n=n||[];this.pos<t;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==En.Bytes)return n.push(this.readSFixed32());var t=Ms(this);for(n=n||[];this.pos<t;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==En.Bytes)return n.push(this.readFixed64());var t=Ms(this);for(n=n||[];this.pos<t;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==En.Bytes)return n.push(this.readSFixed64());var t=Ms(this);for(n=n||[];this.pos<t;)n.push(this.readSFixed64());return n},skip:function(n){var t=n&7;if(t===En.Varint)for(;this.buf[this.pos++]>127;);else if(t===En.Bytes)this.pos=this.readVarint()+this.pos;else if(t===En.Fixed32)this.pos+=4;else if(t===En.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(n,t){this.writeVarint(n<<3|t)},realloc:function(n){for(var t=this.length||16;t<this.pos+n;)t*=2;if(t!==this.length){var e=new Uint8Array(t);e.set(this.buf),this.buf=e,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),Ua(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),Ua(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),Ua(this.buf,n&-1,this.pos),Ua(this.buf,Math.floor(n*q0),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),Ua(this.buf,n&-1,this.pos),Ua(this.buf,Math.floor(n*q0),this.pos+4),this.pos+=8},writeVarint:function(n){if(n=+n||0,n>268435455||n<0){tb(n,this);return}this.realloc(4),this.buf[this.pos++]=n&127|(n>127?128:0),!(n<=127)&&(this.buf[this.pos++]=(n>>>=7)&127|(n>127?128:0),!(n<=127)&&(this.buf[this.pos++]=(n>>>=7)&127|(n>127?128:0),!(n<=127)&&(this.buf[this.pos++]=n>>>7&127)))},writeSVarint:function(n){this.writeVarint(n<0?-n*2-1:n*2)},writeBoolean:function(n){this.writeVarint(Boolean(n))},writeString:function(n){n=String(n),this.realloc(n.length*4),this.pos++;var t=this.pos;this.pos=pb(this.buf,n,this.pos);var e=this.pos-t;e>=128&&U0(t,e,this),this.pos=t-1,this.writeVarint(e),this.pos+=e},writeFloat:function(n){this.realloc(4),vc.write(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),vc.write(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var t=n.length;this.writeVarint(t),this.realloc(t);for(var e=0;e<t;e++)this.buf[this.pos++]=n[e]},writeRawMessage:function(n,t){this.pos++;var e=this.pos;n(t,this);var i=this.pos-e;i>=128&&U0(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeMessage:function(n,t,e){this.writeTag(n,En.Bytes),this.writeRawMessage(t,e)},writePackedVarint:function(n,t){t.length&&this.writeMessage(n,ib,t)},writePackedSVarint:function(n,t){t.length&&this.writeMessage(n,rb,t)},writePackedBoolean:function(n,t){t.length&&this.writeMessage(n,ab,t)},writePackedFloat:function(n,t){t.length&&this.writeMessage(n,sb,t)},writePackedDouble:function(n,t){t.length&&this.writeMessage(n,ob,t)},writePackedFixed32:function(n,t){t.length&&this.writeMessage(n,lb,t)},writePackedSFixed32:function(n,t){t.length&&this.writeMessage(n,ub,t)},writePackedFixed64:function(n,t){t.length&&this.writeMessage(n,cb,t)},writePackedSFixed64:function(n,t){t.length&&this.writeMessage(n,hb,t)},writeBytesField:function(n,t){this.writeTag(n,En.Bytes),this.writeBytes(t)},writeFixed32Field:function(n,t){this.writeTag(n,En.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(n,t){this.writeTag(n,En.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(n,t){this.writeTag(n,En.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(n,t){this.writeTag(n,En.Fixed64),this.writeSFixed64(t)},writeVarintField:function(n,t){this.writeTag(n,En.Varint),this.writeVarint(t)},writeSVarintField:function(n,t){this.writeTag(n,En.Varint),this.writeSVarint(t)},writeStringField:function(n,t){this.writeTag(n,En.Bytes),this.writeString(t)},writeFloatField:function(n,t){this.writeTag(n,En.Fixed32),this.writeFloat(t)},writeDoubleField:function(n,t){this.writeTag(n,En.Fixed64),this.writeDouble(t)},writeBooleanField:function(n,t){this.writeVarintField(n,Boolean(t))}};function Q_(n,t,e){var i=e.buf,r,s;if(s=i[e.pos++],r=(s&112)>>4,s<128||(s=i[e.pos++],r|=(s&127)<<3,s<128)||(s=i[e.pos++],r|=(s&127)<<10,s<128)||(s=i[e.pos++],r|=(s&127)<<17,s<128)||(s=i[e.pos++],r|=(s&127)<<24,s<128)||(s=i[e.pos++],r|=(s&1)<<31,s<128))return qa(n,r,t);throw new Error("Expected varint not more than 10 bytes")}function Ms(n){return n.type===En.Bytes?n.readVarint()+n.pos:n.pos+1}function qa(n,t,e){return e?t*4294967296+(n>>>0):(t>>>0)*4294967296+(n>>>0)}function tb(n,t){var e,i;if(n>=0?(e=n%4294967296|0,i=n/4294967296|0):(e=~(-n%4294967296),i=~(-n/4294967296),e^4294967295?e=e+1|0:(e=0,i=i+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),eb(e,i,t),nb(i,t)}function eb(n,t,e){e.buf[e.pos++]=n&127|128,n>>>=7,e.buf[e.pos++]=n&127|128,n>>>=7,e.buf[e.pos++]=n&127|128,n>>>=7,e.buf[e.pos++]=n&127|128,n>>>=7,e.buf[e.pos]=n&127}function nb(n,t){var e=(n&7)<<4;t.buf[t.pos++]|=e|((n>>>=3)?128:0),n&&(t.buf[t.pos++]=n&127|((n>>>=7)?128:0),n&&(t.buf[t.pos++]=n&127|((n>>>=7)?128:0),n&&(t.buf[t.pos++]=n&127|((n>>>=7)?128:0),n&&(t.buf[t.pos++]=n&127|((n>>>=7)?128:0),n&&(t.buf[t.pos++]=n&127)))))}function U0(n,t,e){var i=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));e.realloc(i);for(var r=e.pos-1;r>=n;r--)e.buf[r+i]=e.buf[r]}function ib(n,t){for(var e=0;e<n.length;e++)t.writeVarint(n[e])}function rb(n,t){for(var e=0;e<n.length;e++)t.writeSVarint(n[e])}function sb(n,t){for(var e=0;e<n.length;e++)t.writeFloat(n[e])}function ob(n,t){for(var e=0;e<n.length;e++)t.writeDouble(n[e])}function ab(n,t){for(var e=0;e<n.length;e++)t.writeBoolean(n[e])}function lb(n,t){for(var e=0;e<n.length;e++)t.writeFixed32(n[e])}function ub(n,t){for(var e=0;e<n.length;e++)t.writeSFixed32(n[e])}function cb(n,t){for(var e=0;e<n.length;e++)t.writeFixed64(n[e])}function hb(n,t){for(var e=0;e<n.length;e++)t.writeSFixed64(n[e])}function _c(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16)+n[t+3]*16777216}function Ua(n,t,e){n[e]=t,n[e+1]=t>>>8,n[e+2]=t>>>16,n[e+3]=t>>>24}function G0(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16)+(n[t+3]<<24)}function fb(n,t,e){for(var i="",r=t;r<e;){var s=n[r],o=null,a=s>239?4:s>223?3:s>191?2:1;if(r+a>e)break;var l,u,f;a===1?s<128&&(o=s):a===2?(l=n[r+1],(l&192)===128&&(o=(s&31)<<6|l&63,o<=127&&(o=null))):a===3?(l=n[r+1],u=n[r+2],(l&192)===128&&(u&192)===128&&(o=(s&15)<<12|(l&63)<<6|u&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):a===4&&(l=n[r+1],u=n[r+2],f=n[r+3],(l&192)===128&&(u&192)===128&&(f&192)===128&&(o=(s&15)<<18|(l&63)<<12|(u&63)<<6|f&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,a=1):o>65535&&(o-=65536,i+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),i+=String.fromCharCode(o),r+=a}return i}function db(n,t,e){return l2.decode(n.subarray(t,e))}function pb(n,t,e){for(var i=0,r,s;i<t.length;i++){if(r=t.charCodeAt(i),r>55295&&r<57344)if(s)if(r<56320){n[e++]=239,n[e++]=191,n[e++]=189,s=r;continue}else r=s-55296<<10|r-56320|65536,s=null;else{r>56319||i+1===t.length?(n[e++]=239,n[e++]=191,n[e++]=189):s=r;continue}else s&&(n[e++]=239,n[e++]=191,n[e++]=189,s=null);r<128?n[e++]=r:(r<2048?n[e++]=r>>6|192:(r<65536?n[e++]=r>>12|224:(n[e++]=r>>18|240,n[e++]=r>>12&63|128),n[e++]=r>>6&63|128),n[e++]=r&63|128)}return e}class Dp extends ws{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new Dp(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Xn(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=wn(t,Ye.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?gb(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function gb(n){if(typeof n=="function")return n;let t;return Array.isArray(n)?t=n:(hn(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[n]),function(){return t}}const jp=Dp;class Dh extends Bo{constructor(t,e,i){super(),i!==void 0&&e===void 0?this.setFlatCoordinates(i,t):(e=e||0,this.setCenterAndRadius(t,e,i))}clone(){const t=new Dh(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,r){const s=this.flatCoordinates,o=t-s[0],a=e-s[1],l=o*o+a*a;if(l<r){if(l===0)for(let u=0;u<this.stride;++u)i[u]=s[u];else{const u=this.getRadius()/Math.sqrt(l);i[0]=s[0]+u*o,i[1]=s[1]+u*a;for(let f=2;f<this.stride;++f)i[f]=s[f]}return i.length=this.stride,l}return r}containsXY(t,e){const i=this.flatCoordinates,r=t-i[0],s=e-i[1];return r*r+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(t){const e=this.flatCoordinates,i=e[this.stride]-e[0];return bs(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return"Circle"}intersectsExtent(t){const e=this.getExtent();if(li(t,e)){const i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||t[1]<=i[1]&&t[3]>=i[1]?!0:fp(t,this.intersectsCoordinate.bind(this))}return!1}setCenter(t){const e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],r=t.slice();r[e]=r[0]+i;for(let s=1;s<e;++s)r[e+s]=t[s];this.setFlatCoordinates(this.layout,r),this.changed()}setCenterAndRadius(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const r=this.flatCoordinates;let s=Km(r,0,t,this.stride);r[s++]=r[0]+e;for(let o=1,a=this.stride;o<a;++o)r[s++]=r[o];r.length=s,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){const i=this.getCenter(),r=this.getStride();this.setCenter(Cp(i,0,i.length,r,t,e,i)),this.changed()}}Dh.prototype.transform;const mb=Dh,W0=Tr();class vu{constructor(t,e,i,r,s){this.styleFunction,this.extent_,this.id_=s,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=r}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?km(this.flatCoordinates_):hp(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=ya(this.getExtent());this.flatInteriorPoints_=Fp(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=a2(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=s2(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Kc(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const i=this.ends_;for(let r=0,s=i.length;r<s;++r){const o=i[r],a=Kc(t,e,o,2,.5);ms(this.flatMidpoints_,a),e=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return 2}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=Di(t);const e=t.getExtent(),i=t.getWorldExtent();if(e&&i){const r=Nr(i)/Nr(e);Hs(W0,i[0],i[3],r,-r,0,0,0),No(this.flatCoordinates_,0,this.flatCoordinates_.length,2,W0,this.flatCoordinates_)}}getEnds(){return this.ends_}}vu.prototype.getEndss=vu.prototype.getEnds;vu.prototype.getFlatCoordinates=vu.prototype.getOrientedFlatCoordinates;const Ld=vu;class yb extends l_{constructor(t){super(),t=t||{},this.dataProjection=new up({code:"",units:"tile-pixels"}),this.featureClass_=t.featureClass?t.featureClass:Ld,this.geometryName_=t.geometryName,this.layerName_=t.layerName?t.layerName:"layer",this.layers_=t.layers?t.layers:null,this.idProperty_=t.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(t,e,i,r){t.pos=e.geometry;const s=t.readVarint()+t.pos;let o=1,a=0,l=0,u=0,f=0,d=0;for(;t.pos<s;){if(!a){const y=t.readVarint();o=y&7,a=y>>3}if(a--,o===1||o===2)l+=t.readSVarint(),u+=t.readSVarint(),o===1&&f>d&&(r.push(f),d=f),i.push(l,u),f+=2;else if(o===7)f>d&&(i.push(i[d],i[d+1]),f+=2);else throw new Error("Invalid command found in the PBF")}f>d&&(r.push(f),d=f)}createFeature_(t,e,i){const r=e.type;if(r===0)return null;let s;const o=e.properties;let a;this.idProperty_?(a=o[this.idProperty_],delete o[this.idProperty_]):a=e.id,o[this.layerName_]=e.layer.name;const l=[],u=[];this.readRawGeometry_(t,e,l,u);const f=xb(r,u.length);if(this.featureClass_===Ld)s=new this.featureClass_(f,l,u,o,a),s.transform(i.dataProjection);else{let d;if(f=="Polygon"){const w=Y_(l,u);d=w.length>1?new K_(l,"XY",w):new Mo(l,"XY",u)}else d=f==="Point"?new Sl(l,"XY"):f==="LineString"?new Cd(l,"XY"):f==="MultiPoint"?new n2(l,"XY"):f==="MultiLineString"?new V_(l,"XY",u):null;const y=this.featureClass_;s=new y,this.geometryName_&&s.setGeometryName(this.geometryName_);const m=u_(d,!1,i);s.setGeometry(m),a!==void 0&&s.setId(a),s.setProperties(o,!0)}return s}getType(){return"arraybuffer"}readFeatures(t,e){const i=this.layers_;e=this.adaptOptions(e);const r=Di(e.dataProjection);r.setWorldExtent(e.extent),e.dataProjection=r;const s=new Z_(t),o=s.readFields(vb,{}),a=[];for(const l in o){if(i&&!i.includes(l))continue;const u=o[l],f=u?[0,0,u.extent,u.extent]:null;r.setExtent(f);for(let d=0,y=u.length;d<y;++d){const m=wb(s,u,d),w=this.createFeature_(s,m,e);w!==null&&a.push(w)}}return a}readProjection(t){return this.dataProjection}setLayers(t){this.layers_=t}}function vb(n,t,e){if(n===3){const i={keys:[],values:[],features:[]},r=e.readVarint()+e.pos;e.readFields(_b,i,r),i.length=i.features.length,i.length&&(t[i.name]=i)}}function _b(n,t,e){if(n===15)t.version=e.readVarint();else if(n===1)t.name=e.readString();else if(n===5)t.extent=e.readVarint();else if(n===2)t.features.push(e.pos);else if(n===3)t.keys.push(e.readString());else if(n===4){let i=null;const r=e.readVarint()+e.pos;for(;e.pos<r;)n=e.readVarint()>>3,i=n===1?e.readString():n===2?e.readFloat():n===3?e.readDouble():n===4?e.readVarint64():n===5?e.readVarint():n===6?e.readSVarint():n===7?e.readBoolean():null;t.values.push(i)}}function bb(n,t,e){if(n==1)t.id=e.readVarint();else if(n==2){const i=e.readVarint()+e.pos;for(;e.pos<i;){const r=t.layer.keys[e.readVarint()],s=t.layer.values[e.readVarint()];t.properties[r]=s}}else n==3?t.type=e.readVarint():n==4&&(t.geometry=e.pos)}function wb(n,t,e){n.pos=t.features[e];const i=n.readVarint()+n.pos,r={layer:t,type:0,properties:{}};return n.readFields(bb,r,i),r}function xb(n,t){let e;return n===1?e=t===1?"Point":"MultiPoint":n===2?e=t===1?"LineString":"MultiLineString":n===3&&(e="Polygon"),e}const Sb=yb,Nn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Cb extends ws{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[Nn.OPACITY]=t.opacity!==void 0?t.opacity:1,hn(typeof e[Nn.OPACITY]=="number","Layer opacity must be a number"),e[Nn.VISIBLE]=t.visible!==void 0?t.visible:!0,e[Nn.Z_INDEX]=t.zIndex,e[Nn.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[Nn.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[Nn.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[Nn.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return e.opacity=di(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=i===void 0&&!e.managed?1/0:i,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return Qe()}getLayerStatesArray(t){return Qe()}getExtent(){return this.get(Nn.EXTENT)}getMaxResolution(){return this.get(Nn.MAX_RESOLUTION)}getMinResolution(){return this.get(Nn.MIN_RESOLUTION)}getMinZoom(){return this.get(Nn.MIN_ZOOM)}getMaxZoom(){return this.get(Nn.MAX_ZOOM)}getOpacity(){return this.get(Nn.OPACITY)}getSourceState(){return Qe()}getVisible(){return this.get(Nn.VISIBLE)}getZIndex(){return this.get(Nn.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Nn.EXTENT,t)}setMaxResolution(t){this.set(Nn.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Nn.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Nn.MAX_ZOOM,t)}setMinZoom(t){this.set(Nn.MIN_ZOOM,t)}setOpacity(t){hn(typeof t=="number","Layer opacity must be a number"),this.set(Nn.OPACITY,t)}setVisible(t){this.set(Nn.VISIBLE,t)}setZIndex(t){this.set(Nn.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const u2=Cb,ys={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ii={ANIMATING:0,INTERACTING:1},Gr={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},c2=42,zp=256;function V0(n,t,e){return function(i,r,s,o,a){if(!i)return;if(!r&&!t)return i;const l=t?0:s[0]*r,u=t?0:s[1]*r,f=a?a[0]:0,d=a?a[1]:0;let y=n[0]+l/2+f,m=n[2]-l/2+f,w=n[1]+u/2+d,S=n[3]-u/2+d;y>m&&(y=(m+y)/2,m=y),w>S&&(w=(S+w)/2,S=w);let L=di(i[0],y,m),E=di(i[1],w,S);if(o&&e&&r){const I=30*r;L+=-I*Math.log(1+Math.max(0,y-i[0])/I)+I*Math.log(1+Math.max(0,i[0]-m)/I),E+=-I*Math.log(1+Math.max(0,w-i[1])/I)+I*Math.log(1+Math.max(0,i[1]-S)/I)}return[L,E]}}function Eb(n){return n}function Bp(n,t,e,i){const r=Wn(t)/e[0],s=Nr(t)/e[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function qp(n,t,e){let i=Math.min(n,t);const r=50;return i*=Math.log(1+r*Math.max(0,n/t-1))/r+1,e&&(i=Math.max(i,e),i/=Math.log(1+r*Math.max(0,e/n-1))/r+1),di(i,e/2,t*2)}function Ab(n,t,e,i){return t=t!==void 0?t:!0,function(r,s,o,a){if(r!==void 0){const l=n[0],u=n[n.length-1],f=e?Bp(l,e,o,i):l;if(a)return t?qp(r,f,u):di(r,u,f);const d=Math.min(f,r),y=Math.floor(bp(n,d,s));return n[y]>f&&y<n.length-1?n[y+1]:n[y]}}}function Lb(n,t,e,i,r,s){return i=i!==void 0?i:!0,e=e!==void 0?e:0,function(o,a,l,u){if(o!==void 0){const f=r?Bp(t,r,l,s):t;if(u)return i?qp(o,f,e):di(o,e,f);const d=1e-9,y=Math.ceil(Math.log(t/f)/Math.log(n)-d),m=-a*(.5-d)+.5,w=Math.min(f,o),S=Math.floor(Math.log(t/w)/Math.log(n)+m),L=Math.max(y,S),E=t/Math.pow(n,L);return di(E,e,f)}}}function H0(n,t,e,i,r){return e=e!==void 0?e:!0,function(s,o,a,l){if(s!==void 0){const u=i?Bp(n,i,a,r):n;return!e||!l?di(s,t,u):qp(s,u,t)}}}function Up(n){if(n!==void 0)return 0}function $0(n){if(n!==void 0)return n}function Tb(n){const t=2*Math.PI/n;return function(e,i){if(i)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function Ib(n){return n=n||Dc(5),function(t,e){if(e)return t;if(t!==void 0)return Math.abs(t)<=n?0:t}}function h2(n){return Math.pow(n,3)}function Rl(n){return 1-h2(1-n)}function Rb(n){return 3*n*n-2*n*n*n}function Nb(n){return n}const Lf=0;class Pb extends ws{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=yp(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&jm(),t.center&&(t.center=zs(t.center,this.projection_)),t.extent&&(t.extent=ua(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const a in Gr)delete e[a];this.setProperties(e,!0);const i=Fb(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const r=kb(t),s=i.constraint,o=Mb(t);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const r=t||[0,0,0,0];e=e||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-e[3]+e[1]-r[1]),a=s/2*(r[0]-e[0]+e[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let i=0;i<e.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=zs(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=zs(r.anchor,this.getProjection())),e[i]=r}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,i;e>1&&typeof arguments[e-1]=="function"&&(i=arguments[e-1],--e);let r=0;for(;r<e&&!this.isDef();++r){const f=arguments[r];f.center&&this.setCenterInternal(f.center),f.zoom!==void 0?this.setZoom(f.zoom):f.resolution&&this.setResolution(f.resolution),f.rotation!==void 0&&this.setRotation(f.rotation)}if(r===e){i&&bc(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const u=[];for(;r<e;++r){const f=arguments[r],d={start:s,complete:!1,anchor:f.anchor,duration:f.duration!==void 0?f.duration:1e3,easing:f.easing||Rb,callback:i};if(f.center&&(d.sourceCenter=o,d.targetCenter=f.center.slice(),o=d.targetCenter),f.zoom!==void 0?(d.sourceResolution=a,d.targetResolution=this.getResolutionForZoom(f.zoom),a=d.targetResolution):f.resolution&&(d.sourceResolution=a,d.targetResolution=f.resolution,a=d.targetResolution),f.rotation!==void 0){d.sourceRotation=l;const y=ul(f.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+y,l=d.targetRotation}Ob(d)?d.complete=!0:s+=d.duration,u.push(d)}this.animations_.push(u),this.setHint(ii.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ii.ANIMATING]>0}getInteracting(){return this.hints_[ii.INTERACTING]>0}cancelAnimations(){this.setHint(ii.ANIMATING,-this.hints_[ii.ANIMATING]);let t;for(let e=0,i=this.animations_.length;e<i;++e){const r=this.animations_[e];if(r[0].callback&&bc(r[0].callback,!1),!t)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const u=t-l.start;let f=l.duration>0?u/l.duration:1;f>=1?(l.complete=!0,f=1):s=!1;const d=l.easing(f);if(l.sourceCenter){const y=l.sourceCenter[0],m=l.sourceCenter[1],w=l.targetCenter[0],S=l.targetCenter[1];this.nextCenter_=l.targetCenter;const L=y+d*(w-y),E=m+d*(S-m);this.targetCenter_=[L,E]}if(l.sourceResolution&&l.targetResolution){const y=d===1?l.targetResolution:l.sourceResolution+d*(l.targetResolution-l.sourceResolution);if(l.anchor){const m=this.getViewportSize_(this.getRotation()),w=this.constraints_.resolution(y,0,m,!0);this.targetCenter_=this.calculateCenterZoom(w,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const y=d===1?ul(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+d*(l.targetRotation-l.sourceRotation);if(l.anchor){const m=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(m,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=y}if(this.applyTargetState_(!0),e=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(ii.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&bc(o,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-e[0],r[1]-e[1]],pp(i,t-this.getRotation()),Zv(i,e)),i}calculateCenterZoom(t,e){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=e[0]-t*(e[0]-r[0])/s,a=e[1]-t*(e[1]-r[1])/s;i=[o,a]}return i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],r=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(r*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&wd(t,this.getProjection())}getCenterInternal(){return this.get(Gr.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return Um(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();hn(e,"The view center is not defined");const i=this.getResolution();hn(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return hn(r!==void 0,"The view rotation is not defined"),vd(e,i,r,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Gr.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(ua(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=Wn(t)/e[0],r=Nr(t)/e[1];return Math.max(i,r)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(e/i)/Math.log(t);return function(s){return e/Math.pow(t,s*r)}}getRotation(){return this.get(Gr.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/e;return function(o){return Math.log(i/o)/e/s}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=Tf(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],e,i)}return{center:r.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,i,r;if(this.resolutions_){const s=bp(this.resolutions_,t,1);e=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return e+Math.log(i/t)/Math.log(r)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=di(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,di(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(hn(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){hn(!Du(t),"Cannot fit empty extent provided as `geometry`");const r=ua(t,this.getProjection());i=B0(r)}else if(t.getType()==="Circle"){const r=ua(t.getExtent(),this.getProjection());i=B0(r),i.rotate(this.getRotation(),ya(r))}else i=t;this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),r=Math.sin(-e),s=t.getFlatCoordinates(),o=t.getStride();let a=1/0,l=1/0,u=-1/0,f=-1/0;for(let d=0,y=s.length;d<y;d+=o){const m=s[d]*i-s[d+1]*r,w=s[d]*r+s[d+1]*i;a=Math.min(a,m),l=Math.min(l,w),u=Math.max(u,m),f=Math.max(f,w)}return[a,l,u,f]}fitInternal(t,e){e=e||{};let i=e.size;i||(i=this.getViewportSizeMinusPadding_());const r=e.padding!==void 0?e.padding:[0,0,0,0],s=e.nearest!==void 0?e.nearest:!1;let o;e.minResolution!==void 0?o=e.minResolution:e.maxZoom!==void 0?o=this.getResolutionForZoom(e.maxZoom):o=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const u=this.getRotation(),f=Math.sin(u),d=Math.cos(u),y=ya(a);y[0]+=(r[1]-r[3])/2*l,y[1]+=(r[0]-r[2])/2*l;const m=y[0]*d-y[1]*f,w=y[1]*d+y[0]*f,S=this.getConstrainedCenter([m,w],l),L=e.callback?e.callback:xl;e.duration!==void 0?this.animateInternal({resolution:l,center:S,duration:e.duration,easing:e.easing},L):(this.targetResolution_=l,this.targetCenter_=S,this.applyTargetState_(!1,!0),bc(L,!0))}centerOn(t,e,i){this.centerOnInternal(zs(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(Tf(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,r){let s;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-i),l=Tf(t,r,[a[0]/2+o[3],a[1]/2+o[0]],e,i);s=[t[0]-l[0],t[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=wd(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&zs(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,r,i);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=zs(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(r,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&zs(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(Gr.ROTATION)!==r&&this.set(Gr.ROTATION,r),this.get(Gr.RESOLUTION)!==o&&(this.set(Gr.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Gr.CENTER)||!Xc(this.get(Gr.CENTER),a))&&this.set(Gr.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=t!==void 0?t:200;const r=e||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!Xc(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:t,easing:Rl,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ii.INTERACTING,1)}endInteraction(t,e,i){i=i&&zs(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){!this.getInteracting()||(this.setHint(ii.INTERACTING,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}}function bc(n,t){setTimeout(function(){n(t)},0)}function kb(n){if(n.extent!==void 0){const e=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return V0(n.extent,n.constrainOnlyCenter,e)}const t=yp(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,V0(e,!1,!1)}return Eb}function Fb(n){let t,e,i,o=n.minZoom!==void 0?n.minZoom:Lf,a=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,u=n.multiWorld!==void 0?n.multiWorld:!1,f=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,d=n.showFullExtent!==void 0?n.showFullExtent:!1,y=yp(n.projection,"EPSG:3857"),m=y.getExtent();let w=n.constrainOnlyCenter,S=n.extent;if(!u&&!S&&y.isGlobal()&&(w=!1,S=m),n.resolutions!==void 0){const L=n.resolutions;e=L[o],i=L[a]!==void 0?L[a]:L[L.length-1],n.constrainResolution?t=Ab(L,f,!w&&S,d):t=H0(e,i,f,!w&&S,d)}else{const E=(m?Math.max(Wn(m),Nr(m)):360*pu.degrees/y.getMetersPerUnit())/zp/Math.pow(2,Lf),I=E/Math.pow(2,28-Lf);e=n.maxResolution,e!==void 0?o=0:e=E/Math.pow(l,o),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=e/Math.pow(l,a):i=E/Math.pow(l,a):i=I),a=o+Math.floor(Math.log(e/i)/Math.log(l)),i=e/Math.pow(l,a-o),n.constrainResolution?t=Lb(l,e,i,f,!w&&S,d):t=H0(e,i,f,!w&&S,d)}return{constraint:t,maxResolution:e,minResolution:i,minZoom:o,zoomFactor:l}}function Mb(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const e=n.constrainRotation;return e===void 0||e===!0?Ib():e===!1?$0:typeof e=="number"?Tb(e):$0}return Up}function Ob(n){return!(n.sourceCenter&&n.targetCenter&&!Xc(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function Tf(n,t,e,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=n[0]*s-n[1]*o,l=n[1]*s+n[0]*o;a+=(t[0]/2-e[0])*i,l+=(e[1]-t[1]/2)*i,o=-o;const u=a*s-l*o,f=l*s+a*o;return[u,f]}const cs=Pb;class Db extends u2{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Nn.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(Nn.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Xn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=wn(t,Ye.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e;const i=this.getMapInternal();!t&&i&&(t=i.getView()),t instanceof cs?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t,!e.layerStatesArray&&i&&(e.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;e.layerStatesArray?r=e.layerStatesArray.find(o=>o.layer===this):r=this.getLayerState();const s=this.getExtent();return Gp(r,e.viewState)&&(!s||li(s,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const i=this.getSource();if(i&&(e=i.getAttributions()),!e)return[];const r=t instanceof cs?t.getViewStateAndExtent():t;let s=e(r);return Array.isArray(s)||(s=[s]),s}render(t,e){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,e)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(Nn.MAP,t)}getMapInternal(){return this.get(Nn.MAP)}setMap(t){this.mapPrecomposeKey_&&(Xn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Xn(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=wn(t,ys.PRECOMPOSE,function(e){const r=e.frameState.layerStatesArray,s=this.getLayerState(!1);hn(!r.some(function(o){return o.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),r.push(s)},this),this.mapRenderKey_=wn(this,Ye.CHANGE,t.render,t),this.changed())}setSource(t){this.set(Nn.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Gp(n,t){if(!n.visible)return!1;const e=t.resolution;if(e<n.minResolution||e>=n.maxResolution)return!1;const i=t.zoom;return i>n.minZoom&&i<=n.maxZoom}const Wp=Db;function jb(n,t,e,i,r){f2(n,t,e||0,i||n.length-1,r||zb)}function f2(n,t,e,i,r){for(;i>e;){if(i-e>600){var s=i-e+1,o=t-e+1,a=Math.log(s),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),f=Math.max(e,Math.floor(t-o*l/s+u)),d=Math.min(i,Math.floor(t+(s-o)*l/s+u));f2(n,t,f,d,r)}var y=n[t],m=e,w=i;for(Ql(n,e,t),r(n[i],y)>0&&Ql(n,e,i);m<w;){for(Ql(n,m,w),m++,w--;r(n[m],y)<0;)m++;for(;r(n[w],y)>0;)w--}r(n[e],y)===0?Ql(n,e,w):(w++,Ql(n,w,i)),w<=t&&(e=w+1),t<=w&&(i=w-1)}}function Ql(n,t,e){var i=n[t];n[t]=n[e],n[e]=i}function zb(n,t){return n<t?-1:n>t?1:0}class d2{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const i=[];if(!xc(t,e))return i;const r=this.toBBox,s=[];for(;e;){for(let o=0;o<e.children.length;o++){const a=e.children[o],l=e.leaf?r(a):a;xc(t,l)&&(e.leaf?i.push(a):Rf(t,l)?this._all(a,i):s.push(a))}e=s.pop()}return i}collides(t){let e=this.data;if(!xc(t,e))return!1;const i=[];for(;e;){for(let r=0;r<e.children.length;r++){const s=e.children[r],o=e.leaf?this.toBBox(s):s;if(xc(t,o)){if(e.leaf||Rf(t,o))return!0;i.push(s)}}e=i.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const i=this.data;this.data=e,e=i}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Ya([]),this}remove(t,e){if(!t)return this;let i=this.data;const r=this.toBBox(t),s=[],o=[];let a,l,u;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),u=!0),i.leaf){const f=Bb(t,i.children,e);if(f!==-1)return i.children.splice(f,1),s.push(i),this._condense(s),this}!u&&!i.leaf&&Rf(i,r)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],u=!1):i=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const i=[];for(;t;)t.leaf?e.push(...t.children):i.push(...t.children),t=i.pop();return e}_build(t,e,i,r){const s=i-e+1;let o=this._maxEntries,a;if(s<=o)return a=Ya(t.slice(e,i+1)),Ga(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=Ya([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),u=l*Math.ceil(Math.sqrt(o));X0(t,e,i,u,this.compareMinX);for(let f=e;f<=i;f+=u){const d=Math.min(f+u-1,i);X0(t,f,d,l,this.compareMinY);for(let y=f;y<=d;y+=l){const m=Math.min(y+l-1,d);a.children.push(this._build(t,y,m,r-1))}}return Ga(a,this.toBBox),a}_chooseSubtree(t,e,i,r){for(;r.push(e),!(e.leaf||r.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<e.children.length;l++){const u=e.children[l],f=If(u),d=Gb(t,u)-f;d<o?(o=d,s=f<s?f:s,a=u):d===o&&f<s&&(s=f,a=u)}e=a||e.children[0]}return e}_insert(t,e,i){const r=i?t:this.toBBox(t),s=[],o=this._chooseSubtree(r,this.data,e,s);for(o.children.push(t),ou(o,r);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(r,s,e)}_split(t,e){const i=t[e],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),a=Ya(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,Ga(i,this.toBBox),Ga(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)}_splitRoot(t,e){this.data=Ya([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Ga(this.data,this.toBBox)}_chooseSplitIndex(t,e,i){let r,s=1/0,o=1/0;for(let a=e;a<=i-e;a++){const l=su(t,0,a,this.toBBox),u=su(t,a,i,this.toBBox),f=Wb(l,u),d=If(l)+If(u);f<s?(s=f,r=a,o=d<o?d:o):f===s&&d<o&&(o=d,r=a)}return r||i-e}_chooseSplitAxis(t,e,i){const r=t.leaf?this.compareMinX:qb,s=t.leaf?this.compareMinY:Ub,o=this._allDistMargin(t,e,i,r),a=this._allDistMargin(t,e,i,s);o<a&&t.children.sort(r)}_allDistMargin(t,e,i,r){t.children.sort(r);const s=this.toBBox,o=su(t,0,e,s),a=su(t,i-e,i,s);let l=wc(o)+wc(a);for(let u=e;u<i-e;u++){const f=t.children[u];ou(o,t.leaf?s(f):f),l+=wc(o)}for(let u=i-e-1;u>=e;u--){const f=t.children[u];ou(a,t.leaf?s(f):f),l+=wc(a)}return l}_adjustParentBBoxes(t,e,i){for(let r=i;r>=0;r--)ou(e[r],t)}_condense(t){for(let e=t.length-1,i;e>=0;e--)t[e].children.length===0?e>0?(i=t[e-1].children,i.splice(i.indexOf(t[e]),1)):this.clear():Ga(t[e],this.toBBox)}}function Bb(n,t,e){if(!e)return t.indexOf(n);for(let i=0;i<t.length;i++)if(e(n,t[i]))return i;return-1}function Ga(n,t){su(n,0,n.children.length,t,n)}function su(n,t,e,i,r){r||(r=Ya(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=t;s<e;s++){const o=n.children[s];ou(r,n.leaf?i(o):o)}return r}function ou(n,t){return n.minX=Math.min(n.minX,t.minX),n.minY=Math.min(n.minY,t.minY),n.maxX=Math.max(n.maxX,t.maxX),n.maxY=Math.max(n.maxY,t.maxY),n}function qb(n,t){return n.minX-t.minX}function Ub(n,t){return n.minY-t.minY}function If(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function wc(n){return n.maxX-n.minX+(n.maxY-n.minY)}function Gb(n,t){return(Math.max(t.maxX,n.maxX)-Math.min(t.minX,n.minX))*(Math.max(t.maxY,n.maxY)-Math.min(t.minY,n.minY))}function Wb(n,t){const e=Math.max(n.minX,t.minX),i=Math.max(n.minY,t.minY),r=Math.min(n.maxX,t.maxX),s=Math.min(n.maxY,t.maxY);return Math.max(0,r-e)*Math.max(0,s-i)}function Rf(n,t){return n.minX<=t.minX&&n.minY<=t.minY&&t.maxX<=n.maxX&&t.maxY<=n.maxY}function xc(n,t){return t.minX<=n.maxX&&t.minY<=n.maxY&&t.maxX>=n.minX&&t.maxY>=n.minY}function Ya(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function X0(n,t,e,i,r){const s=[t,e];for(;s.length;){if(e=s.pop(),t=s.pop(),e-t<=i)continue;const o=t+Math.ceil((e-t)/i/2)*i;jb(n,o,t,e,r),s.push(t,o,o,e)}}const Gn={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Y0(n){return n[0]>0&&n[1]>0}function Vb(n,t,e){return e===void 0&&(e=[0,0]),e[0]=n[0]*t+.5|0,e[1]=n[1]*t+.5|0,e}function Wi(n,t){return Array.isArray(n)?n:(t===void 0?t=[n,n]:(t[0]=n,t[1]=n),t)}class Vp{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Wi(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Vp({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Qe()}getImage(t){return Qe()}getHitDetectionImage(){return Qe()}getPixelRatio(t){return 1}getImageState(){return Qe()}getImageSize(){return Qe()}getOrigin(){return Qe()}getSize(){return Qe()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Wi(t)}listenImageChange(t){Qe()}load(){Qe()}unlistenImageChange(t){Qe()}}const p2=Vp,Hb=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,$b=/^([a-z]*)$|^hsla?\(.*\)$/i;function g2(n){return typeof n=="string"?n:m2(n)}function Xb(n){const t=document.createElement("div");if(t.style.color=n,t.style.color!==""){document.body.appendChild(t);const e=getComputedStyle(t).color;return document.body.removeChild(t),e}return""}const Yb=function(){const t={};let e=0;return function(i){let r;if(t.hasOwnProperty(i))r=t[i];else{if(e>=1024){let s=0;for(const o in t)(s++&3)===0&&(delete t[o],--e)}r=Kb(i),t[i]=r,++e}return r}}();function eh(n){return Array.isArray(n)?n:Yb(n)}function Kb(n){let t,e,i,r,s;if($b.exec(n)&&(n=Xb(n)),Hb.exec(n)){const o=n.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;t=parseInt(n.substr(1+0*a,a),16),e=parseInt(n.substr(1+1*a,a),16),i=parseInt(n.substr(1+2*a,a),16),l?r=parseInt(n.substr(1+3*a,a),16):r=255,a==1&&(t=(t<<4)+t,e=(e<<4)+e,i=(i<<4)+i,l&&(r=(r<<4)+r)),s=[t,e,i,r/255]}else if(n.startsWith("rgba("))s=n.slice(5,-1).split(",").map(Number),K0(s);else if(n.startsWith("rgb("))s=n.slice(4,-1).split(",").map(Number),s.push(1),K0(s);else throw new Error("Invalid color");return s}function K0(n){return n[0]=di(n[0]+.5|0,0,255),n[1]=di(n[1]+.5|0,0,255),n[2]=di(n[2]+.5|0,0,255),n[3]=di(n[3],0,1),n}function m2(n){let t=n[0];t!=(t|0)&&(t=t+.5|0);let e=n[1];e!=(e|0)&&(e=e+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*100)/100;return"rgba("+t+","+e+","+i+","+r+")"}function fs(n){return Array.isArray(n)?m2(n):n}function ji(n,t,e,i){let r;return e&&e.length?r=e.shift():wp?r=new OffscreenCanvas(n||300,t||300):r=document.createElement("canvas"),n&&(r.width=n),t&&(r.height=t),r.getContext("2d",i)}function ju(n){const t=n.canvas;t.width=1,t.height=1,n.clearRect(0,0,1,1)}function Z0(n,t){const e=t.parentNode;e&&e.replaceChild(n,t)}function Td(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function Zb(n){for(;n.lastChild;)n.removeChild(n.lastChild)}function Jb(n,t){const e=n.childNodes;for(let i=0;;++i){const r=e[i],s=t[i];if(!r&&!s)break;if(r!==s){if(!r){n.appendChild(s);continue}if(!s){n.removeChild(r),--i;continue}n.insertBefore(s,r)}}}const Sc="ol-hidden",jh="ol-unselectable",Hp="ol-control",J0="ol-collapsed",Qb=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Q0=["style","variant","weight","size","lineHeight","family"],y2=function(n){const t=n.match(Qb);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=Q0.length;i<r;++i){const s=t[i+1];s!==void 0&&(e[Q0[i]]=s)}return e.families=e.family.split(/,\s?/),e},v2="10px sans-serif",Qi="#000",Cl="round",Us=[],Gs=0,El="round",_u=10,bu="#000",wu="center",nh="middle",ha=[0,0,0,0],xu=1,Bs=new ws;let Ka=null,Id;const Rd={},tw=function(){const t="32px ",e=["monospace","serif"],i=e.length,r="wmytzilWMYTZIL@#/&?$%10\uF013";let s,o;function a(u,f,d){let y=!0;for(let m=0;m<i;++m){const w=e[m];if(o=ih(u+" "+f+" "+t+w,r),d!=w){const S=ih(u+" "+f+" "+t+d+","+w,r);y=y&&S!=o}}return!!y}function l(){let u=!0;const f=Bs.getKeys();for(let d=0,y=f.length;d<y;++d){const m=f[d];Bs.get(m)<100&&(a.apply(this,m.split(`
`))?(Mu(Rd),Ka=null,Id=void 0,Bs.set(m,100)):(Bs.set(m,Bs.get(m)+1,!0),u=!1))}u&&(clearInterval(s),s=void 0)}return function(u){const f=y2(u);if(!f)return;const d=f.families;for(let y=0,m=d.length;y<m;++y){const w=d[y],S=f.style+`
`+f.weight+`
`+w;Bs.get(S)===void 0&&(Bs.set(S,100,!0),a(f.style,f.weight,w)||(Bs.set(S,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),ew=function(){let n;return function(t){let e=Rd[t];if(e==null){if(wp){const i=y2(t),r=_2(t,"\u017Dg");e=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=t,document.body.appendChild(n),e=n.offsetHeight,document.body.removeChild(n);Rd[t]=e}return e}}();function _2(n,t){return Ka||(Ka=ji(1,1)),n!=Id&&(Ka.font=n,Id=Ka.font),Ka.measureText(t)}function ih(n,t){return _2(n,t).width}function t1(n,t,e){if(t in e)return e[t];const i=t.split(`
`).reduce((r,s)=>Math.max(r,ih(n,s)),0);return e[t]=i,i}function nw(n,t){const e=[],i=[],r=[];let s=0,o=0,a=0,l=0;for(let u=0,f=t.length;u<=f;u+=2){const d=t[u];if(d===`
`||u===f){s=Math.max(s,o),r.push(o),o=0,a+=l;continue}const y=t[u+1]||n.font,m=ih(y,d);e.push(m),o+=m;const w=ew(y);i.push(w),l=Math.max(l,w)}return{width:s,height:a,widths:e,heights:i,lineWidths:r}}function iw(n,t,e,i,r,s,o,a,l,u,f){n.save(),e!==1&&(n.globalAlpha*=e),t&&n.transform.apply(n,t),i.contextInstructions?(n.translate(l,u),n.scale(f[0],f[1]),rw(i,n)):f[0]<0||f[1]<0?(n.translate(l,u),n.scale(f[0],f[1]),n.drawImage(i,r,s,o,a,0,0,o,a)):n.drawImage(i,r,s,o,a,l,u,o*f[0],a*f[1]),n.restore()}function rw(n,t){const e=n.contextInstructions;for(let i=0,r=e.length;i<r;i+=2)Array.isArray(e[i+1])?t[e[i]].apply(t,e[i+1]):t[e[i]]=e[i+1]}class $p extends p2{constructor(t){const e=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:e,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new $p({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const i=this.renderOptions_,r=ji(i.size*t,i.size*t);this.draw_(i,r,t),e=r.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return Gn.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const at=r;r=s,s=at}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),u=Math.sqrt(s*s-l*l),f=r-u,d=Math.sqrt(l*l+f*f),y=d/l;if(t==="miter"&&y<=i)return y*e;const m=e/2/y,w=e/2*(f/d),L=Math.sqrt((r+m)*(r+m)+w*w)-r;if(this.radius2_===void 0||t==="bevel")return L*2;const E=r*Math.sin(a),I=Math.sqrt(r*r-E*E),j=s-I,Z=Math.sqrt(E*E+j*j)/E;if(Z<=i){const at=Z*e/2-s-r;return 2*Math.max(L,at)}return L*2}createRenderOptions(){let t=Cl,e=El,i=0,r=null,s=0,o,a=0;this.stroke_&&(o=this.stroke_.getColor(),o===null&&(o=bu),o=fs(o),a=this.stroke_.getWidth(),a===void 0&&(a=xu),r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),e===void 0&&(e=El),t=this.stroke_.getLineCap(),t===void 0&&(t=Cl),i=this.stroke_.getMiterLimit(),i===void 0&&(i=_u));const l=this.calculateLineJoinSize_(e,a,i),u=Math.max(this.radius_,this.radius2_||0),f=Math.ceil(2*u+l);return{strokeStyle:o,strokeWidth:a,size:f,lineCap:t,lineDash:r,lineDashOffset:s,lineJoin:e,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let r=this.fill_.getColor();r===null&&(r=Qi),e.fillStyle=fs(r),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),i=0;if(typeof e=="string"&&(e=eh(e)),e===null?i=1:Array.isArray(e)&&(i=e.length===4?e[3]:1),i===0){const r=ji(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(e*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/e;for(let a=0;a<e;a++){const l=s+a*o,u=a%2===0?i:r;t.lineTo(u*Math.cos(l),u*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=Qi,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}const b2=$p;class Xp extends b2{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new Xp({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const Yp=Xp;class Kp{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){const t=this.getColor();return new Kp({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const Ao=Kp;class Zp{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Zp({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const il=Zp;class zh{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=e1,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new zh({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=e1,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function sw(n){let t;if(typeof n=="function")t=n;else{let e;Array.isArray(n)?e=n:(hn(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),e=[n]),t=function(){return e}}return t}let Nf=null;function ow(n,t){if(!Nf){const e=new Ao({color:"rgba(255,255,255,0.4)"}),i=new il({color:"#3399CC",width:1.25});Nf=[new zh({image:new Yp({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}return Nf}function e1(n){return n.getGeometry()}const dr=zh;function aw(n,t,e){const i=n;let r=!0,s=!1,o=!1;const a=[Yc(i,Ye.LOAD,function(){o=!0,s||t()})];return i.src&&Hm?(s=!0,i.decode().then(function(){r&&t()}).catch(function(l){r&&(o?t():e())})):a.push(Yc(i,Ye.ERROR,e)),function(){r=!1,a.forEach(Xn)}}function lw(n,t){return new Promise((e,i)=>{function r(){o(),e(n)}function s(){o(),i(new Error("Image load error"))}function o(){n.removeEventListener("load",r),n.removeEventListener("error",s)}n.addEventListener("load",r),n.addEventListener("error",s),t&&(n.src=t)})}function uw(n,t){return t&&(n.src=t),Hm?new Promise((e,i)=>n.decode().then(()=>e(n),i)):lw(n)}class cw{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];(t++&3)===0&&!i.hasListener()&&(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,i){const r=n1(t,e,i);return r in this.cache_?this.cache_[r]:null}set(t,e,i,r){const s=n1(t,e,i);this.cache_[s]=r,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function n1(n,t,e){const i=e?g2(e):"null";return t+":"+n+":"+i}const rh=new cw;let tu=null;class hw extends Ph{constructor(t,e,i,r,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=r===void 0?Gn.IDLE:r,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Gn.LOADED){tu||(tu=ji(1,1,void 0,{willReadFrequently:!0})),tu.drawImage(this.image_,0,0);try{tu.getImageData(0,0,1,1),this.tainted_=!1}catch{tu=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ye.CHANGE)}handleImageError_(){this.imageState_=Gn.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Gn.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=ji(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Gn.IDLE){this.image_||this.initializeImage_(),this.imageState_=Gn.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&uw(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Gn.LOADED)return;const e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);const r=i.getContext("2d");r.scale(t,t),r.drawImage(e,0,0),r.globalCompositeOperation="multiply",r.fillStyle=g2(this.color_),r.fillRect(0,0,i.width/t,i.height/t),r.globalCompositeOperation="destination-in",r.drawImage(e,0,0),this.canvas_[t]=i}}function fw(n,t,e,i,r){let s=t===void 0?void 0:rh.get(t,e,r);return s||(s=new hw(n,n instanceof HTMLImageElement?n.src||void 0:t,e,i,r),rh.set(t,e,r,s)),s}function i1(n,t,e,i){return e!==void 0&&i!==void 0?[e/n,i/t]:e!==void 0?e/n:i!==void 0?i/t:1}class Jp extends p2{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,r=t.scale!==void 0?t.scale:1,s=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:i,scale:r,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const o=t.img!==void 0?t.img:null;let a=t.src;hn(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||tn(o)),hn(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),hn(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=Gn.IDLE:o!==void 0&&(o instanceof HTMLImageElement?o.complete?l=o.src?Gn.LOADED:Gn.IDLE:l=Gn.LOADING:l=Gn.LOADED),this.color_=t.color!==void 0?eh(t.color):null,this.iconImage_=fw(o,a,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,t.width!==void 0||t.height!==void 0){let u,f;if(t.size)[u,f]=t.size;else{const d=this.getImage(1);if(d.width&&d.height)u=d.width,f=d.height;else if(d instanceof HTMLImageElement){this.initialOptions_=t;const y=()=>{if(this.unlistenImageChange(y),!this.initialOptions_)return;const m=this.iconImage_.getSize();this.setScale(i1(m[0],m[1],t.width,t.height))};this.listenImageChange(y);return}}u!==void 0&&this.setScale(i1(u,f,t.width,t.height))}}clone(){let t,e,i;return this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new Jp({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=r[0]),this.anchorYUnits_=="fraction"&&(t[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+r[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==Gn.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==Gn.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(Ye.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(Ye.CHANGE,t)}}const Al=Jp,dw="#333";class Qp{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Wi(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Ao({color:dw}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){const t=this.getScale();return new Qp({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Wi(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const w2=Qp;let Nl=0;const Oi=1<<Nl++,sn=1<<Nl++,Ll=1<<Nl++,tg=1<<Nl++,zu=1<<Nl++,Wr=Math.pow(2,Nl)-1,x2={[Oi]:"boolean",[sn]:"number",[Ll]:"string",[tg]:"color",[zu]:"number[]"},pw=Object.keys(x2).map(Number).sort(ko);function sh(n){const t=[];for(const e of pw)gw(n,e)&&t.push(x2[e]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function gw(n,t){return(n&t)===t}function S2(n,t){return!!(n&t)}class Lo{constructor(t,e){this.type=t,this.value=e}}class mw{constructor(t,e,...i){this.type=t,this.operator=e,this.args=i}}function C2(){return{variables:new Set,properties:new Set}}function Bh(n,t){switch(typeof n){case"boolean":return new Lo(Oi,n);case"number":return new Lo(sn,n);case"string":return new Lo(Ll,n)}if(!Array.isArray(n))throw new Error("Expression must be an array or a primitive value");if(n.length===0)throw new Error("Empty expression");if(typeof n[0]=="string")return ww(n,t);for(const i of n)if(typeof i!="number")throw new Error("Expected an array of numbers");let e=zu;return(n.length===3||n.length===4)&&(e|=tg),new Lo(e,n)}const te={Number:"number",String:"string",Get:"get",Var:"var",Any:"any",All:"all",Not:"!",Resolution:"resolution",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match"},yw={[te.Number]:Ln(zn(1,1/0,Wr),sn),[te.String]:Ln(zn(1,1/0,Wr),Ll),[te.Get]:Ln(vw,Wr),[te.Var]:Ln(_w,Wr),[te.Resolution]:Ln(bw,sn),[te.Any]:Ln(zn(2,1/0,Oi),Oi),[te.All]:Ln(zn(2,1/0,Oi),Oi),[te.Not]:Ln(zn(1,1,Oi),Oi),[te.Equal]:Ln(zn(2,2,Wr),Oi),[te.NotEqual]:Ln(zn(2,2,Wr),Oi),[te.GreaterThan]:Ln(zn(2,2,Wr),Oi),[te.GreaterThanOrEqualTo]:Ln(zn(2,2,Wr),Oi),[te.LessThan]:Ln(zn(2,2,Wr),Oi),[te.LessThanOrEqualTo]:Ln(zn(2,2,Wr),Oi),[te.Multiply]:Ln(zn(2,1/0,sn),sn),[te.Divide]:Ln(zn(2,2,sn),sn),[te.Add]:Ln(zn(2,1/0,sn),sn),[te.Subtract]:Ln(zn(2,2,sn),sn),[te.Clamp]:Ln(zn(3,3,sn),sn),[te.Mod]:Ln(zn(2,2,sn),sn),[te.Pow]:Ln(zn(2,2,sn),sn),[te.Abs]:Ln(zn(1,1,sn),sn),[te.Floor]:Ln(zn(1,1,sn),sn),[te.Ceil]:Ln(zn(1,1,sn),sn),[te.Round]:Ln(zn(1,1,sn),sn),[te.Sin]:Ln(zn(1,1,sn),sn),[te.Cos]:Ln(zn(1,1,sn),sn),[te.Atan]:Ln(zn(1,2,sn),sn),[te.Sqrt]:Ln(zn(1,1,sn),sn),[te.Match]:Ln(zn(4,1/0,Ll|sn),Wr)};function vw(n,t){if(n.length!==2)throw new Error("Expected 1 argument for get operation");const e=Bh(n[1],t);if(!(e instanceof Lo))throw new Error("Expected a literal argument for get operation");if(typeof e.value!="string")throw new Error("Expected a string argument for get operation");return t.properties.add(e.value),[e]}function _w(n,t){if(n.length!==2)throw new Error("Expected 1 argument for var operation");const e=Bh(n[1],t);if(!(e instanceof Lo))throw new Error("Expected a literal argument for var operation");if(typeof e.value!="string")throw new Error("Expected a string argument for get operation");return t.variables.add(e.value),[e]}function bw(n,t){const e=n[0];if(n.length!==1)throw new Error(`Expected no arguments for ${e} operation`);return[]}function zn(n,t,e){return function(i,r){const s=i[0],o=i.length-1;if(n===t){if(o!==n){const l=n===1?"":"s";throw new Error(`Expected ${n} argument${l} for operation ${s}, got ${o}`)}}else if(o<n||o>t)throw new Error(`Expected ${n} to ${t} arguments for operation ${s}, got ${o}`);const a=new Array(o);for(let l=0;l<o;++l){const u=Bh(i[l+1],r);if(!S2(e,u.type)){const f=sh(e),d=sh(u.type);throw new Error(`Unexpected type for argument ${l} of ${s} operation : got ${f} but expected ${d}`)}a[l]=u}return a}}function Ln(n,t){return function(e,i){const r=e[0],s=n(e,i);return new mw(t,r,...s)}}function ww(n,t){const e=n[0],i=yw[e];if(!i)throw new Error(`Unknown operator: ${e}`);return i(n,t)}function E2(){return{variables:{},properties:{},resolution:NaN}}function qo(n,t,e){const i=Bh(n,e);if(!S2(t,i.type)){const r=sh(t),s=sh(i.type);throw new Error(`Expected expression to be of type ${r}, got ${s}`)}return va(i)}function va(n,t){if(n instanceof Lo)return function(){return n.value};const e=n.operator;switch(e){case te.Number:case te.String:return xw(n);case te.Get:case te.Var:return Sw(n);case te.Resolution:return i=>i.resolution;case te.Any:case te.All:case te.Not:return Ew(n);case te.Equal:case te.NotEqual:case te.LessThan:case te.LessThanOrEqualTo:case te.GreaterThan:case te.GreaterThanOrEqualTo:return Cw(n);case te.Multiply:case te.Divide:case te.Add:case te.Subtract:case te.Clamp:case te.Mod:case te.Pow:case te.Abs:case te.Floor:case te.Ceil:case te.Round:case te.Sin:case te.Cos:case te.Atan:case te.Sqrt:return Aw(n);case te.Match:return Lw(n);default:throw new Error(`Unsupported operator ${e}`)}}function xw(n,t){const e=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=va(n.args[s]);switch(e){case te.Number:case te.String:return s=>{for(let o=0;o<i;++o){const a=r[o](s);if(typeof a===e)return a}throw new Error(`Expected one of the values to be a ${e}`)};default:throw new Error(`Unsupported assertion operator ${e}`)}}function Sw(n,t){const e=n.args[0];if(!(e instanceof Lo))throw new Error("Expected literal name");const i=e.value;if(typeof i!="string")throw new Error("Expected string name");switch(n.operator){case te.Get:return r=>r.properties[i];case te.Var:return r=>r.variables[i];default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function Cw(n,t){const e=n.operator,i=va(n.args[0]),r=va(n.args[1]);switch(e){case te.Equal:return s=>i(s)===r(s);case te.NotEqual:return s=>i(s)!==r(s);case te.LessThan:return s=>i(s)<r(s);case te.LessThanOrEqualTo:return s=>i(s)<=r(s);case te.GreaterThan:return s=>i(s)>r(s);case te.GreaterThanOrEqualTo:return s=>i(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${e}`)}}function Ew(n,t){const e=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=va(n.args[s]);switch(e){case te.Any:return s=>{for(let o=0;o<i;++o)if(r[o](s))return!0;return!1};case te.All:return s=>{for(let o=0;o<i;++o)if(!r[o](s))return!1;return!0};case te.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${e}`)}}function Aw(n,t){const e=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=va(n.args[s]);switch(e){case te.Multiply:return s=>{let o=1;for(let a=0;a<i;++a)o*=r[a](s);return o};case te.Divide:return s=>r[0](s)/r[1](s);case te.Add:return s=>{let o=0;for(let a=0;a<i;++a)o+=r[a](s);return o};case te.Subtract:return s=>r[0](s)-r[1](s);case te.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const l=r[2](s);return o>l?l:o};case te.Mod:return s=>r[0](s)%r[1](s);case te.Pow:return s=>Math.pow(r[0](s),r[1](s));case te.Abs:return s=>Math.abs(r[0](s));case te.Floor:return s=>Math.floor(r[0](s));case te.Ceil:return s=>Math.ceil(r[0](s));case te.Round:return s=>Math.round(r[0](s));case te.Sin:return s=>Math.sin(r[0](s));case te.Cos:return s=>Math.cos(r[0](s));case te.Atan:return i===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case te.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${e}`)}}function Lw(n,t){const e=n.args.length,i=new Array(e);for(let r=0;r<e;++r)i[r]=va(n.args[r]);return r=>{const s=i[0](r);for(let o=1;o<e;o+=2)if(s===i[o](r))return i[o+1](r);return i[e-1](r)}}function Tw(n){return!0}function Iw(n){const t=C2(),e=Rw(n,t),i=E2();return function(r,s){return i.properties=r.getPropertiesInternal(),i.resolution=s,e(i)}}function r1(n){const t=C2(),e=n.length,i=new Array(e);for(let o=0;o<e;++o)i[o]=Nd(n[o],t);const r=E2(),s=new Array(e);return function(o,a){r.properties=o.getPropertiesInternal(),r.resolution=a;for(let l=0;l<e;++l)s[l]=i[l](r);return s}}function Rw(n,t){const e=n.length,i=new Array(e);for(let r=0;r<e;++r){const s=n[r],o="filter"in s?qo(s.filter,Oi,t):Tw;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let u=0;u<l;++u)a[u]=Nd(s.style[u],t)}else a=[Nd(s.style,t)];i[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<e;++a){const l=i[a].filter;if(!!l(r)&&!(n[a].else&&o)){o=!0;for(const u of i[a].styles){const f=u(r);!f||s.push(f)}}}return s}}function Nd(n,t){const e=Su(n,"",t),i=Cu(n,"",t),r=Nw(n,t),s=Pw(n,t),o=er(n,"z-index",t),a=new dr;return function(l){let u=!0;if(e){const f=e(l);f&&(u=!1),a.setFill(f)}if(i){const f=i(l);f&&(u=!1),a.setStroke(f)}if(r){const f=r(l);f&&(u=!1),a.setText(f)}if(s){const f=s(l);f&&(u=!1),a.setImage(f)}return o&&a.setZIndex(o(l)),u?null:a}}function Su(n,t,e){const i=A2(n,t+"fill-color",e);if(!i)return null;const r=new Ao;return function(s){const o=i(s);return o==="none"?null:(r.setColor(o),r)}}function Cu(n,t,e){const i=er(n,t+"stroke-width",e),r=A2(n,t+"stroke-color",e);if(!i&&!r)return null;const s=So(n,t+"stroke-line-cap",e),o=So(n,t+"stroke-line-join",e),a=L2(n,t+"stroke-line-dash",e),l=er(n,t+"stroke-line-dash-offset",e),u=er(n,t+"stroke-miter-limit",e),f=new il;return function(d){if(r){const y=r(d);if(y==="none")return null;f.setColor(y)}if(i&&f.setWidth(i(d)),s){const y=s(d);if(y!=="butt"&&y!=="round"&&y!=="square")throw new Error("Expected butt, round, or square line cap");f.setLineCap(y)}if(o){const y=o(d);if(y!=="bevel"&&y!=="round"&&y!=="miter")throw new Error("Expected bevel, round, or miter line join");f.setLineJoin(y)}return a&&f.setLineDash(a(d)),l&&f.setLineDashOffset(l(d)),u&&f.setMiterLimit(u(d)),f}}function Nw(n,t){const e="text-",i=So(n,e+"value",t);if(!i)return null;const r=Su(n,e,t),s=Su(n,e+"background-",t),o=Cu(n,e,t),a=Cu(n,e+"background-",t),l=So(n,e+"font",t),u=er(n,e+"max-angle",t),f=er(n,e+"offset-x",t),d=er(n,e+"offset-y",t),y=Eu(n,e+"overflow",t),m=So(n,e+"placement",t),w=er(n,e+"repeat",t),S=qh(n,e+"scale",t),L=Eu(n,e+"rotate-with-view",t),E=er(n,e+"rotation",t),I=So(n,e+"align",t),j=So(n,e+"justify",t),G=So(n,e+"baseline",t),Z=L2(n,e+"padding",t),at=new w2({});return function(v){if(at.setText(i(v)),r&&at.setFill(r(v)),s&&at.setBackgroundFill(s(v)),o&&at.setStroke(o(v)),a&&at.setBackgroundStroke(a(v)),l&&at.setFont(l(v)),u&&at.setMaxAngle(u(v)),f&&at.setOffsetX(f(v)),d&&at.setOffsetY(d(v)),y&&at.setOverflow(y(v)),m){const B=m(v);if(B!=="point"&&B!=="line")throw new Error("Expected point or line for text-placement");at.setPlacement(B)}if(w&&at.setRepeat(w(v)),S&&at.setScale(S(v)),L&&at.setRotateWithView(L(v)),E&&at.setRotation(E(v)),I){const B=I(v);if(B!=="left"&&B!=="center"&&B!=="right"&&B!=="end"&&B!=="start")throw new Error("Expected left, right, center, start, or end for text-align");at.setTextAlign(B)}if(j){const B=j(v);if(B!=="left"&&B!=="right"&&B!=="center")throw new Error("Expected left, right, or center for text-justify");at.setJustify(B)}if(G){const B=G(v);if(B!=="bottom"&&B!=="top"&&B!=="middle"&&B!=="alphabetic"&&B!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");at.setTextBaseline(B)}return Z&&at.setPadding(Z(v)),at}}function Pw(n,t){return"icon-src"in n?kw(n,t):"shape-points"in n?Fw(n,t):"circle-radius"in n?Mw(n,t):null}function kw(n,t){const e="icon-",i=e+"src",r=T2(n[i],i),s=oh(n,e+"anchor",t),o=qh(n,e+"scale",t),a=er(n,e+"opacity",t),l=oh(n,e+"displacement",t),u=er(n,e+"rotation",t),f=Eu(n,e+"rotate-with-view",t),d=s1(n,e+"anchor-origin"),y=o1(n,e+"anchor-x-units"),m=o1(n,e+"anchor-y-units"),w=zw(n,e+"color"),S=Dw(n,e+"cross-origin"),L=jw(n,e+"offset"),E=s1(n,e+"offset-origin"),I=rl(n,e+"width"),j=rl(n,e+"height"),G=Ow(n,e+"size"),Z=eg(n,e+"declutter"),at=new Al({src:r,anchorOrigin:d,anchorXUnits:y,anchorYUnits:m,color:w,crossOrigin:S,offset:L,offsetOrigin:E,height:j,width:I,size:G,declutterMode:Z});return function(v){return a&&at.setOpacity(a(v)),l&&at.setDisplacement(l(v)),u&&at.setRotation(u(v)),f&&at.setRotateWithView(f(v)),o&&at.setScale(o(v)),s&&at.setAnchor(s(v)),at}}function Fw(n,t){const e="shape-",i=e+"points",r=I2(n[i],i),s=Su(n,e,t),o=Cu(n,e,t),a=qh(n,e+"scale",t),l=oh(n,e+"displacement",t),u=er(n,e+"rotation",t),f=Eu(n,e+"rotate-with-view",t),d=rl(n,e+"radius"),y=rl(n,e+"radius1"),m=rl(n,e+"radius2"),w=rl(n,e+"angle"),S=eg(n,e+"declutter-mode"),L=new b2({points:r,radius:d,radius1:y,radius2:m,angle:w,declutterMode:S});return function(E){return s&&L.setFill(s(E)),o&&L.setStroke(o(E)),l&&L.setDisplacement(l(E)),u&&L.setRotation(u(E)),f&&L.setRotateWithView(f(E)),a&&L.setScale(a(E)),L}}function Mw(n,t){const e="circle-",i=Su(n,e,t),r=Cu(n,e,t),s=er(n,e+"radius",t),o=qh(n,e+"scale",t),a=oh(n,e+"displacement",t),l=er(n,e+"rotation",t),u=Eu(n,e+"rotate-with-view",t),f=eg(n,e+"declutter-mode"),d=new Yp({radius:5,declutterMode:f});return function(y){return s&&d.setRadius(s(y)),i&&d.setFill(i(y)),r&&d.setStroke(r(y)),a&&d.setDisplacement(a(y)),l&&d.setRotation(l(y)),u&&d.setRotateWithView(u(y)),o&&d.setScale(o(y)),d}}function er(n,t,e){if(!(t in n))return;const i=qo(n[t],sn,e);return function(r){return I2(i(r),t)}}function So(n,t,e){if(!(t in n))return null;const i=qo(n[t],Ll,e);return function(r){return T2(i(r),t)}}function Eu(n,t,e){if(!(t in n))return null;const i=qo(n[t],Oi,e);return function(r){const s=i(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${t}`);return s}}function A2(n,t,e){if(!(t in n))return null;const i=qo(n[t],tg|Ll,e);return function(r){return R2(i(r),t)}}function L2(n,t,e){if(!(t in n))return null;const i=qo(n[t],zu,e);return function(r){return Bu(i(r),t)}}function oh(n,t,e){if(!(t in n))return null;const i=qo(n[t],zu,e);return function(r){const s=Bu(i(r),t);if(s.length!==2)throw new Error(`Expected two numbers for ${t}`);return s}}function qh(n,t,e){if(!(t in n))return null;const i=qo(n[t],zu|sn,e);return function(r){return Bw(i(r),t)}}function rl(n,t){const e=n[t];if(e!==void 0){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}}function Ow(n,t){const e=n[t];if(e!==void 0){if(typeof e=="number")return Wi(e);if(!Array.isArray(e))throw new Error(`Expected a number or size array for ${t}`);if(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return e}}function Dw(n,t){const e=n[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}}function s1(n,t){const e=n[t];if(e!==void 0){if(e!=="bottom-left"&&e!=="bottom-right"&&e!=="top-left"&&e!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return e}}function o1(n,t){const e=n[t];if(e!==void 0){if(e!=="pixels"&&e!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return e}}function jw(n,t){const e=n[t];if(e!==void 0)return Bu(e,t)}function eg(n,t){const e=n[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);if(e!=="declutter"&&e!=="obstacle"&&e!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return e}}function zw(n,t){const e=n[t];if(e!==void 0)return R2(e,t)}function Bu(n,t){if(!Array.isArray(n))throw new Error(`Expected an array for ${t}`);const e=n.length;for(let i=0;i<e;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${t}`);return n}function T2(n,t){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);return n}function I2(n,t){if(typeof n!="number")throw new Error(`Expected a number for ${t}`);return n}function R2(n,t){if(typeof n=="string")return n;const e=Bu(n,t),i=e.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return e}function Bw(n,t){if(typeof n=="number")return n;const e=Bu(n,t);if(e.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return e}const a1={RENDER_ORDER:"renderOrder"};class qw extends Wp{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(a1.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new d2(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(a1.RENDER_ORDER,t)}setStyle(t){this.style_=Uw(t),this.styleFunction_=t===null?void 0:sw(this.style_),this.changed()}}function Uw(n){if(n===void 0)return ow;if(!n)return null;if(typeof n=="function"||n instanceof dr)return n;if(!Array.isArray(n))return r1([n]);if(n.length===0)return[];const t=n.length,e=n[0];if(e instanceof dr){const r=new Array(t);for(let s=0;s<t;++s){const o=n[s];if(!(o instanceof dr))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in e){const r=new Array(t);for(let s=0;s<t;++s){const o=n[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return Iw(r)}return r1(n)}const N2=qw,qu={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Cc=[qu.FILL],To=[qu.STROKE],fa=[qu.BEGIN_PATH],l1=[qu.CLOSE_PATH],je=qu;class Gw{drawCustom(t,e,i,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}const P2=Gw;class Ww extends P2{constructor(t,e,i,r){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(i){return i*e})}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=t.length;a<l;a+=e)r[0]=t[a],r[1]=t[a+1],Ah(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(t,e,i,r,s,o){const a=this.coordinates;let l=a.length;const u=this.getBufferedMaxExtent();o&&(e+=r);let f=t[e],d=t[e+1];const y=this.tmpCoordinate_;let m=!0,w,S,L;for(w=e+r;w<i;w+=r)y[0]=t[w],y[1]=t[w+1],L=md(u,y),L!==S?(m&&(a[l++]=f,a[l++]=d,m=!1),a[l++]=y[0],a[l++]=y[1]):L===Ci.INTERSECTING?(a[l++]=y[0],a[l++]=y[1],m=!1):m=!0,f=y[0],d=y[1],S=L;return(s&&m||w===e+r)&&(a[l++]=f,a[l++]=d),l}drawCustomCoordinates_(t,e,i,r,s){for(let o=0,a=i.length;o<a;++o){const l=i[o],u=this.appendFlatLineCoordinates(t,e,l,r,!1,!1);s.push(u),e=l}return e}drawCustom(t,e,i,r){this.beginGeometry(t,e);const s=t.getType(),o=t.getStride(),a=this.coordinates.length;let l,u,f,d,y;switch(s){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),d=[];const m=t.getEndss();y=0;for(let w=0,S=m.length;w<S;++w){const L=[];y=this.drawCustomCoordinates_(l,y,m[w],o,L),d.push(L)}this.instructions.push([je.CUSTOM,a,d,t,i,xd]),this.hitDetectionInstructions.push([je.CUSTOM,a,d,t,r||i,xd]);break;case"Polygon":case"MultiLineString":f=[],l=s=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),y=this.drawCustomCoordinates_(l,0,t.getEnds(),o,f),this.instructions.push([je.CUSTOM,a,f,t,i,yu]),this.hitDetectionInstructions.push([je.CUSTOM,a,f,t,r||i,yu]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),u=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([je.CUSTOM,a,u,t,i,Eo]),this.hitDetectionInstructions.push([je.CUSTOM,a,u,t,r||i,Eo]);break;case"MultiPoint":l=t.getFlatCoordinates(),u=this.appendFlatPointCoordinates(l,o),u>a&&(this.instructions.push([je.CUSTOM,a,u,t,i,Eo]),this.hitDetectionInstructions.push([je.CUSTOM,a,u,t,r||i,Eo]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),u=this.coordinates.length,this.instructions.push([je.CUSTOM,a,u,t,i]),this.hitDetectionInstructions.push([je.CUSTOM,a,u,t,r||i]);break}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[je.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[je.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const i=t.length;let r,s,o=-1;for(e=0;e<i;++e)r=t[e],s=r[0],s==je.END_GEOMETRY?o=e:s==je.BEGIN_GEOMETRY&&(r[2]=e,d_(this.hitDetectionInstructions,o,e),o=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const r=t.getColor();i.fillStyle=fs(r||Qi)}else i.fillStyle=void 0;if(e){const r=e.getColor();i.strokeStyle=fs(r||bu);const s=e.getLineCap();i.lineCap=s!==void 0?s:Cl;const o=e.getLineDash();i.lineDash=o?o.slice():Us;const a=e.getLineDashOffset();i.lineDashOffset=a||Gs;const l=e.getLineJoin();i.lineJoin=l!==void 0?l:El;const u=e.getWidth();i.lineWidth=u!==void 0?u:xu;const f=e.getMiterLimit();i.miterLimit=f!==void 0?f:_u,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[je.SET_FILL_STYLE,e];return typeof e!="string"&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[je.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,r=t.lineCap,s=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||s!=t.currentLineDash&&!zo(t.currentLineDash,s)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=u)&&(i!==void 0&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=u)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[je.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Pm(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Ro(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const Uu=Ww;class Vw extends Uu{constructor(t,e,i,r){super(t,e,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([je.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([je.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([je.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([je.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),r=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const Hw=Vw;class $w extends Uu{constructor(t,e,i,r){super(t,e,i,r)}drawFlatCoordinates_(t,e,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,i,r,!1,!1),a=[je.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,e){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([je.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Us,Gs],fa);const o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(To),this.endGeometry(e)}drawMultiLineString(t,e){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([je.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Us,Gs],fa);const o=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let u=0;for(let f=0,d=o.length;f<d;++f)u=this.drawFlatCoordinates_(a,u,o[f],l);this.hitDetectionInstructions.push(To),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(To),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(To),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(fa)}}const Xw=$w;class Yw extends Uu{constructor(t,e,i,r){super(t,e,i,r)}drawFlatCoordinatess_(t,e,i,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=i.length;this.instructions.push(fa),this.hitDetectionInstructions.push(fa);for(let u=0;u<l;++u){const f=i[u],d=this.coordinates.length,y=this.appendFlatLineCoordinates(t,e,f,r,!0,!a),m=[je.MOVE_TO_LINE_TO,d,y];this.instructions.push(m),this.hitDetectionInstructions.push(m),a&&(this.instructions.push(l1),this.hitDetectionInstructions.push(l1)),e=f}return o&&(this.instructions.push(Cc),this.hitDetectionInstructions.push(Cc)),a&&(this.instructions.push(To),this.hitDetectionInstructions.push(To)),e}drawCircle(t,e){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([je.SET_FILL_STYLE,Qi]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([je.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Us,Gs]);const o=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const u=[je.CIRCLE,l];this.instructions.push(fa,u),this.hitDetectionInstructions.push(fa,u),i.fillStyle!==void 0&&(this.instructions.push(Cc),this.hitDetectionInstructions.push(Cc)),i.strokeStyle!==void 0&&(this.instructions.push(To),this.hitDetectionInstructions.push(To)),this.endGeometry(e)}drawPolygon(t,e){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([je.SET_FILL_STYLE,Qi]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([je.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Us,Gs]);const o=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(e)}drawMultiPolygon(t,e){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([je.SET_FILL_STYLE,Qi]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([je.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Us,Gs]);const o=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride();let u=0;for(let f=0,d=o.length;f<d;++f)u=this.drawFlatCoordinatess_(a,u,o[f],l);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let i=0,r=e.length;i<r;++i)e[i]=sa(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}const u1=Yw;function Kw(n,t,e,i,r){const s=[];let o=e,a=0,l=t.slice(e,2);for(;a<n&&o+r<i;){const[u,f]=l.slice(-2),d=t[o+r],y=t[o+r+1],m=Math.sqrt((d-u)*(d-u)+(y-f)*(y-f));if(a+=m,a>=n){const w=(n-a+m)/m,S=fr(u,d,w),L=fr(f,y,w);l.push(S,L),s.push(l),l=[S,L],a==n&&(o+=r),a=0}else if(a<n)l.push(t[o+r],t[o+r+1]),o+=r;else{const w=m-a,S=fr(u,d,w/m),L=fr(f,y,w/m);l.push(S,L),s.push(l),l=[S,L],a=0,o+=r}}return a>0&&s.push(l),s}function Zw(n,t,e,i,r){let s=e,o=e,a=0,l=0,u=e,f,d,y,m,w,S,L,E,I,j;for(d=e;d<i;d+=r){const G=t[d],Z=t[d+1];w!==void 0&&(I=G-w,j=Z-S,m=Math.sqrt(I*I+j*j),L!==void 0&&(l+=y,f=Math.acos((L*I+E*j)/(y*m)),f>n&&(l>a&&(a=l,s=u,o=d),l=0,u=d-r)),y=m,L=I,E=j),w=G,S=Z}return l+=m,l>a?[u,d]:[s,o]}const ah={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Jw extends Uu{constructor(t,e,i,r){super(t,e,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Qi]={fillStyle:Qi},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!r)return;const o=this.coordinates;let a=o.length;const l=t.getType();let u=null,f=t.getStride();if(s.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!li(this.getBufferedMaxExtent(),t.getExtent()))return;let d;if(u=t.getFlatCoordinates(),l=="LineString")d=[u.length];else if(l=="MultiLineString")d=t.getEnds();else if(l=="Polygon")d=t.getEnds().slice(0,1);else if(l=="MultiPolygon"){const S=t.getEndss();d=[];for(let L=0,E=S.length;L<E;++L)d.push(S[L][0])}this.beginGeometry(t,e);const y=s.repeat,m=y?void 0:s.textAlign;let w=0;for(let S=0,L=d.length;S<L;++S){let E;y?E=Kw(y*this.resolution,u,w,d[S],f):E=[u.slice(w,d[S])];for(let I=0,j=E.length;I<j;++I){const G=E[I];let Z=0,at=G.length;if(m==null){const B=Zw(s.maxAngle,G,0,G.length,2);Z=B[0],at=B[1]}for(let B=Z;B<at;B+=f)o.push(G[B],G[B+1]);const v=o.length;w=d[S],this.drawChars_(a,v),a=v}}this.endGeometry(e)}else{let d=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":u=t.getFlatCoordinates();break;case"LineString":u=t.getFlatMidpoint();break;case"Circle":u=t.getCenter();break;case"MultiLineString":u=t.getFlatMidpoints(),f=2;break;case"Polygon":u=t.getFlatInteriorPoint(),s.overflow||d.push(u[2]/this.resolution),f=3;break;case"MultiPolygon":const E=t.getFlatInteriorPoints();u=[];for(let I=0,j=E.length;I<j;I+=3)s.overflow||d.push(E[I+2]/this.resolution),u.push(E[I],E[I+1]);if(u.length===0)return;f=2;break}const y=this.appendFlatPointCoordinates(u,f);if(y===a)return;if(d&&(y-a)/2!==u.length/f){let E=a/2;d=d.filter((I,j)=>{const G=o[(E+j)*2]===u[j*f]&&o[(E+j)*2+1]===u[j*f+1];return G||--E,G})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&this.updateFillStyle(this.state,this.createFill),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let m=s.padding;if(m!=ha&&(s.scale[0]<0||s.scale[1]<0)){let E=s.padding[0],I=s.padding[1],j=s.padding[2],G=s.padding[3];s.scale[0]<0&&(I=-I,G=-G),s.scale[1]<0&&(E=-E,j=-j),m=[E,I,j,G]}const w=this.pixelRatio;this.instructions.push([je.DRAW_IMAGE,a,y,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,m==ha?ha:m.map(function(E){return E*w}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const S=1/w,L=this.state.fillStyle;s.backgroundFill&&(this.state.fillStyle=Qi,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([je.DRAW_IMAGE,a,y,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[S,S],NaN,void 0,this.declutterImageWithText_,m,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Qi:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),s.backgroundFill&&(this.state.fillStyle=L,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||wu,justify:e.justify,textBaseline:e.textBaseline||nh,scale:e.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=ah[r.textBaseline],f=this.textOffsetY_*l,d=this.text_,y=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([je.DRAW_CHARS,t,e,u,r.overflow,a,r.maxAngle,l,f,s,y*l,d,o,1]),this.hitDetectionInstructions.push([je.DRAW_CHARS,t,e,u,r.overflow,a&&Qi,r.maxAngle,l,f,s,y*l,d,o,1/l])}setTextStyle(t,e){let i,r,s;if(!t)this.text_="";else{const o=t.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=fs(o.getColor()||Qi)):(r=null,this.textFillState_=r);const a=t.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const w=a.getLineDash(),S=a.getLineDashOffset(),L=a.getWidth(),E=a.getMiterLimit();s.lineCap=a.getLineCap()||Cl,s.lineDash=w?w.slice():Us,s.lineDashOffset=S===void 0?Gs:S,s.lineJoin=a.getLineJoin()||El,s.lineWidth=L===void 0?xu:L,s.miterLimit=E===void 0?_u:E,s.strokeStyle=fs(a.getColor()||bu)}i=this.textState_;const l=t.getFont()||v2;tw(l);const u=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||nh,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||ha,i.scale=u===void 0?[1,1]:u;const f=t.getOffsetX(),d=t.getOffsetY(),y=t.getRotateWithView(),m=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=f===void 0?0:f,this.textOffsetY_=d===void 0?0:d,this.textRotateWithView_=y===void 0?!1:y,this.textRotation_=m===void 0?0:m,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:tn(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+tn(r.fillStyle):""}this.declutterImageWithText_=e}}const Qw={Circle:u1,Default:Uu,Image:Hw,LineString:Xw,Polygon:u1,Text:Jw};class tx{constructor(t,e,i,r){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const r in i){const s=i[r].finish();t[e][r]=s}}return t}getBuilder(t,e){const i=t!==void 0?t.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[e];if(s===void 0){const o=Qw[e];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[e]=s}return s}}const lh=tx;function ex(n,t,e,i,r,s,o,a,l,u,f,d){let y=n[t],m=n[t+1],w=0,S=0,L=0,E=0;function I(){w=y,S=m,t+=i,y=n[t],m=n[t+1],E+=L,L=Math.sqrt((y-w)*(y-w)+(m-S)*(m-S))}do I();while(t<e-i&&E+L<s);let j=L===0?0:(s-E)/L;const G=fr(w,y,j),Z=fr(S,m,j),at=t-i,v=E,B=s+a*l(u,r,f);for(;t<e-i&&E+L<B;)I();j=L===0?0:(B-E)/L;const it=fr(w,y,j),mt=fr(S,m,j);let q;if(d){const st=[G,Z,it,mt];Cp(st,0,4,2,d,st,st),q=st[0]>st[2]}else q=G>it;const F=Math.PI,V=[],W=at+i===t;t=at,L=0,E=v,y=n[t],m=n[t+1];let et;if(W){I(),et=Math.atan2(m-S,y-w),q&&(et+=et>0?-F:F);const st=(it+G)/2,lt=(mt+Z)/2;return V[0]=[st,lt,(B-s)/2,et,r],V}r=r.replace(/\n/g," ");for(let st=0,lt=r.length;st<lt;){I();let ct=Math.atan2(m-S,y-w);if(q&&(ct+=ct>0?-F:F),et!==void 0){let Y=ct-et;if(Y+=Y>F?-2*F:Y<-F?2*F:0,Math.abs(Y)>o)return null}et=ct;const Et=st;let ot=0;for(;st<lt;++st){const Y=q?lt-st-1:st,nt=a*l(u,r[Y],f);if(t+i<e&&E+L<s+ot+nt/2)break;ot+=nt}if(st===Et)continue;const Yt=q?r.substring(lt-Et,lt-st):r.substring(Et,st);j=L===0?0:(s+ot/2-E)/L;const T=fr(w,y,j),H=fr(S,m,j);V.push([T,H,ot/2,ct,Yt]),s+=ot}return V}const Wa=Rr(),po=[],Os=[],Ds=[],go=[];function c1(n){return n[3].declutterBox}const h1=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Pf(n,t){return t==="start"?t=h1.test(n)?"right":"left":t==="end"&&(t=h1.test(n)?"left":"right"),ah[t]}function nx(n,t,e){return e>0&&n.push(`
`,""),n.push(t,""),n}class ix{constructor(t,e,i,r){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Tr(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,r){const s=t+e+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[e],u=this.pixelRatio,f=[l.scale[0]*u,l.scale[1]*u],d=Array.isArray(t),y=l.justify?ah[l.justify]:Pf(Array.isArray(t)?t[0]:t,l.textAlign||wu),m=r&&o.lineWidth?o.lineWidth:0,w=d?t:t.split(`
`).reduce(nx,[]),{width:S,height:L,widths:E,heights:I,lineWidths:j}=nw(l,w),G=S+m,Z=[],at=(G+2)*f[0],v=(L+m)*f[1],B={width:at<0?Math.floor(at):Math.ceil(at),height:v<0?Math.floor(v):Math.ceil(v),contextInstructions:Z};(f[0]!=1||f[1]!=1)&&Z.push("scale",f),r&&(Z.push("strokeStyle",o.strokeStyle),Z.push("lineWidth",m),Z.push("lineCap",o.lineCap),Z.push("lineJoin",o.lineJoin),Z.push("miterLimit",o.miterLimit),Z.push("setLineDash",[o.lineDash]),Z.push("lineDashOffset",o.lineDashOffset)),i&&Z.push("fillStyle",a.fillStyle),Z.push("textBaseline","middle"),Z.push("textAlign","center");const it=.5-y;let mt=y*G+it*m;const q=[],F=[];let V=0,W=0,et=0,st=0,lt;for(let ct=0,Et=w.length;ct<Et;ct+=2){const ot=w[ct];if(ot===`
`){W+=V,V=0,mt=y*G+it*m,++st;continue}const Yt=w[ct+1]||l.font;Yt!==lt&&(r&&q.push("font",Yt),i&&F.push("font",Yt),lt=Yt),V=Math.max(V,I[et]);const T=[ot,mt+it*E[et]+y*(E[et]-j[st]),.5*(m+V)+W];mt+=E[et],r&&q.push("strokeText",T),i&&F.push("fillText",T),++et}return Array.prototype.push.apply(Z,q),Array.prototype.push.apply(Z,F),this.labels_[s]=B,B}replayTextBackground_(t,e,i,r,s,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,s),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,r,s,o,a,l,u,f,d,y,m,w,S,L){a*=y[0],l*=y[1];let E=i-a,I=r-l;const j=s+u>t?t-u:s,G=o+f>e?e-f:o,Z=w[3]+j*y[0]+w[1],at=w[0]+G*y[1]+w[2],v=E-w[3],B=I-w[0];(S||d!==0)&&(po[0]=v,go[0]=v,po[1]=B,Os[1]=B,Os[0]=v+Z,Ds[0]=Os[0],Ds[1]=B+at,go[1]=Ds[1]);let it;return d!==0?(it=Hs(Tr(),i,r,1,1,d,-i,-r),_i(it,po),_i(it,Os),_i(it,Ds),_i(it,go),bs(Math.min(po[0],Os[0],Ds[0],go[0]),Math.min(po[1],Os[1],Ds[1],go[1]),Math.max(po[0],Os[0],Ds[0],go[0]),Math.max(po[1],Os[1],Ds[1],go[1]),Wa)):bs(Math.min(v,v+Z),Math.min(B,B+at),Math.max(v,v+Z),Math.max(B,B+at),Wa),m&&(E=Math.round(E),I=Math.round(I)),{drawImageX:E,drawImageY:I,drawImageW:j,drawImageH:G,originX:u,originY:f,declutterBox:{minX:Wa[0],minY:Wa[1],maxX:Wa[2],maxY:Wa[3],value:L},canvasTransform:it,scale:y}}replayImageOrLabel_(t,e,i,r,s,o,a){const l=!!(o||a),u=r.declutterBox,f=t.canvas,d=a?a[2]*r.scale[0]/2:0;return u.minX-d<=f.width/e&&u.maxX+d>=0&&u.minY-d<=f.height/e&&u.maxY+d>=0&&(l&&this.replayTextBackground_(t,po,Os,Ds,go,o,a),iw(t,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(t){if(this.alignFill_){const e=_i(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,r){const s=this.textStates[e],o=this.createLabel(t,e,r,i),a=this.strokeStates[i],l=this.pixelRatio,u=Pf(Array.isArray(t)?t[0]:t,s.textAlign||wu),f=ah[s.textBaseline||nh],d=a&&a.lineWidth?a.lineWidth:0,y=o.width/l-2*s.scale[0],m=u*y+2*(.5-u)*d,w=f*o.height/l+2*(.5-f)*d;return{label:o,anchorX:m,anchorY:w}}execute_(t,e,i,r,s,o,a,l){let u;this.pixelCoordinates_&&zo(i,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=No(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),S_(this.renderedTransform_,i));let f=0;const d=r.length;let y=0,m,w,S,L,E,I,j,G,Z,at,v,B,it=0,mt=0,q=null,F=null;const V=this.coordinateCache_,W=this.viewRotation_,et=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,st={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:W},lt=this.instructions!=r||this.overlaps?0:200;let ct,Et,ot,Yt;for(;f<d;){const T=r[f];switch(T[0]){case je.BEGIN_GEOMETRY:ct=T[1],Yt=T[3],ct.getGeometry()?a!==void 0&&!li(a,Yt.getExtent())?f=T[2]+1:++f:f=T[2];break;case je.BEGIN_PATH:it>lt&&(this.fill_(t),it=0),mt>lt&&(t.stroke(),mt=0),!it&&!mt&&(t.beginPath(),L=NaN,E=NaN),++f;break;case je.CIRCLE:y=T[1];const Y=u[y],nt=u[y+1],dt=u[y+2],wt=u[y+3],_t=dt-Y,St=wt-nt,bt=Math.sqrt(_t*_t+St*St);t.moveTo(Y+bt,nt),t.arc(Y,nt,bt,0,2*Math.PI,!0),++f;break;case je.CLOSE_PATH:t.closePath(),++f;break;case je.CUSTOM:y=T[1],m=T[2];const $t=T[3],Jt=T[4],Ht=T.length==6?T[5]:void 0;st.geometry=$t,st.feature=ct,f in V||(V[f]=[]);const ye=V[f];Ht?Ht(u,y,m,2,ye):(ye[0]=u[y],ye[1]=u[y+1],ye.length=2),Jt(ye,st),++f;break;case je.DRAW_IMAGE:y=T[1],m=T[2],G=T[3],w=T[4],S=T[5];let Nt=T[6];const J=T[7],Ce=T[8],Zt=T[9],Wt=T[10];let Kt=T[11];const ee=T[12];let Gt=T[13];const le=T[14],ie=T[15];if(!G&&T.length>=20){Z=T[19],at=T[20],v=T[21],B=T[22];const Ee=this.drawLabelWithPointPlacement_(Z,at,v,B);G=Ee.label,T[3]=G;const Tn=T[23];w=(Ee.anchorX-Tn)*this.pixelRatio,T[4]=w;const dn=T[24];S=(Ee.anchorY-dn)*this.pixelRatio,T[5]=S,Nt=G.height,T[6]=Nt,Gt=G.width,T[13]=Gt}let kt;T.length>25&&(kt=T[25]);let ne,me,de;T.length>17?(ne=T[16],me=T[17],de=T[18]):(ne=ha,me=!1,de=!1),Wt&&et?Kt+=W:!Wt&&!et&&(Kt-=W);let re=0;for(;y<m;y+=2){if(kt&&kt[re++]<Gt/this.pixelRatio)continue;const Ee=this.calculateImageOrLabelDimensions_(G.width,G.height,u[y],u[y+1],Gt,Nt,w,S,Ce,Zt,Kt,ee,s,ne,me||de,ct),Tn=[t,e,G,Ee,J,me?q:null,de?F:null];if(l){if(le==="none")continue;if(le==="obstacle"){l.insert(Ee.declutterBox);continue}else{let dn,Qn;if(ie){const On=m-y;if(!ie[On]){ie[On]=Tn;continue}if(dn=ie[On],delete ie[On],Qn=c1(dn),l.collides(Qn))continue}if(l.collides(Ee.declutterBox))continue;dn&&(l.insert(Qn),this.replayImageOrLabel_.apply(this,dn)),l.insert(Ee.declutterBox)}}this.replayImageOrLabel_.apply(this,Tn)}++f;break;case je.DRAW_CHARS:const _e=T[1],qt=T[2],Ke=T[3],we=T[4];B=T[5];const on=T[6],ke=T[7],Ie=T[8];v=T[9];const ln=T[10];Z=T[11],at=T[12];const Oe=[T[13],T[13]],fn=this.textStates[at],nn=fn.font,qn=[fn.scale[0]*ke,fn.scale[1]*ke];let Kn;nn in this.widths_?Kn=this.widths_[nn]:(Kn={},this.widths_[nn]=Kn);const An=e2(u,_e,qt,2),Re=Math.abs(qn[0])*t1(nn,Z,Kn);if(we||Re<=An){const Ee=this.textStates[at].textAlign,Tn=(An-Re)*Pf(Z,Ee),dn=ex(u,_e,qt,2,Z,Tn,on,Math.abs(qn[0]),t1,nn,Kn,et?0:this.viewRotation_);t:if(dn){const Qn=[];let On,xe,Zn,vn,xn;if(v)for(On=0,xe=dn.length;On<xe;++On){xn=dn[On],Zn=xn[4],vn=this.createLabel(Zn,at,"",v),w=xn[2]+(qn[0]<0?-ln:ln),S=Ke*vn.height+(.5-Ke)*2*ln*qn[1]/qn[0]-Ie;const pn=this.calculateImageOrLabelDimensions_(vn.width,vn.height,xn[0],xn[1],vn.width,vn.height,w,S,0,0,xn[3],Oe,!1,ha,!1,ct);if(l&&l.collides(pn.declutterBox))break t;Qn.push([t,e,vn,pn,1,null,null])}if(B)for(On=0,xe=dn.length;On<xe;++On){xn=dn[On],Zn=xn[4],vn=this.createLabel(Zn,at,B,""),w=xn[2],S=Ke*vn.height-Ie;const pn=this.calculateImageOrLabelDimensions_(vn.width,vn.height,xn[0],xn[1],vn.width,vn.height,w,S,0,0,xn[3],Oe,!1,ha,!1,ct);if(l&&l.collides(pn.declutterBox))break t;Qn.push([t,e,vn,pn,1,null,null])}l&&l.load(Qn.map(c1));for(let pn=0,Hn=Qn.length;pn<Hn;++pn)this.replayImageOrLabel_.apply(this,Qn[pn])}}++f;break;case je.END_GEOMETRY:if(o!==void 0){ct=T[1];const Ee=o(ct,Yt);if(Ee)return Ee}++f;break;case je.FILL:lt?it++:this.fill_(t),++f;break;case je.MOVE_TO_LINE_TO:for(y=T[1],m=T[2],Et=u[y],ot=u[y+1],I=Et+.5|0,j=ot+.5|0,(I!==L||j!==E)&&(t.moveTo(Et,ot),L=I,E=j),y+=2;y<m;y+=2)Et=u[y],ot=u[y+1],I=Et+.5|0,j=ot+.5|0,(y==m-2||I!==L||j!==E)&&(t.lineTo(Et,ot),L=I,E=j);++f;break;case je.SET_FILL_STYLE:q=T,this.alignFill_=T[2],it&&(this.fill_(t),it=0,mt&&(t.stroke(),mt=0)),t.fillStyle=T[1],++f;break;case je.SET_STROKE_STYLE:F=T,mt&&(t.stroke(),mt=0),this.setStrokeStyle_(t,T),++f;break;case je.STROKE:lt?mt++:t.stroke(),++f;break;default:++f;break}}it&&this.fill_(t),mt&&t.stroke()}execute(t,e,i,r,s,o){this.viewRotation_=r,this.execute_(t,e,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(t,e,i,r,s){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,r,s)}}const rx=ix,kf=["Polygon","Circle","LineString","Image","Text","Default"];class sx{constructor(t,e,i,r,s,o){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Tr(),this.createExecutors_(s)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const e in t){let i=this.executorsByZIndex_[e];i===void 0&&(i={},this.executorsByZIndex_[e]=i);const r=t[e];for(const s in r){const o=r[s];i[s]=new rx(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let r=0,s=t.length;r<s;++r)if(t[r]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,r,s,o){r=Math.round(r);const a=r*2+1,l=Hs(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-i,-t[0],-t[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=ji(a,a,void 0,{willReadFrequently:!0}));const f=this.hitDetectionContext_;f.canvas.width!==a||f.canvas.height!==a?(f.canvas.width=a,f.canvas.height=a):u||f.clearRect(0,0,a,a);let d;this.renderBuffer_!==void 0&&(d=Rr(),lu(d,t),Ro(d,e*(this.renderBuffer_+r),d));const y=ox(r);let m;function w(Z,at){const v=f.getImageData(0,0,a,a).data;for(let B=0,it=y.length;B<it;B++)if(v[y[B]]>0){if(!o||m!=="Image"&&m!=="Text"||o.includes(Z)){const mt=(y[B]-3)/4,q=r-mt%a,F=r-(mt/a|0),V=s(Z,at,q*q+F*F);if(V)return V}f.clearRect(0,0,a,a);break}}const S=Object.keys(this.executorsByZIndex_).map(Number);S.sort(ko);let L,E,I,j,G;for(L=S.length-1;L>=0;--L){const Z=S[L].toString();for(I=this.executorsByZIndex_[Z],E=kf.length-1;E>=0;--E)if(m=kf[E],j=I[m],j!==void 0&&(G=j.executeHitDetection(f,l,i,w,d),G))return G}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],r=e[1],s=e[2],o=e[3],a=[i,r,i,o,s,o,s,r];return No(a,0,8,2,t,a),a}isEmpty(){return _l(this.executorsByZIndex_)}execute(t,e,i,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(ko),this.maxExtent_&&(t.save(),this.clip(t,i)),o=o||kf;let u,f,d,y,m,w;for(a&&l.reverse(),u=0,f=l.length;u<f;++u){const S=l[u].toString();for(m=this.executorsByZIndex_[S],d=0,y=o.length;d<y;++d){const L=o[d];w=m[L],w!==void 0&&w.execute(t,e,i,r,s,a)}}this.maxExtent_&&t.restore()}}const Ff={};function ox(n){if(Ff[n]!==void 0)return Ff[n];const t=n*2+1,e=n*n,i=new Array(e+1);for(let s=0;s<=n;++s)for(let o=0;o<=n;++o){const a=s*s+o*o;if(a>e)break;let l=i[a];l||(l=[],i[a]=l),l.push(((n+s)*t+(n+o))*4+3),s>0&&l.push(((n-s)*t+(n+o))*4+3),o>0&&(l.push(((n+s)*t+(n-o))*4+3),s>0&&l.push(((n-s)*t+(n-o))*4+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return Ff[n]=r,r}const uh=sx;class ax extends Gm{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return Qe()}getData(t){return null}prepareFrame(t){return Qe()}renderFrame(t,e){return Qe()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return(r,s)=>{const o=this.loadedTileCallback.bind(this,i,r);return t.forEachLoadedTile(e,r,s,o)}}forEachFeatureAtCoordinate(t,e,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;(e.getState()===Gn.LOADED||e.getState()===Gn.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=Gn.LOADED&&e!=Gn.ERROR&&t.addEventListener(Ye.CHANGE,this.boundHandleImageChange_),e==Gn.IDLE&&(t.load(),e=t.getState()),e==Gn.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const lx=ax;class ux extends $s{constructor(t,e,i,r){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=r}}const k2=ux,f1=[];let Za=null;function cx(){Za=ji(1,1,void 0,{willReadFrequently:!0})}class hx extends lx{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Tr(),this.pixelTransform=Tr(),this.inversePixelTransform=Tr(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){Za||cx(),Za.clearRect(0,0,1,1);let r;try{Za.drawImage(t,e,i,1,1,0,0,1,1),r=Za.getImageData(0,0,1,1).data}catch{return Za=null,null}return r}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,e,i){const r=this.getLayer().getClassName();let s,o;if(t&&t.className===r&&(!i||t&&t.style.backgroundColor&&zo(eh(t.style.backgroundColor),eh(i)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=ji();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const r=jo(i),s=Ih(i),o=Th(i),a=Lh(i);_i(e.coordinateToPixelTransform,r),_i(e.coordinateToPixelTransform,s),_i(e.coordinateToPixelTransform,o),_i(e.coordinateToPixelTransform,a);const l=this.inversePixelTransform;_i(l,r),_i(l,s),_i(l,o),_i(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,e,i){const r=this.getLayer();if(r.hasListener(t)){const s=new k2(t,this.inversePixelTransform,i,e);r.dispatchEvent(s)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(ys.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(ys.POSTRENDER,t,e)}getRenderTransform(t,e,i,r,s,o,a){const l=s/2,u=o/2,f=r/e,d=-f,y=-t[0]+a,m=-t[1];return Hs(this.tempTransform,l,u,f,d,-i,y,m)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const F2=hx,fe={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class fx extends Ph{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Ye.CHANGE)}release(){this.state===fe.ERROR&&this.setState(fe.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==fe.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==fe.LOADED){t.interimTile=null;break}else t.getState()==fe.LOADING?e=t:t.getState()==fe.IDLE?e.interimTile=t.interimTile:e=t;t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==fe.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){Qe()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(!i)i=e,this.transitionStarts_[t]=i;else if(i===-1)return 1;const r=e-i+1e3/60;return r>=this.transition_?1:h2(r/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const Uh=fx;class dx extends Uh{constructor(t,e,i,r,s,o){super(t,e,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=fe.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=fe.ERROR,this.unlistenImage_(),this.image_=px(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=fe.LOADED:this.state=fe.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==fe.ERROR&&(this.state=fe.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==fe.IDLE&&(this.state=fe.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=aw(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function px(){const n=ji(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const gx=dx,mx=.5,yx=10,d1=.25;class vx{constructor(t,e,i,r,s,o){this.sourceProj_=t,this.targetProj_=e;let a={};const l=gu(this.targetProj_,this.sourceProj_);this.transformInv_=function(I){const j=I[0]+"/"+I[1];return a[j]||(a[j]=l(I)),a[j]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Wn(r)>=Wn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Wn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Wn(this.targetProj_.getExtent()):null;const u=jo(i),f=Ih(i),d=Th(i),y=Lh(i),m=this.transformInv_(u),w=this.transformInv_(f),S=this.transformInv_(d),L=this.transformInv_(y),E=yx+(o?Math.max(0,Math.ceil(Math.log2(yd(i)/(o*o*256*256)))):0);if(this.addQuad_(u,f,d,y,m,w,S,L,E),this.wrapsXInSource_){let I=1/0;this.triangles_.forEach(function(j,G,Z){I=Math.min(I,j.source[0][0],j.source[1][0],j.source[2][0])}),this.triangles_.forEach(j=>{if(Math.max(j.source[0][0],j.source[1][0],j.source[2][0])-I>this.sourceWorldWidth_/2){const G=[[j.source[0][0],j.source[0][1]],[j.source[1][0],j.source[1][1]],[j.source[2][0],j.source[2][1]]];G[0][0]-I>this.sourceWorldWidth_/2&&(G[0][0]-=this.sourceWorldWidth_),G[1][0]-I>this.sourceWorldWidth_/2&&(G[1][0]-=this.sourceWorldWidth_),G[2][0]-I>this.sourceWorldWidth_/2&&(G[2][0]-=this.sourceWorldWidth_);const Z=Math.min(G[0][0],G[1][0],G[2][0]);Math.max(G[0][0],G[1][0],G[2][0])-Z<this.sourceWorldWidth_/2&&(j.source=G)}})}a={}}addTriangle_(t,e,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[t,e,i]})}addQuad_(t,e,i,r,s,o,a,l,u){const f=gd([s,o,a,l]),d=this.sourceWorldWidth_?Wn(f)/this.sourceWorldWidth_:null,y=this.sourceWorldWidth_,m=this.sourceProj_.canWrapX()&&d>.5&&d<1;let w=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const L=gd([t,e,i,r]);w=Wn(L)/this.targetWorldWidth_>d1||w}!m&&this.sourceProj_.isGlobal()&&d&&(w=d>d1||w)}if(!w&&this.maxSourceExtent_&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3])&&!li(f,this.maxSourceExtent_))return;let S=0;if(!w&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)w=!0;else if(S=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),S!=1&&S!=2&&S!=4&&S!=8)return}if(u>0){if(!w){const L=[(t[0]+i[0])/2,(t[1]+i[1])/2],E=this.transformInv_(L);let I;m?I=(ul(s[0],y)+ul(a[0],y))/2-ul(E[0],y):I=(s[0]+a[0])/2-E[0];const j=(s[1]+a[1])/2-E[1];w=I*I+j*j>this.errorThresholdSquared_}if(w){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const L=[(e[0]+i[0])/2,(e[1]+i[1])/2],E=this.transformInv_(L),I=[(r[0]+t[0])/2,(r[1]+t[1])/2],j=this.transformInv_(I);this.addQuad_(t,e,L,I,s,o,E,j,u-1),this.addQuad_(I,L,i,r,j,E,a,l,u-1)}else{const L=[(t[0]+e[0])/2,(t[1]+e[1])/2],E=this.transformInv_(L),I=[(i[0]+r[0])/2,(i[1]+r[1])/2],j=this.transformInv_(I);this.addQuad_(t,L,I,r,s,E,j,l,u-1),this.addQuad_(L,e,i,I,E,o,a,j,u-1)}return}}if(m){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(S&11)==0&&this.addTriangle_(t,i,r,s,a,l),(S&14)==0&&this.addTriangle_(t,i,e,s,a,o),S&&((S&13)==0&&this.addTriangle_(e,r,t,o,l,s),(S&7)==0&&this.addTriangle_(e,r,i,o,l,a))}calculateSourceExtent(){const t=Rr();return this.triangles_.forEach(function(e,i,r){const s=e.source;lu(t,s[0]),lu(t,s[1]),lu(t,s[2])}),t}getTriangles(){return this.triangles_}}const _x=vx;let Mf;const cl=[];function p1(n,t,e,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(t,e),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(t,i)+1,Math.max(e,r)),n.restore()}function Of(n,t){return Math.abs(n[t*4]-210)>2||Math.abs(n[t*4+3]-.75*255)>2}function bx(){if(Mf===void 0){const n=ji(6,6,cl);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",p1(n,4,5,4,0),p1(n,4,5,0,5);const t=n.getImageData(0,0,3,3).data;Mf=Of(t,0)||Of(t,4)||Of(t,8),ju(n),cl.push(n.canvas)}return Mf}function g1(n,t,e,i){const r=qm(e,t,n);let s=R0(t,i,e);const o=t.getMetersPerUnit();o!==void 0&&(s*=o);const a=n.getMetersPerUnit();a!==void 0&&(s/=a);const l=n.getExtent();if(!l||Ah(l,r)){const u=R0(n,s,r)/s;isFinite(u)&&u>0&&(s/=u)}return s}function wx(n,t,e,i){const r=ya(e);let s=g1(n,t,r,i);return(!isFinite(s)||s<=0)&&fp(e,function(o){return s=g1(n,t,o,i),isFinite(s)&&s>0}),s}function xx(n,t,e,i,r,s,o,a,l,u,f,d){const y=ji(Math.round(e*n),Math.round(e*t),cl);if(d||(y.imageSmoothingEnabled=!1),l.length===0)return y.canvas;y.scale(e,e);function m(G){return Math.round(G*e)/e}y.globalCompositeOperation="lighter";const w=Rr();l.forEach(function(G,Z,at){Uv(w,G.extent)});const S=Wn(w),L=Nr(w),E=ji(Math.round(e*S/i),Math.round(e*L/i),cl);d||(E.imageSmoothingEnabled=!1);const I=e/i;l.forEach(function(G,Z,at){const v=G.extent[0]-w[0],B=-(G.extent[3]-w[3]),it=Wn(G.extent),mt=Nr(G.extent);G.image.width>0&&G.image.height>0&&E.drawImage(G.image,u,u,G.image.width-2*u,G.image.height-2*u,v*I,B*I,it*I,mt*I)});const j=jo(o);return a.getTriangles().forEach(function(G,Z,at){const v=G.source,B=G.target;let it=v[0][0],mt=v[0][1],q=v[1][0],F=v[1][1],V=v[2][0],W=v[2][1];const et=m((B[0][0]-j[0])/s),st=m(-(B[0][1]-j[1])/s),lt=m((B[1][0]-j[0])/s),ct=m(-(B[1][1]-j[1])/s),Et=m((B[2][0]-j[0])/s),ot=m(-(B[2][1]-j[1])/s),Yt=it,T=mt;it=0,mt=0,q-=Yt,F-=T,V-=Yt,W-=T;const H=[[q,F,0,0,lt-et],[V,W,0,0,Et-et],[0,0,q,F,ct-st],[0,0,V,W,ot-st]],Y=Kv(H);if(!!Y){if(y.save(),y.beginPath(),bx()||!d){y.moveTo(lt,ct);const nt=4,dt=et-lt,wt=st-ct;for(let _t=0;_t<nt;_t++)y.lineTo(lt+m((_t+1)*dt/nt),ct+m(_t*wt/(nt-1))),_t!=nt-1&&y.lineTo(lt+m((_t+1)*dt/nt),ct+m((_t+1)*wt/(nt-1)));y.lineTo(Et,ot)}else y.moveTo(lt,ct),y.lineTo(et,st),y.lineTo(Et,ot);y.clip(),y.transform(Y[0],Y[2],Y[1],Y[3],et,st),y.translate(w[0]-Yt,w[3]-T),y.scale(i/e,-i/e),y.drawImage(E.canvas,0,0),y.restore()}}),ju(E),cl.push(E.canvas),f&&(y.save(),y.globalCompositeOperation="source-over",y.strokeStyle="black",y.lineWidth=1,a.getTriangles().forEach(function(G,Z,at){const v=G.target,B=(v[0][0]-j[0])/s,it=-(v[0][1]-j[1])/s,mt=(v[1][0]-j[0])/s,q=-(v[1][1]-j[1])/s,F=(v[2][0]-j[0])/s,V=-(v[2][1]-j[1])/s;y.beginPath(),y.moveTo(mt,q),y.lineTo(B,it),y.lineTo(F,V),y.closePath(),y.stroke()}),y.restore()),y.canvas}class Sx extends Uh{constructor(t,e,i,r,s,o,a,l,u,f,d,y){super(s,fe.IDLE,{interpolate:!!y}),this.renderEdges_=d!==void 0?d:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const m=r.getTileCoordExtent(this.wrappedTileCoord_),w=this.targetTileGrid_.getExtent();let S=this.sourceTileGrid_.getExtent();const L=w?da(m,w):m;if(yd(L)===0){this.state=fe.EMPTY;return}const E=t.getExtent();E&&(S?S=da(S,E):S=E);const I=r.getResolution(this.wrappedTileCoord_[0]),j=wx(t,i,L,I);if(!isFinite(j)||j<=0){this.state=fe.EMPTY;return}const G=f!==void 0?f:mx;if(this.triangulation_=new _x(t,i,L,S,j*G,I),this.triangulation_.getTriangles().length===0){this.state=fe.EMPTY;return}this.sourceZ_=e.getZForResolution(j);let Z=this.triangulation_.calculateSourceExtent();if(S&&(t.canWrapX()?(Z[1]=di(Z[1],S[1],S[3]),Z[3]=di(Z[3],S[1],S[3])):Z=da(Z,S)),!yd(Z))this.state=fe.EMPTY;else{const at=e.getTileRangeForExtentAndZ(Z,this.sourceZ_);for(let v=at.minX;v<=at.maxX;v++)for(let B=at.minY;B<=at.maxY;B++){const it=u(this.sourceZ_,v,B,a);it&&this.sourceTiles_.push(it)}this.sourceTiles_.length===0&&(this.state=fe.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(e=>{e&&e.getState()==fe.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}),this.sourceTiles_.length=0,t.length===0)this.state=fe.ERROR;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=xx(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=fe.LOADED}this.changed()}load(){if(this.state==fe.IDLE){this.state=fe.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(e=>{const i=e.getState();if(i==fe.IDLE||i==fe.LOADING){t++;const r=wn(e,Ye.CHANGE,function(s){const o=e.getState();(o==fe.LOADED||o==fe.ERROR||o==fe.EMPTY)&&(Xn(r),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,i,r){e.getState()==fe.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Xn),this.sourcesListenerKeys_=null}release(){this.canvas_&&(ju(this.canvas_.getContext("2d")),cl.push(this.canvas_),this.canvas_=null),super.release()}}const m1=Sx;class M2{constructor(t,e,i,r){this.minX=t,this.maxX=e,this.minY=i,this.maxY=r}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Va(n,t,e,i,r){return r!==void 0?(r.minX=n,r.maxX=t,r.minY=e,r.maxY=i,r):new M2(n,t,e,i)}const O2=M2;class Cx extends F2{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Rr(),this.tmpTileRange_=new O2(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),i=t.getState(),r=e.getUseInterimTilesOnError();return i==fe.LOADED||i==fe.EMPTY||i==fe.ERROR&&!r}getTile(t,e,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let u=a.getSource().getTile(t,e,i,s,o);return u.getState()==fe.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(u)||(u=u.getInterimTile()),u}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),r=_i(e.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!Ah(s,r))return null;const o=e.pixelRatio,a=e.viewState.projection,l=e.viewState,u=i.getRenderSource(),f=u.getTileGridForProjection(l.projection),d=u.getTilePixelRatio(e.pixelRatio);for(let y=f.getZForResolution(l.resolution);y>=f.getMinZoom();--y){const m=f.getTileCoordForCoordAndZ(r,y),w=u.getTile(y,m[1],m[2],o,a);if(!(w instanceof gx||w instanceof m1)||w instanceof m1&&w.getState()===fe.EMPTY)return null;if(w.getState()!==fe.LOADED)continue;const S=f.getOrigin(y),L=Wi(f.getTileSize(y)),E=f.getResolution(y),I=Math.floor(d*((r[0]-S[0])/E-m[1]*L[0])),j=Math.floor(d*((S[1]-r[1])/E-m[2]*L[1])),G=Math.round(d*u.getGutterForProjection(l.projection));return this.getImageData(w.getImage(),I+G,j+G)}return null}loadedTileCallback(t,e,i){return this.isDrawableTile(i)?super.loadedTileCallback(t,e,i):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex],r=t.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,u=t.pixelRatio,f=this.getLayer(),d=f.getSource(),y=d.getRevision(),m=d.getTileGridForProjection(s),w=m.getZForResolution(o,d.zDirection),S=m.getResolution(w);let L=t.extent;const E=t.viewState.resolution,I=d.getTilePixelRatio(u),j=Math.round(Wn(L)/E*u),G=Math.round(Nr(L)/E*u),Z=i.extent&&ua(i.extent);Z&&(L=da(L,ua(i.extent)));const at=S*j/2/I,v=S*G/2/I,B=[a[0]-at,a[1]-v,a[0]+at,a[1]+v],it=m.getTileRangeForExtentAndZ(L,w),mt={};mt[w]={};const q=this.createLoadedTileFinder(d,s,mt),F=this.tmpExtent,V=this.tmpTileRange_;this.newTiles_=!1;const W=l?_d(r.center,E,l,t.size):void 0;for(let H=it.minX;H<=it.maxX;++H)for(let Y=it.minY;Y<=it.maxY;++Y){if(l&&!m.tileCoordIntersectsViewport([w,H,Y],W))continue;const nt=this.getTile(w,H,Y,t);if(this.isDrawableTile(nt)){const _t=tn(this);if(nt.getState()==fe.LOADED){mt[w][nt.tileCoord.toString()]=nt;let St=nt.inTransition(_t);St&&i.opacity!==1&&(nt.endTransition(_t),St=!1),!this.newTiles_&&(St||!this.renderedTiles.includes(nt))&&(this.newTiles_=!0)}if(nt.getAlpha(_t,t.time)===1)continue}const dt=m.getTileCoordChildTileRange(nt.tileCoord,V,F);let wt=!1;dt&&(wt=q(w+1,dt)),wt||m.forEachTileCoordParentTileRange(nt.tileCoord,q,V,F)}const et=S/o*u/I;Hs(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/u,1/u,l,-j/2,-G/2);const st=Ym(this.pixelTransform);this.useContainer(e,st,this.getBackground(t));const lt=this.context,ct=lt.canvas;Sp(this.inversePixelTransform,this.pixelTransform),Hs(this.tempTransform,j/2,G/2,et,et,0,-j/2,-G/2),ct.width!=j||ct.height!=G?(ct.width=j,ct.height=G):this.containerReused||lt.clearRect(0,0,j,G),Z&&this.clipUnrotated(lt,t,Z),d.getInterpolate()||(lt.imageSmoothingEnabled=!1),this.preRender(lt,t),this.renderedTiles.length=0;let Et=Object.keys(mt).map(Number);Et.sort(ko);let ot,Yt,T;i.opacity===1&&(!this.containerReused||d.getOpaque(t.viewState.projection))?Et=Et.reverse():(ot=[],Yt=[]);for(let H=Et.length-1;H>=0;--H){const Y=Et[H],nt=d.getTilePixelSize(Y,u,s),wt=m.getResolution(Y)/S,_t=nt[0]*wt*et,St=nt[1]*wt*et,bt=m.getTileCoordForCoordAndZ(jo(B),Y),$t=m.getTileCoordExtent(bt),Jt=_i(this.tempTransform,[I*($t[0]-B[0])/S,I*(B[3]-$t[3])/S]),Ht=I*d.getGutterForProjection(s),ye=mt[Y];for(const Nt in ye){const J=ye[Nt],Ce=J.tileCoord,Zt=bt[1]-Ce[1],Wt=Math.round(Jt[0]-(Zt-1)*_t),Kt=bt[2]-Ce[2],ee=Math.round(Jt[1]-(Kt-1)*St),Gt=Math.round(Jt[0]-Zt*_t),le=Math.round(Jt[1]-Kt*St),ie=Wt-Gt,kt=ee-le,ne=w===Y,me=ne&&J.getAlpha(tn(this),t.time)!==1;let de=!1;if(!me)if(ot){T=[Gt,le,Gt+ie,le,Gt+ie,le+kt,Gt,le+kt];for(let re=0,_e=ot.length;re<_e;++re)if(w!==Y&&Y<Yt[re]){const qt=ot[re];li([Gt,le,Gt+ie,le+kt],[qt[0],qt[3],qt[4],qt[7]])&&(de||(lt.save(),de=!0),lt.beginPath(),lt.moveTo(T[0],T[1]),lt.lineTo(T[2],T[3]),lt.lineTo(T[4],T[5]),lt.lineTo(T[6],T[7]),lt.moveTo(qt[6],qt[7]),lt.lineTo(qt[4],qt[5]),lt.lineTo(qt[2],qt[3]),lt.lineTo(qt[0],qt[1]),lt.clip())}ot.push(T),Yt.push(Y)}else lt.clearRect(Gt,le,ie,kt);this.drawTileImage(J,t,Gt,le,ie,kt,Ht,ne),ot&&!me?(de&&lt.restore(),this.renderedTiles.unshift(J)):this.renderedTiles.push(J),this.updateUsedTiles(t.usedTiles,d,J)}}return this.renderedRevision=y,this.renderedResolution=S,this.extentChanged=!this.renderedExtent_||!bl(this.renderedExtent_,B),this.renderedExtent_=B,this.renderedPixelRatio=u,this.renderedProjection=s,this.manageTilePyramid(t,d,m,u,s,L,w,f.getPreload()),this.scheduleExpireCache(t,d),this.postRender(lt,t),i.extent&&lt.restore(),lt.imageSmoothingEnabled=!0,st!==ct.style.transform&&(ct.style.transform=st),this.container}drawTileImage(t,e,i,r,s,o,a,l){const u=this.getTileImage(t);if(!u)return;const f=tn(this),d=e.layerStatesArray[e.layerIndex],y=d.opacity*(l?t.getAlpha(f,e.time):1),m=y!==this.context.globalAlpha;m&&(this.context.save(),this.context.globalAlpha=y),this.context.drawImage(u,a,a,u.width-2*a,u.height-2*a,i,r,s,o),m&&this.context.restore(),y!==d.opacity?e.animate=!0:l&&t.endTransition(f)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const i=function(r,s,o){const a=tn(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,e);t.postRenderFunctions.push(i)}}updateUsedTiles(t,e,i){const r=tn(e);r in t||(t[r]={}),t[r][i.getKey()]=!0}manageTilePyramid(t,e,i,r,s,o,a,l,u){const f=tn(e);f in t.wantedTiles||(t.wantedTiles[f]={});const d=t.wantedTiles[f],y=t.tileQueue,m=i.getMinZoom(),w=t.viewState.rotation,S=w?_d(t.viewState.center,t.viewState.resolution,w,t.size):void 0;let L=0,E,I,j,G,Z,at;for(at=m;at<=a;++at)for(I=i.getTileRangeForExtentAndZ(o,at,I),j=i.getResolution(at),G=I.minX;G<=I.maxX;++G)for(Z=I.minY;Z<=I.maxY;++Z)w&&!i.tileCoordIntersectsViewport([at,G,Z],S)||(a-at<=l?(++L,E=e.getTile(at,G,Z,r,s),E.getState()==fe.IDLE&&(d[E.getKey()]=!0,y.isKeyQueued(E.getKey())||y.enqueue([E,f,i.getTileCoordCenter(E.tileCoord),j])),u!==void 0&&u(E)):e.useTile(at,G,Z,s));e.updateCacheSize(L,s)}}const Ex=Cx;class Ax extends P2{constructor(t,e,i,r,s,o,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=r,this.transformRotation_=r?dp(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Tr()}drawImages_(t,e,i,r){if(!this.image_)return;const s=No(t,e,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let f=0,d=s.length;f<d;f+=2){const y=s[f]-this.imageAnchorX_,m=s[f+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const w=y+this.imageAnchorX_,S=m+this.imageAnchorY_;Hs(a,w,S,1,1,u,-w,-S),o.save(),o.transform.apply(o,a),o.translate(w,S),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,m,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(t,e,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=No(t,e,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=r){const l=s[e]+this.textOffsetX_,u=s[e+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,u-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,u),this.textFillState_&&o.fillText(this.text_,l,u))}}moveToLineTo_(t,e,i,r,s){const o=this.context_,a=No(t,e,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let u=2;u<l;u+=2)o.lineTo(a[u],a[u+1]);return s&&o.closePath(),i}drawRings_(t,e,i,r){for(let s=0,o=i.length;s<o;++s)e=this.moveToLineTo_(t,e,i[s],r,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!li(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=k_(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],r=e[3]-e[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(e[0],e[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const i=e.getGeometryFunction()(t);!i||(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,r=e.length;i<r;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!li(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(!!li(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=t.getFlatCoordinates();let s=0;const o=t.getEnds(),a=t.getStride();i.beginPath();for(let l=0,u=o.length;l<u;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!li(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!li(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let r=0;const s=t.getEndss(),o=t.getStride();e.beginPath();for(let a=0,l=s.length;a<l;++a){const u=s[a];r=this.drawRings_(i,r,u,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),zo(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:wu;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=r&&(i.textAlign=r,e.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:fs(i||Qi)}}if(!e)this.strokeState_=null;else{const i=e.getColor(),r=e.getLineCap(),s=e.getLineDash(),o=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),u=e.getMiterLimit(),f=s||Us;this.strokeState_={lineCap:r!==void 0?r:Cl,lineDash:this.pixelRatio_===1?f:f.map(d=>d*this.pixelRatio_),lineDashOffset:(o||Gs)*this.pixelRatio_,lineJoin:a!==void 0?a:El,lineWidth:(l!==void 0?l:xu)*this.pixelRatio_,miterLimit:u!==void 0?u:_u,strokeStyle:fs(i||bu)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),r=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const m=e.getColor();this.textFillState_={fillStyle:fs(m||Qi)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const m=i.getColor(),w=i.getLineCap(),S=i.getLineDash(),L=i.getLineDashOffset(),E=i.getLineJoin(),I=i.getWidth(),j=i.getMiterLimit();this.textStrokeState_={lineCap:w!==void 0?w:Cl,lineDash:S||Us,lineDashOffset:L||Gs,lineJoin:E!==void 0?E:El,lineWidth:I!==void 0?I:xu,miterLimit:j!==void 0?j:_u,strokeStyle:fs(m||bu)}}const r=t.getFont(),s=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),u=t.getScaleArray(),f=t.getText(),d=t.getTextAlign(),y=t.getTextBaseline();this.textState_={font:r!==void 0?r:v2,textAlign:d!==void 0?d:wu,textBaseline:y!==void 0?y:nh},this.text_=f!==void 0?Array.isArray(f)?f.reduce((m,w,S)=>m+=S%2?" ":w,""):f:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const Lx=Ax,pr=.5;function D2(n,t,e,i,r,s,o){const a=n[0]*pr,l=n[1]*pr,u=ji(a,l);u.imageSmoothingEnabled=!1;const f=u.canvas,d=new Lx(u,pr,r,null,o),y=e.length,m=Math.floor((256*256*256-1)/y),w={};for(let L=1;L<=y;++L){const E=e[L-1],I=E.getStyleFunction()||i;if(!I)continue;let j=I(E,s);if(!j)continue;Array.isArray(j)||(j=[j]);const Z=(L*m).toString(16).padStart(7,"#00000");for(let at=0,v=j.length;at<v;++at){const B=j[at],it=B.getGeometryFunction()(E);if(!it||!li(r,it.getExtent()))continue;const mt=B.clone(),q=mt.getFill();q&&q.setColor(Z);const F=mt.getStroke();F&&(F.setColor(Z),F.setLineDash(null)),mt.setText(void 0);const V=B.getImage();if(V){const lt=V.getImageSize();if(!lt)continue;const ct=ji(lt[0],lt[1],void 0,{alpha:!1}),Et=ct.canvas;ct.fillStyle=Z,ct.fillRect(0,0,Et.width,Et.height),mt.setImage(new Al({img:Et,anchor:V.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:V.getOrigin(),opacity:1,size:V.getSize(),scale:V.getScale(),rotation:V.getRotation(),rotateWithView:V.getRotateWithView()}))}const W=mt.getZIndex()||0;let et=w[W];et||(et={},w[W]=et,et.Polygon=[],et.Circle=[],et.LineString=[],et.Point=[]);const st=it.getType();if(st==="GeometryCollection"){const lt=it.getGeometriesArrayRecursive();for(let ct=0,Et=lt.length;ct<Et;++ct){const ot=lt[ct];et[ot.getType().replace("Multi","")].push(ot,mt)}}else et[st.replace("Multi","")].push(it,mt)}}const S=Object.keys(w).map(Number).sort(ko);for(let L=0,E=S.length;L<E;++L){const I=w[S[L]];for(const j in I){const G=I[j];for(let Z=0,at=G.length;Z<at;Z+=2){d.setStyle(G[Z+1]);for(let v=0,B=t.length;v<B;++v)d.setTransform(t[v]),d.drawGeometry(G[Z])}}}return u.getImageData(0,0,f.width,f.height)}function j2(n,t,e){const i=[];if(e){const r=Math.floor(Math.round(n[0])*pr),s=Math.floor(Math.round(n[1])*pr),o=(di(r,0,e.width-1)+di(s,0,e.height-1)*e.width)*4,a=e.data[o],l=e.data[o+1],f=e.data[o+2]+256*(l+256*a),d=Math.floor((256*256*256-1)/t.length);f&&f%d===0&&i.push(t[f/d-1])}return i}const Tx=.5,z2={Point:Ox,LineString:kx,Polygon:jx,MultiPoint:Dx,MultiLineString:Fx,MultiPolygon:Mx,GeometryCollection:Px,Circle:Rx};function Ix(n,t){return parseInt(tn(n),10)-parseInt(tn(t),10)}function B2(n,t){const e=Pd(n,t);return e*e}function Pd(n,t){return Tx*n/t}function Rx(n,t,e,i,r){const s=e.getFill(),o=e.getStroke();if(s||o){const l=n.getBuilder(e.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(t,i)}const a=e.getText();if(a&&a.getText()){const l=(r||n).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function ch(n,t,e,i,r,s,o){let a=!1;const l=e.getImage();if(l){const u=l.getImageState();u==Gn.LOADED||u==Gn.ERROR?l.unlistenImageChange(r):(u==Gn.IDLE&&l.load(),l.listenImageChange(r),a=!0)}return Nx(n,t,e,i,s,o),a}function Nx(n,t,e,i,r,s){const o=e.getGeometryFunction()(t);if(!o)return;const a=o.simplifyTransformed(i,r);if(e.getRenderer())q2(n,a,e,t);else{const u=z2[a.getType()];u(n,a,e,t,s)}}function q2(n,t,e,i){if(t.getType()=="GeometryCollection"){const s=t.getGeometries();for(let o=0,a=s.length;o<a;++o)q2(n,s[o],e,i);return}n.getBuilder(e.getZIndex(),"Default").drawCustom(t,i,e.getRenderer(),e.getHitDetectionRenderer())}function Px(n,t,e,i,r){const s=t.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o){const l=z2[s[o].getType()];l(n,s[o],e,i,r)}}function kx(n,t,e,i,r){const s=e.getStroke();if(s){const a=n.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(t,i)}const o=e.getText();if(o&&o.getText()){const a=(r||n).getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function Fx(n,t,e,i,r){const s=e.getStroke();if(s){const a=n.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(t,i)}const o=e.getText();if(o&&o.getText()){const a=(r||n).getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i)}}function Mx(n,t,e,i,r){const s=e.getFill(),o=e.getStroke();if(o||s){const l=n.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(t,i)}const a=e.getText();if(a&&a.getText()){const l=(r||n).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function Ox(n,t,e,i,r){const s=e.getImage(),o=e.getText();let a;if(s){if(s.getImageState()!=Gn.LOADED)return;let l=n;if(r){const f=s.getDeclutterMode();if(f!=="none")if(l=r,f==="obstacle"){const d=n.getBuilder(e.getZIndex(),"Image");d.setImageStyle(s,a),d.drawPoint(t,i)}else o&&o.getText()&&(a={})}const u=l.getBuilder(e.getZIndex(),"Image");u.setImageStyle(s,a),u.drawPoint(t,i)}if(o&&o.getText()){let l=n;r&&(l=r);const u=l.getBuilder(e.getZIndex(),"Text");u.setTextStyle(o,a),u.drawText(t,i)}}function Dx(n,t,e,i,r){const s=e.getImage(),o=e.getText();let a;if(s){if(s.getImageState()!=Gn.LOADED)return;let l=n;if(r){const f=s.getDeclutterMode();if(f!=="none")if(l=r,f==="obstacle"){const d=n.getBuilder(e.getZIndex(),"Image");d.setImageStyle(s,a),d.drawMultiPoint(t,i)}else o&&o.getText()&&(a={})}const u=l.getBuilder(e.getZIndex(),"Image");u.setImageStyle(s,a),u.drawMultiPoint(t,i)}if(o&&o.getText()){let l=n;r&&(l=r);const u=l.getBuilder(e.getZIndex(),"Text");u.setTextStyle(o,a),u.drawText(t,i)}}function jx(n,t,e,i,r){const s=e.getFill(),o=e.getStroke();if(s||o){const l=n.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(t,i)}const a=e.getText();if(a&&a.getText()){const l=(r||n).getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}const zx={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},Bx={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class qx extends Ex{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.tmpTransform_=Tr()}prepareTile(t,e,i){let r;const s=t.getState();return(s===fe.LOADED||s===fe.ERROR)&&(this.updateExecutorGroup_(t,e,i),this.tileImageNeedsRender_(t)&&(r=!0)),r}getTile(t,e,i,r){const s=r.pixelRatio,o=r.viewState,a=o.resolution,l=o.projection,u=this.getLayer(),f=u.getSource().getTile(t,e,i,s,l),d=r.viewHints,y=!(d[ii.ANIMATING]||d[ii.INTERACTING]);return(y||!f.wantedResolution)&&(f.wantedResolution=a),this.prepareTile(f,s,l)&&(y||Date.now()-r.time<8)&&u.getRenderMode()!=="vector"&&this.renderTileImage_(f,r),super.getTile(t,e,i,r)}isDrawableTile(t){const e=this.getLayer();return super.isDrawableTile(t)&&(e.getRenderMode()==="vector"?tn(e)in t.executorGroups:t.hasContext(e))}getTileImage(t){return t.getImage(this.getLayer())}prepareFrame(t){const e=this.getLayer().getRevision();return this.renderedLayerRevision_!==e&&(this.renderedLayerRevision_=e,this.renderedTiles.length=0),super.prepareFrame(t)}updateExecutorGroup_(t,e,i){const r=this.getLayer(),s=r.getRevision(),o=r.getRenderOrder()||null,a=t.wantedResolution,l=t.getReplayState(r);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==s&&l.renderedRenderOrder==o)return;const u=r.getSource(),f=r.getDeclutter(),d=u.getTileGrid(),m=u.getTileGridForProjection(i).getTileCoordExtent(t.wrappedTileCoord),w=u.getSourceTiles(e,i,t),S=tn(r);delete t.hitDetectionImageData[S],t.executorGroups[S]=[],f&&(t.declutterExecutorGroups[S]=[]),l.dirty=!1;for(let L=0,E=w.length;L<E;++L){const I=w[L];if(I.getState()!=fe.LOADED)continue;const j=I.tileCoord,G=d.getTileCoordExtent(j),Z=da(m,G),at=Ro(Z,r.getRenderBuffer()*a,this.tmpExtent),v=bl(G,Z)?null:at,B=new lh(0,at,a,e),it=f?new lh(0,Z,a,e):void 0,mt=B2(a,e),q=function(st){let lt;const ct=st.getStyleFunction()||r.getStyleFunction();if(ct&&(lt=ct(st,a)),lt){const Et=this.renderFeature(st,mt,lt,B,it);l.dirty=l.dirty||Et}},F=I.getFeatures();o&&o!==l.renderedRenderOrder&&F.sort(o);for(let st=0,lt=F.length;st<lt;++st){const ct=F[st];(!v||li(v,ct.getGeometry().getExtent()))&&q.call(this,ct)}const V=B.finish(),W=r.getRenderMode()!=="vector"&&f&&w.length===1?null:Z,et=new uh(W,a,e,u.getOverlaps(),V,r.getRenderBuffer());if(t.executorGroups[S].push(et),it){const st=new uh(null,a,e,u.getOverlaps(),it.finish(),r.getRenderBuffer());t.declutterExecutorGroups[S].push(st)}}l.renderedRevision=s,l.renderedRenderOrder=o,l.renderedResolution=a}forEachFeatureAtCoordinate(t,e,i,r,s){const o=e.viewState.resolution,a=e.viewState.rotation;i=i==null?0:i;const l=this.getLayer(),f=l.getSource().getTileGridForProjection(e.viewState.projection),d=gd([t]);Ro(d,o*i,d);const y={},m=function(L,E,I){let j=L.getId();j===void 0&&(j=tn(L));const G=y[j];if(G){if(G!==!0&&I<G.distanceSq){if(I===0)return y[j]=!0,s.splice(s.lastIndexOf(G),1),r(L,l,E);G.geometry=E,G.distanceSq=I}}else{if(I===0)return y[j]=!0,r(L,l,E);s.push(y[j]={feature:L,layer:l,geometry:E,distanceSq:I,callback:r})}},w=this.renderedTiles;let S;for(let L=0,E=w.length;!S&&L<E;++L){const I=w[L],j=f.getTileCoordExtent(I.wrappedTileCoord);if(!li(j,d))continue;const G=tn(l),Z=[I.executorGroups[G]],at=I.declutterExecutorGroups[G];at&&Z.push(at),Z.some(v=>{const B=v===at?e.declutterTree.all().map(it=>it.value):null;for(let it=0,mt=v.length;it<mt;++it)if(S=v[it].forEachFeatureAtCoordinate(t,o,a,i,m,B),S)return!0})}return S}getFeatures(t){return new Promise((e,i)=>{const r=this.getLayer(),s=tn(r),o=r.getSource(),a=this.renderedProjection,l=a.getExtent(),u=this.renderedResolution,f=o.getTileGridForProjection(a),d=_i(this.renderedPixelToCoordinateTransform_,t.slice()),y=f.getTileCoordForCoordAndResolution(d,u);let m;for(let j=0,G=this.renderedTiles.length;j<G;++j)if(y.toString()===this.renderedTiles[j].tileCoord.toString()){if(m=this.renderedTiles[j],m.getState()===fe.LOADED){const Z=f.getTileCoordExtent(m.tileCoord);o.getWrapX()&&a.canWrapX()&&!la(l,Z)&&gp(d,a);break}m=void 0}if(!m||m.loadingSourceTiles>0){e([]);return}const w=f.getTileCoordExtent(m.wrappedTileCoord),S=jo(w),L=[(d[0]-S[0])/u,(S[1]-d[1])/u],E=m.getSourceTiles().reduce(function(j,G){return j.concat(G.getFeatures())},[]);let I=m.hitDetectionImageData[s];if(!I){const j=Wi(f.getTileSize(f.getZForResolution(u,o.zDirection))),G=this.renderedRotation_,Z=[this.getRenderTransform(f.getTileCoordCenter(m.wrappedTileCoord),u,0,pr,j[0]*pr,j[1]*pr,0)];I=D2(j,Z,E,r.getStyleFunction(),f.getTileCoordExtent(m.wrappedTileCoord),m.getReplayState(r).renderedResolution,G),m.hitDetectionImageData[s]=I}e(j2(L,E,I))})}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.renderedLayerRevision_!==void 0&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}renderDeclutter(t){const e=this.context,i=e.globalAlpha;e.globalAlpha=this.getLayer().getOpacity();const r=t.viewHints,s=!(r[ii.ANIMATING]||r[ii.INTERACTING]),o=this.renderedTiles;for(let a=0,l=o.length;a<l;++a){const u=o[a],f=u.declutterExecutorGroups[tn(this.getLayer())];if(f)for(let d=f.length-1;d>=0;--d)f[d].execute(this.context,1,this.getTileRenderTransform(u,t),t.viewState.rotation,s,void 0,t.declutterTree)}e.globalAlpha=i}getTileRenderTransform(t,e){const i=e.pixelRatio,r=e.viewState,s=r.center,o=r.resolution,a=r.rotation,l=e.size,u=Math.round(l[0]*i),f=Math.round(l[1]*i),y=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),m=t.tileCoord,w=y.getTileCoordExtent(t.wrappedTileCoord),S=y.getTileCoordExtent(m,this.tmpExtent)[0]-w[0];return xp(Af(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(s,o,a,i,u,f,S))}postRender(t,e){const i=e.viewHints,r=!(i[ii.ANIMATING]||i[ii.INTERACTING]);this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;const s=this.getLayer(),o=s.getRenderMode(),a=t.globalAlpha;t.globalAlpha=s.getOpacity();const l=Bx[o],u=e.viewState,f=u.rotation,d=s.getSource(),m=d.getTileGridForProjection(u.projection).getZForResolution(u.resolution,d.zDirection),w=this.renderedTiles,S=[],L=[];let E=!0;for(let I=w.length-1;I>=0;--I){const j=w[I];E=E&&!j.getReplayState(s).dirty;const G=j.executorGroups[tn(s)].filter(it=>it.hasExecutors(l));if(G.length===0)continue;const Z=this.getTileRenderTransform(j,e),at=j.tileCoord[0];let v=!1;const B=G[0].getClipCoords(Z);if(B){for(let it=0,mt=S.length;it<mt;++it)if(m!==at&&at<L[it]){const q=S[it];li([B[0],B[3],B[4],B[7]],[q[0],q[3],q[4],q[7]])&&(v||(t.save(),v=!0),t.beginPath(),t.moveTo(B[0],B[1]),t.lineTo(B[2],B[3]),t.lineTo(B[4],B[5]),t.lineTo(B[6],B[7]),t.moveTo(q[6],q[7]),t.lineTo(q[4],q[5]),t.lineTo(q[2],q[3]),t.lineTo(q[0],q[1]),t.clip())}S.push(B),L.push(at)}for(let it=0,mt=G.length;it<mt;++it)G[it].execute(t,1,Z,f,r,l);v&&t.restore()}t.globalAlpha=a,this.ready=E,super.postRender(t,e)}renderFeature(t,e,i,r,s){if(!i)return!1;let o=!1;if(Array.isArray(i))for(let a=0,l=i.length;a<l;++a)o=ch(r,t,i[a],e,this.boundHandleStyleImageChange_,void 0,s)||o;else o=ch(r,t,i,e,this.boundHandleStyleImageChange_,void 0,s);return o}tileImageNeedsRender_(t){const e=this.getLayer();if(e.getRenderMode()==="vector")return!1;const i=t.getReplayState(e),r=e.getRevision(),s=t.wantedResolution;return i.renderedTileResolution!==s||i.renderedTileRevision!==r}renderTileImage_(t,e){const i=this.getLayer(),r=t.getReplayState(i),s=i.getRevision(),o=t.executorGroups[tn(i)];r.renderedTileRevision=s;const a=t.wrappedTileCoord,l=a[0],u=i.getSource();let f=e.pixelRatio;const y=e.viewState.projection,m=u.getTileGridForProjection(y),w=m.getResolution(t.tileCoord[0]),S=e.pixelRatio/t.wantedResolution*w,L=m.getResolution(l),E=t.getContext(i);f=Math.round(Math.max(f,S/f));const I=u.getTilePixelSize(l,f,y);E.canvas.width=I[0],E.canvas.height=I[1];const j=f/S;if(j!==1){const v=k0(this.tmpTransform_);Af(v,j,j),E.setTransform.apply(E,v)}const G=m.getTileCoordExtent(a,this.tmpExtent),Z=S/L,at=k0(this.tmpTransform_);Af(at,Z,-Z),E_(at,-G[0],-G[3]);for(let v=0,B=o.length;v<B;++v)o[v].execute(E,j,at,0,!0,zx[i.getRenderMode()]);r.renderedTileResolution=t.wantedResolution}}const Ux=qx,Ec={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Gx extends N2{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un;const i=t.renderMode||"hybrid";hn(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(t.preload?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new Ux(this)}getFeatures(t){return super.getFeatures(t)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Ec.PRELOAD)}getUseInterimTilesOnError(){return this.get(Ec.USE_INTERIM_TILES_ON_ERROR)}setPreload(t){this.set(Ec.PRELOAD,t)}setUseInterimTilesOnError(t){this.set(Ec.USE_INTERIM_TILES_ON_ERROR,t)}}const U2=Gx;class Wx extends Uh{constructor(t,e,i,r,s,o){super(t,e,o),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=i,this.key=i}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==fe.IDLE&&(this.setState(fe.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(t,e){this.setFeatures(t)}onError(){this.setState(fe.ERROR)}setFeatures(t){this.features_=t,this.setState(fe.LOADED)}setLoader(t){this.loader_=t}}const Vx=Wx;class Hx{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const i=this.entries_[t];return hn(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const e=this.entries_[t];return hn(e!==void 0,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.key_;return t}getValues(){const t=new Array(this.count_);let e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(!!this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){hn(!(t in this.entries_),"Tried to set a value for a key that is used already");const i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}const $x=Hx;function y1(n,t,e,i){return i!==void 0?(i[0]=n,i[1]=t,i[2]=e,i):[n,t,e]}function Gu(n,t,e){return n+"/"+t+"/"+e}function Xx(n){return Gu(n[0],n[1],n[2])}function Yx(n){const[t,e,i]=n.substring(n.lastIndexOf("/")+1,n.length).split(",").map(Number);return Gu(t,e,i)}function G2(n){return n.split("/").map(Number)}function Kx(n){return(n[1]<<n[0])+n[2]}function Zx(n,t){const e=n[0],i=n[1],r=n[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;const s=t.getFullTileRange(e);return s?s.containsXY(i,r):!0}class Jx extends $x{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),i=G2(t)[0];this.forEach(r=>{r.tileCoord[0]!==i&&(this.remove(Xx(r.tileCoord)),r.release())})}}const W2=Jx,Ha=[0,0,0],mo=5;class Qx{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,hn(p_(this.resolutions_,function(r,s){return s-r},!0),"`resolutions` must be sorted in descending order");let e;if(!t.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!e)e=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,hn(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=jo(i)),hn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,hn(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:zp,hn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(r,s){const o=new O2(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){const r=this.getTileRangeForExtentAndZ(t,e);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)i([e,s,a])}forEachTileCoordParentTileRange(t,e,i,r){let s,o,a,l=null,u=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,r);u>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),s=Va(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,u,i),e(u,s))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const s=t[1]*2,o=t[2]*2;return Va(s,s+1,o,o+1,e)}const r=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;const r=t[0],s=t[1],o=t[2];if(e===r)return Va(s,o,s,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,e-r),u=Math.floor(s*l),f=Math.floor(o*l);if(e<r)return Va(u,u,f,f,i);const d=Math.floor(l*(s+1))-1,y=Math.floor(l*(o+1))-1;return Va(u,d,f,y,i)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,i)}getTileRangeForExtentAndZ(t,e,i){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,Ha);const r=Ha[1],s=Ha[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,Ha);const o=Ha[1],a=Ha[2];return Va(r,o,s,a,i)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Wi(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*i,e[1]-(t[2]+.5)*r[1]*i]}getTileCoordExtent(t,e){const i=this.getOrigin(t[0]),r=this.getResolution(t[0]),s=Wi(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*s[0]*r,a=i[1]-(t[2]+1)*s[1]*r,l=o+s[0]*r,u=a+s[1]*r;return bs(o,a,l,u,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),u=Wi(this.getTileSize(o),this.tmpSize_);let f=a*(t-l[0])/i/u[0],d=a*(l[1]-e)/i/u[1];return r?(f=yc(f,mo)-1,d=yc(d,mo)-1):(f=mc(f,mo),d=mc(d,mo)),y1(o,f,d,s)}getTileCoordForXYAndZ_(t,e,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),l=Wi(this.getTileSize(i),this.tmpSize_);let u=(t-o[0])/a/l[0],f=(o[1]-e)/a/l[1];return r?(u=yc(u,mo)-1,f=yc(f,mo)-1):(u=mc(u,mo),f=mc(f,mo)),y1(i,u,f,s)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const i=bp(this.resolutions_,t,e||0);return di(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return Qm(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,i=new Array(e);for(let r=this.minZoom;r<e;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=i}}const ng=Qx,Df={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class t3 extends ws{constructor(t){super(),this.projection=Di(t.projection),this.attributions_=v1(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(i,r){e.viewResolver=i,e.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=v1(t),this.changed()}setState(t){this.state_=t,this.changed()}}function v1(n){return n?Array.isArray(n)?function(t){return n}:typeof n=="function"?n:function(t){return[n]}:null}const V2=t3;function e3(n){let t=n.getDefaultTileGrid();return t||(t=s3(n),n.setDefaultTileGrid(t)),t}function n3(n,t,e){const i=t[0],r=n.getTileCoordCenter(t),s=ig(e);if(!Ah(s,r)){const o=Wn(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,n.getTileCoordForCoordAndZ(r,i)}return t}function i3(n,t,e,i){i=i!==void 0?i:"top-left";const r=H2(n,t,e);return new ng({extent:n,origin:Wv(n,i),resolutions:r,tileSize:e})}function r3(n){const t=n||{},e=t.extent||Di("EPSG:3857").getExtent(),i={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:H2(e,t.maxZoom,t.tileSize,t.maxResolution)};return new ng(i)}function H2(n,t,e,i){t=t!==void 0?t:c2,e=Wi(e!==void 0?e:zp);const r=Nr(n),s=Wn(n);i=i>0?i:Math.max(s/e[0],r/e[1]);const o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function s3(n,t,e,i){const r=ig(n);return i3(r,t,e,i)}function ig(n){n=Di(n);let t=n.getExtent();if(!t){const e=180*pu.degrees/n.getMetersPerUnit();t=bs(-e,-e,e,e)}return t}class o3 extends V2{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const e=[256,256];this.tileGrid&&Wi(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new W2(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const i=this.getTileCacheForProjection(t);i&&i.expireCache(e)}forEachLoadedTile(t,e,i,r){const s=this.getTileCacheForProjection(t);if(!s)return!1;let o=!0,a,l,u;for(let f=i.minX;f<=i.maxX;++f)for(let d=i.minY;d<=i.maxY;++d)l=Gu(e,f,d),u=!1,s.containsKey(l)&&(a=s.get(l),u=a.getState()===fe.LOADED,u&&(u=r(a)!==!1)),u||(o=!1);return o}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,i,r,s){return Qe()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:e3(t)}getTileCacheForProjection(t){const e=this.getProjection();return hn(e===null||Bm(e,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(e),o=Wi(r.getTileSize(t),this.tmpSize);return s==1?o:Vb(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=e!==void 0?e:this.getProjection();const i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=n3(i,t,e)),Zx(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,r){}}class a3 extends $s{constructor(t,e){super(t),this.tile=e}}const l3=o3;function u3(n,t){const e=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(!!o)return n.replace(e,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const u=o[0],f=t.getFullTileRange(u);return hn(f,"The {-y} placeholder requires a tile grid with extent"),(f.getHeight()-o[2]-1).toString()})}}function c3(n,t){const e=n.length,i=new Array(e);for(let r=0;r<e;++r)i[r]=u3(n[r],t);return h3(i)}function h3(n){return n.length===1?n[0]:function(t,e,i){if(!t)return;const r=Kx(t),s=ul(r,n.length);return n[s](t,e,i)}}function f3(n){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(n);if(e){const i=e[1].charCodeAt(0),r=e[2].charCodeAt(0);let s;for(s=i;s<=r;++s)t.push(n.replace(e[0],String.fromCharCode(s)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(n),e){const i=parseInt(e[2],10);for(let r=parseInt(e[1],10);r<=i;r++)t.push(n.replace(e[0],r.toString()));return t}return t.push(n),t}class rg extends l3{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===rg.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=tn(e),r=e.getState();let s;r==fe.LOADING?(this.tileLoadingKeys_[i]=!0,s=Df.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==fe.ERROR?Df.TILELOADERROR:r==fe.LOADED?Df.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new a3(s,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=f3(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(c3(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){const r=Gu(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const d3=rg,_1=[];class p3 extends Uh{constructor(t,e,i,r){super(t,e,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.wrappedTileCoord=i}getContext(t){const e=tn(t);return e in this.context_||(this.context_[e]=ji(1,1,_1)),this.context_[e]}hasContext(t){return tn(t)in this.context_}getImage(t){return this.hasContext(t)?this.getContext(t).canvas:null}getReplayState(t){const e=tn(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}load(){this.getSourceTiles()}release(){for(const t in this.context_){const e=this.context_[t];ju(e),_1.push(e.canvas),delete this.context_[t]}super.release()}}const g3=p3;let m3=!1;function $2(n,t,e,i,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(e,i,r):n,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=m3,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const u=t.getType();let f;u=="json"||u=="text"?f=a.responseText:u=="xml"?(f=a.responseXML,f||(f=new DOMParser().parseFromString(a.responseText,"application/xml"))):u=="arraybuffer"&&(f=a.response),f?s(t.readFeatures(f,{extent:e,featureProjection:r}),t.readProjection(f)):o()}else o()},a.onerror=o,a.send()}function b1(n,t){return function(e,i,r,s,o){const a=this;$2(n,t,e,i,r,function(l,u){a.addFeatures(l),s!==void 0&&s(l)},o||xl)}}class y3 extends d3{constructor(t){const e=t.projection||"EPSG:3857",i=t.extent||ig(e),r=t.tileGrid||r3({extent:i,maxResolution:t.maxResolution,maxZoom:t.maxZoom!==void 0?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512});super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,interpolate:!0,opaque:!1,projection:e,state:t.state,tileGrid:r,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:v3,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX===void 0?!0:t.wrapX,transition:t.transition,zDirection:t.zDirection===void 0?1:t.zDirection}),this.format_=t.format?t.format:null,this.sourceTileCache=new W2(this.tileCache.highWaterMark),this.overlaps_=t.overlaps==null?!0:t.overlaps,this.tileClass=t.tileClass?t.tileClass:Vx,this.tileGrids_={}}getFeaturesInExtent(t){const e=[],i=this.tileCache;if(i.getCount()===0)return e;const r=G2(i.peekFirstKey())[0],s=this.tileGrid;return i.forEach(function(o){if(o.tileCoord[0]!==r||o.getState()!==fe.LOADED)return;const a=o.getSourceTiles();for(let l=0,u=a.length;l<u;++l){const f=a[l],d=f.tileCoord;if(li(t,s.getTileCoordExtent(d))){const y=f.getFeatures();if(y)for(let m=0,w=y.length;m<w;++m){const S=y[m],L=S.getGeometry();li(t,L.getExtent())&&e.push(S)}}}}),e}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(t,e){const i=this.getTileCacheForProjection(t),r=Object.keys(e).reduce((s,o)=>{const a=Yx(o),l=i.peek(a);if(l){const u=l.sourceTiles;for(let f=0,d=u.length;f<d;++f)s[u[f].getKey()]=!0}return s},{});super.expireCache(t,e),this.sourceTileCache.expireCache(r)}getSourceTiles(t,e,i){if(i.getState()===fe.IDLE){i.setState(fe.LOADING);const r=i.wrappedTileCoord,s=this.getTileGridForProjection(e),o=s.getTileCoordExtent(r),a=r[0],l=s.getResolution(a);Ro(o,-l,o);const u=this.tileGrid,f=u.getExtent();f&&da(o,f,o);const d=u.getZForResolution(l,this.zDirection);u.forEachTileCoord(o,d,y=>{const m=this.tileUrlFunction(y,t,e),w=this.sourceTileCache.containsKey(m)?this.sourceTileCache.get(m):new this.tileClass(y,m?fe.IDLE:fe.EMPTY,m,this.format_,this.tileLoadFunction);i.sourceTiles.push(w);const S=w.getState();if(S<fe.LOADED){const L=E=>{this.handleTileChange(E);const I=w.getState();if(I===fe.LOADED||I===fe.ERROR){const j=w.getKey();j in i.errorTileKeys?w.getState()===fe.LOADED&&delete i.errorTileKeys[j]:i.loadingSourceTiles--,I===fe.ERROR?i.errorTileKeys[j]=!0:w.removeEventListener(Ye.CHANGE,L),i.loadingSourceTiles===0&&i.setState(_l(i.errorTileKeys)?fe.LOADED:fe.ERROR)}};w.addEventListener(Ye.CHANGE,L),i.loadingSourceTiles++}S===fe.IDLE&&(w.extent=u.getTileCoordExtent(y),w.projection=e,w.resolution=u.getResolution(y[0]),this.sourceTileCache.set(m,w),w.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(y=>y.getState()===fe.ERROR)?fe.ERROR:fe.LOADED)}return i.sourceTiles}getTile(t,e,i,r,s){const o=Gu(t,e,i),a=this.getKey();let l;if(this.tileCache.containsKey(o)&&(l=this.tileCache.get(o),l.key===a))return l;const u=[t,e,i];let f=this.getTileCoordForTileUrlFunction(u,s);const d=this.getTileGrid().getExtent(),y=this.getTileGridForProjection(s);if(f&&d){const S=y.getTileCoordExtent(f);Ro(S,-y.getResolution(t),S),li(d,S)||(f=null)}let m=!0;if(f!==null){const S=this.tileGrid,L=y.getResolution(t),E=S.getZForResolution(L,1),I=y.getTileCoordExtent(f);Ro(I,-L,I),S.forEachTileCoord(I,E,j=>{m=m&&!this.tileUrlFunction(j,r,s)})}const w=new g3(u,m?fe.EMPTY:fe.IDLE,f,this.getSourceTiles.bind(this,r,s));return w.key=a,l?(w.interimTile=l,w.refreshInterimChain(),this.tileCache.replace(o,w)):this.tileCache.set(o,w),w}getTileGridForProjection(t){const e=t.getCode();let i=this.tileGrids_[e];if(!i){const r=this.tileGrid,s=r.getResolutions().slice(),o=s.map(function(u,f){return r.getOrigin(f)}),a=s.map(function(u,f){return r.getTileSize(f)}),l=c2+1;for(let u=s.length;u<l;++u)s.push(s[u-1]/2),o.push(o[u-1]),a.push(a[u-1]);i=new ng({extent:r.getExtent(),origins:o,resolutions:s,tileSizes:a}),this.tileGrids_[e]=i}return i}getTilePixelRatio(t){return t}getTilePixelSize(t,e,i){const r=this.getTileGridForProjection(i),s=Wi(r.getTileSize(t),this.tmpSize);return[Math.round(s[0]*e),Math.round(s[1]*e)]}updateCacheSize(t,e){super.updateCacheSize(t*2,e),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(e).highWaterMark}}const X2=y3;function v3(n,t){n.setLoader(function(e,i,r){$2(t,n.getFormat(),e,i,r,n.onLoad.bind(n),n.onError.bind(n))})}const tr={ADD:"add",REMOVE:"remove"},w1={LENGTH:"length"};class Ac extends $s{constructor(t,e,i){super(t),this.element=e,this.index=i}}class _3 extends ws{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,r=e.length;i<r;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(w1.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Ac(tr.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,r=e.length;i<r;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Ac(tr.REMOVE,e,t)),e}setAt(t,e){const i=this.getLength();if(t>=i){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Ac(tr.REMOVE,r,t)),this.dispatchEvent(new Ac(tr.ADD,e,t))}updateLength_(){this.set(w1.LENGTH,this.array_.length)}assertUnique_(t,e){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===t&&i!==e)throw new Error("Duplicate item added to a unique collection")}}const ds=_3;class b3 extends F2{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Rr(),this.wrappedRenderedExtent_=Rr(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){const r=e.extent,s=e.viewState,o=s.center,a=s.resolution,l=s.projection,u=s.rotation,f=l.getExtent(),d=this.getLayer().getSource(),y=e.pixelRatio,m=e.viewHints,w=!(m[ii.ANIMATING]||m[ii.INTERACTING]),S=this.compositionContext_,L=Math.round(e.size[0]*y),E=Math.round(e.size[1]*y),I=d.getWrapX()&&l.canWrapX(),j=I?Wn(f):null,G=I?Math.ceil((r[2]-f[2])/j)+1:1;let Z=I?Math.floor((r[0]-f[0])/j):0;do{const at=this.getRenderTransform(o,a,u,y,L,E,Z*j);t.execute(S,1,at,u,w,void 0,i)}while(++Z<G)}setupCompositionContext_(){if(this.opacity_!==1){const t=ji(this.context.canvas.width,this.context.canvas.height,f1);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,ju(this.compositionContext_),f1.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];C_(this.pixelTransform,1/i,1/i),Sp(this.inversePixelTransform,this.pixelTransform);const s=Ym(this.pixelTransform);this.useContainer(e,s,this.getBackground(t));const o=this.context,a=o.canvas,l=this.replayGroup_,u=this.declutterExecutorGroup;let f=l&&!l.isEmpty()||u&&!u.isEmpty();if(!f&&!(this.getLayer().hasListener(ys.PRERENDER)||this.getLayer().hasListener(ys.POSTRENDER)))return null;const d=Math.round(t.size[0]*i),y=Math.round(t.size[1]*i);a.width!=d||a.height!=y?(a.width=d,a.height=y,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,d,y),this.preRender(o,t);const m=t.viewState;m.projection,this.opacity_=r.opacity,this.setupCompositionContext_();let w=!1;if(f&&r.extent&&this.clipping){const S=ua(r.extent);f=li(S,t.extent),w=f&&!la(S,t.extent),w&&this.clipUnrotated(this.compositionContext_,t,S)}return f&&this.renderWorlds(l,t),w&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==m.rotation&&(this.renderedRotation_=m.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];_i(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),f=[],d=i[0]*pr,y=i[1]*pr;f.push(this.getRenderTransform(r,s,o,pr,d,y,0).slice());const m=u.getSource(),w=a.getExtent();if(m.getWrapX()&&a.canWrapX()&&!la(w,l)){let S=l[0];const L=Wn(w);let E=0,I;for(;S<w[0];)--E,I=L*E,f.push(this.getRenderTransform(r,s,o,pr,d,y,I).slice()),S+=L;for(E=0,S=l[2];S>w[2];)++E,I=L*E,f.push(this.getRenderTransform(r,s,o,pr,d,y,I).slice()),S-=L}this.hitDetectionImageData_=D2(i,f,this.renderedFeatures_,u.getStyleFunction(),l,s,o)}e(j2(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,i,r,s){if(!this.replayGroup_)return;const o=e.viewState.resolution,a=e.viewState.rotation,l=this.getLayer(),u={},f=function(m,w,S){const L=tn(m),E=u[L];if(E){if(E!==!0&&S<E.distanceSq){if(S===0)return u[L]=!0,s.splice(s.lastIndexOf(E),1),r(m,l,w);E.geometry=w,E.distanceSq=S}}else{if(S===0)return u[L]=!0,r(m,l,w);s.push(u[L]={feature:m,layer:l,geometry:w,distanceSq:S,callback:r})}};let d;const y=[this.replayGroup_];return this.declutterExecutorGroup&&y.push(this.declutterExecutorGroup),y.some(m=>d=m.forEachFeatureAtCoordinate(t,o,a,i,f,m===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(w=>w.value):null)),d}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const r=t.viewHints[ii.ANIMATING],s=t.viewHints[ii.INTERACTING],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,u=t.viewState,f=u.projection,d=u.resolution,y=t.pixelRatio,m=e.getRevision(),w=e.getRenderBuffer();let S=e.getRenderOrder();S===void 0&&(S=Ix);const L=u.center.slice(),E=Ro(l,w*d),I=E.slice(),j=[E.slice()],G=f.getExtent();if(i.getWrapX()&&f.canWrapX()&&!la(G,t.extent)){const et=Wn(G),st=Math.max(Wn(E)/2,et);E[0]=G[0]-st,E[2]=G[2]+st,gp(L,f);const lt=Mm(j[0],f);lt[0]<G[0]&&lt[2]<G[2]?j.push([lt[0]+et,lt[1],lt[2]+et,lt[3]]):lt[0]>G[0]&&lt[2]>G[2]&&j.push([lt[0]-et,lt[1],lt[2]-et,lt[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==m&&this.renderedRenderOrder_==S&&la(this.wrappedRenderedExtent_,E))return zo(this.renderedExtent_,I)||(this.hitDetectionImageData_=null,this.renderedExtent_=I),this.renderedCenter_=L,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const Z=new lh(Pd(d,y),E,d,y);let at;this.getLayer().getDeclutter()&&(at=new lh(Pd(d,y),E,d,y));let v;for(let et=0,st=j.length;et<st;++et)i.loadFeatures(j[et],d,f);const B=B2(d,y);let it=!0;const mt=et=>{let st;const lt=et.getStyleFunction()||e.getStyleFunction();if(lt&&(st=lt(et,d)),st){const ct=this.renderFeature(et,B,st,Z,v,at);it=it&&!ct}},q=Um(E),F=i.getFeaturesInExtent(q);S&&F.sort(S);for(let et=0,st=F.length;et<st;++et)mt(F[et]);this.renderedFeatures_=F,this.ready=it;const V=Z.finish(),W=new uh(E,d,y,i.getOverlaps(),V,e.getRenderBuffer());return at&&(this.declutterExecutorGroup=new uh(E,d,y,i.getOverlaps(),at.finish(),e.getRenderBuffer())),this.renderedResolution_=d,this.renderedRevision_=m,this.renderedRenderOrder_=S,this.renderedExtent_=I,this.wrappedRenderedExtent_=E,this.renderedCenter_=L,this.renderedProjection_=f,this.replayGroup_=W,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,u=i.length;l<u;++l)a=ch(r,t,i[l],e,this.boundHandleStyleImageChange_,s,o)||a;else a=ch(r,t,i,e,this.boundHandleStyleImageChange_,s,o);return a}}const w3=b3;class x3 extends N2{constructor(t){super(t)}createRenderer(){return new w3(this)}}const sg=x3;class S3{constructor(t){this.rbush_=new d2(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[tn(e)]=i}load(t,e){const i=new Array(e.length);for(let r=0,s=e.length;r<s;r++){const o=t[r],a=e[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=l,this.items_[tn(a)]=l}this.rbush_.load(i)}remove(t){const e=tn(t),i=this.items_[e];return delete this.items_[e],this.rbush_.remove(i)!==null}update(t,e){const i=this.items_[tn(e)],r=[i.minX,i.minY,i.maxX,i.maxY];bl(r,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(r){return r.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let r=0,s=t.length;r<s;r++)if(i=e(t[r]),i)return i;return i}isEmpty(){return _l(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return bs(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}const x1=S3,Vr={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function C3(n,t){return[[-1/0,-1/0,1/0,1/0]]}class yo extends $s{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class E3 extends V2{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=xl,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(hn(this.format_,"`format` must be set when `url` is set"),this.loader_=b1(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:C3;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new x1:null,this.loadedExtentsRtree_=new x1,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(t.features)?r=t.features:t.features&&(i=t.features,r=i.getArray()),!e&&i===void 0&&(i=new ds(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=tn(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new yo(Vr.ADDFEATURE,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[wn(e,Ye.CHANGE,this.handleFeatureChange_,this),wn(e,wl.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let i=!0;const r=e.getId();return r!==void 0&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=e),i&&(hn(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],r=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=tn(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],l=tn(a);this.setupChangeEvents_(l,a);const u=a.getGeometry();if(u){const f=u.getExtent();e.push(f),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(e,r),this.hasListener(Vr.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new yo(Vr.ADDFEATURE,i[s]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(Vr.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(Vr.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(tr.ADD,i=>{e||(e=!0,this.addFeature(i.element),e=!1)}),t.addEventListener(tr.REMOVE,i=>{e||(e=!0,this.removeFeature(i.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Xn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new yo(Vr.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(r){if(r.getGeometry().intersectsCoordinate(t))return e(r)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){const s=e(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),_l(this.nullGeometryFeatures_)||ms(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){e.push(i)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const r=Xv(t,e);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],r=t[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return e=e||mu,this.featuresRtree_.forEachInExtent(l,function(u){if(e(u)){const f=u.getGeometry(),d=a;if(a=f.closestPointXY(i,r,o,a),a<d){s=u;const y=Math.sqrt(a);l[0]=i-y,l[1]=r-y,l[2]=i+y,l[3]=r+y}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=tn(e),r=e.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);else{const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}const s=e.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[o]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new yo(Vr.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:tn(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&_l(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,i){const r=this.loadedExtentsRtree_,s=this.strategy_(t,e,i);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(f){return la(f.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new yo(Vr.FEATURESLOADSTART)),this.loader_.call(this,l,e,i,f=>{--this.loadingExtentsCount_,this.dispatchEvent(new yo(Vr.FEATURESLOADEND,void 0,f))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new yo(Vr.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let i;e.forEachInExtent(t,function(r){if(bl(r.extent,t))return i=r,!0}),i&&e.remove(i)}removeFeature(t){if(!t)return;const e=tn(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=tn(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(Xn),delete this.featureChangeKeys_[e];const r=t.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[e],this.dispatchEvent(new yo(Vr.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){hn(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(b1(t,this.format_))}}const og=E3;class A3{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const r=this.points_[e+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const L3=A3;class T3 extends _p{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){Qe()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;Hs(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Sp(r,i)}forEachFeatureAtCoordinate(t,e,i,r,s,o,a,l){let u;const f=e.viewState;function d(G,Z,at,v){return s.call(o,Z,G?at:null,v)}const y=f.projection,m=gp(t.slice(),y),w=[[0,0]];if(y.canWrapX()&&r){const G=y.getExtent(),Z=Wn(G);w.push([-Z,0],[Z,0])}const S=e.layerStatesArray,L=S.length,E=[],I=[];for(let G=0;G<w.length;G++)for(let Z=L-1;Z>=0;--Z){const at=S[Z],v=at.layer;if(v.hasRenderer()&&Gp(at,f)&&a.call(l,v)){const B=v.getRenderer(),it=v.getSource();if(B&&it){const mt=it.getWrapX()?m:t,q=d.bind(null,at.managed);I[0]=mt[0]+w[G][0],I[1]=mt[1]+w[G][1],u=B.forEachFeatureAtCoordinate(I,e,i,q,E)}if(u)return u}}if(E.length===0)return;const j=1/E.length;return E.forEach((G,Z)=>G.distanceSq+=Z*j),E.sort((G,Z)=>G.distanceSq-Z.distanceSq),E.some(G=>u=G.callback(G.feature,G.layer,G.geometry)),u}hasFeatureAtCoordinate(t,e,i,r,s,o){return this.forEachFeatureAtCoordinate(t,e,i,r,mu,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(t){Qe()}flushDeclutterItems(t){}scheduleExpireIconCache(t){rh.canExpireCache()&&t.postRenderFunctions.push(I3)}}function I3(n,t){rh.expire()}const R3=T3;class N3 extends R3{constructor(t){super(t),this.fontChangeListenerKey_=wn(Bs,wl.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=jh+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(t,e){const i=this.getMap();if(i.hasListener(t)){const r=new k2(t,void 0,e);i.dispatchEvent(r)}}disposeInternal(){Xn(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(ys.PRECOMPOSE,t);const e=t.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=t.viewState;this.children_.length=0;const r=this.declutterLayers_;r.length=0;let s=null;for(let o=0,a=e.length;o<a;++o){const l=e[o];t.layerIndex=o;const u=l.layer,f=u.getSourceState();if(!Gp(l,i)||f!="ready"&&f!="undefined"){u.unrender();continue}const d=u.render(t,s);!d||(d!==s&&(this.children_.push(d),s=d),"getDeclutter"in u&&r.push(u))}this.flushDeclutterItems(t),Jb(this.element_,this.children_),this.dispatchRenderEvent(ys.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}flushDeclutterItems(t){const e=this.declutterLayers_;for(let i=e.length-1;i>=0;--i)e[i].renderDeclutter(t);e.length=0}}const P3=N3;class Co extends $s{constructor(t,e){super(t),this.layer=e}}const jf={LAYERS:"layers"};class ag extends u2{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(jf.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new ds(i.slice(),{unique:!0}):hn(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new ds(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Xn),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(wn(t,tr.ADD,this.handleLayersAdd_,this),wn(t,tr.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Xn);Mu(this.listenerKeys_);const e=t.getArray();for(let i=0,r=e.length;i<r;i++){const s=e[i];this.registerLayerListeners_(s),this.dispatchEvent(new Co("addlayer",s))}this.changed()}registerLayerListeners_(t){const e=[wn(t,wl.PROPERTYCHANGE,this.handleLayerChange_,this),wn(t,Ye.CHANGE,this.handleLayerChange_,this)];t instanceof ag&&e.push(wn(t,"addlayer",this.handleLayerGroupAdd_,this),wn(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[tn(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new Co("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Co("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Co("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,i=tn(e);this.listenerKeys_[i].forEach(Xn),delete this.listenerKeys_[i],this.dispatchEvent(new Co("removelayer",e)),this.changed()}getLayers(){return this.get(jf.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const i=e.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new Co("removelayer",i[r]))}this.set(jf.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],i=e.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(e)});const r=this.getLayerState();let s=r.zIndex;!t&&r.zIndex===void 0&&(s=0);for(let o=i,a=e.length;o<a;o++){const l=e[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=da(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return e}getSourceState(){return"ready"}}const Gh=ag;class k3 extends $s{constructor(t,e,i){super(t),this.map=e,this.frameState=i!==void 0?i:null}}const Ja=k3;class F3 extends Ja{constructor(t,e,i,r,s,o){super(t,e,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const wo=F3,ei={SINGLECLICK:"singleclick",CLICK:Ye.CLICK,DBLCLICK:Ye.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},kd={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class M3 extends Ph{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=wn(i,kd.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=wn(i,kd.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ye.TOUCHMOVE,this.boundHandleTouchMove_,$m?{passive:!1}:!1)}emulateClick_(t){let e=new wo(ei.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new wo(ei.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new wo(ei.SINGLECLICK,this.map_,t);this.dispatchEvent(i)},250)}updateActivePointers_(t){const e=t,i=e.pointerId;if(e.type==ei.POINTERUP||e.type==ei.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==e.target){delete this.trackedTouches_[r];break}}else(e.type==ei.POINTERDOWN||e.type==ei.POINTERMOVE)&&(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new wo(ei.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Xn),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new wo(ei.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(wn(i,ei.POINTERMOVE,this.handlePointerMove_,this),wn(i,ei.POINTERUP,this.handlePointerUp_,this),wn(this.element_,ei.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(wn(this.element_.getRootNode(),ei.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new wo(ei.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new wo(ei.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Xn(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ye.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Xn(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Xn),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const O3=M3,xo={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Mi={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},hh=1/0;class D3{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Mu(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(t){hn(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=hh?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,r=e.length,s=e[t],o=i[t],a=t;for(;t<r>>1;){const l=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),f=u<r&&i[u]<i[l]?u:l;e[t]=e[f],i[t]=i[f],t=f}e[t]=s,i[t]=o,this.siftDown_(a,t)}siftDown_(t,e){const i=this.elements_,r=this.priorities_,s=i[e],o=r[e];for(;e>t;){const a=this.getParentIndex_(e);if(r[a]>o)i[e]=i[a],r[e]=r[a],e=a;else break}i[e]=s,r[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let r=0;const s=e.length;let o,a,l;for(a=0;a<s;++a)o=e[a],l=t(o),l==hh?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,e[r++]=o);e.length=r,i.length=r,this.heapify_()}}const j3=D3;class z3 extends j3{constructor(t,e){super(function(i){return t.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(Ye.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState();if(i===fe.LOADED||i===fe.ERROR||i===fe.EMPTY){i!==fe.ERROR&&e.removeEventListener(Ye.CHANGE,this.boundHandleTileChange_);const r=e.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i=0,r,s,o;for(;this.tilesLoading_<t&&i<e&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),r===fe.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}const B3=z3;function q3(n,t,e,i,r){if(!n||!(e in n.wantedTiles)||!n.wantedTiles[e][t.getKey()])return hh;const s=n.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class U3 extends ws{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Td(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Td(this.element);for(let e=0,i=this.listenerKeys.length;e<i;++e)Xn(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==xl&&this.listenerKeys.push(wn(t,xo.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const lg=U3;class G3 extends lg{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const e=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",r=t.expandClassName!==void 0?t.expandClassName:e+"-expand",s=t.collapseLabel!==void 0?t.collapseLabel:"\u203A",o=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Ye.CLICK,this.handleClick_.bind(this),!1);const u=e+" "+jh+" "+Hp+(this.collapsed_&&this.collapsible_?" "+J0:"")+(this.collapsible_?"":" ol-uncollapsible"),f=this.element;f.className=u,f.appendChild(this.toggleButton_),f.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(t)))),i=!this.getMap().getAllLayers().some(r=>r.getSource()&&r.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),e}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!zo(e,this.renderedAttributions_)){Zb(this.ulElement_);for(let r=0,s=e.length;r<s;++r){const o=document.createElement("li");o.innerHTML=e[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(J0),this.collapsed_?Z0(this.collapseLabel_,this.label_):Z0(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const Y2=G3;class W3 extends lg{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"\u21E7",r=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(Ye.CLICK,this.handleClick_.bind(this),!1);const a=e+" "+jh+" "+Hp,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Sc)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const i=e.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:Rl}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const i=e.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(Sc);!s&&i===0?this.element.classList.add(Sc):s&&i!==0&&this.element.classList.remove(Sc)}this.label_.style.transform=r}this.rotation_=i}}const V3=W3;class H3 extends lg{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,r=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",s=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"\u2013",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",u=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=r,f.setAttribute("type","button"),f.title=l,f.appendChild(typeof o=="string"?document.createTextNode(o):o),f.addEventListener(Ye.CLICK,this.handleClick_.bind(this,i),!1);const d=document.createElement("button");d.className=s,d.setAttribute("type","button"),d.title=u,d.appendChild(typeof a=="string"?document.createTextNode(a):a),d.addEventListener(Ye.CLICK,this.handleClick_.bind(this,-i),!1);const y=e+" "+jh+" "+Hp,m=this.element;m.className=y,m.appendChild(f),m.appendChild(d),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:Rl})):i.setZoom(s)}}}const $3=H3;function K2(n){n=n||{};const t=new ds;return(n.zoom!==void 0?n.zoom:!0)&&t.push(new $3(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&t.push(new V3(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&t.push(new Y2(n.attributionOptions)),t}const S1={ACTIVE:"active"};class X3 extends ws{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(S1.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(S1.ACTIVE,t)}setMap(t){this.map_=t}}function Y3(n,t,e){const i=n.getCenterInternal();if(i){const r=[i[0]+t[0],i[1]+t[1]];n.animateInternal({duration:e!==void 0?e:250,easing:Nb,center:n.getConstrainedCenter(r)})}}function ug(n,t,e,i){const r=n.getZoom();if(r===void 0)return;const s=n.getConstrainedZoom(r+t),o=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:e,duration:i!==void 0?i:250,easing:Rl})}const Wu=X3;class K3 extends Wu{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==ei.DBLCLICK){const i=t.originalEvent,r=t.map,s=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();ug(a,o,s,this.duration_),i.preventDefault(),e=!0}return!e}}const Z3=K3;class J3 extends Wu{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==ei.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==ei.POINTERUP){const i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==ei.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==ei.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function cg(n){const t=n.length;let e=0,i=0;for(let r=0;r<t;r++)e+=n[r].clientX,i+=n[r].clientY;return{clientX:e/t,clientY:i/t}}const Vu=J3;function Fd(n){const t=arguments;return function(e){let i=!0;for(let r=0,s=t.length;r<s&&(i=i&&t[r](e),!!i);++r);return i}}const Q3=function(n){const t=n.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},t4=function(n){const t=n.map.getTargetElement(),e=n.map.getOwnerDocument().activeElement;return t.contains(e)},Z2=function(n){return n.map.getTargetElement().hasAttribute("tabindex")?t4(n):!0},e4=mu,J2=function(n){const t=n.originalEvent;return t.button==0&&!(x_&&Wm&&t.ctrlKey)},Q2=function(n){const t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},n4=function(n){const t=n.originalEvent;return Wm?t.metaKey:t.ctrlKey},i4=function(n){const t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},ty=function(n){const t=n.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},zf=function(n){const t=n.originalEvent;return hn(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.pointerType=="mouse"},r4=function(n){const t=n.originalEvent;return hn(t!==void 0,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&t.button===0};class s4 extends Vu{constructor(t){super({stopDown:Nh}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:Fd(Q2,r4);this.condition_=t.onFocusOnly?Fd(Z2,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const i=this.targetPointers,r=e.getEventPixel(cg(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=t.map.getView();Jv(s,a.getResolution()),pp(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,i=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),l=e.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:Rl})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const o4=s4;class a4 extends Vu{constructor(t){t=t||{},super({stopDown:Nh}),this.condition_=t.condition?t.condition:Q3,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!zf(t))return;const e=t.map,i=e.getView();if(i.getConstraints().rotation===Up)return;const r=e.getSize(),s=t.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return zf(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return zf(t)&&J2(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const l4=a4;class u4 extends _p{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(t[0],e[0])+i,r.top=Math.min(t[1],e[1])+i,r.width=Math.abs(e[0]-t[0])+i,r.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Mo([r])}getGeometry(){return this.geometry_}}const c4=u4,Lc={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Bf extends $s{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}}class h4 extends Vu{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new c4(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:J2,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){const r=i[0]-e[0],s=i[1]-e[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Bf(Lc.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Bf(e?Lc.BOXEND:Lc.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Bf(Lc.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}}const f4=h4;class d4 extends f4{constructor(t){t=t||{};const e=t.condition?t.condition:i4;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:Rl})}}const p4=d4,ea={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class g4 extends Wu{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return Q2(e)&&ty(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==Ye.KEYDOWN){const i=t.originalEvent,r=i.key;if(this.condition_(t)&&(r==ea.DOWN||r==ea.LEFT||r==ea.RIGHT||r==ea.UP)){const o=t.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,u=0;r==ea.DOWN?u=-a:r==ea.LEFT?l=-a:r==ea.RIGHT?l=a:u=a;const f=[l,u];pp(f,o.getRotation()),Y3(o,f,this.duration_),i.preventDefault(),e=!0}}return!e}}const m4=g4;class y4 extends Wu{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(e){return!n4(e)&&ty(e)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==Ye.KEYDOWN||t.type==Ye.KEYPRESS){const i=t.originalEvent,r=i.key;if(this.condition_(t)&&(r==="+"||r==="-")){const s=t.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();ug(a,o,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}}const v4=y4;class _4 extends Wu{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:e4;this.condition_=t.onFocusOnly?Fd(Z2,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==Ye.WHEEL)return!0;const i=t.map,r=t.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let s;if(t.type==Ye.WHEEL&&(s=r.deltaY,b_&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=Vm),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-di(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),ug(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const b4=_4;class w4 extends Vu{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Nh),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=l}this.lastAngle_=s;const o=t.map,a=o.getView();a.getConstraints().rotation!==Up&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(cg(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}const x4=w4;class S4 extends Vu{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Nh),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(e=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,u=l.getView();e!=1&&(this.lastScaleDelta_=e),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(cg(this.targetPointers))),l.render(),u.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const i=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}const C4=S4;function E4(n){n=n||{};const t=new ds,e=new L3(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&t.push(new l4),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&t.push(new Z3({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&t.push(new o4({onFocusOnly:n.onFocusOnly,kinetic:e})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&t.push(new x4),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&t.push(new C4({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(t.push(new m4),t.push(new v4({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&t.push(new b4({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&t.push(new p4({duration:n.zoomDuration})),t}function ey(n){if(n instanceof Wp){n.setMapInternal(null);return}n instanceof Gh&&n.getLayers().forEach(ey)}function ny(n,t){if(n instanceof Wp){n.setMapInternal(t);return}if(n instanceof Gh){const e=n.getLayers().getArray();for(let i=0,r=e.length;i<r;++i)ny(e[i],t)}}class A4 extends ws{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=L4(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:Vm,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Tr(),this.pixelToCoordinateTransform_=Tr(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||K2(),this.interactions=e.interactions||E4({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new B3(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Mi.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Mi.VIEW,this.handleViewChanged_),this.addChangeListener(Mi.SIZE,this.handleSizeChanged_),this.addChangeListener(Mi.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const i=this;t.view&&!(t.view instanceof cs)&&t.view.then(function(r){i.setView(new cs(r))}),this.controls.addEventListener(tr.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(tr.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(tr.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(tr.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(tr.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(tr.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){ny(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:mu,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,e,null,o,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,function(r){i.push(r)},e),i}getAllLayers(){const t=[];function e(i){i.forEach(function(r){r instanceof Gh?e(r.getLayers()):t.push(r)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};const r=e.layerFilter!==void 0?e.layerFilter:mu,s=e.hitTolerance!==void 0?e.hitTolerance:0,o=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],o=i.height/r[1],a="changedTouches"in t?t.changedTouches[0]:t;return[(a.clientX-i.left)/s,(a.clientY-i.top)/o]}getTarget(){return this.get(Mi.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return wd(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?_i(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Mi.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof ds){e.setLayers(t);return}const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const r=t[e];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const e=zs(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?_i(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Mi.SIZE)}getView(){return this.get(Mi.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,r){return q3(this.frameState_,t,e,i,r)}handleBrowserEvent(t,e){e=e||t.type;const i=new wo(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===kd.POINTERDOWN||i===Ye.WHEEL||i===Ye.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=e.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let r=this.maxTilesLoading_,s=r;if(t){const o=t.viewHints;if(o[ii.ANIMATING]||o[ii.INTERACTING]){const a=Date.now()-t.time>8;r=a?0:8,s=a?0:2}}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,s))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(ys.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(ys.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Ja(xo.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Ja(xo.LOADSTART,this,t))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)Xn(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ye.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ye.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Td(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new P3(this)),this.mapBrowserEventHandler_=new O3(this,this.moveTolerance_);for(const s in ei)this.mapBrowserEventHandler_.addEventListener(ei[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ye.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ye.WHEEL,this.boundHandleBrowserEvent_,$m?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[wn(i,Ye.KEYDOWN,this.handleBrowserEvent,this),wn(i,Ye.KEYPRESS,this.handleBrowserEvent,this)];const r=e.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(e)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Xn(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Xn(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=wn(t,wl.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=wn(t,Ye.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Xn),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Co("addlayer",t)),this.layerGroupPropertyListenerKeys_=[wn(t,wl.PROPERTYCHANGE,this.render,this),wn(t,Ye.CHANGE,this.render,this),wn(t,"addlayer",this.handleLayerAdd_,this),wn(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const r=t[e].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const t=this.frameState_;!t||this.renderer_.flushDeclutterItems(t)}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){ey(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(e!==void 0&&Y0(e)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:vd(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:tn(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=vd(a.nextCenter,a.nextResolution,l,e)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Du(this.previousExtent_)&&!bl(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Ja(xo.MOVESTART,this,r)),this.previousExtent_=Ou(this.previousExtent_)),this.previousExtent_&&!s.viewHints[ii.ANIMATING]&&!s.viewHints[ii.INTERACTING]&&!bl(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Ja(xo.MOVEEND,this,s)),Pm(s.extent,this.previousExtent_))),this.dispatchEvent(new Ja(xo.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(xo.LOADSTART)||this.hasListener(xo.LOADEND)||this.hasListener(ys.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new Co("removelayer",e)),this.set(Mi.LAYERGROUP,t)}setSize(t){this.set(Mi.SIZE,t)}setTarget(t){this.set(Mi.TARGET,t)}setView(t){if(!t||t instanceof cs){this.set(Mi.VIEW,t);return}this.set(Mi.VIEW,new cs);const e=this;t.then(function(i){e.setView(new cs(i))})}updateSize(){const t=this.getTargetElement();let e;if(t){const r=getComputedStyle(t),s=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(e=[s,o],!Y0(e)&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Dm("No map visible because the map container's width or height are 0."))}const i=this.getSize();e&&(!i||!zo(e,i))&&(this.setSize(e),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let e;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}}}function L4(n){let t=null;n.keyboardEventTarget!==void 0&&(t=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const e={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Gh({layers:n.layers});e[Mi.LAYERGROUP]=i,e[Mi.TARGET]=n.target,e[Mi.VIEW]=n.view instanceof cs?n.view:new cs;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new ds(n.controls.slice()):(hn(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new ds(n.interactions.slice()):(hn(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let o;return n.overlays!==void 0?Array.isArray(n.overlays)?o=new ds(n.overlays.slice()):(hn(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=n.overlays):o=new ds,{controls:r,interactions:s,keyboardEventTarget:t,overlays:o,values:e}}const T4=A4;function iy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var I4={},ry,C1={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function uu(n){return n=Math.round(n),n<0?0:n>255?255:n}function E1(n){return n<0?0:n>1?1:n}function qf(n){return n[n.length-1]==="%"?uu(parseFloat(n)/100*255):uu(parseInt(n))}function Tc(n){return n[n.length-1]==="%"?E1(parseFloat(n)/100):E1(parseFloat(n))}function Uf(n,t,e){return e<0?e+=1:e>1&&(e-=1),e*6<1?n+(t-n)*e*6:e*2<1?t:e*3<2?n+(t-n)*(2/3-e)*6:n}function R4(n){var t=n.replace(/ /g,"").toLowerCase();if(t in C1)return C1[t].slice();if(t[0]==="#"){if(t.length===4){var e=parseInt(t.substr(1),16);return e>=0&&e<=4095?[(e&3840)>>4|(e&3840)>>8,e&240|(e&240)>>4,e&15|(e&15)<<4,1]:null}else if(t.length===7){var e=parseInt(t.substr(1),16);return e>=0&&e<=16777215?[(e&16711680)>>16,(e&65280)>>8,e&255,1]:null}return null}var i=t.indexOf("("),r=t.indexOf(")");if(i!==-1&&r+1===t.length){var s=t.substr(0,i),o=t.substr(i+1,r-(i+1)).split(","),a=1;switch(s){case"rgba":if(o.length!==4)return null;a=Tc(o.pop());case"rgb":return o.length!==3?null:[qf(o[0]),qf(o[1]),qf(o[2]),a];case"hsla":if(o.length!==4)return null;a=Tc(o.pop());case"hsl":if(o.length!==3)return null;var l=(parseFloat(o[0])%360+360)%360/360,u=Tc(o[1]),f=Tc(o[2]),d=f<=.5?f*(u+1):f+u-f*u,y=f*2-d;return[uu(Uf(y,d,l+1/3)*255),uu(Uf(y,d,l)*255),uu(Uf(y,d,l-1/3)*255),a];default:return null}}return null}try{ry=I4.parseCSSColor=R4}catch{}class nr{constructor(t,e,i,r=1){this.r=t,this.g=e,this.b=i,this.a=r}static parse(t){if(!t)return;if(t instanceof nr)return t;if(typeof t!="string")return;const e=ry(t);if(!!e)return new nr(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}toString(){const[t,e,i,r]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(i)},${r})`}toArray(){const{r:t,g:e,b:i,a:r}=this;return r===0?[0,0,0,0]:[t*255/r,e*255/r,i*255/r,r]}toArray01(){const{r:t,g:e,b:i,a:r}=this;return r===0?[0,0,0,0]:[t/r,e/r,i/r,r]}toArray01PremultipliedAlpha(){const{r:t,g:e,b:i,a:r}=this;return[t,e,i,r]}}nr.black=new nr(0,0,0,1);nr.white=new nr(1,1,1,1);nr.transparent=new nr(0,0,0,0);nr.red=new nr(1,0,0,1);nr.blue=new nr(0,0,1,1);var mr=nr;function Au(n){return typeof n=="object"?["literal",n]:n}function N4(n,t){let e=n.stops;if(!e)return P4(n,t);const i=e&&typeof e[0][0]=="object",r=i||n.property!==void 0,s=i||!r;return e=e.map(o=>!r&&t.tokens&&typeof o[1]=="string"?[o[0],O4(o[1])]:[o[0],Au(o[1])]),i?k4(n,t,e):s?M4(n,t,e):Md(n,t,e)}function P4(n,t){const e=["get",n.property];if(n.default===void 0)return t.type==="string"?["string",e]:e;if(t.type==="enum")return["match",e,Object.keys(t.values),e,n.default];{const i=[t.type==="color"?"to-color":t.type,e,Au(n.default)];return t.type==="array"&&i.splice(1,0,t.value,t.length||null),i}}function hg(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function k4(n,t,e){const i={},r={},s=[];for(let a=0;a<e.length;a++){const l=e[a],u=l[0].zoom;i[u]===void 0&&(i[u]={zoom:u,type:n.type,property:n.property,default:n.default},r[u]=[],s.push(u)),r[u].push([l[0].value,l[1]])}if(dg({},t)==="exponential"){const a=[hg(n),["linear"],["zoom"]];for(const l of s){const u=Md(i[l],t,r[l]);hl(a,l,u,!1)}return a}else{const a=["step",["zoom"]];for(const l of s){const u=Md(i[l],t,r[l]);hl(a,l,u,!0)}return fg(a),a}}function F4(n,t){if(n!==void 0)return n;if(t!==void 0)return t}function A1(n,t){const e=Au(F4(n.default,t.default));return e===void 0&&t.type==="resolvedImage"?"":e}function Md(n,t,e){const i=dg(n,t),r=["get",n.property];if(i==="categorical"&&typeof e[0][0]=="boolean"){const s=["case"];for(const o of e)s.push(["==",r,o[0]],o[1]);return s.push(A1(n,t)),s}else if(i==="categorical"){const s=["match",r];for(const o of e)hl(s,o[0],o[1],!1);return s.push(A1(n,t)),s}else if(i==="interval"){const s=["step",["number",r]];for(const o of e)hl(s,o[0],o[1],!0);return fg(s),n.default===void 0?s:["case",["==",["typeof",r],"number"],s,Au(n.default)]}else if(i==="exponential"){const s=n.base!==void 0?n.base:1,o=[hg(n),s===1?["linear"]:["exponential",s],["number",r]];for(const a of e)hl(o,a[0],a[1],!1);return n.default===void 0?o:["case",["==",["typeof",r],"number"],o,Au(n.default)]}else throw new Error(`Unknown property function type ${i}`)}function M4(n,t,e,i=["zoom"]){const r=dg(n,t);let s,o=!1;if(r==="interval")s=["step",i],o=!0;else if(r==="exponential"){const a=n.base!==void 0?n.base:1;s=[hg(n),a===1?["linear"]:["exponential",a],i]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of e)hl(s,a[0],a[1],o);return fg(s),s}function fg(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function hl(n,t,e,i){n.length>3&&t===n[n.length-2]||(i&&n.length===2||n.push(t),n.push(e))}function dg(n,t){return n.type?n.type:t.expression.interpolated?"exponential":"interval"}function O4(n){const t=["concat"],e=/{([^{}]+)}/g;let i=0;for(let r=e.exec(n);r!==null;r=e.exec(n)){const s=n.slice(i,e.lastIndex-r[0].length);i=e.lastIndex,s.length>0&&t.push(s),t.push(["get",r[1]])}if(t.length===1)return n;if(i<n.length)t.push(n.slice(i));else if(t.length===2)return["to-string",t[1]];return t}class D4 extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}var hs=D4;class pg{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[i,r]of e)this.bindings[i]=r}concat(t){return new pg(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return this.bindings[t]?!0:this.parent?this.parent.has(t):!1}}var j4=pg;const Wh={kind:"null"},se={kind:"number"},Je={kind:"string"},$e={kind:"boolean"},Ws={kind:"color"},fl={kind:"object"},Xe={kind:"value"},z4={kind:"error"},Vh={kind:"collator"},Hh={kind:"formatted"},Hu={kind:"resolvedImage"};function Lr(n,t){return{kind:"array",itemType:n,N:t}}function Yn(n){if(n.kind==="array"){const t=Yn(n.itemType);return typeof n.N=="number"?`array<${t}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${t}>`}else return n.kind}const B4=[Wh,se,Je,$e,Ws,Hh,fl,Lr(Xe),Hu];function Lu(n,t){if(t.kind==="error")return null;if(n.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Lu(n.itemType,t.itemType))&&(typeof n.N!="number"||n.N===t.N))return null}else{if(n.kind===t.kind)return null;if(n.kind==="value"){for(const e of B4)if(!Lu(e,t))return null}}return`Expected ${Yn(n)} but found ${Yn(t)} instead.`}function gg(n,t){return t.some(e=>e.kind===n.kind)}function Tu(n,t){return t.some(e=>e==="null"?n===null:e==="array"?Array.isArray(n):e==="object"?n&&!Array.isArray(n)&&typeof n=="object":e===typeof n)}class mg{constructor(t,e,i){t?this.sensitivity=e?"variant":"case":this.sensitivity=e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Od{constructor(t,e,i,r,s){this.text=t.normalize?t.normalize():t,this.image=e,this.scale=i,this.fontStack=r,this.textColor=s}}class vs{constructor(t){this.sections=t}static fromString(t){return new vs([new Od(t,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof vs?t:vs.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const i={};e.fontStack&&(i["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(i["font-scale"]=e.scale),e.textColor&&(i["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(i)}return t}}class Uo{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Uo({name:t,available:!1}):null}serialize(){return["image",this.name]}}function sy(n,t,e,i){return typeof n=="number"&&n>=0&&n<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof e=="number"&&e>=0&&e<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,t,e,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,t,e,i]:[n,t,e]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function fh(n){if(n===null)return!0;if(typeof n=="string")return!0;if(typeof n=="boolean")return!0;if(typeof n=="number")return!0;if(n instanceof mr)return!0;if(n instanceof mg)return!0;if(n instanceof vs)return!0;if(n instanceof Uo)return!0;if(Array.isArray(n)){for(const t of n)if(!fh(t))return!1;return!0}else if(typeof n=="object"){for(const t in n)if(!fh(n[t]))return!1;return!0}else return!1}function bi(n){if(n===null)return Wh;if(typeof n=="string")return Je;if(typeof n=="boolean")return $e;if(typeof n=="number")return se;if(n instanceof mr)return Ws;if(n instanceof mg)return Vh;if(n instanceof vs)return Hh;if(n instanceof Uo)return Hu;if(Array.isArray(n)){const t=n.length;let e;for(const i of n){const r=bi(i);if(!e)e=r;else{if(e===r)continue;e=Xe;break}}return Lr(e||Xe,t)}else return fl}function cu(n){const t=typeof n;return n===null?"":t==="string"||t==="number"||t==="boolean"?String(n):n instanceof mr||n instanceof vs||n instanceof Uo?n.toString():JSON.stringify(n)}class yg{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(t.length!==2)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!fh(t[1]))return e.error("invalid value");const i=t[1];let r=bi(i);const s=e.expectedType;return r.kind==="array"&&r.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(r=s),new yg(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof mr?["rgba"].concat(this.value.toArray()):this.value instanceof vs?this.value.serialize():this.value}}var dh=yg;class q4{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}var Ti=q4;const Gf={string:Je,number:se,boolean:$e,object:fl};class vg{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let i=1,r;const s=t[0];if(s==="array"){let a;if(t.length>2){const u=t[1];if(typeof u!="string"||!(u in Gf)||u==="object")return e.error('The item type argument of "array" must be one of string, number, boolean',1);a=Gf[u],i++}else a=Xe;let l;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);l=t[2],i++}r=Lr(a,l)}else r=Gf[s];const o=[];for(;i<t.length;i++){const a=e.parse(t[i],i,Xe);if(!a)return null;o.push(a)}return new vg(r,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const i=this.args[e].evaluate(t);if(Lu(this.type,bi(i))){if(e===this.args.length-1)throw new Ti(`Expected value to be of type ${Yn(this.type)}, but found ${Yn(bi(i))} instead.`)}else return i}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,e=[t.kind];if(t.kind==="array"){const i=t.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){e.push(i.kind);const r=t.N;(typeof r=="number"||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map(i=>i.serialize()))}}var qs=vg;class $h{constructor(t){this.type=Hh,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[1];if(!Array.isArray(i)&&typeof i=="object")return e.error("First argument must be an image or text section.");const r=[];let s=!1;for(let o=1;o<=t.length-1;++o){const a=t[o];if(s&&typeof a=="object"&&!Array.isArray(a)){s=!1;let l=null;if(a["font-scale"]&&(l=e.parse(a["font-scale"],1,se),!l))return null;let u=null;if(a["text-font"]&&(u=e.parse(a["text-font"],1,Lr(Je)),!u))return null;let f=null;if(a["text-color"]&&(f=e.parse(a["text-color"],1,Ws),!f))return null;const d=r[r.length-1];d.scale=l,d.font=u,d.textColor=f}else{const l=e.parse(t[o],1,Xe);if(!l)return null;const u=l.type.kind;if(u!=="string"&&u!=="value"&&u!=="null"&&u!=="resolvedImage")return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,r.push({content:l,scale:null,font:null,textColor:null})}}return new $h(r)}evaluate(t){const e=i=>{const r=i.content.evaluate(t);return bi(r)===Hu?new Od("",r,null,null,null):new Od(cu(r),null,i.scale?i.scale.evaluate(t):null,i.font?i.font.evaluate(t).join(","):null,i.textColor?i.textColor.evaluate(t):null)};return new vs(this.sections.map(e))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const i={};e.scale&&(i["font-scale"]=e.scale.serialize()),e.font&&(i["text-font"]=e.font.serialize()),e.textColor&&(i["text-color"]=e.textColor.serialize()),t.push(i)}return t}}class Xh{constructor(t){this.type=Hu,this.input=t}static parse(t,e){if(t.length!==2)return e.error("Expected two arguments.");const i=e.parse(t[1],1,Je);return i?new Xh(i):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),i=Uo.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const U4={"to-boolean":$e,"to-color":Ws,"to-number":se,"to-string":Je};class _g{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[0];if((i==="to-boolean"||i==="to-string")&&t.length!==2)return e.error("Expected one argument.");const r=U4[i],s=[];for(let o=1;o<t.length;o++){const a=e.parse(t[o],o,Xe);if(!a)return null;s.push(a)}return new _g(r,s)}evaluate(t){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(t));if(this.type.kind==="color"){let e,i;for(const r of this.args){if(e=r.evaluate(t),i=null,e instanceof mr)return e;if(typeof e=="string"){const s=t.parseColor(e);if(s)return s}else if(Array.isArray(e)&&(e.length<3||e.length>4?i=`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:i=sy(e[0],e[1],e[2],e[3]),!i))return new mr(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Ti(i||`Could not parse color from value '${typeof e=="string"?e:String(JSON.stringify(e))}'`)}else if(this.type.kind==="number"){let e=null;for(const i of this.args){if(e=i.evaluate(t),e===null)return 0;const r=Number(e);if(!isNaN(r))return r}throw new Ti(`Could not convert ${JSON.stringify(e)} to number.`)}else return this.type.kind==="formatted"?vs.fromString(cu(this.args[0].evaluate(t))):this.type.kind==="resolvedImage"?Uo.fromString(cu(this.args[0].evaluate(t))):cu(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if(this.type.kind==="formatted")return new $h([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Xh(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(e=>{t.push(e.serialize())}),t}}var sl=_g;const G4=["Unknown","Point","LineString","Polygon"];class W4{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?G4[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:i,y:r}=this.featureTileCoord,s=i*e-t[0],o=r*e-t[1],a=this.featureDistanceData.bearing[0],l=this.featureDistanceData.bearing[1];return a*s+l*o}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=mr.parse(t)),e}}var oy=W4;class ol{constructor(t,e,i,r){this.name=t,this.type=e,this._evaluate=i,this.args=r}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,e){const i=t[0],r=ol.definitions[i];if(!r)return e.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter(([u])=>!Array.isArray(u)||u.length===t.length-1);let l=null;for(const[u,f]of a){l=new hy(e.registry,e.path,null,e.scope);const d=[];let y=!1;for(let m=1;m<t.length;m++){const w=t[m],S=Array.isArray(u)?u[m-1]:u.type,L=l.parse(w,1+d.length,S);if(!L){y=!0;break}d.push(L)}if(!y){if(Array.isArray(u)&&u.length!==d.length){l.error(`Expected ${u.length} arguments, but found ${d.length} instead.`);continue}for(let m=0;m<d.length;m++){const w=Array.isArray(u)?u[m]:u.type,S=d[m];l.concat(m+1).checkSubtype(w,S.type)}if(l.errors.length===0)return new ol(i,s,f,d)}}if(a.length===1)e.errors.push(...l.errors);else{const f=(a.length?a:o).map(([y])=>V4(y)).join(" | "),d=[];for(let y=1;y<t.length;y++){const m=e.parse(t[y],1+d.length);if(!m)return null;d.push(Yn(m.type))}e.error(`Expected arguments of type ${f}, but found (${d.join(", ")}) instead.`)}return null}static register(t,e){ol.definitions=e;for(const i in e)t[i]=ol}}function V4(n){return Array.isArray(n)?`(${n.map(Yn).join(", ")})`:`(${Yn(n.type)}...)`}var Pl=ol;class Yh{constructor(t,e,i){this.type=Vh,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(t.length!==2)return e.error("Expected one argument.");const i=t[1];if(typeof i!="object"||Array.isArray(i))return e.error("Collator options argument must be an object.");const r=e.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,$e);if(!r)return null;const s=e.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,$e);if(!s)return null;let o=null;return i.locale&&(o=e.parse(i.locale,1,Je),!o)?null:new Yh(r,s,o)}evaluate(t){return new mg(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const Po=8192;function bg(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.max(n[2],t[0]),n[3]=Math.max(n[3],t[1])}function H4(n){return(180+n)/360}function $4(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function ph(n,t){return!(n[0]<=t[0]||n[2]>=t[2]||n[1]<=t[1]||n[3]>=t[3])}function X4(n,t){const e=H4(n[0]),i=$4(n[1]),r=Math.pow(2,t.z);return[Math.round(e*r*Po),Math.round(i*r*Po)]}function Y4(n,t,e){const i=n[0]-t[0],r=n[1]-t[1],s=n[0]-e[0],o=n[1]-e[1];return i*o-s*r===0&&i*s<=0&&r*o<=0}function K4(n,t,e){return t[1]>n[1]!=e[1]>n[1]&&n[0]<(e[0]-t[0])*(n[1]-t[1])/(e[1]-t[1])+t[0]}function wg(n,t){let e=!1;for(let i=0,r=t.length;i<r;i++){const s=t[i];for(let o=0,a=s.length;o<a-1;o++){if(Y4(n,s[o],s[o+1]))return!1;K4(n,s[o],s[o+1])&&(e=!e)}}return e}function Z4(n,t){for(let e=0;e<t.length;e++)if(wg(n,t[e]))return!0;return!1}function J4(n,t){return n[0]*t[1]-n[1]*t[0]}function L1(n,t,e,i){const r=n[0]-e[0],s=n[1]-e[1],o=t[0]-e[0],a=t[1]-e[1],l=i[0]-e[0],u=i[1]-e[1],f=r*u-l*s,d=o*u-l*a;return f>0&&d<0||f<0&&d>0}function Q4(n,t,e,i){const r=[t[0]-n[0],t[1]-n[1]],s=[i[0]-e[0],i[1]-e[1]];return J4(s,r)===0?!1:!!(L1(n,t,e,i)&&L1(e,i,n,t))}function tS(n,t,e){for(const i of e)for(let r=0;r<i.length-1;++r)if(Q4(n,t,i[r],i[r+1]))return!0;return!1}function ay(n,t){for(let e=0;e<n.length;++e)if(!wg(n[e],t))return!1;for(let e=0;e<n.length-1;++e)if(tS(n[e],n[e+1],t))return!1;return!0}function eS(n,t){for(let e=0;e<t.length;e++)if(ay(n,t[e]))return!0;return!1}function xg(n,t,e){const i=[];for(let r=0;r<n.length;r++){const s=[];for(let o=0;o<n[r].length;o++){const a=X4(n[r][o],e);bg(t,a),s.push(a)}i.push(s)}return i}function ly(n,t,e){const i=[];for(let r=0;r<n.length;r++){const s=xg(n[r],t,e);i.push(s)}return i}function uy(n,t,e,i){if(n[0]<e[0]||n[0]>e[2]){const r=i*.5;let s=n[0]-e[0]>r?-i:e[0]-n[0]>r?i:0;s===0&&(s=n[0]-e[2]>r?-i:e[2]-n[0]>r?i:0),n[0]+=s}bg(t,n)}function nS(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function T1(n,t,e,i){const r=Math.pow(2,i.z)*Po,s=[i.x*Po,i.y*Po],o=[];if(!n)return o;for(const a of n)for(const l of a){const u=[l.x+s[0],l.y+s[1]];uy(u,t,e,r),o.push(u)}return o}function I1(n,t,e,i){const r=Math.pow(2,i.z)*Po,s=[i.x*Po,i.y*Po],o=[];if(!n)return o;for(const a of n){const l=[];for(const u of a){const f=[u.x+s[0],u.y+s[1]];bg(t,f),l.push(f)}o.push(l)}if(t[2]-t[0]<=r/2){nS(t);for(const a of o)for(const l of a)uy(l,t,e,r)}return o}function iS(n,t){const e=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(!r)return!1;if(t.type==="Polygon"){const s=xg(t.coordinates,i,r),o=T1(n.geometry(),e,i,r);if(!ph(e,i))return!1;for(const a of o)if(!wg(a,s))return!1}if(t.type==="MultiPolygon"){const s=ly(t.coordinates,i,r),o=T1(n.geometry(),e,i,r);if(!ph(e,i))return!1;for(const a of o)if(!Z4(a,s))return!1}return!0}function rS(n,t){const e=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=n.canonicalID();if(!r)return!1;if(t.type==="Polygon"){const s=xg(t.coordinates,i,r),o=I1(n.geometry(),e,i,r);if(!ph(e,i))return!1;for(const a of o)if(!ay(a,s))return!1}if(t.type==="MultiPolygon"){const s=ly(t.coordinates,i,r),o=I1(n.geometry(),e,i,r);if(!ph(e,i))return!1;for(const a of o)if(!eS(a,s))return!1}return!0}class hu{constructor(t,e){this.type=$e,this.geojson=t,this.geometries=e}static parse(t,e){if(t.length!==2)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(fh(t[1])){const i=t[1];if(i.type==="FeatureCollection")for(let r=0;r<i.features.length;++r){const s=i.features[r].geometry.type;if(s==="Polygon"||s==="MultiPolygon")return new hu(i,i.features[r].geometry)}else if(i.type==="Feature"){const r=i.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new hu(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new hu(i,i)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return iS(t,this.geometries);if(t.geometryType()==="LineString")return rS(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Sg=hu;function Kh(n){if(n instanceof Pl){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof Sg)return!1;let t=!0;return n.eachChild(e=>{t&&!Kh(e)&&(t=!1)}),t}function Cg(n){if(n instanceof Pl&&n.name==="feature-state")return!1;let t=!0;return n.eachChild(e=>{t&&!Cg(e)&&(t=!1)}),t}function Eg(n,t){if(n instanceof Pl&&t.indexOf(n.name)>=0)return!1;let e=!0;return n.eachChild(i=>{e&&!Eg(i,t)&&(e=!1)}),e}class Ag{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(t.length!==2||typeof t[1]!="string")return e.error("'var' expression requires exactly one string literal argument.");const i=t[1];return e.scope.has(i)?new Ag(i,e.scope.get(i)):e.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var cy=Ag;class Lg{constructor(t,e=[],i,r=new j4,s=[]){this.registry=t,this.path=e,this.key=e.map(o=>`[${o}]`).join(""),this.scope=r,this.errors=s,this.expectedType=i}parse(t,e,i,r,s={}){return e?this.concat(e,i,r)._parse(t,s):this._parse(t,s)}_parse(t,e){(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number")&&(t=["literal",t]);function i(r,s,o){return o==="assert"?new qs(s,[r]):o==="coerce"?new sl(s,[r]):r}if(Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=t[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[r];if(s){let o=s.parse(t,this);if(!o)return null;if(this.expectedType){const a=this.expectedType,l=o.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&l.kind==="value")o=i(o,a,e.typeAnnotation||"assert");else if((a.kind==="color"||a.kind==="formatted"||a.kind==="resolvedImage")&&(l.kind==="value"||l.kind==="string"))o=i(o,a,e.typeAnnotation||"coerce");else if(this.checkSubtype(a,l))return null}if(!(o instanceof dh)&&o.type.kind!=="resolvedImage"&&Dd(o)){const a=new oy;try{o=new dh(o.type,o.evaluate(a))}catch(l){return this.error(l.message),null}}return o}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof t>"u"?this.error("'undefined' value invalid. Use null instead."):typeof t=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,e,i){const r=typeof t=="number"?this.path.concat(t):this.path,s=i?this.scope.concat(i):this.scope;return new Lg(this.registry,r,e||null,s,this.errors)}error(t,...e){const i=`${this.key}${e.map(r=>`[${r}]`).join("")}`;this.errors.push(new hs(i,t))}checkSubtype(t,e){const i=Lu(t,e);return i&&this.error(i),i}}var hy=Lg;function Dd(n){if(n instanceof cy)return Dd(n.boundExpression);if(n instanceof Pl&&n.name==="error")return!1;if(n instanceof Yh)return!1;if(n instanceof Sg)return!1;const t=n instanceof sl||n instanceof qs;let e=!0;return n.eachChild(i=>{t?e=e&&Dd(i):e=e&&i instanceof dh}),e?Kh(n)&&Eg(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function fy(n,t){const e=n.length-1;let i=0,r=e,s=0,o,a;for(;i<=r;)if(s=Math.floor((i+r)/2),o=n[s],a=n[s+1],o<=t){if(s===e||t<a)return s;i=s+1}else if(o>t)r=s-1;else throw new Ti("Input is not a number.");return 0}class Tg{constructor(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[r,s]of i)this.labels.push(r),this.outputs.push(s)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return e.error("Expected an even number of arguments.");const i=e.parse(t[1],1,se);if(!i)return null;const r=[];let s=null;e.expectedType&&e.expectedType.kind!=="value"&&(s=e.expectedType);for(let o=1;o<t.length;o+=2){const a=o===1?-1/0:t[o],l=t[o+1],u=o,f=o+1;if(typeof a!="number")return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);const d=e.parse(l,f,s);if(!d)return null;s=s||d.type,r.push([a,d])}return new Tg(s,i,r)}evaluate(t){const e=this.labels,i=this.outputs;if(e.length===1)return i[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);const s=e.length;if(r>=e[s-1])return i[s-1].evaluate(t);const o=fy(e,r);return i[o].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var dy=Tg,sS=kl;function kl(n,t,e,i){this.cx=3*n,this.bx=3*(e-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=i,this.p2x=e,this.p2y=i}kl.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n};kl.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n};kl.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx};kl.prototype.solveCurveX=function(n,t){typeof t>"u"&&(t=1e-6);var e,i,r,s,o;for(r=n,o=0;o<8;o++){if(s=this.sampleCurveX(r)-n,Math.abs(s)<t)return r;var a=this.sampleCurveDerivativeX(r);if(Math.abs(a)<1e-6)break;r=r-s/a}if(e=0,i=1,r=n,r<e)return e;if(r>i)return i;for(;e<i;){if(s=this.sampleCurveX(r),Math.abs(s-n)<t)return r;n>s?e=r:i=r,r=(i-e)*.5+e}return r};kl.prototype.solve=function(n,t){return this.sampleCurveY(this.solveCurveX(n,t))};var oS=iy(sS);function gr(n,t,e){return n*(1-e)+t*e}function aS(n,t,e){return new mr(gr(n.r,t.r,e),gr(n.g,t.g,e),gr(n.b,t.b,e),gr(n.a,t.a,e))}function lS(n,t,e){return n.map((i,r)=>gr(i,t[r],e))}var uS=Object.freeze({__proto__:null,number:gr,color:aS,array:lS});const py=.95047,gy=1,my=1.08883,yy=4/29,dl=6/29,vy=3*dl*dl,cS=dl*dl*dl,hS=Math.PI/180,fS=180/Math.PI;function Wf(n){return n>cS?Math.pow(n,1/3):n/vy+yy}function Vf(n){return n>dl?n*n*n:vy*(n-yy)}function Hf(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function $f(n){return n/=255,n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function _y(n){const t=$f(n.r),e=$f(n.g),i=$f(n.b),r=Wf((.4124564*t+.3575761*e+.1804375*i)/py),s=Wf((.2126729*t+.7151522*e+.072175*i)/gy),o=Wf((.0193339*t+.119192*e+.9503041*i)/my);return{l:116*s-16,a:500*(r-s),b:200*(s-o),alpha:n.a}}function by(n){let t=(n.l+16)/116,e=isNaN(n.a)?t:t+n.a/500,i=isNaN(n.b)?t:t-n.b/200;return t=gy*Vf(t),e=py*Vf(e),i=my*Vf(i),new mr(Hf(3.2404542*e-1.5371385*t-.4985314*i),Hf(-.969266*e+1.8760108*t+.041556*i),Hf(.0556434*e-.2040259*t+1.0572252*i),n.alpha)}function dS(n,t,e){return{l:gr(n.l,t.l,e),a:gr(n.a,t.a,e),b:gr(n.b,t.b,e),alpha:gr(n.alpha,t.alpha,e)}}function pS(n){const{l:t,a:e,b:i}=_y(n),r=Math.atan2(i,e)*fS;return{h:r<0?r+360:r,c:Math.sqrt(e*e+i*i),l:t,alpha:n.a}}function gS(n){const t=n.h*hS,e=n.c,i=n.l;return by({l:i,a:Math.cos(t)*e,b:Math.sin(t)*e,alpha:n.alpha})}function mS(n,t,e){const i=t-n;return n+e*(i>180||i<-180?i-360*Math.round(i/360):i)}function yS(n,t,e){return{h:mS(n.h,t.h,e),c:gr(n.c,t.c,e),l:gr(n.l,t.l,e),alpha:gr(n.alpha,t.alpha,e)}}const Ic={forward:_y,reverse:by,interpolate:dS},Rc={forward:pS,reverse:gS,interpolate:yS};class gh{constructor(t,e,i,r,s){this.type=t,this.operator=e,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[o,a]of s)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(t,e,i,r){let s=0;if(t.name==="exponential")s=Xf(e,t.base,i,r);else if(t.name==="linear")s=Xf(e,1,i,r);else if(t.name==="cubic-bezier"){const o=t.controlPoints;s=new oS(o[0],o[1],o[2],o[3]).solve(Xf(e,1,i,r))}return s}static parse(t,e){let[i,r,s,...o]=t;if(!Array.isArray(r)||r.length===0)return e.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const u=r[1];if(typeof u!="number")return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:u}}else if(r[0]==="cubic-bezier"){const u=r.slice(1);if(u.length!==4||u.some(f=>typeof f!="number"||f<0||f>1))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:u}}else return e.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return e.error("Expected an even number of arguments.");if(s=e.parse(s,2,se),!s)return null;const a=[];let l=null;i==="interpolate-hcl"||i==="interpolate-lab"?l=Ws:e.expectedType&&e.expectedType.kind!=="value"&&(l=e.expectedType);for(let u=0;u<o.length;u+=2){const f=o[u],d=o[u+1],y=u+3,m=u+4;if(typeof f!="number")return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',y);if(a.length&&a[a.length-1][0]>=f)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',y);const w=e.parse(d,m,l);if(!w)return null;l=l||w.type,a.push([f,w])}return l.kind!=="number"&&l.kind!=="color"&&!(l.kind==="array"&&l.itemType.kind==="number"&&typeof l.N=="number")?e.error(`Type ${Yn(l)} is not interpolatable.`):new gh(l,i,r,s,a)}evaluate(t){const e=this.labels,i=this.outputs;if(e.length===1)return i[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);const s=e.length;if(r>=e[s-1])return i[s-1].evaluate(t);const o=fy(e,r),a=e[o],l=e[o+1],u=gh.interpolationFactor(this.interpolation,r,a,l),f=i[o].evaluate(t),d=i[o+1].evaluate(t);return this.operator==="interpolate"?uS[this.type.kind.toLowerCase()](f,d,u):this.operator==="interpolate-hcl"?Rc.reverse(Rc.interpolate(Rc.forward(f),Rc.forward(d),u)):Ic.reverse(Ic.interpolate(Ic.forward(f),Ic.forward(d),u))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;this.interpolation.name==="linear"?t=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?t=["linear"]:t=["exponential",this.interpolation.base]:t=["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let i=0;i<this.labels.length;i++)e.push(this.labels[i],this.outputs[i].serialize());return e}}function Xf(n,t,e,i){const r=i-e,s=n-e;return r===0?0:t===1?s/r:(Math.pow(t,s)-1)/(Math.pow(t,r)-1)}var ga=gh;class mh{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let i=null;const r=e.expectedType;r&&r.kind!=="value"&&(i=r);const s=[];for(const a of t.slice(1)){const l=e.parse(a,1+s.length,i,void 0,{typeAnnotation:"omit"});if(!l)return null;i=i||l.type,s.push(l)}return r&&s.some(a=>Lu(r,a.type))?new mh(Xe,s):new mh(i,s)}evaluate(t){let e=null,i=0,r;for(const s of this.args){if(i++,e=s.evaluate(t),e&&e instanceof Uo&&!e.available&&(r||(r=e),e=null,i===this.args.length))return r;if(e!==null)break}return e}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(e=>{t.push(e.serialize())}),t}}var wy=mh;class Ig{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const i=[];for(let s=1;s<t.length-1;s+=2){const o=t[s];if(typeof o!="string")return e.error(`Expected string, but found ${typeof o} instead.`,s);if(/[^a-zA-Z0-9_]/.test(o))return e.error("Variable names must contain only alphanumeric characters or '_'.",s);const a=e.parse(t[s+1],s+1);if(!a)return null;i.push([o,a])}const r=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return r?new Ig(i,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,i]of this.bindings)t.push(e,i.serialize());return t.push(this.result.serialize()),t}}var xy=Ig;class Rg{constructor(t,e,i){this.type=t,this.index=e,this.input=i}static parse(t,e){if(t.length!==3)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,se),r=e.parse(t[2],2,Lr(e.expectedType||Xe));if(!i||!r)return null;const s=r.type;return new Rg(s.itemType,i,r)}evaluate(t){const e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new Ti(`Array index out of bounds: ${e} < 0.`);if(e>=i.length)throw new Ti(`Array index out of bounds: ${e} > ${i.length-1}.`);if(e!==Math.floor(e))throw new Ti(`Array index must be an integer, but found ${e} instead.`);return i[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var vS=Rg;class Ng{constructor(t,e){this.type=$e,this.needle=t,this.haystack=e}static parse(t,e){if(t.length!==3)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,Xe),r=e.parse(t[2],2,Xe);return!i||!r?null:gg(i.type,[$e,Je,se,Wh,Xe])?new Ng(i,r):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Yn(i.type)} instead`)}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(i==null)return!1;if(!Tu(e,["boolean","string","number","null"]))throw new Ti(`Expected first argument to be of type boolean, string, number or null, but found ${Yn(bi(e))} instead.`);if(!Tu(i,["string","array"]))throw new Ti(`Expected second argument to be of type array or string, but found ${Yn(bi(i))} instead.`);return i.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var _S=Ng;class yh{constructor(t,e,i){this.type=se,this.needle=t,this.haystack=e,this.fromIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,Xe),r=e.parse(t[2],2,Xe);if(!i||!r)return null;if(!gg(i.type,[$e,Je,se,Wh,Xe]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Yn(i.type)} instead`);if(t.length===4){const s=e.parse(t[3],3,se);return s?new yh(i,r,s):null}else return new yh(i,r)}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!Tu(e,["boolean","string","number","null"]))throw new Ti(`Expected first argument to be of type boolean, string, number or null, but found ${Yn(bi(e))} instead.`);if(!Tu(i,["string","array"]))throw new Ti(`Expected second argument to be of type array or string, but found ${Yn(bi(i))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(t);return i.indexOf(e,r)}return i.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var bS=yh;class Pg{constructor(t,e,i,r,s,o){this.inputType=t,this.type=e,this.input=i,this.cases=r,this.outputs=s,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!==1)return e.error("Expected an even number of arguments.");let i,r;e.expectedType&&e.expectedType.kind!=="value"&&(r=e.expectedType);const s={},o=[];for(let u=2;u<t.length-1;u+=2){let f=t[u];const d=t[u+1];Array.isArray(f)||(f=[f]);const y=e.concat(u);if(f.length===0)return y.error("Expected at least one branch label.");for(const w of f){if(typeof w!="number"&&typeof w!="string")return y.error("Branch labels must be numbers or strings.");if(typeof w=="number"&&Math.abs(w)>Number.MAX_SAFE_INTEGER)return y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof w=="number"&&Math.floor(w)!==w)return y.error("Numeric branch labels must be integer values.");if(!i)i=bi(w);else if(y.checkSubtype(i,bi(w)))return null;if(typeof s[String(w)]<"u")return y.error("Branch labels must be unique.");s[String(w)]=o.length}const m=e.parse(d,u,r);if(!m)return null;r=r||m.type,o.push(m)}const a=e.parse(t[1],1,Xe);if(!a)return null;const l=e.parse(t[t.length-1],t.length-1,r);return!l||a.type.kind!=="value"&&e.concat(1).checkSubtype(i,a.type)?null:new Pg(i,r,a,s,o,l)}evaluate(t){const e=this.input.evaluate(t);return(bi(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),i=[],r={};for(const o of e){const a=r[this.cases[o]];a===void 0?(r[this.cases[o]]=i.length,i.push([this.cases[o],[o]])):i[a][1].push(o)}const s=o=>this.inputType.kind==="number"?Number(o):o;for(const[o,a]of i)a.length===1?t.push(s(a[0])):t.push(a.map(s)),t.push(this.outputs[o].serialize());return t.push(this.otherwise.serialize()),t}}var wS=Pg;class kg{constructor(t,e,i){this.type=t,this.branches=e,this.otherwise=i}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!==0)return e.error("Expected an odd number of arguments.");let i;e.expectedType&&e.expectedType.kind!=="value"&&(i=e.expectedType);const r=[];for(let o=1;o<t.length-1;o+=2){const a=e.parse(t[o],o,$e);if(!a)return null;const l=e.parse(t[o+1],o+1,i);if(!l)return null;r.push([a,l]),i=i||l.type}const s=e.parse(t[t.length-1],t.length-1,i);return s?new kg(i,r,s):null}evaluate(t){for(const[e,i]of this.branches)if(e.evaluate(t))return i.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,i]of this.branches)t(e),t(i);t(this.otherwise)}outputDefined(){return this.branches.every(([t,e])=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(e=>{t.push(e.serialize())}),t}}var xS=kg;class vh{constructor(t,e,i,r){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,Xe),r=e.parse(t[2],2,se);if(!i||!r)return null;if(!gg(i.type,[Lr(Xe),Je,Xe]))return e.error(`Expected first argument to be of type array or string, but found ${Yn(i.type)} instead`);if(t.length===4){const s=e.parse(t[3],3,se);return s?new vh(i.type,i,r,s):null}else return new vh(i.type,i,r)}evaluate(t){const e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!Tu(e,["string","array"]))throw new Ti(`Expected first argument to be of type array or string, but found ${Yn(bi(e))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(t);return e.slice(i,r)}return e.slice(i)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var SS=vh;function R1(n,t){return n==="=="||n==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function CS(n,t,e){return t===e}function ES(n,t,e){return t!==e}function AS(n,t,e){return t<e}function LS(n,t,e){return t>e}function TS(n,t,e){return t<=e}function IS(n,t,e){return t>=e}function Sy(n,t,e,i){return i.compare(t,e)===0}function RS(n,t,e,i){return!Sy(n,t,e,i)}function NS(n,t,e,i){return i.compare(t,e)<0}function PS(n,t,e,i){return i.compare(t,e)>0}function kS(n,t,e,i){return i.compare(t,e)<=0}function FS(n,t,e,i){return i.compare(t,e)>=0}function Fl(n,t,e){const i=n!=="=="&&n!=="!=";return class Cy{constructor(s,o,a){this.type=$e,this.lhs=s,this.rhs=o,this.collator=a,this.hasUntypedArgument=s.type.kind==="value"||o.type.kind==="value"}static parse(s,o){if(s.length!==3&&s.length!==4)return o.error("Expected two or three arguments.");const a=s[0];let l=o.parse(s[1],1,Xe);if(!l)return null;if(!R1(a,l.type))return o.concat(1).error(`"${a}" comparisons are not supported for type '${Yn(l.type)}'.`);let u=o.parse(s[2],2,Xe);if(!u)return null;if(!R1(a,u.type))return o.concat(2).error(`"${a}" comparisons are not supported for type '${Yn(u.type)}'.`);if(l.type.kind!==u.type.kind&&l.type.kind!=="value"&&u.type.kind!=="value")return o.error(`Cannot compare types '${Yn(l.type)}' and '${Yn(u.type)}'.`);i&&(l.type.kind==="value"&&u.type.kind!=="value"?l=new qs(u.type,[l]):l.type.kind!=="value"&&u.type.kind==="value"&&(u=new qs(l.type,[u])));let f=null;if(s.length===4){if(l.type.kind!=="string"&&u.type.kind!=="string"&&l.type.kind!=="value"&&u.type.kind!=="value")return o.error("Cannot use collator to compare non-string types.");if(f=o.parse(s[3],3,Vh),!f)return null}return new Cy(l,u,f)}evaluate(s){const o=this.lhs.evaluate(s),a=this.rhs.evaluate(s);if(i&&this.hasUntypedArgument){const l=bi(o),u=bi(a);if(l.kind!==u.kind||!(l.kind==="string"||l.kind==="number"))throw new Ti(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${l.kind}, ${u.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const l=bi(o),u=bi(a);if(l.kind!=="string"||u.kind!=="string")return t(s,o,a)}return this.collator?e(s,o,a,this.collator.evaluate(s)):t(s,o,a)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}serialize(){const s=[n];return this.eachChild(o=>{s.push(o.serialize())}),s}}}const MS=Fl("==",CS,Sy),OS=Fl("!=",ES,RS),DS=Fl("<",AS,NS),jS=Fl(">",LS,PS),zS=Fl("<=",TS,kS),BS=Fl(">=",IS,FS);class Fg{constructor(t,e,i,r,s,o){this.type=Je,this.number=t,this.locale=e,this.currency=i,this.unit=r,this.minFractionDigits=s,this.maxFractionDigits=o}static parse(t,e){if(t.length!==3)return e.error("Expected two arguments.");const i=e.parse(t[1],1,se);if(!i)return null;const r=t[2];if(typeof r!="object"||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");let s=null;if(r.locale&&(s=e.parse(r.locale,1,Je),!s))return null;let o=null;if(r.currency&&(o=e.parse(r.currency,1,Je),!o))return null;let a=null;if(r.unit&&(a=e.parse(r.unit,1,Je),!a))return null;let l=null;if(r["min-fraction-digits"]&&(l=e.parse(r["min-fraction-digits"],1,se),!l))return null;let u=null;return r["max-fraction-digits"]&&(u=e.parse(r["max-fraction-digits"],1,se),!u)?null:new Fg(i,s,o,a,l,u)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Mg{constructor(t){this.type=se,this.input=t}static parse(t,e){if(t.length!==2)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const i=e.parse(t[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?e.error(`Expected argument of type string or array, but found ${Yn(i.type)} instead.`):new Mg(i):null}evaluate(t){const e=this.input.evaluate(t);if(typeof e=="string")return e.length;if(Array.isArray(e))return e.length;throw new Ti(`Expected value to be of type string or array, but found ${Yn(bi(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(e=>{t.push(e.serialize())}),t}}var qS=Mg;const Ey={"==":MS,"!=":OS,">":jS,"<":DS,">=":BS,"<=":zS,array:qs,at:vS,boolean:qs,case:xS,coalesce:wy,collator:Yh,format:$h,image:Xh,in:_S,"index-of":bS,interpolate:ga,"interpolate-hcl":ga,"interpolate-lab":ga,length:qS,let:xy,literal:dh,match:wS,number:qs,"number-format":Fg,object:qs,slice:SS,step:dy,string:qs,"to-boolean":sl,"to-color":sl,"to-number":sl,"to-string":sl,var:cy,within:Sg};function N1(n,[t,e,i,r]){t=t.evaluate(n),e=e.evaluate(n),i=i.evaluate(n);const s=r?r.evaluate(n):1,o=sy(t,e,i,s);if(o)throw new Ti(o);return new mr(t/255*s,e/255*s,i/255*s,s)}function P1(n,t){return n in t}function Yf(n,t){const e=t[n];return typeof e>"u"?null:e}function US(n,t,e,i){for(;e<=i;){const r=e+i>>1;if(t[r]===n)return!0;t[r]>n?i=r-1:e=r+1}return!1}function na(n){return{type:n}}Pl.register(Ey,{error:[z4,[Je],(n,[t])=>{throw new Ti(t.evaluate(n))}],typeof:[Je,[Xe],(n,[t])=>Yn(bi(t.evaluate(n)))],"to-rgba":[Lr(se,4),[Ws],(n,[t])=>t.evaluate(n).toArray()],rgb:[Ws,[se,se,se],N1],rgba:[Ws,[se,se,se,se],N1],has:{type:$e,overloads:[[[Je],(n,[t])=>P1(t.evaluate(n),n.properties())],[[Je,fl],(n,[t,e])=>P1(t.evaluate(n),e.evaluate(n))]]},get:{type:Xe,overloads:[[[Je],(n,[t])=>Yf(t.evaluate(n),n.properties())],[[Je,fl],(n,[t,e])=>Yf(t.evaluate(n),e.evaluate(n))]]},"feature-state":[Xe,[Je],(n,[t])=>Yf(t.evaluate(n),n.featureState||{})],properties:[fl,[],n=>n.properties()],"geometry-type":[Je,[],n=>n.geometryType()],id:[Xe,[],n=>n.id()],zoom:[se,[],n=>n.globals.zoom],pitch:[se,[],n=>n.globals.pitch||0],"distance-from-center":[se,[],n=>n.distanceFromCenter()],"heatmap-density":[se,[],n=>n.globals.heatmapDensity||0],"line-progress":[se,[],n=>n.globals.lineProgress||0],"sky-radial-progress":[se,[],n=>n.globals.skyRadialProgress||0],accumulated:[Xe,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[se,na(se),(n,t)=>{let e=0;for(const i of t)e+=i.evaluate(n);return e}],"*":[se,na(se),(n,t)=>{let e=1;for(const i of t)e*=i.evaluate(n);return e}],"-":{type:se,overloads:[[[se,se],(n,[t,e])=>t.evaluate(n)-e.evaluate(n)],[[se],(n,[t])=>-t.evaluate(n)]]},"/":[se,[se,se],(n,[t,e])=>t.evaluate(n)/e.evaluate(n)],"%":[se,[se,se],(n,[t,e])=>t.evaluate(n)%e.evaluate(n)],ln2:[se,[],()=>Math.LN2],pi:[se,[],()=>Math.PI],e:[se,[],()=>Math.E],"^":[se,[se,se],(n,[t,e])=>Math.pow(t.evaluate(n),e.evaluate(n))],sqrt:[se,[se],(n,[t])=>Math.sqrt(t.evaluate(n))],log10:[se,[se],(n,[t])=>Math.log(t.evaluate(n))/Math.LN10],ln:[se,[se],(n,[t])=>Math.log(t.evaluate(n))],log2:[se,[se],(n,[t])=>Math.log(t.evaluate(n))/Math.LN2],sin:[se,[se],(n,[t])=>Math.sin(t.evaluate(n))],cos:[se,[se],(n,[t])=>Math.cos(t.evaluate(n))],tan:[se,[se],(n,[t])=>Math.tan(t.evaluate(n))],asin:[se,[se],(n,[t])=>Math.asin(t.evaluate(n))],acos:[se,[se],(n,[t])=>Math.acos(t.evaluate(n))],atan:[se,[se],(n,[t])=>Math.atan(t.evaluate(n))],min:[se,na(se),(n,t)=>Math.min(...t.map(e=>e.evaluate(n)))],max:[se,na(se),(n,t)=>Math.max(...t.map(e=>e.evaluate(n)))],abs:[se,[se],(n,[t])=>Math.abs(t.evaluate(n))],round:[se,[se],(n,[t])=>{const e=t.evaluate(n);return e<0?-Math.round(-e):Math.round(e)}],floor:[se,[se],(n,[t])=>Math.floor(t.evaluate(n))],ceil:[se,[se],(n,[t])=>Math.ceil(t.evaluate(n))],"filter-==":[$e,[Je,Xe],(n,[t,e])=>n.properties()[t.value]===e.value],"filter-id-==":[$e,[Xe],(n,[t])=>n.id()===t.value],"filter-type-==":[$e,[Je],(n,[t])=>n.geometryType()===t.value],"filter-<":[$e,[Je,Xe],(n,[t,e])=>{const i=n.properties()[t.value],r=e.value;return typeof i==typeof r&&i<r}],"filter-id-<":[$e,[Xe],(n,[t])=>{const e=n.id(),i=t.value;return typeof e==typeof i&&e<i}],"filter->":[$e,[Je,Xe],(n,[t,e])=>{const i=n.properties()[t.value],r=e.value;return typeof i==typeof r&&i>r}],"filter-id->":[$e,[Xe],(n,[t])=>{const e=n.id(),i=t.value;return typeof e==typeof i&&e>i}],"filter-<=":[$e,[Je,Xe],(n,[t,e])=>{const i=n.properties()[t.value],r=e.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[$e,[Xe],(n,[t])=>{const e=n.id(),i=t.value;return typeof e==typeof i&&e<=i}],"filter->=":[$e,[Je,Xe],(n,[t,e])=>{const i=n.properties()[t.value],r=e.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[$e,[Xe],(n,[t])=>{const e=n.id(),i=t.value;return typeof e==typeof i&&e>=i}],"filter-has":[$e,[Xe],(n,[t])=>t.value in n.properties()],"filter-has-id":[$e,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[$e,[Lr(Je)],(n,[t])=>t.value.indexOf(n.geometryType())>=0],"filter-id-in":[$e,[Lr(Xe)],(n,[t])=>t.value.indexOf(n.id())>=0],"filter-in-small":[$e,[Je,Lr(Xe)],(n,[t,e])=>e.value.indexOf(n.properties()[t.value])>=0],"filter-in-large":[$e,[Je,Lr(Xe)],(n,[t,e])=>US(n.properties()[t.value],e.value,0,e.value.length-1)],all:{type:$e,overloads:[[[$e,$e],(n,[t,e])=>t.evaluate(n)&&e.evaluate(n)],[na($e),(n,t)=>{for(const e of t)if(!e.evaluate(n))return!1;return!0}]]},any:{type:$e,overloads:[[[$e,$e],(n,[t,e])=>t.evaluate(n)||e.evaluate(n)],[na($e),(n,t)=>{for(const e of t)if(e.evaluate(n))return!0;return!1}]]},"!":[$e,[$e],(n,[t])=>!t.evaluate(n)],"is-supported-script":[$e,[Je],(n,[t])=>{const e=n.globals&&n.globals.isSupportedScript;return e?e(t.evaluate(n)):!0}],upcase:[Je,[Je],(n,[t])=>t.evaluate(n).toUpperCase()],downcase:[Je,[Je],(n,[t])=>t.evaluate(n).toLowerCase()],concat:[Je,na(Xe),(n,t)=>t.map(e=>cu(e.evaluate(n))).join("")],"resolved-locale":[Je,[Vh],(n,[t])=>t.evaluate(n).resolvedLocale()]});var Ay=Ey;function jd(n){return{result:"success",value:n}}function Qa(n){return{result:"error",value:n}}function GS(n){return n["property-type"]==="data-driven"}function WS(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function VS(n){return!!n.expression&&n.expression.interpolated}function Ly(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}class HS{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new oy,this._defaultValue=e?KS(e):null,this._enumValues=e&&e.type==="enum"?e.values:null}evaluateWithoutErrorHandling(t,e,i,r,s,o,a,l){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=r||null,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=l||null,this.expression.evaluate(this._evaluator)}evaluate(t,e,i,r,s,o,a,l){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=l||null;try{const u=this.expression.evaluate(this._evaluator);if(u==null||typeof u=="number"&&u!==u)return this._defaultValue;if(this._enumValues&&!(u in this._enumValues))throw new Ti(`Expected value to be one of ${Object.keys(this._enumValues).map(f=>JSON.stringify(f)).join(", ")}, but found ${JSON.stringify(u)} instead.`);return u}catch(u){return this._warningHistory[u.message]||(this._warningHistory[u.message]=!0,typeof console<"u"&&console.warn(u.message)),this._defaultValue}}}function $S(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in Ay}function zd(n,t){const e=new hy(Ay,[],t?YS(t):void 0),i=e.parse(n,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?jd(new HS(i,t)):Qa(e.errors)}class k1{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent=t!=="constant"&&!Cg(e.expression)}evaluateWithoutErrorHandling(t,e,i,r,s,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,s,o)}evaluate(t,e,i,r,s,o){return this._styleExpression.evaluate(t,e,i,r,s,o)}}class F1{constructor(t,e,i,r){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent=t!=="camera"&&!Cg(e.expression),this.interpolationType=r}evaluateWithoutErrorHandling(t,e,i,r,s,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,s,o)}evaluate(t,e,i,r,s,o){return this._styleExpression.evaluate(t,e,i,r,s,o)}interpolationFactor(t,e,i){return this.interpolationType?ga.interpolationFactor(this.interpolationType,t,e,i):0}}function XS(n,t){if(n=zd(n,t),n.result==="error")return n;const e=n.value.expression,i=Kh(e);if(!i&&!GS(t))return Qa([new hs("","data expressions not supported")]);const r=Eg(e,["zoom","pitch","distance-from-center"]);if(!r&&!WS(t))return Qa([new hs("","zoom expressions not supported")]);const s=jc(e);if(!s&&!r)return Qa([new hs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof hs)return Qa([s]);if(s instanceof ga&&!VS(t))return Qa([new hs("",'"interpolate" expressions cannot be used with this property')]);if(!s)return jd(i?new k1("constant",n.value):new k1("source",n.value));const o=s instanceof ga?s.interpolation:void 0;return jd(i?new F1("camera",n.value,s.labels,o):new F1("composite",n.value,s.labels,o))}function jc(n){let t=null;if(n instanceof xy)t=jc(n.result);else if(n instanceof wy){for(const e of n.args)if(t=jc(e),t)break}else(n instanceof dy||n instanceof ga)&&n.input instanceof Pl&&n.input.name==="zoom"&&(t=n);return t instanceof hs||n.eachChild(e=>{const i=jc(e);i instanceof hs?t=i:!t&&i?t=new hs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&i&&t!==i&&(t=new hs("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function YS(n){const t={color:Ws,string:Je,number:se,enum:Je,boolean:$e,formatted:Hh,resolvedImage:Hu};return n.type==="array"?Lr(t[n.value]||Xe,n.length):t[n.type]}function KS(n){return n.type==="color"&&(Ly(n.default)||Array.isArray(n.default))?new mr(0,0,0,0):n.type==="color"?mr.parse(n.default)||null:n.default===void 0?null:n.default}function ZS(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Bd(n){if(Array.isArray(n))return n.map(Bd);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const t={};for(const e in n)t[e]=Bd(n[e]);return t}return ZS(n)}var Ty={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function Iy(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const t of n.slice(1))if(!Iy(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}function JS(n,t="fill"){if(n==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Iy(n)||(n=_h(n));const e=n;let i=!0;try{i=QS(e)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(e,null,2)}
        `)}const r=Ty[`filter_${t}`],s=zd(i,r);let o=null;if(s.result==="error")throw new Error(s.value.map(f=>`${f.key}: ${f.message}`).join(", "));o=(f,d,y)=>s.value.evaluate(f,d,{},y);let a=null,l=null;if(i!==e){const f=zd(e,r);if(f.result==="error")throw new Error(f.value.map(d=>`${d.key}: ${d.message}`).join(", "));a=(d,y,m,w,S)=>f.value.evaluate(d,y,{},m,void 0,void 0,w,S),l=!Kh(f.value.expression)}o=o;const u=Py(i);return{filter:o,dynamicFilter:a||void 0,needGeometry:u,needFeature:!!l}}function QS(n){if(!pl(n))return n;let t=Bd(n);return Ny(t),t=Ry(t),t}function Ry(n){if(!Array.isArray(n))return n;const t=nC(n);return t===!0?t:t.map(e=>Ry(e))}function Ny(n){let t=!1;const e=[];if(n[0]==="case"){for(let i=1;i<n.length-1;i+=2)t=t||pl(n[i]),e.push(n[i+1]);e.push(n[n.length-1])}else if(n[0]==="match"){t=t||pl(n[1]);for(let i=2;i<n.length-1;i+=2)e.push(n[i+1]);e.push(n[n.length-1])}else if(n[0]==="step"){t=t||pl(n[1]);for(let i=1;i<n.length-1;i+=2)e.push(n[i+1])}t&&(n.length=0,n.push("any",...e));for(let i=1;i<n.length;i++)Ny(n[i])}function pl(n){if(!Array.isArray(n))return!1;if(tC(n[0]))return!0;for(let t=1;t<n.length;t++){const e=n[t];if(pl(e))return!0}return!1}function tC(n){return n==="pitch"||n==="distance-from-center"}const eC=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function nC(n){if(eC.has(n[0]))for(let t=1;t<n.length;t++){const e=n[t];if(pl(e))return!0}return n}function iC(n,t){return n<t?-1:n>t?1:0}function Py(n){if(!Array.isArray(n))return!1;if(n[0]==="within")return!0;for(let t=1;t<n.length;t++)if(Py(n[t]))return!0;return!1}function _h(n){if(!n)return!0;const t=n[0];return n.length<=1?t!=="any":t==="=="?Kf(n[1],n[2],"=="):t==="!="?Nc(Kf(n[1],n[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Kf(n[1],n[2],t):t==="any"?rC(n.slice(1)):t==="all"?["all"].concat(n.slice(1).map(_h)):t==="none"?["all"].concat(n.slice(1).map(_h).map(Nc)):t==="in"?M1(n[1],n.slice(2)):t==="!in"?Nc(M1(n[1],n.slice(2))):t==="has"?O1(n[1]):t==="!has"?Nc(O1(n[1])):t==="within"?n:!0}function Kf(n,t,e){switch(n){case"$type":return[`filter-type-${e}`,t];case"$id":return[`filter-id-${e}`,t];default:return[`filter-${e}`,n,t]}}function rC(n){return["any"].concat(n.map(_h))}function M1(n,t){if(t.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(e=>typeof e!=typeof t[0])?["filter-in-large",n,["literal",t.sort(iC)]]:["filter-in-small",n,["literal",t]]}}function O1(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function Nc(n){return["!",n]}var sC=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function oC(n,t){const e={};for(const i in n)i!=="ref"&&(e[i]=n[i]);return sC.forEach(i=>{i in t&&(e[i]=t[i])}),e}function aC(n){n=n.slice();const t=Object.create(null);for(let e=0;e<n.length;e++)t[n[e].id]=n[e];for(let e=0;e<n.length;e++)"ref"in n[e]&&(n[e]=oC(n[e],t[n[e].ref]));return n}var D1={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},eu=" ",j1=/(italic|oblique)$/i,z1={},lC=function(n,t,e){var i=z1[n];if(!i){Array.isArray(n)||(n=[n]);for(var r=400,s="normal",o=[],a,l,u=0,f=n.length;u<f;++u){var d=n[u],y=d.split(" "),m=y[y.length-1].toLowerCase();m=="normal"||m=="italic"||m=="oblique"?(s=l?s:m,y.pop(),m=y[y.length-1].toLowerCase()):j1.test(m)&&(m=m.replace(j1,""),s=l?s:y[y.length-1].replace(m,""));for(var w in D1){var S=y.length>1?y[y.length-2].toLowerCase():"";if(m==w||m==w.replace("-","")||S+"-"+m==w){r=a?r:D1[w],y.pop(),S&&w.startsWith(S)&&y.pop();break}}!a&&typeof m=="number"&&(r=m);var L=y.join(eu).replace("Klokantech Noto Sans","Noto Sans");L.indexOf(eu)!==-1&&(L='"'+L+'"'),o.push(L)}i=z1[n]=[s,r,o]}return i[0]+eu+i[1]+eu+t+"px"+(e?"/"+e:"")+eu+i[2]},B1=iy(lC);const q1={},U1={};let uC=0;function Og(n){return n.id||(n.id=uC++),n.id}function cC(n,t){return Og(n)+"."+tn(t)}function hC(n){let t=q1[n.id];return t||(t={},q1[Og(n)]=t),t}function fC(n){let t=U1[n.id];return t||(t={},U1[Og(n)]=t),t}function Zf(n){return n*Math.PI/180}const dC=function(){const n=[];for(let t=78271.51696402048;n.length<=24;t/=2)n.push(t);return n}();function ky(n,t){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,t);const e=document.createElement("canvas");return e.width=n,e.height=t,e}function pC(n,t){let e=0;const i=t.length;for(;e<i;++e)if(t[e]<n&&e+1<i){const s=t[e]/t[e+1];return e+Math.log(t[e]/n)/Math.log(s)}return i-1}function G1(n,t,e,i){const r=document.createElement("canvas"),s=[2*e*t.pixelRatio+t.width,2*e*t.pixelRatio+t.height];r.width=s[0],r.height=s[1];const o=r.getContext("2d");o.drawImage(n,t.x,t.y,t.width,t.height,e*t.pixelRatio,e*t.pixelRatio,t.width,t.height);const a=o.getImageData(0,0,s[0],s[1]);o.globalCompositeOperation="destination-over",o.fillStyle=`rgba(${i.r*255},${i.g*255},${i.b*255},${i.a})`;const l=a.data;for(let u=0,f=a.width;u<f;++u)for(let d=0,y=a.height;d<y;++d){const m=(d*f+u)*4;l[m+3]>0&&o.arc(u,d,e*t.pixelRatio,0,2*Math.PI)}return o.fill(),r}function gC(n,t,e){const i=Math.max(0,Math.min(1,(e-n)/(t-n)));return i*i*(3-2*i)}function W1(n,t,e){const i=document.createElement("canvas");i.width=t.width,i.height=t.height;const r=i.getContext("2d");r.drawImage(n,t.x,t.y,t.width,t.height,0,0,t.width,t.height);const s=r.getImageData(0,0,t.width,t.height),o=s.data;for(let a=0,l=s.width;a<l;++a)for(let u=0,f=s.height;u<f;++u){const d=(u*l+a)*4,y=o[d+3]/255,m=.75,w=.1,S=gC(m-w,m+w,y);S>0?(o[d+0]=Math.round(255*e.r*S),o[d+1]=Math.round(255*e.g*S),o[d+2]=Math.round(255*e.b*S),o[d+3]=Math.round(255*S)):o[d+3]=0}return r.putImageData(s,0,0),i}const mC=Array(256).join("\u200A");function qd(n,t){if(t>=.05){let e="";const i=n.split(`
`),r=mC.slice(0,Math.round(t/.1));for(let s=0,o=i.length;s<o;++s)s>0&&(e+=`
`),e+=i[s].split("").join(r);return e}return n}let Jf;function Fy(){return Jf||(Jf=ky(1,1).getContext("2d")),Jf}function ia(n,t){return Fy().measureText(n).width+(n.length-1)*t}const V1={};function Ud(n,t,e,i){if(n.indexOf(`
`)!==-1){const o=n.split(`
`),a=[];for(let l=0,u=o.length;l<u;++l)a.push(Ud(o[l],t,e,i));return a.join(`
`)}const r=e+","+t+","+n+","+i;let s=V1[r];if(!s){const o=n.split(" ");if(o.length>1){const a=Fy();a.font=t;const u=a.measureText("M").width*e;let f="";const d=[];for(let y=0,m=o.length;y<m;++y){const w=o[y],S=f+(f?" ":"")+w;ia(S,i)<=u?f=S:(f&&d.push(f),f=w)}f&&d.push(f);for(let y=0,m=d.length;y<m&&m>1;++y){const w=d[y];if(ia(w,i)<u*.35){const S=y>0?ia(d[y-1],i):1/0,L=y<m-1?ia(d[y+1],i):1/0;d.splice(y,1),m-=1,S<L?(d[y-1]+=" "+w,y-=1):d[y]=w+" "+d[y]}}for(let y=0,m=d.length-1;y<m;++y){const w=d[y],S=d[y+1];if(ia(w,i)>u*.7&&ia(S,i)<u*.6){const L=w.split(" "),E=L.pop();ia(E,i)<u*.2&&(d[y]=L.join(" "),d[y+1]=E+" "+S),m-=1}}s=d.join(`
`)}else s=n;s=qd(s,i),V1[r]=s}return s}const yC={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},vC={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},_C=function(n,t){const e=XS(n,t);if(e.result==="error")throw new Error(e.value.map(i=>`${i.key}: ${i.message}`).join(", "));return e.value},Gd={},bh={zoom:0};let Pc,Qf;function Fe(n,t,e,i,r,s,o){const a=n.id;s||(s={},console.warn("No functionCache provided to getValue()")),s[a]||(s[a]={});const l=s[a];if(!l[e]){let u=(n[t]||Gd)[e];const f=Ty[`${t}_${n.type}`][e];u===void 0&&(u=f.default);let d=$S(u);if(!d&&Ly(u)&&(u=N4(u,f),d=!0),d){const y=_C(u,f);l[e]=y.evaluate.bind(y)}else f.type=="color"&&(u=mr.parse(u)),l[e]=function(){return u}}return bh.zoom=i,l[e](bh,r,o)}function bC(n,t,e,i){return Fe(n,"layout","icon-allow-overlap",t,e,i)?Fe(n,"layout","icon-ignore-placement",t,e,i)?"none":"obstacle":"declutter"}function wC(n,t,e,i,r){return r||console.warn("No filterCache provided to evaluateFilter()"),n in r||(r[n]=JS(t).filter),bh.zoom=i,r[n](bh,e)}function ra(n,t){if(n){if(n.a===0||t===0)return;const e=n.a;return t=t===void 0?1:t,e===0?"transparent":"rgba("+Math.round(n.r*255/e)+","+Math.round(n.g*255/e)+","+Math.round(n.b*255/e)+","+e*t+")"}return n}const xC=/\{[^{}}]*\}/g;function td(n,t){return n.replace(xC,function(e){return t[e.slice(1,-1)]||""})}const SC={};function CC(n,t,e,i=dC,r=void 0,s=void 0,o=void 0,a=void 0){if(typeof t=="string"&&(t=JSON.parse(t)),t.version!=8)throw new Error("glStyle version 8 required.");SC[cC(t,n)]=Array.from(arguments);let l,u,f;if(s){if(typeof Image<"u"){const v=new Image;let B;m_(()=>s).then(it=>{it instanceof Request?fetch(it).then(mt=>mt.blob()).then(mt=>{B=URL.createObjectURL(mt),v.src=B}).catch(()=>{}):(v.crossOrigin="anonymous",v.src=it,B&&URL.revokeObjectURL(B))}),v.onload=function(){l=v,u=[v.width,v.height],n.changed(),v.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const v=self;v.postMessage({action:"loadImage",src:s}),v.addEventListener("message",function(it){it.data.action==="imageLoaded"&&it.data.src===s&&(l=it.data.image,u=[l.width,l.height])})}}const d=aC(t.layers),y={},m=[],w={},S={},L=hC(t),E=fC(t);let I;for(let v=0,B=d.length;v<B;++v){const it=d[v],mt=it.id;if(typeof e=="string"&&it.source==e||e.indexOf(mt)!==-1){const q=it["source-layer"];if(I){if(it.source!==I)throw new Error(`Layer "${mt}" does not use source "${I}`)}else{I=it.source;const V=t.sources[I];if(!V)throw new Error(`Source "${I}" is not defined`);const W=V.type;if(W!=="vector"&&W!=="geojson")throw new Error(`Source "${I}" is not of type "vector" or "geojson", but "${W}"`)}let F=y[q];F||(F=[],y[q]=F),F.push({layer:it,index:v}),m.push(mt)}}const j=new il,G=new Ao,Z=[],at=function(v,B,it){const mt=v.getProperties(),q=y[mt.layer];if(!q)return;let F=i.indexOf(B);F==-1&&(F=pC(B,i));const V=yC[v.getGeometry().getType()],W={id:v.getId(),properties:mt,type:V},et=n.get("mapbox-featurestate")[v.getId()];let st=-1;for(let lt=0,ct=q.length;lt<ct;++lt){const Et=q[lt],ot=Et.layer,Yt=ot.id;if(it!==void 0&&it!==Yt)continue;const T=ot.layout||Gd,H=ot.paint||Gd;if(T.visibility==="none"||"minzoom"in ot&&F<ot.minzoom||"maxzoom"in ot&&F>=ot.maxzoom)continue;const Y=ot.filter;if(!Y||wC(Yt,Y,W,F,E)){let nt,dt,wt,_t,St,bt;const $t=Et.index;if(V==3&&(ot.type=="fill"||ot.type=="fill-extrusion"))if(dt=Fe(ot,"paint",ot.type+"-opacity",F,W,L,et),ot.type+"-pattern"in H){const ie=Fe(ot,"paint",ot.type+"-pattern",F,W,L,et);if(ie){const kt=typeof ie=="string"?td(ie,mt):ie.toString();if(l&&r&&r[kt]){++st,bt=Z[st],(!bt||!bt.getFill()||bt.getStroke()||bt.getText())&&(bt=new dr({fill:new Ao}),Z[st]=bt),wt=bt.getFill(),bt.setZIndex($t);const ne=kt+"."+dt;let me=S[ne];if(!me){const de=r[kt],re=ky(de.width,de.height),_e=re.getContext("2d");_e.globalAlpha=dt,_e.drawImage(l,de.x,de.y,de.width,de.height,0,0,de.width,de.height),me=_e.createPattern(re,"repeat"),S[ne]=me}wt.setColor(me)}}}else nt=ra(Fe(ot,"paint",ot.type+"-color",F,W,L,et),dt),ot.type+"-outline-color"in H&&(St=ra(Fe(ot,"paint",ot.type+"-outline-color",F,W,L,et),dt)),St||(St=nt),(nt||St)&&(++st,bt=Z[st],(!bt||nt&&!bt.getFill()||!nt&&bt.getFill()||St&&!bt.getStroke()||!St&&bt.getStroke()||bt.getText())&&(bt=new dr({fill:nt?new Ao:void 0,stroke:St?new il:void 0}),Z[st]=bt),nt&&(wt=bt.getFill(),wt.setColor(nt)),St&&(_t=bt.getStroke(),_t.setColor(St),_t.setWidth(.5)),bt.setZIndex($t));if(V!=1&&ot.type=="line"){nt=!("line-pattern"in H)&&"line-color"in H?ra(Fe(ot,"paint","line-color",F,W,L,et),Fe(ot,"paint","line-opacity",F,W,L,et)):void 0;const ie=Fe(ot,"paint","line-width",F,W,L,et);nt&&ie>0&&(++st,bt=Z[st],(!bt||!bt.getStroke()||bt.getFill()||bt.getText())&&(bt=new dr({stroke:new il}),Z[st]=bt),_t=bt.getStroke(),_t.setLineCap(Fe(ot,"layout","line-cap",F,W,L,et)),_t.setLineJoin(Fe(ot,"layout","line-join",F,W,L,et)),_t.setMiterLimit(Fe(ot,"layout","line-miter-limit",F,W,L,et)),_t.setColor(nt),_t.setWidth(ie),_t.setLineDash(H["line-dasharray"]?Fe(ot,"paint","line-dasharray",F,W,L,et).map(function(kt){return kt*ie}):null),bt.setZIndex($t))}let Jt=!1,Ht=null,ye=0,Nt,J,Ce;if((V==1||V==2)&&"icon-image"in T){const ie=Fe(ot,"layout","icon-image",F,W,L,et);if(ie){Nt=typeof ie=="string"?td(ie,mt):ie.toString();let kt;const ne=a?a(n,Nt):void 0;if(l&&r&&r[Nt]||ne){const me=Fe(ot,"layout","icon-rotation-alignment",F,W,L,et);if(V==2){const de=v.getGeometry();if(de.getFlatMidpoint||de.getFlatMidpoints){const re=de.getExtent();if(Math.sqrt(Math.max(Math.pow((re[2]-re[0])/B,2),Math.pow((re[3]-re[1])/B,2)))>150){const qt=de.getType()==="MultiLineString"?de.getFlatMidpoints():de.getFlatMidpoint();if(Qf||(Pc=[NaN,NaN],Qf=new Ld("Point",Pc,[],{},null)),kt=Qf,Pc[0]=qt[0],Pc[1]=qt[1],Fe(ot,"layout","symbol-placement",F,W,L,et)==="line"&&me==="map"){const we=de.getStride(),on=de.getFlatCoordinates();for(let ke=0,Ie=on.length-we;ke<Ie;ke+=we){const ln=on[ke],Oe=on[ke+1],fn=on[ke+we],nn=on[ke+we+1],qn=Math.min(ln,fn),Kn=Math.min(Oe,nn),An=Math.max(ln,fn),Re=Math.max(Oe,nn);if(qt[0]>=qn&&qt[0]<=An&&qt[1]>=Kn&&qt[1]<=Re){ye=Math.atan2(Oe-nn,fn-ln);break}}}}}}if(V!==2||kt){const de=Fe(ot,"layout","icon-size",F,W,L,et),re=H["icon-color"]!==void 0?Fe(ot,"paint","icon-color",F,W,L,et):null;if(!re||re.a!==0){const _e=Fe(ot,"paint","icon-halo-color",F,W,L,et),qt=Fe(ot,"paint","icon-halo-width",F,W,L,et);let Ke=`${Nt}.${de}.${qt}.${_e}`;if(re!==null&&(Ke+=`.${re}`),J=w[Ke],!J){const we=bC(ot,F,W,L);let on;"icon-offset"in T&&(on=Fe(ot,"layout","icon-offset",F,W,L,et).slice(0),on[1]*=-1);let ke=re?[re.r*255,re.g*255,re.b*255,re.a]:void 0;if(ne){const Ie={color:ke,rotateWithView:me==="map",displacement:on,declutterMode:we};typeof ne=="string"?Ie.src=ne:(Ie.img=ne,Ie.imgSize=[ne.width,ne.height]),J=new Al(Ie)}else{const Ie=r[Nt];let ln,Oe,fn;qt?Ie.sdf?(ln=G1(W1(l,Ie,re),{x:0,y:0,width:Ie.width,height:Ie.height,pixelRatio:Ie.pixelRatio},qt,_e),ke=void 0):ln=G1(l,Ie,qt,_e):(Ie.sdf?(f||(f=W1(l,{x:0,y:0,width:u[0],height:u[1]},{r:1,g:1,b:1,a:1})),ln=f):ln=l,Oe=[Ie.width,Ie.height],fn=[Ie.x,Ie.y]),J=new Al({color:ke,img:ln,imgSize:u,size:Oe,offset:fn,rotateWithView:me==="map",scale:de/Ie.pixelRatio,displacement:on,declutterMode:we})}w[Ke]=J}}J&&(++st,bt=Z[st],(!bt||!bt.getImage()||bt.getFill()||bt.getStroke())&&(bt=new dr,Z[st]=bt),bt.setGeometry(kt),J.setRotation(ye+Zf(Fe(ot,"layout","icon-rotate",F,W,L,et))),J.setOpacity(Fe(ot,"paint","icon-opacity",F,W,L,et)),J.setAnchor(vC[Fe(ot,"layout","icon-anchor",F,W,L,et)]),bt.setImage(J),Ht=bt.getText(),bt.setText(void 0),bt.setZIndex($t),Jt=!0,Ce=!1)}else Ce=!0}}}if(V==1&&ot.type==="circle"){++st,bt=Z[st],(!bt||!bt.getImage()||bt.getFill()||bt.getStroke())&&(bt=new dr,Z[st]=bt);const ie="circle-radius"in H?Fe(ot,"paint","circle-radius",F,W,L,et):5,kt=ra(Fe(ot,"paint","circle-stroke-color",F,W,L,et),Fe(ot,"paint","circle-stroke-opacity",F,W,L,et)),ne=ra(Fe(ot,"paint","circle-color",F,W,L,et),Fe(ot,"paint","circle-opacity",F,W,L,et)),me=Fe(ot,"paint","circle-stroke-width",F,W,L,et),de=ie+"."+kt+"."+ne+"."+me;J=w[de],J||(J=new Yp({radius:ie,stroke:kt&&me>0?new il({width:me,color:kt}):void 0,fill:ne?new Ao({color:ne}):void 0,declutterMode:"none"}),w[de]=J),bt.setImage(J),Ht=bt.getText(),bt.setText(void 0),bt.setGeometry(void 0),bt.setZIndex($t),Jt=!0}let Zt,Wt,Kt,ee,Gt,le;if("text-field"in T){ee=Math.round(Fe(ot,"layout","text-size",F,W,L,et));const ie=Fe(ot,"layout","text-font",F,W,L,et);Kt=Fe(ot,"layout","text-line-height",F,W,L,et),Wt=B1(o?o(ie,t.metadata?t.metadata["ol:webfonts"]:void 0):ie,ee,Kt),Wt.includes("sans-serif")||(Wt+=",sans-serif"),Gt=Fe(ot,"layout","text-letter-spacing",F,W,L,et),le=Fe(ot,"layout","text-max-width",F,W,L,et);const kt=Fe(ot,"layout","text-field",F,W,L,et);typeof kt=="object"&&kt.sections?kt.sections.length===1?Zt=kt.toString():Zt=kt.sections.reduce((ne,me,de)=>{const re=me.fontStack?me.fontStack.split(","):ie,_e=B1(o?o(re):re,ee*(me.scale||1),Kt);let qt=me.text;if(qt===`
`)return ne.push(`
`,""),ne;if(V==2){ne.push(qd(qt,Gt),_e);return}qt=Ud(qt,_e,le,Gt).split(`
`);for(let Ke=0,we=qt.length;Ke<we;++Ke)Ke>0&&ne.push(`
`,""),ne.push(qt[Ke],_e);return ne},[]):Zt=td(kt,mt).trim(),dt=Fe(ot,"paint","text-opacity",F,W,L,et)}if(Zt&&dt&&!Ce){Jt||(++st,bt=Z[st],(!bt||!bt.getText()||bt.getFill()||bt.getStroke())&&(bt=new dr,Z[st]=bt),bt.setImage(void 0),bt.setGeometry(void 0)),bt.getText()||bt.setText(Ht||new w2({padding:[2,2,2,2]})),Ht=bt.getText();const ie=T["text-transform"];ie=="uppercase"?Zt=Array.isArray(Zt)?Zt.map((fn,nn)=>nn%2?fn:fn.toUpperCase()):Zt.toUpperCase():ie=="lowercase"&&(Zt=Array.isArray(Zt)?Zt.map((fn,nn)=>nn%2?fn:fn.toLowerCase()):Zt.toLowerCase());const kt=Array.isArray(Zt)?Zt:V==2?qd(Zt,Gt):Ud(Zt,Wt,le,Gt);Ht.setText(kt),Ht.setFont(Wt),Ht.setRotation(Zf(Fe(ot,"layout","text-rotate",F,W,L,et)));const ne=Fe(ot,"layout","text-anchor",F,W,L,et),me=Jt||V==1?"point":Fe(ot,"layout","symbol-placement",F,W,L,et);let de;if(me==="line-center"?(Ht.setPlacement("line"),de="center"):Ht.setPlacement(me),me==="line"&&typeof Ht.setRepeat=="function"){const fn=Fe(ot,"layout","symbol-spacing",F,W,L,et);Ht.setRepeat(fn*2)}Ht.setOverflow(me==="point");let re=Fe(ot,"paint","text-halo-width",F,W,L,et);const _e=Fe(ot,"layout","text-offset",F,W,L,et),qt=Fe(ot,"paint","text-translate",F,W,L,et);let Ke=0,we=0;if(me=="point"){de="center",ne.indexOf("left")!==-1?(de="left",we=re):ne.indexOf("right")!==-1&&(de="right",we=-re);const fn=Fe(ot,"layout","text-rotation-alignment",F,W,L,et);Ht.setRotateWithView(fn=="map")}else Ht.setMaxAngle(Zf(Fe(ot,"layout","text-max-angle",F,W,L,et))*Zt.length/kt.length),Ht.setRotateWithView(!1);Ht.setTextAlign(de);let on="middle";ne.indexOf("bottom")==0?(on="bottom",Ke=-re-.5*(Kt-1)*ee):ne.indexOf("top")==0&&(on="top",Ke=re+.5*(Kt-1)*ee),Ht.setTextBaseline(on);const ke=Fe(ot,"layout","text-justify",F,W,L,et);Ht.setJustify(ke==="auto"?void 0:ke),Ht.setOffsetX(_e[0]*ee+we+qt[0]),Ht.setOffsetY(_e[1]*ee+Ke+qt[1]),G.setColor(ra(Fe(ot,"paint","text-color",F,W,L,et),dt)),Ht.setFill(G);const Ie=ra(Fe(ot,"paint","text-halo-color",F,W,L,et),dt);if(Ie){j.setColor(Ie),re*=2;const fn=.5*ee;j.setWidth(re<=fn?re:fn),Ht.setStroke(j)}else Ht.setStroke(void 0);const ln=Fe(ot,"layout","text-padding",F,W,L,et),Oe=Ht.getPadding();ln!==Oe[0]&&(Oe[0]=ln,Oe[1]=ln,Oe[2]=ln,Oe[3]=ln),bt.setZIndex($t)}}}if(st>-1)return Z.length=st+1,Z};return n.setStyle(at),n.set("mapbox-source",I),n.set("mapbox-layers",m),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),at}window.$=Mt;const EC=n=>new U2({source:new X2({format:new Sb,url:n,tileLoadFunction:(e,i)=>{e.setLoader(async(r,s)=>{try{const a=e.getTileCoord(),[l,u,f]=a;var o=await pv(l,u,f);if(!o){const m=await fetch(i);m.ok&&(o=await m.arrayBuffer(),await Lm(o,l,u,f))}const y=e.getFormat().readFeatures(o,{extent:r,featureProjection:s});e.setFeatures(y)}catch(a){console.error("Error while fetching tiles from INDEXED DB",a),e.setState(fe.ERROR)}})}})}),AC=new U2({source:new X2({attributions:["<div id='attributions'><a href='https://openmaptiles.org/'>\xA9 OpenMapTiles </a><a href='https://www.openstreetmap.org/copyright'>  \xA9 OpenStreetMap contributors</a></div>"]})}),Wd=new Y2({collapsible:!1});var LC=s_([-.5999997,51.28,.4199981,51.6999999],"EPSG:4326","EPSG:3857"),yr=new T4({target:"map",view:new cs({center:Rh([-.1265,51.483]),maxZoom:15,zoom:6,extent:LC}),layers:[],controls:K2({attribution:!1}).extend([Wd])});const My=EC("https://offline-html5-map.onrender.com/data/tiles/{z}/{x}/{y}.pbf");yr.addLayer(My);yr.addLayer(AC);const TC=()=>{const n=yr.getSize()[0]<600;Wd.setCollapsible(n),Wd.setCollapsed(n)};window.addEventListener("resize",TC);const Oy=new sg({source:new og({features:[]})}),H1=()=>{const t=yr.getView().getResolution(),e=25/.08;return t*e*2/60},IC=n=>{const t=n.coords.longitude,e=n.coords.latitude,i=new jp({geometry:new mb(Rh([t,e]),H1())});i.setStyle(new dr({fill:new Ao({color:"rgba(46, 204, 113, 1)"})}));const r=Oy.getSource();r.clear(),r.addFeature(i),yr.getView().on("change:resolution",()=>{i.getGeometry().setRadius(parseInt(H1()))}),RC(t,e)};yr.addLayer(Oy);const RC=(n,t)=>{Mt("#locate").show(),Mt("#locate").on("click",()=>{window.innerWidth<701&&(ku(),_a());const e=yr.getView();e.setCenter(Rh([n,t])),e.setZoom(14)})},NC=n=>{console.log("Something went wrong while getting location. Cannot locate you because: ",n.message)};"geolocation"in navigator?navigator.geolocation.watchPosition(IC,NC,{enableHighAccuracy:!0}):console.log("Location is not supported by your browser.");fetch("json/style.json").then(n=>{n.json().then(function(t){CC(My,t,"openmaptiles")})});window.$=Mt;const Iu=new sg({source:new og({features:[]})});yr.addLayer(Iu);const Dy=(n,t,e,i)=>{const r=["./icons/0star.png","./icons/1star.png","./icons/2star.png","./icons/3star.png","./icons/4star.png","./icons/5star.png"],s=new jp({geometry:new Sl([n,t])});s.setId(e),s.setStyle(new dr({image:new Al({src:r[i],scale:.02})})),Iu.getSource().addFeature(s)},PC=n=>{const t=Iu.getSource();t.getFeatures().forEach(e=>{e.getId()===parseInt(n)&&t.removeFeature(e)})};yr.on("click",n=>{yr.forEachFeatureAtPixel(n.pixel,(t,e)=>{const i=t.getId();if(e===Iu&&i){kC(t,i);const r=Iu.getSource();FC(r,i)}})});const kC=(n,t)=>{const e=n.getStyle();e.getImage().setScale(.03),n.setStyle(e);const r=Mt(`#trip-${t}`).height();if(window.innerWidth<700){const s=window.innerHeight*.8-r;ku(s),_a()}Mt("#visited-places").prepend(Mt(`#trip-${t}`)),Mt(`#trip-${t}`).css("box-shadow","rgba(255, 255, 255, 0.1) 0px 1px 1px 0px inset, rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px")},FC=(n,t)=>{n.forEachFeature(e=>{if(e.getId()!==t){const i=e.getStyle();i.getImage().setScale(.02),e.setStyle(i),Mt(`#trip-${e.getId()}`).css("box-shadow","rgba(17, 17, 26, 0.1) 0px 1px 0px")}})};window.$=Mt;Mt("#file-input").on("change",n=>{const t=n.target.files;for(let e=0;e<t.length;e++){const i=t[e];Mt("#image-container").append(`<p class='filename'>${i.name}</p>`)}});Mt("#add-place-btn").on("click",()=>{Mt("#attractions-container").hide(),Im(),Mt("#panel-header").hide(),Mt("#visited-places").hide(),Mt("#add-place-form").css("display","flex"),Mt("#add-place-form").show(),Mt("#trip-back").show()});Mt("#submit").on("click",async n=>{n.preventDefault();const t=Mt("#star-ratings input[name='stars']:checked"),e=t.length>0?t.attr("id"):0,i=Mt("#title").val(),r=Mt("#address").val(),s=Mt("#description").val(),[o,a]=r.split(",");MC(Mt("#file-input").prop("files")).then(async l=>{const u={title:i,images:l,rating:e,address:r,description:s,longitude:o,latitude:a};Mt("#add-place-form")[0].reset(),Mt("#image-container p.filename").remove(),Mt("#add-place-form").hide(),Mt("#trip-back").hide();const f=await Lv(u);Nm(u,f).insertBefore("#add-place-btn");try{Dy(u.longitude,u.latitude,f,u.rating)}catch(y){console.log("error while adding pin",y)}Mt("#panel-header").show(),Mt("#visited-places").show(),Mt("#attractions-container").show(),Mt("#panel-header").show()})});const MC=n=>new Promise((t,e)=>{const i=[];for(var r=0;r<n.length;r++){const s=n[r],o=new FileReader;o.onload=a=>{const l=a.target.result;i.push(l),i.length===n.length&&t(i)},o.onerror=a=>{e(a)},o.readAsDataURL(s)}});window.$=Mt;const OC=async()=>{(await Tv()).forEach(t=>{Nm(t,t.id).insertBefore("#add-place-btn");try{Dy(t.longitude,t.latitude,t.id,t.rating)}catch(i){console.log("error while adding pin",i)}})};OC();window.$=Mt;const DC=()=>{Mt("#manual-location").on("click",()=>{if(window.innerWidth<700){const n=window.innerHeight*.7;ku(n),_a()}yr.on("click",n=>{yr.forEachFeatureAtPixel(n.pixel,t=>{const i=t.getProperties().name,r=n.coordinate;i?Mt("#address").val(i):Mt("#address").val(r)})})})};DC();window.$=Mt;const jC=()=>{Mt("#trip-back").on("click",()=>{Mt("#add-place-form")[0].reset(),Mt("#image-container p.filename").remove(),Mt("#panel-header").show(),Mt("#add-place-form").hide(),Mt("#trip-back").hide(),Mt("#visited-places").show(),Mt("#attractions-container").show()})};jC();window.$=Mt;const zC=()=>{Mt(document).on("click",".delete-trip",async function(){const t=Mt(this).attr("id").split("-")[1];await Iv(t)==="Trip deleted"&&(Mt("#trip-"+t).remove(),PC(t))})};zC();const BC="attractions",qC=1;let wh;const UC=()=>(wh=new Promise((n,t)=>{const e=indexedDB.open(BC,qC);e.onerror=i=>{t("Error while opening attractions database: ",i.target.error)},e.onsuccess=i=>{n(i.target.result)},e.onupgradeneeded=i=>{const r=i.target.result;r.createObjectStore("museums",{keyPath:"key",autoIncrement:!1}),r.createObjectStore("cafe",{keyPath:"key",autoIncrement:!1}),r.createObjectStore("mall",{keyPath:"key",autoIncrement:!1}),r.createObjectStore("theatre",{keyPath:"key",autoIncrement:!1})}}),wh),Zh=(n,t)=>new Promise((e,i)=>{wh.then(r=>{if(!r){i("Database not open for adding attraction.");return}const s=r.transaction([t],"readwrite"),a=s.objectStore(t).put(n);a.onsuccess=l=>{e(l.target.result)},a.onerror=l=>{i("Error whilst adding attraction to IndexedDB",l)},s.oncomplete=()=>{e("Transaction complete!")},s.onerror=l=>{i("Transaction error: ",l.target.error)}})}),GC=n=>new Promise((t,e)=>{wh.then(i=>{if(!i){e("Attractions database not open to retrieve attraction!");return}const o=i.transaction([n],"readonly").objectStore(n).getAll();o.onsuccess=a=>{const l=a.target.result;t(l)},o.onerror=function(a){e("Error retrieving attraction from IndexedDB:",a.target.error)}})});UC();function jy(n,t){return function(){return n.apply(t,arguments)}}const{toString:WC}=Object.prototype,{getPrototypeOf:Dg}=Object,Jh=(n=>t=>{const e=WC.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),xs=n=>(n=n.toLowerCase(),t=>Jh(t)===n),Qh=n=>t=>typeof t===n,{isArray:Ml}=Array,Ru=Qh("undefined");function VC(n){return n!==null&&!Ru(n)&&n.constructor!==null&&!Ru(n.constructor)&&Ir(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const zy=xs("ArrayBuffer");function HC(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&zy(n.buffer),t}const $C=Qh("string"),Ir=Qh("function"),By=Qh("number"),tf=n=>n!==null&&typeof n=="object",XC=n=>n===!0||n===!1,zc=n=>{if(Jh(n)!=="object")return!1;const t=Dg(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},YC=xs("Date"),KC=xs("File"),ZC=xs("Blob"),JC=xs("FileList"),QC=n=>tf(n)&&Ir(n.pipe),tE=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||Ir(n.append)&&((t=Jh(n))==="formdata"||t==="object"&&Ir(n.toString)&&n.toString()==="[object FormData]"))},eE=xs("URLSearchParams"),nE=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $u(n,t,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let i,r;if(typeof n!="object"&&(n=[n]),Ml(n))for(i=0,r=n.length;i<r;i++)t.call(null,n[i],i,n);else{const s=e?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(i=0;i<o;i++)a=s[i],t.call(null,n[a],a,n)}}function qy(n,t){t=t.toLowerCase();const e=Object.keys(n);let i=e.length,r;for(;i-- >0;)if(r=e[i],t===r.toLowerCase())return r;return null}const Uy=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Gy=n=>!Ru(n)&&n!==Uy;function Vd(){const{caseless:n}=Gy(this)&&this||{},t={},e=(i,r)=>{const s=n&&qy(t,r)||r;zc(t[s])&&zc(i)?t[s]=Vd(t[s],i):zc(i)?t[s]=Vd({},i):Ml(i)?t[s]=i.slice():t[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&$u(arguments[i],e);return t}const iE=(n,t,e,{allOwnKeys:i}={})=>($u(t,(r,s)=>{e&&Ir(r)?n[s]=jy(r,e):n[s]=r},{allOwnKeys:i}),n),rE=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),sE=(n,t,e,i)=>{n.prototype=Object.create(t.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),e&&Object.assign(n.prototype,e)},oE=(n,t,e,i)=>{let r,s,o;const a={};if(t=t||{},n==null)return t;do{for(r=Object.getOwnPropertyNames(n),s=r.length;s-- >0;)o=r[s],(!i||i(o,n,t))&&!a[o]&&(t[o]=n[o],a[o]=!0);n=e!==!1&&Dg(n)}while(n&&(!e||e(n,t))&&n!==Object.prototype);return t},aE=(n,t,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=t.length;const i=n.indexOf(t,e);return i!==-1&&i===e},lE=n=>{if(!n)return null;if(Ml(n))return n;let t=n.length;if(!By(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=n[t];return e},uE=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&Dg(Uint8Array)),cE=(n,t)=>{const i=(n&&n[Symbol.iterator]).call(n);let r;for(;(r=i.next())&&!r.done;){const s=r.value;t.call(n,s[0],s[1])}},hE=(n,t)=>{let e;const i=[];for(;(e=n.exec(t))!==null;)i.push(e);return i},fE=xs("HTMLFormElement"),dE=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,i,r){return i.toUpperCase()+r}),$1=(({hasOwnProperty:n})=>(t,e)=>n.call(t,e))(Object.prototype),pE=xs("RegExp"),Wy=(n,t)=>{const e=Object.getOwnPropertyDescriptors(n),i={};$u(e,(r,s)=>{let o;(o=t(r,s,n))!==!1&&(i[s]=o||r)}),Object.defineProperties(n,i)},gE=n=>{Wy(n,(t,e)=>{if(Ir(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const i=n[e];if(!!Ir(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},mE=(n,t)=>{const e={},i=r=>{r.forEach(s=>{e[s]=!0})};return Ml(n)?i(n):i(String(n).split(t)),e},yE=()=>{},vE=(n,t)=>(n=+n,Number.isFinite(n)?n:t),ed="abcdefghijklmnopqrstuvwxyz",X1="0123456789",Vy={DIGIT:X1,ALPHA:ed,ALPHA_DIGIT:ed+ed.toUpperCase()+X1},_E=(n=16,t=Vy.ALPHA_DIGIT)=>{let e="";const{length:i}=t;for(;n--;)e+=t[Math.random()*i|0];return e};function bE(n){return!!(n&&Ir(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const wE=n=>{const t=new Array(10),e=(i,r)=>{if(tf(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[r]=i;const s=Ml(i)?[]:{};return $u(i,(o,a)=>{const l=e(o,r+1);!Ru(l)&&(s[a]=l)}),t[r]=void 0,s}}return i};return e(n,0)},xE=xs("AsyncFunction"),SE=n=>n&&(tf(n)||Ir(n))&&Ir(n.then)&&Ir(n.catch),Bt={isArray:Ml,isArrayBuffer:zy,isBuffer:VC,isFormData:tE,isArrayBufferView:HC,isString:$C,isNumber:By,isBoolean:XC,isObject:tf,isPlainObject:zc,isUndefined:Ru,isDate:YC,isFile:KC,isBlob:ZC,isRegExp:pE,isFunction:Ir,isStream:QC,isURLSearchParams:eE,isTypedArray:uE,isFileList:JC,forEach:$u,merge:Vd,extend:iE,trim:nE,stripBOM:rE,inherits:sE,toFlatObject:oE,kindOf:Jh,kindOfTest:xs,endsWith:aE,toArray:lE,forEachEntry:cE,matchAll:hE,isHTMLForm:fE,hasOwnProperty:$1,hasOwnProp:$1,reduceDescriptors:Wy,freezeMethods:gE,toObjectSet:mE,toCamelCase:dE,noop:yE,toFiniteNumber:vE,findKey:qy,global:Uy,isContextDefined:Gy,ALPHABET:Vy,generateString:_E,isSpecCompliantForm:bE,toJSONObject:wE,isAsyncFn:xE,isThenable:SE};function gn(n,t,e,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),i&&(this.request=i),r&&(this.response=r)}Bt.inherits(gn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Bt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Hy=gn.prototype,$y={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{$y[n]={value:n}});Object.defineProperties(gn,$y);Object.defineProperty(Hy,"isAxiosError",{value:!0});gn.from=(n,t,e,i,r,s)=>{const o=Object.create(Hy);return Bt.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),gn.call(o,n.message,t,e,i,r),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const CE=null;function Hd(n){return Bt.isPlainObject(n)||Bt.isArray(n)}function Xy(n){return Bt.endsWith(n,"[]")?n.slice(0,-2):n}function Y1(n,t,e){return n?n.concat(t).map(function(r,s){return r=Xy(r),!e&&s?"["+r+"]":r}).join(e?".":""):t}function EE(n){return Bt.isArray(n)&&!n.some(Hd)}const AE=Bt.toFlatObject(Bt,{},null,function(t){return/^is[A-Z]/.test(t)});function ef(n,t,e){if(!Bt.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,e=Bt.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,L){return!Bt.isUndefined(L[S])});const i=e.metaTokens,r=e.visitor||f,s=e.dots,o=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&Bt.isSpecCompliantForm(t);if(!Bt.isFunction(r))throw new TypeError("visitor must be a function");function u(w){if(w===null)return"";if(Bt.isDate(w))return w.toISOString();if(!l&&Bt.isBlob(w))throw new gn("Blob is not supported. Use a Buffer instead.");return Bt.isArrayBuffer(w)||Bt.isTypedArray(w)?l&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function f(w,S,L){let E=w;if(w&&!L&&typeof w=="object"){if(Bt.endsWith(S,"{}"))S=i?S:S.slice(0,-2),w=JSON.stringify(w);else if(Bt.isArray(w)&&EE(w)||(Bt.isFileList(w)||Bt.endsWith(S,"[]"))&&(E=Bt.toArray(w)))return S=Xy(S),E.forEach(function(j,G){!(Bt.isUndefined(j)||j===null)&&t.append(o===!0?Y1([S],G,s):o===null?S:S+"[]",u(j))}),!1}return Hd(w)?!0:(t.append(Y1(L,S,s),u(w)),!1)}const d=[],y=Object.assign(AE,{defaultVisitor:f,convertValue:u,isVisitable:Hd});function m(w,S){if(!Bt.isUndefined(w)){if(d.indexOf(w)!==-1)throw Error("Circular reference detected in "+S.join("."));d.push(w),Bt.forEach(w,function(E,I){(!(Bt.isUndefined(E)||E===null)&&r.call(t,E,Bt.isString(I)?I.trim():I,S,y))===!0&&m(E,S?S.concat(I):[I])}),d.pop()}}if(!Bt.isObject(n))throw new TypeError("data must be an object");return m(n),t}function K1(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function jg(n,t){this._pairs=[],n&&ef(n,this,t)}const Yy=jg.prototype;Yy.append=function(t,e){this._pairs.push([t,e])};Yy.toString=function(t){const e=t?function(i){return t.call(this,i,K1)}:K1;return this._pairs.map(function(r){return e(r[0])+"="+e(r[1])},"").join("&")};function LE(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ky(n,t,e){if(!t)return n;const i=e&&e.encode||LE,r=e&&e.serialize;let s;if(r?s=r(t,e):s=Bt.isURLSearchParams(t)?t.toString():new jg(t,e).toString(i),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class TE{constructor(){this.handlers=[]}use(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Bt.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Z1=TE,Zy={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},IE=typeof URLSearchParams<"u"?URLSearchParams:jg,RE=typeof FormData<"u"?FormData:null,NE=typeof Blob<"u"?Blob:null,PE={isBrowser:!0,classes:{URLSearchParams:IE,FormData:RE,Blob:NE},protocols:["http","https","file","blob","url","data"]},Jy=typeof window<"u"&&typeof document<"u",kE=(n=>Jy&&["ReactNative","NativeScript","NS"].indexOf(n)<0)(typeof navigator<"u"&&navigator.product),FE=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ME=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Jy,hasStandardBrowserWebWorkerEnv:FE,hasStandardBrowserEnv:kE},Symbol.toStringTag,{value:"Module"})),ps={...ME,...PE};function OE(n,t){return ef(n,new ps.classes.URLSearchParams,Object.assign({visitor:function(e,i,r,s){return ps.isNode&&Bt.isBuffer(e)?(this.append(i,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function DE(n){return Bt.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function jE(n){const t={},e=Object.keys(n);let i;const r=e.length;let s;for(i=0;i<r;i++)s=e[i],t[s]=n[s];return t}function Qy(n){function t(e,i,r,s){let o=e[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=e.length;return o=!o&&Bt.isArray(r)?r.length:o,l?(Bt.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i,!a):((!r[o]||!Bt.isObject(r[o]))&&(r[o]=[]),t(e,i,r[o],s)&&Bt.isArray(r[o])&&(r[o]=jE(r[o])),!a)}if(Bt.isFormData(n)&&Bt.isFunction(n.entries)){const e={};return Bt.forEachEntry(n,(i,r)=>{t(DE(i),r,e,0)}),e}return null}function zE(n,t,e){if(Bt.isString(n))try{return(t||JSON.parse)(n),Bt.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(n)}const zg={transitional:Zy,adapter:["xhr","http"],transformRequest:[function(t,e){const i=e.getContentType()||"",r=i.indexOf("application/json")>-1,s=Bt.isObject(t);if(s&&Bt.isHTMLForm(t)&&(t=new FormData(t)),Bt.isFormData(t))return r?JSON.stringify(Qy(t)):t;if(Bt.isArrayBuffer(t)||Bt.isBuffer(t)||Bt.isStream(t)||Bt.isFile(t)||Bt.isBlob(t))return t;if(Bt.isArrayBufferView(t))return t.buffer;if(Bt.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return OE(t,this.formSerializer).toString();if((a=Bt.isFileList(t))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ef(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||r?(e.setContentType("application/json",!1),zE(t)):t}],transformResponse:[function(t){const e=this.transitional||zg.transitional,i=e&&e.forcedJSONParsing,r=this.responseType==="json";if(t&&Bt.isString(t)&&(i&&!this.responseType||r)){const o=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?gn.from(a,gn.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ps.classes.FormData,Blob:ps.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Bt.forEach(["delete","get","head","post","put","patch"],n=>{zg.headers[n]={}});const Bg=zg,BE=Bt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),qE=n=>{const t={};let e,i,r;return n&&n.split(`
`).forEach(function(o){r=o.indexOf(":"),e=o.substring(0,r).trim().toLowerCase(),i=o.substring(r+1).trim(),!(!e||t[e]&&BE[e])&&(e==="set-cookie"?t[e]?t[e].push(i):t[e]=[i]:t[e]=t[e]?t[e]+", "+i:i)}),t},J1=Symbol("internals");function nu(n){return n&&String(n).trim().toLowerCase()}function Bc(n){return n===!1||n==null?n:Bt.isArray(n)?n.map(Bc):String(n)}function UE(n){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=e.exec(n);)t[i[1]]=i[2];return t}const GE=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function nd(n,t,e,i,r){if(Bt.isFunction(i))return i.call(this,t,e);if(r&&(t=e),!!Bt.isString(t)){if(Bt.isString(i))return t.indexOf(i)!==-1;if(Bt.isRegExp(i))return i.test(t)}}function WE(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,i)=>e.toUpperCase()+i)}function VE(n,t){const e=Bt.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+e,{value:function(r,s,o){return this[i].call(this,t,r,s,o)},configurable:!0})})}class nf{constructor(t){t&&this.set(t)}set(t,e,i){const r=this;function s(a,l,u){const f=nu(l);if(!f)throw new Error("header name must be a non-empty string");const d=Bt.findKey(r,f);(!d||r[d]===void 0||u===!0||u===void 0&&r[d]!==!1)&&(r[d||l]=Bc(a))}const o=(a,l)=>Bt.forEach(a,(u,f)=>s(u,f,l));return Bt.isPlainObject(t)||t instanceof this.constructor?o(t,e):Bt.isString(t)&&(t=t.trim())&&!GE(t)?o(qE(t),e):t!=null&&s(e,t,i),this}get(t,e){if(t=nu(t),t){const i=Bt.findKey(this,t);if(i){const r=this[i];if(!e)return r;if(e===!0)return UE(r);if(Bt.isFunction(e))return e.call(this,r,i);if(Bt.isRegExp(e))return e.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=nu(t),t){const i=Bt.findKey(this,t);return!!(i&&this[i]!==void 0&&(!e||nd(this,this[i],i,e)))}return!1}delete(t,e){const i=this;let r=!1;function s(o){if(o=nu(o),o){const a=Bt.findKey(i,o);a&&(!e||nd(i,i[a],a,e))&&(delete i[a],r=!0)}}return Bt.isArray(t)?t.forEach(s):s(t),r}clear(t){const e=Object.keys(this);let i=e.length,r=!1;for(;i--;){const s=e[i];(!t||nd(this,this[s],s,t,!0))&&(delete this[s],r=!0)}return r}normalize(t){const e=this,i={};return Bt.forEach(this,(r,s)=>{const o=Bt.findKey(i,s);if(o){e[o]=Bc(r),delete e[s];return}const a=t?WE(s):String(s).trim();a!==s&&delete e[s],e[a]=Bc(r),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return Bt.forEach(this,(i,r)=>{i!=null&&i!==!1&&(e[r]=t&&Bt.isArray(i)?i.join(", "):i)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const i=new this(t);return e.forEach(r=>i.set(r)),i}static accessor(t){const i=(this[J1]=this[J1]={accessors:{}}).accessors,r=this.prototype;function s(o){const a=nu(o);i[a]||(VE(r,o),i[a]=!0)}return Bt.isArray(t)?t.forEach(s):s(t),this}}nf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Bt.reduceDescriptors(nf.prototype,({value:n},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(i){this[e]=i}}});Bt.freezeMethods(nf);const Vs=nf;function id(n,t){const e=this||Bg,i=t||e,r=Vs.from(i.headers);let s=i.data;return Bt.forEach(n,function(a){s=a.call(e,s,r.normalize(),t?t.status:void 0)}),r.normalize(),s}function t5(n){return!!(n&&n.__CANCEL__)}function Xu(n,t,e){gn.call(this,n==null?"canceled":n,gn.ERR_CANCELED,t,e),this.name="CanceledError"}Bt.inherits(Xu,gn,{__CANCEL__:!0});function HE(n,t,e){const i=e.config.validateStatus;!e.status||!i||i(e.status)?n(e):t(new gn("Request failed with status code "+e.status,[gn.ERR_BAD_REQUEST,gn.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const $E=ps.hasStandardBrowserEnv?{write(n,t,e,i,r,s){const o=[n+"="+encodeURIComponent(t)];Bt.isNumber(e)&&o.push("expires="+new Date(e).toGMTString()),Bt.isString(i)&&o.push("path="+i),Bt.isString(r)&&o.push("domain="+r),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const t=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function XE(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function YE(n,t){return t?n.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):n}function e5(n,t){return n&&!XE(t)?YE(n,t):t}const KE=ps.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let i;function r(s){let o=s;return t&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return i=r(window.location.href),function(o){const a=Bt.isString(o)?r(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}();function ZE(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function JE(n,t){n=n||10;const e=new Array(n),i=new Array(n);let r=0,s=0,o;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),f=i[s];o||(o=u),e[r]=l,i[r]=u;let d=s,y=0;for(;d!==r;)y+=e[d++],d=d%n;if(r=(r+1)%n,r===s&&(s=(s+1)%n),u-o<t)return;const m=f&&u-f;return m?Math.round(y*1e3/m):void 0}}function Q1(n,t){let e=0;const i=JE(50,250);return r=>{const s=r.loaded,o=r.lengthComputable?r.total:void 0,a=s-e,l=i(a),u=s<=o;e=s;const f={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&u?(o-s)/l:void 0,event:r};f[t?"download":"upload"]=!0,n(f)}}const QE=typeof XMLHttpRequest<"u",tA=QE&&function(n){return new Promise(function(e,i){let r=n.data;const s=Vs.from(n.headers).normalize();let{responseType:o,withXSRFToken:a}=n,l;function u(){n.cancelToken&&n.cancelToken.unsubscribe(l),n.signal&&n.signal.removeEventListener("abort",l)}let f;if(Bt.isFormData(r)){if(ps.hasStandardBrowserEnv||ps.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((f=s.getContentType())!==!1){const[S,...L]=f?f.split(";").map(E=>E.trim()).filter(Boolean):[];s.setContentType([S||"multipart/form-data",...L].join("; "))}}let d=new XMLHttpRequest;if(n.auth){const S=n.auth.username||"",L=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";s.set("Authorization","Basic "+btoa(S+":"+L))}const y=e5(n.baseURL,n.url);d.open(n.method.toUpperCase(),Ky(y,n.params,n.paramsSerializer),!0),d.timeout=n.timeout;function m(){if(!d)return;const S=Vs.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),E={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:S,config:n,request:d};HE(function(j){e(j),u()},function(j){i(j),u()},E),d=null}if("onloadend"in d?d.onloadend=m:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(m)},d.onabort=function(){!d||(i(new gn("Request aborted",gn.ECONNABORTED,n,d)),d=null)},d.onerror=function(){i(new gn("Network Error",gn.ERR_NETWORK,n,d)),d=null},d.ontimeout=function(){let L=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const E=n.transitional||Zy;n.timeoutErrorMessage&&(L=n.timeoutErrorMessage),i(new gn(L,E.clarifyTimeoutError?gn.ETIMEDOUT:gn.ECONNABORTED,n,d)),d=null},ps.hasStandardBrowserEnv&&(a&&Bt.isFunction(a)&&(a=a(n)),a||a!==!1&&KE(y))){const S=n.xsrfHeaderName&&n.xsrfCookieName&&$E.read(n.xsrfCookieName);S&&s.set(n.xsrfHeaderName,S)}r===void 0&&s.setContentType(null),"setRequestHeader"in d&&Bt.forEach(s.toJSON(),function(L,E){d.setRequestHeader(E,L)}),Bt.isUndefined(n.withCredentials)||(d.withCredentials=!!n.withCredentials),o&&o!=="json"&&(d.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&d.addEventListener("progress",Q1(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",Q1(n.onUploadProgress)),(n.cancelToken||n.signal)&&(l=S=>{!d||(i(!S||S.type?new Xu(null,n,d):S),d.abort(),d=null)},n.cancelToken&&n.cancelToken.subscribe(l),n.signal&&(n.signal.aborted?l():n.signal.addEventListener("abort",l)));const w=ZE(y);if(w&&ps.protocols.indexOf(w)===-1){i(new gn("Unsupported protocol "+w+":",gn.ERR_BAD_REQUEST,n));return}d.send(r||null)})},$d={http:CE,xhr:tA};Bt.forEach($d,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const tm=n=>`- ${n}`,eA=n=>Bt.isFunction(n)||n===null||n===!1,n5={getAdapter:n=>{n=Bt.isArray(n)?n:[n];const{length:t}=n;let e,i;const r={};for(let s=0;s<t;s++){e=n[s];let o;if(i=e,!eA(e)&&(i=$d[(o=String(e)).toLowerCase()],i===void 0))throw new gn(`Unknown adapter '${o}'`);if(i)break;r[o||"#"+s]=i}if(!i){const s=Object.entries(r).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(tm).join(`
`):" "+tm(s[0]):"as no adapter specified";throw new gn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:$d};function rd(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Xu(null,n)}function em(n){return rd(n),n.headers=Vs.from(n.headers),n.data=id.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),n5.getAdapter(n.adapter||Bg.adapter)(n).then(function(i){return rd(n),i.data=id.call(n,n.transformResponse,i),i.headers=Vs.from(i.headers),i},function(i){return t5(i)||(rd(n),i&&i.response&&(i.response.data=id.call(n,n.transformResponse,i.response),i.response.headers=Vs.from(i.response.headers))),Promise.reject(i)})}const nm=n=>n instanceof Vs?n.toJSON():n;function Tl(n,t){t=t||{};const e={};function i(u,f,d){return Bt.isPlainObject(u)&&Bt.isPlainObject(f)?Bt.merge.call({caseless:d},u,f):Bt.isPlainObject(f)?Bt.merge({},f):Bt.isArray(f)?f.slice():f}function r(u,f,d){if(Bt.isUndefined(f)){if(!Bt.isUndefined(u))return i(void 0,u,d)}else return i(u,f,d)}function s(u,f){if(!Bt.isUndefined(f))return i(void 0,f)}function o(u,f){if(Bt.isUndefined(f)){if(!Bt.isUndefined(u))return i(void 0,u)}else return i(void 0,f)}function a(u,f,d){if(d in t)return i(u,f);if(d in n)return i(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,f)=>r(nm(u),nm(f),!0)};return Bt.forEach(Object.keys(Object.assign({},n,t)),function(f){const d=l[f]||r,y=d(n[f],t[f],f);Bt.isUndefined(y)&&d!==a||(e[f]=y)}),e}const i5="1.6.7",qg={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{qg[n]=function(i){return typeof i===n||"a"+(t<1?"n ":" ")+n}});const im={};qg.transitional=function(t,e,i){function r(s,o){return"[Axios v"+i5+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,a)=>{if(t===!1)throw new gn(r(o," has been removed"+(e?" in "+e:"")),gn.ERR_DEPRECATED);return e&&!im[o]&&(im[o]=!0,console.warn(r(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(s,o,a):!0}};function nA(n,t,e){if(typeof n!="object")throw new gn("options must be an object",gn.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let r=i.length;for(;r-- >0;){const s=i[r],o=t[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new gn("option "+s+" must be "+l,gn.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new gn("Unknown option "+s,gn.ERR_BAD_OPTION)}}const Xd={assertOptions:nA,validators:qg},vo=Xd.validators;class xh{constructor(t){this.defaults=t,this.interceptors={request:new Z1,response:new Z1}}async request(t,e){try{return await this._request(t,e)}catch(i){if(i instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}throw i}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Tl(this.defaults,e);const{transitional:i,paramsSerializer:r,headers:s}=e;i!==void 0&&Xd.assertOptions(i,{silentJSONParsing:vo.transitional(vo.boolean),forcedJSONParsing:vo.transitional(vo.boolean),clarifyTimeoutError:vo.transitional(vo.boolean)},!1),r!=null&&(Bt.isFunction(r)?e.paramsSerializer={serialize:r}:Xd.assertOptions(r,{encode:vo.function,serialize:vo.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=s&&Bt.merge(s.common,s[e.method]);s&&Bt.forEach(["delete","get","head","post","put","patch","common"],w=>{delete s[w]}),e.headers=Vs.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(e)===!1||(l=l&&S.synchronous,a.unshift(S.fulfilled,S.rejected))});const u=[];this.interceptors.response.forEach(function(S){u.push(S.fulfilled,S.rejected)});let f,d=0,y;if(!l){const w=[em.bind(this),void 0];for(w.unshift.apply(w,a),w.push.apply(w,u),y=w.length,f=Promise.resolve(e);d<y;)f=f.then(w[d++],w[d++]);return f}y=a.length;let m=e;for(d=0;d<y;){const w=a[d++],S=a[d++];try{m=w(m)}catch(L){S.call(this,L);break}}try{f=em.call(this,m)}catch(w){return Promise.reject(w)}for(d=0,y=u.length;d<y;)f=f.then(u[d++],u[d++]);return f}getUri(t){t=Tl(this.defaults,t);const e=e5(t.baseURL,t.url);return Ky(e,t.params,t.paramsSerializer)}}Bt.forEach(["delete","get","head","options"],function(t){xh.prototype[t]=function(e,i){return this.request(Tl(i||{},{method:t,url:e,data:(i||{}).data}))}});Bt.forEach(["post","put","patch"],function(t){function e(i){return function(s,o,a){return this.request(Tl(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}xh.prototype[t]=e(),xh.prototype[t+"Form"]=e(!0)});const qc=xh;class Ug{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(s){e=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(a=>{i.subscribe(a),s=a}).then(r);return o.cancel=function(){i.unsubscribe(s)},o},t(function(s,o,a){i.reason||(i.reason=new Xu(s,o,a),e(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}static source(){let t;return{token:new Ug(function(r){t=r}),cancel:t}}}const iA=Ug;function rA(n){return function(e){return n.apply(null,e)}}function sA(n){return Bt.isObject(n)&&n.isAxiosError===!0}const Yd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Yd).forEach(([n,t])=>{Yd[t]=n});const oA=Yd;function r5(n){const t=new qc(n),e=jy(qc.prototype.request,t);return Bt.extend(e,qc.prototype,t,{allOwnKeys:!0}),Bt.extend(e,t,null,{allOwnKeys:!0}),e.create=function(r){return r5(Tl(n,r))},e}const pi=r5(Bg);pi.Axios=qc;pi.CanceledError=Xu;pi.CancelToken=iA;pi.isCancel=t5;pi.VERSION=i5;pi.toFormData=ef;pi.AxiosError=gn;pi.Cancel=pi.CanceledError;pi.all=function(t){return Promise.all(t)};pi.spread=rA;pi.isAxiosError=sA;pi.mergeConfig=Tl;pi.AxiosHeaders=Vs;pi.formToJSON=n=>Qy(Bt.isHTMLForm(n)?new FormData(n):n);pi.getAdapter=n5.getAdapter;pi.HttpStatusCode=oA;pi.default=pi;const rf=pi;window.$=Mt;var s5=[];const sf=async n=>{const t=new sg({source:new og({features:[]}),name:n,visible:!1});yr.addLayer(t),s5.push(t);const i=(await GC(n))[0].data,s=new DOMParser().parseFromString(i,"text/xml"),o=s.getElementsByTagName("node");aA(o,n,t);const a=s.getElementsByTagName("bounds");lA(a,n,t)},aA=(n,t,e)=>{for(let i=0;i<n.length;i++){const r=n[i],s=parseFloat(r.getAttribute("lat")),o=parseFloat(r.getAttribute("lon"));o5(o,s,t,e)}},lA=(n,t,e)=>{for(let i=0;i<n.length;i++){const r=n[i],s=parseFloat(r.getAttribute("minlat")),o=parseFloat(r.getAttribute("minlon"));o5(o,s,t,e)}},o5=(n,t,e,i)=>{const r=new jp({geometry:new Sl(Rh([n,t]))});r.setStyle(new dr({image:new Al({src:`../icons/${e}.png`,scale:.02})})),i.getSource().addFeature(r)},uA=n=>{s5.forEach(t=>{t.get("name")!==n?t.setVisible(!1):(window.innerWidth<701&&(ku(0),_a()),t.setVisible(!0))})},cA=()=>{Mt("#attractions").on("change",function(){const n=Mt(this).val();uA(n)})};Mt(document).on("ready",cA());window.$=Mt;const hA="https://overpass-api.de/api/interpreter?data=",fA=async n=>{try{const e=(await rf({method:"get",url:hA+encodeURIComponent(n)})).data;await Zh({key:"museums",data:e},"museums")}catch(t){console.error("Error while retrieving data from OSM: ",t)}},dA=`
area(id:3600065606)->.searchArea;
nwr['tourism'='museum'](area.searchArea);
out geom;
`,pA=async()=>{await fA(dA),await sf("museums")};Mt(document).on("ready",pA());window.$=Mt;const gA="https://overpass-api.de/api/interpreter?data=",mA=async n=>{try{const e=(await rf({method:"get",url:gA+encodeURIComponent(n)})).data;await Zh({key:"cafe",data:e},"cafe")}catch(t){console.error("Error while retrieving data from OSM: ",t)}},yA=`
area(id:3600065606)->.searchArea;
node['amenity'='internet_cafe'](area.searchArea);
out geom;
`,vA=async()=>{await mA(yA),await sf("cafe")};Mt(document).on("ready",vA());window.$=Mt;const _A="https://overpass-api.de/api/interpreter?data=",bA=async n=>{try{const e=(await rf({method:"get",url:_A+encodeURIComponent(n)})).data;await Zh({key:"theatre",data:e},"theatre")}catch(t){console.error("Error while retrieving data from OSM: ",t)}},wA=`
area(id:3600065606)->.searchArea;
nwr['amenity'='theatre'](area.searchArea);
out geom;
`,xA=async()=>{await bA(wA),await sf("theatre")};Mt(document).on("ready",xA());window.$=Mt;const SA="https://overpass-api.de/api/interpreter?data=",CA=async n=>{try{const e=(await rf({method:"get",url:SA+encodeURIComponent(n)})).data;await Zh({key:"mall",data:e},"mall")}catch(t){console.error("Error while retrieving data from OSM: ",t)}},EA=`
area(id:3600065606)->.searchArea;
nwr['shop'='mall'](area.searchArea);
out geom;
`,AA=async()=>{await CA(EA),await sf("mall")};Mt(document).on("ready",AA());const LA="modulepreload",TA=function(n){return"/"+n},rm={},Kd=function(t,e,i){if(!e||e.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(e.map(s=>{if(s=TA(s),s in rm)return;rm[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let f=r.length-1;f>=0;f--){const d=r[f];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":LA,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((f,d)=>{u.addEventListener("load",f),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())};function Pn(n){return Pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pn(n)}var Vi=Uint8Array,Hi=Uint16Array,Nu=Uint32Array,of=new Vi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),af=new Vi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Zd=new Vi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a5=function(n,t){for(var e=new Hi(31),i=0;i<31;++i)e[i]=t+=1<<n[i-1];for(var r=new Nu(e[30]),i=1;i<30;++i)for(var s=e[i];s<e[i+1];++s)r[s]=s-e[i]<<5|i;return[e,r]},l5=a5(of,2),u5=l5[0],Jd=l5[1];u5[28]=258,Jd[258]=28;var c5=a5(af,0),IA=c5[0],sm=c5[1],Qd=new Hi(32768);for(var Vn=0;Vn<32768;++Vn){var _o=(Vn&43690)>>>1|(Vn&21845)<<1;_o=(_o&52428)>>>2|(_o&13107)<<2,_o=(_o&61680)>>>4|(_o&3855)<<4,Qd[Vn]=((_o&65280)>>>8|(_o&255)<<8)>>>1}var _s=function(n,t,e){for(var i=n.length,r=0,s=new Hi(t);r<i;++r)++s[n[r]-1];var o=new Hi(t);for(r=0;r<t;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(e){a=new Hi(1<<t);var l=15-t;for(r=0;r<i;++r)if(n[r])for(var u=r<<4|n[r],f=t-n[r],d=o[n[r]-1]++<<f,y=d|(1<<f)-1;d<=y;++d)a[Qd[d]>>>l]=u}else for(a=new Hi(i),r=0;r<i;++r)a[r]=Qd[o[n[r]-1]++]>>>15-n[r];return a},Oo=new Vi(288);for(var Vn=0;Vn<144;++Vn)Oo[Vn]=8;for(var Vn=144;Vn<256;++Vn)Oo[Vn]=9;for(var Vn=256;Vn<280;++Vn)Oo[Vn]=7;for(var Vn=280;Vn<288;++Vn)Oo[Vn]=8;var Pu=new Vi(32);for(var Vn=0;Vn<32;++Vn)Pu[Vn]=5;var RA=_s(Oo,9,0),NA=_s(Oo,9,1),PA=_s(Pu,5,0),kA=_s(Pu,5,1),sd=function(n){for(var t=n[0],e=1;e<n.length;++e)n[e]>t&&(t=n[e]);return t},Hr=function(n,t,e){var i=t/8>>0;return(n[i]|n[i+1]<<8)>>>(t&7)&e},od=function(n,t){var e=t/8>>0;return(n[e]|n[e+1]<<8|n[e+2]<<16)>>>(t&7)},Gg=function(n){return(n/8>>0)+(n&7&&1)},h5=function(n,t,e){(t==null||t<0)&&(t=0),(e==null||e>n.length)&&(e=n.length);var i=new(n instanceof Hi?Hi:n instanceof Nu?Nu:Vi)(e-t);return i.set(n.subarray(t,e)),i},FA=function(n,t,e){var i=n.length,r=!t||e,s=!e||e.i;e||(e={}),t||(t=new Vi(i*3));var o=function(dt){var wt=t.length;if(dt>wt){var _t=new Vi(Math.max(wt*2,dt));_t.set(t),t=_t}},a=e.f||0,l=e.p||0,u=e.b||0,f=e.l,d=e.d,y=e.m,m=e.n,w=i*8;do{if(!f){e.f=a=Hr(n,l,1);var S=Hr(n,l+1,3);if(l+=3,S)if(S==1)f=NA,d=kA,y=9,m=5;else if(S==2){var j=Hr(n,l,31)+257,G=Hr(n,l+10,15)+4,Z=j+Hr(n,l+5,31)+1;l+=14;for(var at=new Vi(Z),v=new Vi(19),B=0;B<G;++B)v[Zd[B]]=Hr(n,l+B*3,7);l+=G*3;var it=sd(v),mt=(1<<it)-1;if(!s&&l+Z*(it+7)>w)break;for(var q=_s(v,it,1),B=0;B<Z;){var F=q[Hr(n,l,mt)];l+=F&15;var L=F>>>4;if(L<16)at[B++]=L;else{var V=0,W=0;for(L==16?(W=3+Hr(n,l,3),l+=2,V=at[B-1]):L==17?(W=3+Hr(n,l,7),l+=3):L==18&&(W=11+Hr(n,l,127),l+=7);W--;)at[B++]=V}}var et=at.subarray(0,j),st=at.subarray(j);y=sd(et),m=sd(st),f=_s(et,y,1),d=_s(st,m,1)}else throw"invalid block type";else{var L=Gg(l)+4,E=n[L-4]|n[L-3]<<8,I=L+E;if(I>i){if(s)throw"unexpected EOF";break}r&&o(u+E),t.set(n.subarray(L,I),u),e.b=u+=E,e.p=l=I*8;continue}if(l>w)throw"unexpected EOF"}r&&o(u+131072);for(var lt=(1<<y)-1,ct=(1<<m)-1,Et=y+m+18;s||l+Et<w;){var V=f[od(n,l)&lt],ot=V>>>4;if(l+=V&15,l>w)throw"unexpected EOF";if(!V)throw"invalid length/literal";if(ot<256)t[u++]=ot;else if(ot==256){f=null;break}else{var Yt=ot-254;if(ot>264){var B=ot-257,T=of[B];Yt=Hr(n,l,(1<<T)-1)+u5[B],l+=T}var H=d[od(n,l)&ct],Y=H>>>4;if(!H)throw"invalid distance";l+=H&15;var st=IA[Y];if(Y>3){var T=af[Y];st+=od(n,l)&(1<<T)-1,l+=T}if(l>w)throw"unexpected EOF";r&&o(u+131072);for(var nt=u+Yt;u<nt;u+=4)t[u]=t[u-st],t[u+1]=t[u+1-st],t[u+2]=t[u+2-st],t[u+3]=t[u+3-st];u=nt}}e.l=f,e.p=l,e.b=u,f&&(a=1,e.m=y,e.d=d,e.n=m)}while(!a);return u==t.length?t:h5(t,0,u)},js=function(n,t,e){e<<=t&7;var i=t/8>>0;n[i]|=e,n[i+1]|=e>>>8},iu=function(n,t,e){e<<=t&7;var i=t/8>>0;n[i]|=e,n[i+1]|=e>>>8,n[i+2]|=e>>>16},ad=function(n,t){for(var e=[],i=0;i<n.length;++i)n[i]&&e.push({s:i,f:n[i]});var r=e.length,s=e.slice();if(!r)return[new Vi(0),0];if(r==1){var o=new Vi(e[0].s+1);return o[e[0].s]=1,[o,1]}e.sort(function(Z,at){return Z.f-at.f}),e.push({s:-1,f:25001});var a=e[0],l=e[1],u=0,f=1,d=2;for(e[0]={s:-1,f:a.f+l.f,l:a,r:l};f!=r-1;)a=e[e[u].f<e[d].f?u++:d++],l=e[u!=f&&e[u].f<e[d].f?u++:d++],e[f++]={s:-1,f:a.f+l.f,l:a,r:l};for(var y=s[0].s,i=1;i<r;++i)s[i].s>y&&(y=s[i].s);var m=new Hi(y+1),w=tp(e[f-1],m,0);if(w>t){var i=0,S=0,L=w-t,E=1<<L;for(s.sort(function(at,v){return m[v.s]-m[at.s]||at.f-v.f});i<r;++i){var I=s[i].s;if(m[I]>t)S+=E-(1<<w-m[I]),m[I]=t;else break}for(S>>>=L;S>0;){var j=s[i].s;m[j]<t?S-=1<<t-m[j]++-1:++i}for(;i>=0&&S;--i){var G=s[i].s;m[G]==t&&(--m[G],++S)}w=t}return[new Vi(m),w]},tp=function(n,t,e){return n.s==-1?Math.max(tp(n.l,t,e+1),tp(n.r,t,e+1)):t[n.s]=e},om=function(n){for(var t=n.length;t&&!n[--t];);for(var e=new Hi(++t),i=0,r=n[0],s=1,o=function(l){e[i++]=l},a=1;a<=t;++a)if(n[a]==r&&a!=t)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=n[a]}return[e.subarray(0,i),t]},ru=function(n,t){for(var e=0,i=0;i<t.length;++i)e+=n[i]*t[i];return e},Uc=function(n,t,e){var i=e.length,r=Gg(t+2);n[r]=i&255,n[r+1]=i>>>8,n[r+2]=n[r]^255,n[r+3]=n[r+1]^255;for(var s=0;s<i;++s)n[r+s+4]=e[s];return(r+4+i)*8},am=function(n,t,e,i,r,s,o,a,l,u,f){js(t,f++,e),++r[256];for(var d=ad(r,15),y=d[0],m=d[1],w=ad(s,15),S=w[0],L=w[1],E=om(y),I=E[0],j=E[1],G=om(S),Z=G[0],at=G[1],v=new Hi(19),B=0;B<I.length;++B)v[I[B]&31]++;for(var B=0;B<Z.length;++B)v[Z[B]&31]++;for(var it=ad(v,7),mt=it[0],q=it[1],F=19;F>4&&!mt[Zd[F-1]];--F);var V=u+5<<3,W=ru(r,Oo)+ru(s,Pu)+o,et=ru(r,y)+ru(s,S)+o+14+3*F+ru(v,mt)+(2*v[16]+3*v[17]+7*v[18]);if(V<=W&&V<=et)return Uc(t,f,n.subarray(l,l+u));var st,lt,ct,Et;if(js(t,f,1+(et<W)),f+=2,et<W){st=_s(y,m,0),lt=y,ct=_s(S,L,0),Et=S;var ot=_s(mt,q,0);js(t,f,j-257),js(t,f+5,at-1),js(t,f+10,F-4),f+=14;for(var B=0;B<F;++B)js(t,f+3*B,mt[Zd[B]]);f+=3*F;for(var Yt=[I,Z],T=0;T<2;++T)for(var H=Yt[T],B=0;B<H.length;++B){var Y=H[B]&31;js(t,f,ot[Y]),f+=mt[Y],Y>15&&(js(t,f,H[B]>>>5&127),f+=H[B]>>>12)}}else st=RA,lt=Oo,ct=PA,Et=Pu;for(var B=0;B<a;++B)if(i[B]>255){var Y=i[B]>>>18&31;iu(t,f,st[Y+257]),f+=lt[Y+257],Y>7&&(js(t,f,i[B]>>>23&31),f+=of[Y]);var nt=i[B]&31;iu(t,f,ct[nt]),f+=Et[nt],nt>3&&(iu(t,f,i[B]>>>5&8191),f+=af[nt])}else iu(t,f,st[i[B]]),f+=lt[i[B]];return iu(t,f,st[256]),f+lt[256]},MA=new Nu([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),OA=new Vi(0),DA=function(n,t,e,i,r,s){var o=n.length,a=new Vi(i+o+5*(1+Math.floor(o/7e3))+r),l=a.subarray(i,a.length-r),u=0;if(!t||o<8)for(var f=0;f<=o;f+=65535){var d=f+65535;d<o?u=Uc(l,u,n.subarray(f,d)):(l[f]=s,u=Uc(l,u,n.subarray(f,o)))}else{for(var y=MA[t-1],m=y>>>13,w=y&8191,S=(1<<e)-1,L=new Hi(32768),E=new Hi(S+1),I=Math.ceil(e/3),j=2*I,G=function(ye){return(n[ye]^n[ye+1]<<I^n[ye+2]<<j)&S},Z=new Nu(25e3),at=new Hi(288),v=new Hi(32),B=0,it=0,f=0,mt=0,q=0,F=0;f<o;++f){var V=G(f),W=f&32767,et=E[V];if(L[W]=et,E[V]=W,q<=f){var st=o-f;if((B>7e3||mt>24576)&&st>423){u=am(n,l,0,Z,at,v,it,mt,F,f-F,u),mt=B=it=0,F=f;for(var lt=0;lt<286;++lt)at[lt]=0;for(var lt=0;lt<30;++lt)v[lt]=0}var ct=2,Et=0,ot=w,Yt=W-et&32767;if(st>2&&V==G(f-Yt))for(var T=Math.min(m,st)-1,H=Math.min(32767,f),Y=Math.min(258,st);Yt<=H&&--ot&&W!=et;){if(n[f+ct]==n[f+ct-Yt]){for(var nt=0;nt<Y&&n[f+nt]==n[f+nt-Yt];++nt);if(nt>ct){if(ct=nt,Et=Yt,nt>T)break;for(var dt=Math.min(Yt,nt-2),wt=0,lt=0;lt<dt;++lt){var _t=f-Yt+lt+32768&32767,St=L[_t],bt=_t-St+32768&32767;bt>wt&&(wt=bt,et=_t)}}}W=et,et=L[W],Yt+=W-et+32768&32767}if(Et){Z[mt++]=268435456|Jd[ct]<<18|sm[Et];var $t=Jd[ct]&31,Jt=sm[Et]&31;it+=of[$t]+af[Jt],++at[257+$t],++v[Jt],q=f+ct,++B}else Z[mt++]=n[f],++at[n[f]]}}u=am(n,l,s,Z,at,v,it,mt,F,f-F,u),s||(u=Uc(l,u,OA))}return h5(a,0,i+Gg(u)+r)},jA=function(){var n=1,t=0;return{p:function(e){for(var i=n,r=t,s=e.length,o=0;o!=s;){for(var a=Math.min(o+5552,s);o<a;++o)i+=e[o],r+=i;i%=65521,r%=65521}n=i,t=r},d:function(){return(n>>>8<<16|(t&255)<<8|t>>>8)+((n&255)<<23)*2}}},zA=function(n,t,e,i,r){return DA(n,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+t.mem,e,i,!r)},BA=function(n,t,e){for(;e;++t)n[t]=e,e>>>=8},qA=function(n,t){var e=t.level,i=e==0?0:e<6?1:e==9?3:2;n[0]=120,n[1]=i<<6|(i?32-2*i:1)},UA=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function ep(n,t){t===void 0&&(t={});var e=jA();e.p(n);var i=zA(n,t,2,4);return qA(i,t),BA(i,i.length-4,e.d()),i}function GA(n,t){return FA((UA(n),n.subarray(2,-4)),t)}var ze=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function ld(){ze.console&&typeof ze.console.log=="function"&&ze.console.log.apply(ze.console,arguments)}var Bn={log:ld,warn:function(n){ze.console&&(typeof ze.console.warn=="function"?ze.console.warn.apply(ze.console,arguments):ld.call(null,arguments))},error:function(n){ze.console&&(typeof ze.console.error=="function"?ze.console.error.apply(ze.console,arguments):ld(n))}};function ud(n,t,e){var i=new XMLHttpRequest;i.open("GET",n),i.responseType="blob",i.onload=function(){oa(i.response,t,e)},i.onerror=function(){Bn.error("could not download file")},i.send()}function lm(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function kc(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var fu,np,oa=ze.saveAs||((typeof window>"u"?"undefined":Pn(window))!=="object"||window!==ze?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,t,e){var i=ze.URL||ze.webkitURL,r=document.createElement("a");t=t||n.name||"download",r.download=t,r.rel="noopener",typeof n=="string"?(r.href=n,r.origin!==location.origin?lm(r.href)?ud(n,t,e):kc(r,r.target="_blank"):kc(r)):(r.href=i.createObjectURL(n),setTimeout(function(){i.revokeObjectURL(r.href)},4e4),setTimeout(function(){kc(r)},0))}:"msSaveOrOpenBlob"in navigator?function(n,t,e){if(t=t||n.name||"download",typeof n=="string")if(lm(n))ud(n,t,e);else{var i=document.createElement("a");i.href=n,i.target="_blank",setTimeout(function(){kc(i)})}else navigator.msSaveOrOpenBlob(function(r,s){return s===void 0?s={autoBom:!1}:Pn(s)!=="object"&&(Bn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob([String.fromCharCode(65279),r],{type:r.type}):r}(n,e),t)}:function(n,t,e,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof n=="string")return ud(n,t,e);var r=n.type==="application/octet-stream",s=/constructor/i.test(ze.HTMLElement)||ze.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||r&&s)&&(typeof FileReader>"u"?"undefined":Pn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var f=a.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=f:location=f,i=null},a.readAsDataURL(n)}else{var l=ze.URL||ze.webkitURL,u=l.createObjectURL(n);i?i.location=u:location.href=u,i=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f5(n){var t;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],i=0;i<e.length;i++){var r=e[i].re,s=e[i].process,o=r.exec(n);o&&(t=s(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function cd(n,t){var e=n[0],i=n[1],r=n[2],s=n[3];e=Ni(e,i,r,s,t[0],7,-680876936),s=Ni(s,e,i,r,t[1],12,-389564586),r=Ni(r,s,e,i,t[2],17,606105819),i=Ni(i,r,s,e,t[3],22,-1044525330),e=Ni(e,i,r,s,t[4],7,-176418897),s=Ni(s,e,i,r,t[5],12,1200080426),r=Ni(r,s,e,i,t[6],17,-1473231341),i=Ni(i,r,s,e,t[7],22,-45705983),e=Ni(e,i,r,s,t[8],7,1770035416),s=Ni(s,e,i,r,t[9],12,-1958414417),r=Ni(r,s,e,i,t[10],17,-42063),i=Ni(i,r,s,e,t[11],22,-1990404162),e=Ni(e,i,r,s,t[12],7,1804603682),s=Ni(s,e,i,r,t[13],12,-40341101),r=Ni(r,s,e,i,t[14],17,-1502002290),e=Pi(e,i=Ni(i,r,s,e,t[15],22,1236535329),r,s,t[1],5,-165796510),s=Pi(s,e,i,r,t[6],9,-1069501632),r=Pi(r,s,e,i,t[11],14,643717713),i=Pi(i,r,s,e,t[0],20,-373897302),e=Pi(e,i,r,s,t[5],5,-701558691),s=Pi(s,e,i,r,t[10],9,38016083),r=Pi(r,s,e,i,t[15],14,-660478335),i=Pi(i,r,s,e,t[4],20,-405537848),e=Pi(e,i,r,s,t[9],5,568446438),s=Pi(s,e,i,r,t[14],9,-1019803690),r=Pi(r,s,e,i,t[3],14,-187363961),i=Pi(i,r,s,e,t[8],20,1163531501),e=Pi(e,i,r,s,t[13],5,-1444681467),s=Pi(s,e,i,r,t[2],9,-51403784),r=Pi(r,s,e,i,t[7],14,1735328473),e=ki(e,i=Pi(i,r,s,e,t[12],20,-1926607734),r,s,t[5],4,-378558),s=ki(s,e,i,r,t[8],11,-2022574463),r=ki(r,s,e,i,t[11],16,1839030562),i=ki(i,r,s,e,t[14],23,-35309556),e=ki(e,i,r,s,t[1],4,-1530992060),s=ki(s,e,i,r,t[4],11,1272893353),r=ki(r,s,e,i,t[7],16,-155497632),i=ki(i,r,s,e,t[10],23,-1094730640),e=ki(e,i,r,s,t[13],4,681279174),s=ki(s,e,i,r,t[0],11,-358537222),r=ki(r,s,e,i,t[3],16,-722521979),i=ki(i,r,s,e,t[6],23,76029189),e=ki(e,i,r,s,t[9],4,-640364487),s=ki(s,e,i,r,t[12],11,-421815835),r=ki(r,s,e,i,t[15],16,530742520),e=Fi(e,i=ki(i,r,s,e,t[2],23,-995338651),r,s,t[0],6,-198630844),s=Fi(s,e,i,r,t[7],10,1126891415),r=Fi(r,s,e,i,t[14],15,-1416354905),i=Fi(i,r,s,e,t[5],21,-57434055),e=Fi(e,i,r,s,t[12],6,1700485571),s=Fi(s,e,i,r,t[3],10,-1894986606),r=Fi(r,s,e,i,t[10],15,-1051523),i=Fi(i,r,s,e,t[1],21,-2054922799),e=Fi(e,i,r,s,t[8],6,1873313359),s=Fi(s,e,i,r,t[15],10,-30611744),r=Fi(r,s,e,i,t[6],15,-1560198380),i=Fi(i,r,s,e,t[13],21,1309151649),e=Fi(e,i,r,s,t[4],6,-145523070),s=Fi(s,e,i,r,t[11],10,-1120210379),r=Fi(r,s,e,i,t[2],15,718787259),i=Fi(i,r,s,e,t[9],21,-343485551),n[0]=Io(e,n[0]),n[1]=Io(i,n[1]),n[2]=Io(r,n[2]),n[3]=Io(s,n[3])}function lf(n,t,e,i,r,s){return t=Io(Io(t,n),Io(i,s)),Io(t<<r|t>>>32-r,e)}function Ni(n,t,e,i,r,s,o){return lf(t&e|~t&i,n,t,r,s,o)}function Pi(n,t,e,i,r,s,o){return lf(t&i|e&~i,n,t,r,s,o)}function ki(n,t,e,i,r,s,o){return lf(t^e^i,n,t,r,s,o)}function Fi(n,t,e,i,r,s,o){return lf(e^(t|~i),n,t,r,s,o)}function d5(n){var t,e=n.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=n.length;t+=64)cd(i,WA(n.substring(t-64,t)));n=n.substring(t-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n.length;t++)r[t>>2]|=n.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(cd(i,r),t=0;t<16;t++)r[t]=0;return r[14]=8*e,cd(i,r),i}function WA(n){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return e}fu=ze.atob.bind(ze),np=ze.btoa.bind(ze);var um="0123456789abcdef".split("");function VA(n){for(var t="",e=0;e<4;e++)t+=um[n>>8*e+4&15]+um[n>>8*e&15];return t}function HA(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function ip(n){return d5(n).map(HA).join("")}var $A=function(n){for(var t=0;t<n.length;t++)n[t]=VA(n[t]);return n.join("")}(d5("hello"))!="5d41402abc4b2a76b9719d911017c592";function Io(n,t){if($A){var e=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(e>>16)<<16|65535&e}return n+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function rp(n,t){var e,i,r,s;if(n!==e){for(var o=(r=n,s=1+(256/n.length>>0),new Array(s+1).join(r)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var f=a[l];u=(u+f+o.charCodeAt(l))%256,a[l]=a[u],a[u]=f}e=n,i=a}else a=i;var d=t.length,y=0,m=0,w="";for(l=0;l<d;l++)m=(m+(f=a[y=(y+1)%256]))%256,a[y]=a[m],a[m]=f,o=a[(a[y]+a[m])%256],w+=String.fromCharCode(t.charCodeAt(l)^o);return w}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var cm={print:4,modify:8,copy:16,"annot-forms":32};function tl(n,t,e,i){this.v=1,this.r=2;var r=192;n.forEach(function(a){if(cm.perm!==void 0)throw new Error("Invalid permission: "+a);r+=cm[a]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var s=(t+this.padding).substr(0,32),o=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^r)),this.encryptionKey=ip(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=rp(this.encryptionKey,this.padding)}function el(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var t="",e=n.length,i=0;i<e;i++){var r=n.charCodeAt(i);r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?t+="#"+("0"+r.toString(16)).slice(-2):t+=n[i]}return t}function hm(n){if(Pn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,i,r){if(r=r||!1,typeof e!="string"||typeof i!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var s=Math.random().toString(35);return t[e][s]=[i,!!r],s},this.unsubscribe=function(e){for(var i in t)if(t[i][e])return delete t[i][e],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var s in t[e]){var o=t[e][s];try{o[0].apply(n,i)}catch(a){ze.console&&Bn.error("jsPDF PubSub Error",a.message,a)}o[1]&&r.push(s)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Sh(n){if(!(this instanceof Sh))return new Sh(n);var t="opacity,stroke-opacity".split(",");for(var e in n)n.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=n[e]);this.id="",this.objectNumber=-1}function p5(n,t){this.gState=n,this.matrix=t,this.id="",this.objectNumber=-1}function aa(n,t,e,i,r){if(!(this instanceof aa))return new aa(n,t,e,i,r);this.type=n==="axial"?2:3,this.coords=t,this.colors=e,p5.call(this,i,r)}function al(n,t,e,i,r){if(!(this instanceof al))return new al(n,t,e,i,r);this.boundingBox=n,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,p5.call(this,i,r)}function Me(n){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],r=arguments[2],s=arguments[3],o=[],a=1,l=16,u="S",f=null;Pn(n=n||{})==="object"&&(e=n.orientation,i=n.unit||i,r=n.format||r,s=n.compress||n.compressPdf||s,(f=n.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(t=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),u=n.defaultPathOperation||"S"),o=n.filters||(s===!0?["FlateEncode"]:o),i=i||"mm",e=(""+(e||"P")).toLowerCase();var d=n.putOnlyUsedFonts||!1,y={},m={internal:{},__private__:{}};m.__private__.PubSub=hm;var w="1.3",S=m.__private__.getPdfVersion=function(){return w};m.__private__.setPdfVersion=function(_){w=_};var L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return L};var E=m.__private__.getPageFormat=function(_){return L[_]};r=r||"a4";var I={COMPAT:"compat",ADVANCED:"advanced"},j=I.COMPAT;function G(){this.saveGraphicsState(),J(new xe(qt,0,0,-qt,0,De()*qt).toString()+" cm"),this.setFontSize(this.getFontSize()/qt),u="n",j=I.ADVANCED}function Z(){this.restoreGraphicsState(),u="S",j=I.COMPAT}var at=m.__private__.combineFontStyleAndFontWeight=function(_,P){if(_=="bold"&&P=="normal"||_=="bold"&&P==400||_=="normal"&&P=="italic"||_=="bold"&&P=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return P&&(_=P==400||P==="normal"?_==="italic"?"italic":"normal":P!=700&&P!=="bold"||_!=="normal"?(P==700?"bold":P)+""+_:"bold"),_};m.advancedAPI=function(_){var P=j===I.COMPAT;return P&&G.call(this),typeof _!="function"||(_(this),P&&Z.call(this)),this},m.compatAPI=function(_){var P=j===I.ADVANCED;return P&&Z.call(this),typeof _!="function"||(_(this),P&&G.call(this)),this},m.isAdvancedAPI=function(){return j===I.ADVANCED};var v,B=function(_){if(j!==I.ADVANCED)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},it=m.roundToPrecision=m.__private__.roundToPrecision=function(_,P){var K=t||P;if(isNaN(_)||isNaN(K))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(K).replace(/0+$/,"")};v=m.hpf=m.__private__.hpf=typeof l=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return it(_,l)}:l==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return it(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return it(_,16)};var mt=m.f2=m.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return it(_,2)},q=m.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return it(_,3)},F=m.scale=m.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return j===I.COMPAT?_*qt:j===I.ADVANCED?_:void 0},V=function(_){return j===I.COMPAT?De()-_:j===I.ADVANCED?_:void 0},W=function(_){return F(V(_))};m.__private__.setPrecision=m.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(t=parseInt(_,10))};var et,st="00000000000000000000000000000000",lt=m.__private__.getFileId=function(){return st},ct=m.__private__.setFileId=function(_){return st=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():st.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(vi=new tl(f.userPermissions,f.userPassword,f.ownerPassword,st)),st};m.setFileId=function(_){return ct(_),this},m.getFileId=function(){return lt()};var Et=m.__private__.convertDateToPDFDate=function(_){var P=_.getTimezoneOffset(),K=P<0?"+":"-",tt=Math.floor(Math.abs(P/60)),vt=Math.abs(P%60),Ct=[K,Y(tt),"'",Y(vt),"'"].join("");return["D:",_.getFullYear(),Y(_.getMonth()+1),Y(_.getDate()),Y(_.getHours()),Y(_.getMinutes()),Y(_.getSeconds()),Ct].join("")},ot=m.__private__.convertPDFDateToDate=function(_){var P=parseInt(_.substr(2,4),10),K=parseInt(_.substr(6,2),10)-1,tt=parseInt(_.substr(8,2),10),vt=parseInt(_.substr(10,2),10),Ct=parseInt(_.substr(12,2),10),Dt=parseInt(_.substr(14,2),10);return new Date(P,K,tt,vt,Ct,Dt,0)},Yt=m.__private__.setCreationDate=function(_){var P;if(_===void 0&&(_=new Date),_ instanceof Date)P=Et(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");P=_}return et=P},T=m.__private__.getCreationDate=function(_){var P=et;return _==="jsDate"&&(P=ot(et)),P};m.setCreationDate=function(_){return Yt(_),this},m.getCreationDate=function(_){return T(_)};var H,Y=m.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},nt=m.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},dt=0,wt=[],_t=[],St=0,bt=[],$t=[],Jt=!1,Ht=_t,ye=function(){dt=0,St=0,_t=[],wt=[],bt=[],vr=Hn(),rr=Hn()};m.__private__.setCustomOutputDestination=function(_){Jt=!0,Ht=_};var Nt=function(_){Jt||(Ht=_)};m.__private__.resetCustomOutputDestination=function(){Jt=!1,Ht=_t};var J=m.__private__.out=function(_){return _=_.toString(),St+=_.length+1,Ht.push(_),Ht},Ce=m.__private__.write=function(_){return J(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},Zt=m.__private__.getArrayBuffer=function(_){for(var P=_.length,K=new ArrayBuffer(P),tt=new Uint8Array(K);P--;)tt[P]=_.charCodeAt(P);return K},Wt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Wt};var Kt=n.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(_){return Kt=j===I.ADVANCED?_/qt:_,this};var ee,Gt=m.__private__.getFontSize=m.getFontSize=function(){return j===I.COMPAT?Kt:Kt*qt},le=n.R2L||!1;m.__private__.setR2L=m.setR2L=function(_){return le=_,this},m.__private__.getR2L=m.getR2L=function(){return le};var ie,kt=m.__private__.setZoomMode=function(_){var P=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))ee=_;else if(isNaN(_)){if(P.indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');ee=_}else ee=parseInt(_,10)};m.__private__.getZoomMode=function(){return ee};var ne,me=m.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');ie=_};m.__private__.getPageMode=function(){return ie};var de=m.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');ne=_};m.__private__.getLayoutMode=function(){return ne},m.__private__.setDisplayMode=m.setDisplayMode=function(_,P,K){return kt(_),de(P),me(K),this};var re={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(_){if(Object.keys(re).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return re[_]},m.__private__.getDocumentProperties=function(){return re},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(_){for(var P in re)re.hasOwnProperty(P)&&_[P]&&(re[P]=_[P]);return this},m.__private__.setDocumentProperty=function(_,P){if(Object.keys(re).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return re[_]=P};var _e,qt,Ke,we,on,ke={},Ie={},ln=[],Oe={},fn={},nn={},qn={},Kn=null,An=0,Re=[],Ee=new hm(m),Tn=n.hotfixes||[],dn={},Qn={},On=[],xe=function _(P,K,tt,vt,Ct,Dt){if(!(this instanceof _))return new _(P,K,tt,vt,Ct,Dt);isNaN(P)&&(P=1),isNaN(K)&&(K=0),isNaN(tt)&&(tt=0),isNaN(vt)&&(vt=1),isNaN(Ct)&&(Ct=0),isNaN(Dt)&&(Dt=0),this._matrix=[P,K,tt,vt,Ct,Dt]};Object.defineProperty(xe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(xe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(xe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(xe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(xe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(xe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(xe.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(xe.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(xe.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(xe.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(xe.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(xe.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(xe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(xe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(xe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(xe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),xe.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(v).join(_)},xe.prototype.multiply=function(_){var P=_.sx*this.sx+_.shy*this.shx,K=_.sx*this.shy+_.shy*this.sy,tt=_.shx*this.sx+_.sy*this.shx,vt=_.shx*this.shy+_.sy*this.sy,Ct=_.tx*this.sx+_.ty*this.shx+this.tx,Dt=_.tx*this.shy+_.ty*this.sy+this.ty;return new xe(P,K,tt,vt,Ct,Dt)},xe.prototype.decompose=function(){var _=this.sx,P=this.shy,K=this.shx,tt=this.sy,vt=this.tx,Ct=this.ty,Dt=Math.sqrt(_*_+P*P),ue=(_/=Dt)*K+(P/=Dt)*tt;K-=_*ue,tt-=P*ue;var Se=Math.sqrt(K*K+tt*tt);return ue/=Se,_*(tt/=Se)<P*(K/=Se)&&(_=-_,P=-P,ue=-ue,Dt=-Dt),{scale:new xe(Dt,0,0,Se,0,0),translate:new xe(1,0,0,1,vt,Ct),rotate:new xe(_,P,-P,_,0,0),skew:new xe(1,0,ue,1,0,0)}},xe.prototype.toString=function(_){return this.join(" ")},xe.prototype.inversed=function(){var _=this.sx,P=this.shy,K=this.shx,tt=this.sy,vt=this.tx,Ct=this.ty,Dt=1/(_*tt-P*K),ue=tt*Dt,Se=-P*Dt,Te=-K*Dt,Ue=_*Dt;return new xe(ue,Se,Te,Ue,-ue*vt-Te*Ct,-Se*vt-Ue*Ct)},xe.prototype.applyToPoint=function(_){var P=_.x*this.sx+_.y*this.shx+this.tx,K=_.x*this.shy+_.y*this.sy+this.ty;return new Q(P,K)},xe.prototype.applyToRectangle=function(_){var P=this.applyToPoint(_),K=this.applyToPoint(new Q(_.x+_.w,_.y+_.h));return new pt(P.x,P.y,K.x-P.x,K.y-P.y)},xe.prototype.clone=function(){var _=this.sx,P=this.shy,K=this.shx,tt=this.sy,vt=this.tx,Ct=this.ty;return new xe(_,P,K,tt,vt,Ct)},m.Matrix=xe;var Zn=m.matrixMult=function(_,P){return P.multiply(_)},vn=new xe(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=vn;var xn=function(_,P){if(!fn[_]){var K=(P instanceof aa?"Sh":"P")+(Object.keys(Oe).length+1).toString(10);P.id=K,fn[_]=K,Oe[K]=P,Ee.publish("addPattern",P)}};m.ShadingPattern=aa,m.TilingPattern=al,m.addShadingPattern=function(_,P){return B("addShadingPattern()"),xn(_,P),this},m.beginTilingPattern=function(_){B("beginTilingPattern()"),Ot(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},m.endTilingPattern=function(_,P){B("endTilingPattern()"),P.stream=$t[H].join(`
`),xn(_,P),Ee.publish("endTilingPattern",P),On.pop().restore()};var pn=m.__private__.newObject=function(){var _=Hn();return zi(_,!0),_},Hn=m.__private__.newObjectDeferred=function(){return dt++,wt[dt]=function(){return St},dt},zi=function(_,P){return P=typeof P=="boolean"&&P,wt[_]=St,P&&J(_+" 0 obj"),_},Xs=m.__private__.newAdditionalObject=function(){var _={objId:Hn(),content:""};return bt.push(_),_},vr=Hn(),rr=Hn(),sr=m.__private__.decodeColorString=function(_){var P=_.split(" ");if(P.length!==2||P[1]!=="g"&&P[1]!=="G")P.length===5&&(P[4]==="k"||P[4]==="K")&&(P=[(1-P[0])*(1-P[3]),(1-P[1])*(1-P[3]),(1-P[2])*(1-P[3]),"r"]);else{var K=parseFloat(P[0]);P=[K,K,K,"r"]}for(var tt="#",vt=0;vt<3;vt++)tt+=("0"+Math.floor(255*parseFloat(P[vt])).toString(16)).slice(-2);return tt},$i=m.__private__.encodeColorString=function(_){var P;typeof _=="string"&&(_={ch1:_});var K=_.ch1,tt=_.ch2,vt=_.ch3,Ct=_.ch4,Dt=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof K=="string"&&K.charAt(0)!=="#"){var ue=new f5(K);if(ue.ok)K=ue.toHex();else if(!/^\d*\.?\d*$/.test(K))throw new Error('Invalid color "'+K+'" passed to jsPDF.encodeColorString.')}if(typeof K=="string"&&/^#[0-9A-Fa-f]{3}$/.test(K)&&(K="#"+K[1]+K[1]+K[2]+K[2]+K[3]+K[3]),typeof K=="string"&&/^#[0-9A-Fa-f]{6}$/.test(K)){var Se=parseInt(K.substr(1),16);K=Se>>16&255,tt=Se>>8&255,vt=255&Se}if(tt===void 0||Ct===void 0&&K===tt&&tt===vt)if(typeof K=="string")P=K+" "+Dt[0];else switch(_.precision){case 2:P=mt(K/255)+" "+Dt[0];break;case 3:default:P=q(K/255)+" "+Dt[0]}else if(Ct===void 0||Pn(Ct)==="object"){if(Ct&&!isNaN(Ct.a)&&Ct.a===0)return P=["1.","1.","1.",Dt[1]].join(" ");if(typeof K=="string")P=[K,tt,vt,Dt[1]].join(" ");else switch(_.precision){case 2:P=[mt(K/255),mt(tt/255),mt(vt/255),Dt[1]].join(" ");break;default:case 3:P=[q(K/255),q(tt/255),q(vt/255),Dt[1]].join(" ")}}else if(typeof K=="string")P=[K,tt,vt,Ct,Dt[2]].join(" ");else switch(_.precision){case 2:P=[mt(K),mt(tt),mt(vt),mt(Ct),Dt[2]].join(" ");break;case 3:default:P=[q(K),q(tt),q(vt),q(Ct),Dt[2]].join(" ")}return P},_r=m.__private__.getFilters=function(){return o},gi=m.__private__.putStream=function(_){var P=(_=_||{}).data||"",K=_.filters||_r(),tt=_.alreadyAppliedFilters||[],vt=_.addLength1||!1,Ct=P.length,Dt=_.objectId,ue=function(ui){return ui};if(f!==null&&Dt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(ue=vi.encryptor(Dt,0));var Se={};K===!0&&(K=["FlateEncode"]);var Te=_.additionalKeyValues||[],Ue=(Se=Me.API.processDataByFilters!==void 0?Me.API.processDataByFilters(P,K):{data:P,reverseChain:[]}).reverseChain+(Array.isArray(tt)?tt.join(" "):tt.toString());if(Se.data.length!==0&&(Te.push({key:"Length",value:Se.data.length}),vt===!0&&Te.push({key:"Length1",value:Ct})),Ue.length!=0)if(Ue.split("/").length-1==1)Te.push({key:"Filter",value:Ue});else{Te.push({key:"Filter",value:"["+Ue+"]"});for(var Ge=0;Ge<Te.length;Ge+=1)if(Te[Ge].key==="DecodeParms"){for(var _n=[],Sn=0;Sn<Se.reverseChain.split("/").length-1;Sn+=1)_n.push("null");_n.push(Te[Ge].value),Te[Ge].value="["+_n.join(" ")+"]"}}J("<<");for(var mn=0;mn<Te.length;mn++)J("/"+Te[mn].key+" "+Te[mn].value);J(">>"),Se.data.length!==0&&(J("stream"),J(ue(Se.data)),J("endstream"))},or=m.__private__.putPage=function(_){var P=_.number,K=_.data,tt=_.objId,vt=_.contentsObjId;zi(tt,!0),J("<</Type /Page"),J("/Parent "+_.rootDictionaryObjId+" 0 R"),J("/Resources "+_.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(v(_.mediaBox.bottomLeftX))+" "+parseFloat(v(_.mediaBox.bottomLeftY))+" "+v(_.mediaBox.topRightX)+" "+v(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&J("/CropBox ["+v(_.cropBox.bottomLeftX)+" "+v(_.cropBox.bottomLeftY)+" "+v(_.cropBox.topRightX)+" "+v(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&J("/BleedBox ["+v(_.bleedBox.bottomLeftX)+" "+v(_.bleedBox.bottomLeftY)+" "+v(_.bleedBox.topRightX)+" "+v(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&J("/TrimBox ["+v(_.trimBox.bottomLeftX)+" "+v(_.trimBox.bottomLeftY)+" "+v(_.trimBox.topRightX)+" "+v(_.trimBox.topRightY)+"]"),_.artBox!==null&&J("/ArtBox ["+v(_.artBox.bottomLeftX)+" "+v(_.artBox.bottomLeftY)+" "+v(_.artBox.topRightX)+" "+v(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&J("/UserUnit "+_.userUnit),Ee.publish("putPage",{objId:tt,pageContext:Re[P],pageNumber:P,page:K}),J("/Contents "+vt+" 0 R"),J(">>"),J("endobj");var Ct=K.join(`
`);return j===I.ADVANCED&&(Ct+=`
Q`),zi(vt,!0),gi({data:Ct,filters:_r(),objectId:vt}),J("endobj"),tt},Pr=m.__private__.putPages=function(){var _,P,K=[];for(_=1;_<=An;_++)Re[_].objId=Hn(),Re[_].contentsObjId=Hn();for(_=1;_<=An;_++)K.push(or({number:_,data:$t[_],objId:Re[_].objId,contentsObjId:Re[_].contentsObjId,mediaBox:Re[_].mediaBox,cropBox:Re[_].cropBox,bleedBox:Re[_].bleedBox,trimBox:Re[_].trimBox,artBox:Re[_].artBox,userUnit:Re[_].userUnit,rootDictionaryObjId:vr,resourceDictionaryObjId:rr}));zi(vr,!0),J("<</Type /Pages");var tt="/Kids [";for(P=0;P<An;P++)tt+=K[P]+" 0 R ";J(tt+"]"),J("/Count "+An),J(">>"),J("endobj"),Ee.publish("postPutPages")},Kr=function(_){Ee.publish("putFont",{font:_,out:J,newObject:pn,putStream:gi}),_.isAlreadyPutted!==!0&&(_.objectNumber=pn(),J("<<"),J("/Type /Font"),J("/BaseFont /"+el(_.postScriptName)),J("/Subtype /Type1"),typeof _.encoding=="string"&&J("/Encoding /"+_.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},kr=function(){for(var _ in ke)ke.hasOwnProperty(_)&&(d===!1||d===!0&&y.hasOwnProperty(_))&&Kr(ke[_])},Cs=function(_){_.objectNumber=pn();var P=[];P.push({key:"Type",value:"/XObject"}),P.push({key:"Subtype",value:"/Form"}),P.push({key:"BBox",value:"["+[v(_.x),v(_.y),v(_.x+_.width),v(_.y+_.height)].join(" ")+"]"}),P.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var K=_.pages[1].join(`
`);gi({data:K,additionalKeyValues:P,objectId:_.objectNumber}),J("endobj")},Ys=function(){for(var _ in dn)dn.hasOwnProperty(_)&&Cs(dn[_])},Zr=function(_,P){var K,tt=[],vt=1/(P-1);for(K=0;K<1;K+=vt)tt.push(K);if(tt.push(1),_[0].offset!=0){var Ct={offset:0,color:_[0].color};_.unshift(Ct)}if(_[_.length-1].offset!=1){var Dt={offset:1,color:_[_.length-1].color};_.push(Dt)}for(var ue="",Se=0,Te=0;Te<tt.length;Te++){for(K=tt[Te];K>_[Se+1].offset;)Se++;var Ue=_[Se].offset,Ge=(K-Ue)/(_[Se+1].offset-Ue),_n=_[Se].color,Sn=_[Se+1].color;ue+=nt(Math.round((1-Ge)*_n[0]+Ge*Sn[0]).toString(16))+nt(Math.round((1-Ge)*_n[1]+Ge*Sn[1]).toString(16))+nt(Math.round((1-Ge)*_n[2]+Ge*Sn[2]).toString(16))}return ue.trim()},wa=function(_,P){P||(P=21);var K=pn(),tt=Zr(_.colors,P),vt=[];vt.push({key:"FunctionType",value:"0"}),vt.push({key:"Domain",value:"[0.0 1.0]"}),vt.push({key:"Size",value:"["+P+"]"}),vt.push({key:"BitsPerSample",value:"8"}),vt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),vt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gi({data:tt,additionalKeyValues:vt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:K}),J("endobj"),_.objectNumber=pn(),J("<< /ShadingType "+_.type),J("/ColorSpace /DeviceRGB");var Ct="/Coords ["+v(parseFloat(_.coords[0]))+" "+v(parseFloat(_.coords[1]))+" ";_.type===2?Ct+=v(parseFloat(_.coords[2]))+" "+v(parseFloat(_.coords[3])):Ct+=v(parseFloat(_.coords[2]))+" "+v(parseFloat(_.coords[3]))+" "+v(parseFloat(_.coords[4]))+" "+v(parseFloat(_.coords[5])),J(Ct+="]"),_.matrix&&J("/Matrix ["+_.matrix.toString()+"]"),J("/Function "+K+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},xa=function(_,P){var K=Hn(),tt=pn();P.push({resourcesOid:K,objectOid:tt}),_.objectNumber=tt;var vt=[];vt.push({key:"Type",value:"/Pattern"}),vt.push({key:"PatternType",value:"1"}),vt.push({key:"PaintType",value:"1"}),vt.push({key:"TilingType",value:"1"}),vt.push({key:"BBox",value:"["+_.boundingBox.map(v).join(" ")+"]"}),vt.push({key:"XStep",value:v(_.xStep)}),vt.push({key:"YStep",value:v(_.yStep)}),vt.push({key:"Resources",value:K+" 0 R"}),_.matrix&&vt.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),gi({data:_.stream,additionalKeyValues:vt,objectId:_.objectNumber}),J("endobj")},Es=function(_){var P;for(P in Oe)Oe.hasOwnProperty(P)&&(Oe[P]instanceof aa?wa(Oe[P]):Oe[P]instanceof al&&xa(Oe[P],_))},Go=function(_){for(var P in _.objectNumber=pn(),J("<<"),_)switch(P){case"opacity":J("/ca "+mt(_[P]));break;case"stroke-opacity":J("/CA "+mt(_[P]))}J(">>"),J("endobj")},Ol=function(){var _;for(_ in nn)nn.hasOwnProperty(_)&&Go(nn[_])},As=function(){for(var _ in J("/XObject <<"),dn)dn.hasOwnProperty(_)&&dn[_].objectNumber>=0&&J("/"+_+" "+dn[_].objectNumber+" 0 R");Ee.publish("putXobjectDict"),J(">>")},Dl=function(){vi.oid=pn(),J("<<"),J("/Filter /Standard"),J("/V "+vi.v),J("/R "+vi.r),J("/U <"+vi.toHexString(vi.U)+">"),J("/O <"+vi.toHexString(vi.O)+">"),J("/P "+vi.P),J(">>"),J("endobj")},Sa=function(){for(var _ in J("/Font <<"),ke)ke.hasOwnProperty(_)&&(d===!1||d===!0&&y.hasOwnProperty(_))&&J("/"+_+" "+ke[_].objectNumber+" 0 R");J(">>")},Ca=function(){if(Object.keys(Oe).length>0){for(var _ in J("/Shading <<"),Oe)Oe.hasOwnProperty(_)&&Oe[_]instanceof aa&&Oe[_].objectNumber>=0&&J("/"+_+" "+Oe[_].objectNumber+" 0 R");Ee.publish("putShadingPatternDict"),J(">>")}},Ls=function(_){if(Object.keys(Oe).length>0){for(var P in J("/Pattern <<"),Oe)Oe.hasOwnProperty(P)&&Oe[P]instanceof m.TilingPattern&&Oe[P].objectNumber>=0&&Oe[P].objectNumber<_&&J("/"+P+" "+Oe[P].objectNumber+" 0 R");Ee.publish("putTilingPatternDict"),J(">>")}},Wo=function(){if(Object.keys(nn).length>0){var _;for(_ in J("/ExtGState <<"),nn)nn.hasOwnProperty(_)&&nn[_].objectNumber>=0&&J("/"+_+" "+nn[_].objectNumber+" 0 R");Ee.publish("putGStateDict"),J(">>")}},$n=function(_){zi(_.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Sa(),Ca(),Ls(_.objectOid),Wo(),As(),J(">>"),J("endobj")},mi=function(){var _=[];kr(),Ol(),Ys(),Es(_),Ee.publish("putResources"),_.forEach($n),$n({resourcesOid:rr,objectOid:Number.MAX_SAFE_INTEGER}),Ee.publish("postPutResources")},Fr=function(){Ee.publish("putAdditionalObjects");for(var _=0;_<bt.length;_++){var P=bt[_];zi(P.objId,!0),J(P.content),J("endobj")}Ee.publish("postPutAdditionalObjects")},Ts=function(_){Ie[_.fontName]=Ie[_.fontName]||{},Ie[_.fontName][_.fontStyle]=_.id},Vo=function(_,P,K,tt,vt){var Ct={id:"F"+(Object.keys(ke).length+1).toString(10),postScriptName:_,fontName:P,fontStyle:K,encoding:tt,isStandardFont:vt||!1,metadata:{}};return Ee.publish("addFont",{font:Ct,instance:this}),ke[Ct.id]=Ct,Ts(Ct),Ct.id},jl=function(_){for(var P=0,K=Wt.length;P<K;P++){var tt=Vo.call(this,_[P][0],_[P][1],_[P][2],Wt[P][3],!0);d===!1&&(y[tt]=!0);var vt=_[P][0].split("-");Ts({id:tt,fontName:vt[0],fontStyle:vt[1]||""})}Ee.publish("addFonts",{fonts:ke,dictionary:Ie})},Bi=function(_){return _.foo=function(){try{return _.apply(this,arguments)}catch(tt){var P=tt.stack||"";~P.indexOf(" at ")&&(P=P.split(" at ")[1]);var K="Error in function "+P.split(`
`)[0].split("<")[0]+": "+tt.message;if(!ze.console)throw new Error(K);ze.console.error(K,tt),ze.alert&&alert(K)}},_.foo.bar=_,_.foo},Is=function(_,P){var K,tt,vt,Ct,Dt,ue,Se,Te,Ue;if(vt=(P=P||{}).sourceEncoding||"Unicode",Dt=P.outputEncoding,(P.autoencode||Dt)&&ke[_e].metadata&&ke[_e].metadata[vt]&&ke[_e].metadata[vt].encoding&&(Ct=ke[_e].metadata[vt].encoding,!Dt&&ke[_e].encoding&&(Dt=ke[_e].encoding),!Dt&&Ct.codePages&&(Dt=Ct.codePages[0]),typeof Dt=="string"&&(Dt=Ct[Dt]),Dt)){for(Se=!1,ue=[],K=0,tt=_.length;K<tt;K++)(Te=Dt[_.charCodeAt(K)])?ue.push(String.fromCharCode(Te)):ue.push(_[K]),ue[K].charCodeAt(0)>>8&&(Se=!0);_=ue.join("")}for(K=_.length;Se===void 0&&K!==0;)_.charCodeAt(K-1)>>8&&(Se=!0),K--;if(!Se)return _;for(ue=P.noBOM?[]:[254,255],K=0,tt=_.length;K<tt;K++){if((Ue=(Te=_.charCodeAt(K))>>8)>>8)throw new Error("Character at position "+K+" of string '"+_+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ue.push(Ue),ue.push(Te-(Ue<<8))}return String.fromCharCode.apply(void 0,ue)},yi=m.__private__.pdfEscape=m.pdfEscape=function(_,P){return Is(_,P).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ks=m.__private__.beginPage=function(_){$t[++An]=[],Re[An]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},Ii(An),Nt($t[H])},Ea=function(_,P){var K,tt,vt;switch(e=P||e,typeof _=="string"&&(K=E(_.toLowerCase()),Array.isArray(K)&&(tt=K[0],vt=K[1])),Array.isArray(_)&&(tt=_[0]*qt,vt=_[1]*qt),isNaN(tt)&&(tt=r[0],vt=r[1]),(tt>14400||vt>14400)&&(Bn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),tt=Math.min(14400,tt),vt=Math.min(14400,vt)),r=[tt,vt],e.substr(0,1)){case"l":vt>tt&&(r=[vt,tt]);break;case"p":tt>vt&&(r=[vt,tt])}Ks(r),Na(to),J(ar),N!==0&&J(N+" J"),O!==0&&J(O+" j"),Ee.publish("addPage",{pageNumber:An})},zl=function(_){_>0&&_<=An&&($t.splice(_,1),Re.splice(_,1),An--,H>An&&(H=An),this.setPage(H))},Ii=function(_){_>0&&_<=An&&(H=_)},Aa=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return $t.length-1},Jr=function(_,P,K){var tt,vt=void 0;return K=K||{},_=_!==void 0?_:ke[_e].fontName,P=P!==void 0?P:ke[_e].fontStyle,tt=_.toLowerCase(),Ie[tt]!==void 0&&Ie[tt][P]!==void 0?vt=Ie[tt][P]:Ie[_]!==void 0&&Ie[_][P]!==void 0?vt=Ie[_][P]:K.disableWarning===!1&&Bn.warn("Unable to look up font label for font '"+_+"', '"+P+"'. Refer to getFontList() for available fonts."),vt||K.noFallback||(vt=Ie.times[P])==null&&(vt=Ie.times.normal),vt},Bl=m.__private__.putInfo=function(){var _=pn(),P=function(tt){return tt};for(var K in f!==null&&(P=vi.encryptor(_,0)),J("<<"),J("/Producer ("+yi(P("jsPDF "+Me.version))+")"),re)re.hasOwnProperty(K)&&re[K]&&J("/"+K.substr(0,1).toUpperCase()+K.substr(1)+" ("+yi(P(re[K]))+")");J("/CreationDate ("+yi(P(et))+")"),J(">>"),J("endobj")},Ho=m.__private__.putCatalog=function(_){var P=(_=_||{}).rootDictionaryObjId||vr;switch(pn(),J("<<"),J("/Type /Catalog"),J("/Pages "+P+" 0 R"),ee||(ee="fullwidth"),ee){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var K=""+ee;K.substr(K.length-1)==="%"&&(ee=parseInt(ee)/100),typeof ee=="number"&&J("/OpenAction [3 0 R /XYZ null null "+mt(ee)+"]")}switch(ne||(ne="continuous"),ne){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}ie&&J("/PageMode /"+ie),Ee.publish("putCatalog"),J(">>"),J("endobj")},Mr=m.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(dt+1)),J("/Root "+dt+" 0 R"),J("/Info "+(dt-1)+" 0 R"),f!==null&&J("/Encrypt "+vi.oid+" 0 R"),J("/ID [ <"+st+"> <"+st+"> ]"),J(">>")},Or=m.__private__.putHeader=function(){J("%PDF-"+w),J("%\xBA\xDF\xAC\xE0")},$o=m.__private__.putXRef=function(){var _="0000000000";J("xref"),J("0 "+(dt+1)),J("0000000000 65535 f ");for(var P=1;P<=dt;P++)typeof wt[P]=="function"?J((_+wt[P]()).slice(-10)+" 00000 n "):wt[P]!==void 0?J((_+wt[P]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},Dr=m.__private__.buildDocument=function(){ye(),Nt(_t),Ee.publish("buildDocument"),Or(),Pr(),Fr(),mi(),f!==null&&Dl(),Bl(),Ho();var _=St;return $o(),Mr(),J("startxref"),J(""+_),J("%%EOF"),Nt($t[H]),_t.join(`
`)},br=m.__private__.getBlob=function(_){return new Blob([Zt(_)],{type:"application/pdf"})},Rs=m.output=m.__private__.output=Bi(function(_,P){switch(typeof(P=P||{})=="string"?P={filename:P}:P.filename=P.filename||"generated.pdf",_){case void 0:return Dr();case"save":m.save(P.filename);break;case"arraybuffer":return Zt(Dr());case"blob":return br(Dr());case"bloburi":case"bloburl":if(ze.URL!==void 0&&typeof ze.URL.createObjectURL=="function")return ze.URL&&ze.URL.createObjectURL(br(Dr()))||void 0;Bn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var K="",tt=Dr();try{K=np(tt)}catch{K=np(unescape(encodeURIComponent(tt)))}return"data:application/pdf;filename="+P.filename+";base64,"+K;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ze)==="[object Window]"){var vt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ct=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';P.pdfObjectUrl&&(vt=P.pdfObjectUrl,Ct="");var Dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+vt+'"'+Ct+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(P)+");<\/script></body></html>",ue=ze.open();return ue!==null&&ue.document.write(Dt),ue}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ze)==="[object Window]"){var Se='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(P.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+P.filename+'" width="500px" height="400px" /></body></html>',Te=ze.open();if(Te!==null){Te.document.write(Se);var Ue=this;Te.document.documentElement.querySelector("#pdfViewer").onload=function(){Te.document.title=P.filename,Te.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ue.output("bloburl"))}}return Te}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ze)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ge='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",P)+'"></iframe></body></html>',_n=ze.open();if(_n!==null&&(_n.document.write(Ge),_n.document.title=P.filename),_n||typeof safari>"u")return _n;break;case"datauri":case"dataurl":return ze.document.location.href=this.output("datauristring",P);default:return null}}),Zs=function(_){return Array.isArray(Tn)===!0&&Tn.indexOf(_)>-1};switch(i){case"pt":qt=1;break;case"mm":qt=72/25.4;break;case"cm":qt=72/2.54;break;case"in":qt=72;break;case"px":qt=Zs("px_scaling")==1?.75:96/72;break;case"pc":case"em":qt=12;break;case"ex":qt=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);qt=i}var vi=null;Yt(),ct();var La=function(_){return f!==null?vi.encryptor(_,0):function(P){return P}},Ta=m.__private__.getPageInfo=m.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Re[_].objId,pageNumber:_,pageContext:Re[_]}},Be=m.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var P in Re)if(Re[P].objId===_)break;return Ta(P)},ql=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Re[H].objId,pageNumber:H,pageContext:Re[H]}};m.addPage=function(){return Ea.apply(this,arguments),this},m.setPage=function(){return Ii.apply(this,arguments),Nt.call(this,$t[H]),this},m.insertPage=function(_){return this.addPage(),this.movePage(H,_),this},m.movePage=function(_,P){var K,tt;if(_>P){K=$t[_],tt=Re[_];for(var vt=_;vt>P;vt--)$t[vt]=$t[vt-1],Re[vt]=Re[vt-1];$t[P]=K,Re[P]=tt,this.setPage(P)}else if(_<P){K=$t[_],tt=Re[_];for(var Ct=_;Ct<P;Ct++)$t[Ct]=$t[Ct+1],Re[Ct]=Re[Ct+1];$t[P]=K,Re[P]=tt,this.setPage(P)}return this},m.deletePage=function(){return zl.apply(this,arguments),this},m.__private__.text=m.text=function(_,P,K,tt,vt){var Ct,Dt,ue,Se,Te,Ue,Ge,_n,Sn,mn=(tt=tt||{}).scope||this;if(typeof _=="number"&&typeof P=="number"&&(typeof K=="string"||Array.isArray(K))){var ui=K;K=P,P=_,_=ui}if(arguments[3]instanceof xe?(B("The transform parameter of text() with a Matrix value"),Sn=vt):(ue=arguments[4],Se=arguments[5],Pn(Ge=arguments[3])==="object"&&Ge!==null||(typeof ue=="string"&&(Se=ue,ue=null),typeof Ge=="string"&&(Se=Ge,Ge=null),typeof Ge=="number"&&(ue=Ge,Ge=null),tt={flags:Ge,angle:ue,align:Se})),isNaN(P)||isNaN(K)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return mn;var kn="",ri=!1,qi=typeof tt.lineHeightFactor=="number"?tt.lineHeightFactor:Qr,Br=mn.internal.scaleFactor;function Fa(en){return en=en.split("	").join(Array(tt.TabLen||9).join(" ")),yi(en,Ge)}function un(en){for(var rn,Fn=en.concat(),cn=[],Ns=Fn.length;Ns--;)typeof(rn=Fn.shift())=="string"?cn.push(rn):Array.isArray(en)&&(rn.length===1||rn[1]===void 0&&rn[2]===void 0)?cn.push(rn[0]):cn.push([rn[0],rn[1],rn[2]]);return cn}function is(en,rn){var Fn;if(typeof en=="string")Fn=rn(en)[0];else if(Array.isArray(en)){for(var cn,Ns,so=en.concat(),Ma=[],Yu=so.length;Yu--;)typeof(cn=so.shift())=="string"?Ma.push(rn(cn)[0]):Array.isArray(cn)&&typeof cn[0]=="string"&&(Ns=rn(cn[0],cn[1],cn[2]),Ma.push([Ns[0],Ns[1],Ns[2]]));Fn=Ma}return Fn}var wi=!1,Sr=!0;if(typeof _=="string")wi=!0;else if(Array.isArray(_)){var Ko=_.concat();Dt=[];for(var eo,Ai=Ko.length;Ai--;)(typeof(eo=Ko.shift())!="string"||Array.isArray(eo)&&typeof eo[0]!="string")&&(Sr=!1);wi=Sr}if(wi===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var Yi=Kt/mn.internal.scaleFactor,rs=Yi*(qi-1);switch(tt.baseline){case"bottom":K-=rs;break;case"top":K+=Yi-rs;break;case"hanging":K+=Yi-2*rs;break;case"middle":K+=Yi/2-rs}if((Ue=tt.maxWidth||0)>0&&(typeof _=="string"?_=mn.splitTextToSize(_,Ue):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(en,rn){return en.concat(mn.splitTextToSize(rn,Ue))},[]))),Ct={text:_,x:P,y:K,options:tt,mutex:{pdfEscape:yi,activeFontKey:_e,fonts:ke,activeFontSize:Kt}},Ee.publish("preProcessText",Ct),_=Ct.text,ue=(tt=Ct.options).angle,!(Sn instanceof xe)&&ue&&typeof ue=="number"){ue*=Math.PI/180,tt.rotationDirection===0&&(ue=-ue),j===I.ADVANCED&&(ue=-ue);var Ui=Math.cos(ue),no=Math.sin(ue);Sn=new xe(Ui,no,-no,Ui,0,0)}else ue&&ue instanceof xe&&(Sn=ue);j!==I.ADVANCED||Sn||(Sn=vn),(Te=tt.charSpace||C)!==void 0&&(kn+=v(F(Te))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(_n=tt.horizontalScale)!==void 0&&(kn+=v(100*_n)+` Tz
`),tt.lang;var ci=-1,io=tt.renderingMode!==void 0?tt.renderingMode:tt.stroke,ss=mn.internal.getCurrentPageInfo().pageContext;switch(io){case 0:case!1:case"fill":ci=0;break;case 1:case!0:case"stroke":ci=1;break;case 2:case"fillThenStroke":ci=2;break;case 3:case"invisible":ci=3;break;case 4:case"fillAndAddForClipping":ci=4;break;case 5:case"strokeAndAddPathForClipping":ci=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ci=6;break;case 7:case"addToPathForClipping":ci=7}var ro=ss.usedRenderingMode!==void 0?ss.usedRenderingMode:-1;ci!==-1?kn+=ci+` Tr
`:ro!==-1&&(kn+=`0 Tr
`),ci!==-1&&(ss.usedRenderingMode=ci),Se=tt.align||"left";var lr,os=Kt*qi,Zo=mn.internal.pageSize.getWidth(),Jo=ke[_e];Te=tt.charSpace||C,Ue=tt.maxWidth||0,Ge=Object.assign({autoencode:!0,noBOM:!0},tt.flags);var as=[];if(Object.prototype.toString.call(_)==="[object Array]"){var Ri;Dt=un(_),Se!=="left"&&(lr=Dt.map(function(en){return mn.getStringUnitWidth(en,{font:Jo,charSpace:Te,fontSize:Kt,doKerning:!1})*Kt/Br}));var Ki,$=0;if(Se==="right"){P-=lr[0],_=[],Ai=Dt.length;for(var ut=0;ut<Ai;ut++)ut===0?(Ki=wr(P),Ri=xr(K)):(Ki=F($-lr[ut]),Ri=-os),_.push([Dt[ut],Ki,Ri]),$=lr[ut]}else if(Se==="center"){P-=lr[0]/2,_=[],Ai=Dt.length;for(var xt=0;xt<Ai;xt++)xt===0?(Ki=wr(P),Ri=xr(K)):(Ki=F(($-lr[xt])/2),Ri=-os),_.push([Dt[xt],Ki,Ri]),$=lr[xt]}else if(Se==="left"){_=[],Ai=Dt.length;for(var It=0;It<Ai;It++)_.push(Dt[It])}else{if(Se!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');_=[],Ai=Dt.length,Ue=Ue!==0?Ue:Zo;for(var Ft=0;Ft<Ai;Ft++)Ri=Ft===0?xr(K):-os,Ki=Ft===0?wr(P):0,Ft<Ai-1?as.push(v(F((Ue-lr[Ft])/(Dt[Ft].split(" ").length-1)))):as.push(0),_.push([Dt[Ft],Ki,Ri])}}var Qt=typeof tt.R2L=="boolean"?tt.R2L:le;Qt===!0&&(_=is(_,function(en,rn,Fn){return[en.split("").reverse().join(""),rn,Fn]})),Ct={text:_,x:P,y:K,options:tt,mutex:{pdfEscape:yi,activeFontKey:_e,fonts:ke,activeFontSize:Kt}},Ee.publish("postProcessText",Ct),_=Ct.text,ri=Ct.mutex.isHex||!1;var ce=ke[_e].encoding;ce!=="WinAnsiEncoding"&&ce!=="StandardEncoding"||(_=is(_,function(en,rn,Fn){return[Fa(en),rn,Fn]})),Dt=un(_),_=[];for(var ge,oe,qe,Ae=0,Ne=1,We=Array.isArray(Dt[0])?Ne:Ae,be="",bn=function(en,rn,Fn){var cn="";return Fn instanceof xe?(Fn=typeof tt.angle=="number"?Zn(Fn,new xe(1,0,0,1,en,rn)):Zn(new xe(1,0,0,1,en,rn),Fn),j===I.ADVANCED&&(Fn=Zn(new xe(1,0,0,-1,0,0),Fn)),cn=Fn.join(" ")+` Tm
`):cn=v(en)+" "+v(rn)+` Td
`,cn},Dn=0;Dn<Dt.length;Dn++){switch(be="",We){case Ne:qe=(ri?"<":"(")+Dt[Dn][0]+(ri?">":")"),ge=parseFloat(Dt[Dn][1]),oe=parseFloat(Dt[Dn][2]);break;case Ae:qe=(ri?"<":"(")+Dt[Dn]+(ri?">":")"),ge=wr(P),oe=xr(K)}as!==void 0&&as[Dn]!==void 0&&(be=as[Dn]+` Tw
`),Dn===0?_.push(be+bn(ge,oe,Sn)+qe):We===Ae?_.push(be+qe):We===Ne&&_.push(be+bn(ge,oe,Sn)+qe)}_=We===Ae?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var Un=`BT
/`;return Un+=_e+" "+Kt+` Tf
`,Un+=v(Kt*qi)+` TL
`,Un+=g+`
`,Un+=kn,Un+=_,J(Un+="ET"),y[_e]=!0,mn};var Ul=m.__private__.clip=m.clip=function(_){return J(_==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Ul("evenodd")},m.__private__.discardPath=m.discardPath=function(){return J("n"),this};var Xi=m.__private__.isValidStyle=function(_){var P=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&(P=!0),P};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(_){return Xi(_)&&(u=_),this};var Ia=m.__private__.getStyle=m.getStyle=function(_){var P=u;switch(_){case"D":case"S":P="S";break;case"F":P="f";break;case"FD":case"DF":P="B";break;case"f":case"f*":case"B":case"B*":P=_}return P},Ra=m.close=function(){return J("h"),this};m.stroke=function(){return J("S"),this},m.fill=function(_){return Js("f",_),this},m.fillEvenOdd=function(_){return Js("f*",_),this},m.fillStroke=function(_){return Js("B",_),this},m.fillStrokeEvenOdd=function(_){return Js("B*",_),this};var Js=function(_,P){Pn(P)==="object"?Wl(P,_):J(_)},Xo=function(_){_===null||j===I.ADVANCED&&_===void 0||(_=Ia(_),J(_))};function Gl(_,P,K,tt,vt){var Ct=new al(P||this.boundingBox,K||this.xStep,tt||this.yStep,this.gState,vt||this.matrix);Ct.stream=this.stream;var Dt=_+"$$"+this.cloneIndex+++"$$";return xn(Dt,Ct),Ct}var Wl=function(_,P){var K=fn[_.key],tt=Oe[K];if(tt instanceof aa)J("q"),J(Vl(P)),tt.gState&&m.setGState(tt.gState),J(_.matrix.toString()+" cm"),J("/"+K+" sh"),J("Q");else if(tt instanceof al){var vt=new xe(1,0,0,-1,0,De());_.matrix&&(vt=vt.multiply(_.matrix||vn),K=Gl.call(tt,_.key,_.boundingBox,_.xStep,_.yStep,vt).id),J("q"),J("/Pattern cs"),J("/"+K+" scn"),tt.gState&&m.setGState(tt.gState),J(P),J("Q")}},Vl=function(_){switch(_){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Qs=m.moveTo=function(_,P){return J(v(F(_))+" "+v(W(P))+" m"),this},jr=m.lineTo=function(_,P){return J(v(F(_))+" "+v(W(P))+" l"),this},zr=m.curveTo=function(_,P,K,tt,vt,Ct){return J([v(F(_)),v(W(P)),v(F(K)),v(W(tt)),v(F(vt)),v(W(Ct)),"c"].join(" ")),this};m.__private__.line=m.line=function(_,P,K,tt,vt){if(isNaN(_)||isNaN(P)||isNaN(K)||isNaN(tt)||!Xi(vt))throw new Error("Invalid arguments passed to jsPDF.line");return j===I.COMPAT?this.lines([[K-_,tt-P]],_,P,[1,1],vt||"S"):this.lines([[K-_,tt-P]],_,P,[1,1]).stroke()},m.__private__.lines=m.lines=function(_,P,K,tt,vt,Ct){var Dt,ue,Se,Te,Ue,Ge,_n,Sn,mn,ui,kn,ri;if(typeof _=="number"&&(ri=K,K=P,P=_,_=ri),tt=tt||[1,1],Ct=Ct||!1,isNaN(P)||isNaN(K)||!Array.isArray(_)||!Array.isArray(tt)||!Xi(vt)||typeof Ct!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Qs(P,K),Dt=tt[0],ue=tt[1],Te=_.length,ui=P,kn=K,Se=0;Se<Te;Se++)(Ue=_[Se]).length===2?(ui=Ue[0]*Dt+ui,kn=Ue[1]*ue+kn,jr(ui,kn)):(Ge=Ue[0]*Dt+ui,_n=Ue[1]*ue+kn,Sn=Ue[2]*Dt+ui,mn=Ue[3]*ue+kn,ui=Ue[4]*Dt+ui,kn=Ue[5]*ue+kn,zr(Ge,_n,Sn,mn,ui,kn));return Ct&&Ra(),Xo(vt),this},m.path=function(_){for(var P=0;P<_.length;P++){var K=_[P],tt=K.c;switch(K.op){case"m":Qs(tt[0],tt[1]);break;case"l":jr(tt[0],tt[1]);break;case"c":zr.apply(this,tt);break;case"h":Ra()}}return this},m.__private__.rect=m.rect=function(_,P,K,tt,vt){if(isNaN(_)||isNaN(P)||isNaN(K)||isNaN(tt)||!Xi(vt))throw new Error("Invalid arguments passed to jsPDF.rect");return j===I.COMPAT&&(tt=-tt),J([v(F(_)),v(W(P)),v(F(K)),v(F(tt)),"re"].join(" ")),Xo(vt),this},m.__private__.triangle=m.triangle=function(_,P,K,tt,vt,Ct,Dt){if(isNaN(_)||isNaN(P)||isNaN(K)||isNaN(tt)||isNaN(vt)||isNaN(Ct)||!Xi(Dt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[K-_,tt-P],[vt-K,Ct-tt],[_-vt,P-Ct]],_,P,[1,1],Dt,!0),this},m.__private__.roundedRect=m.roundedRect=function(_,P,K,tt,vt,Ct,Dt){if(isNaN(_)||isNaN(P)||isNaN(K)||isNaN(tt)||isNaN(vt)||isNaN(Ct)||!Xi(Dt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ue=4/3*(Math.SQRT2-1);return vt=Math.min(vt,.5*K),Ct=Math.min(Ct,.5*tt),this.lines([[K-2*vt,0],[vt*ue,0,vt,Ct-Ct*ue,vt,Ct],[0,tt-2*Ct],[0,Ct*ue,-vt*ue,Ct,-vt,Ct],[2*vt-K,0],[-vt*ue,0,-vt,-Ct*ue,-vt,-Ct],[0,2*Ct-tt],[0,-Ct*ue,vt*ue,-Ct,vt,-Ct]],_+vt,P,[1,1],Dt,!0),this},m.__private__.ellipse=m.ellipse=function(_,P,K,tt,vt){if(isNaN(_)||isNaN(P)||isNaN(K)||isNaN(tt)||!Xi(vt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ct=4/3*(Math.SQRT2-1)*K,Dt=4/3*(Math.SQRT2-1)*tt;return Qs(_+K,P),zr(_+K,P-Dt,_+Ct,P-tt,_,P-tt),zr(_-Ct,P-tt,_-K,P-Dt,_-K,P),zr(_-K,P+Dt,_-Ct,P+tt,_,P+tt),zr(_+Ct,P+tt,_+K,P+Dt,_+K,P),Xo(vt),this},m.__private__.circle=m.circle=function(_,P,K,tt){if(isNaN(_)||isNaN(P)||isNaN(K)||!Xi(tt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,P,K,K,tt)},m.setFont=function(_,P,K){return K&&(P=at(P,K)),_e=Jr(_,P,{disableWarning:!1}),this};var Yo=m.__private__.getFont=m.getFont=function(){return ke[Jr.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var _,P,K={};for(_ in Ie)if(Ie.hasOwnProperty(_))for(P in K[_]=[],Ie[_])Ie[_].hasOwnProperty(P)&&K[_].push(P);return K},m.addFont=function(_,P,K,tt,vt){var Ct=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ct.indexOf(arguments[3])!==-1?vt=arguments[3]:arguments[3]&&Ct.indexOf(arguments[3])==-1&&(K=at(K,tt)),vt=vt||"Identity-H",Vo.call(this,_,P,K,vt)};var Qr,to=n.lineWidth||.200025,ts=m.__private__.getLineWidth=m.getLineWidth=function(){return to},Na=m.__private__.setLineWidth=m.setLineWidth=function(_){return to=_,J(v(F(_))+" w"),this};m.__private__.setLineDash=Me.API.setLineDash=Me.API.setLineDashPattern=function(_,P){if(_=_||[],P=P||0,isNaN(P)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(K){return v(F(K))}).join(" "),P=v(F(P)),J("["+_+"] "+P+" d"),this};var Pa=m.__private__.getLineHeight=m.getLineHeight=function(){return Kt*Qr};m.__private__.getLineHeight=m.getLineHeight=function(){return Kt*Qr};var ka=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(Qr=_),this},es=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Qr};ka(n.lineHeight);var wr=m.__private__.getHorizontalCoordinate=function(_){return F(_)},xr=m.__private__.getVerticalCoordinate=function(_){return j===I.ADVANCED?_:Re[H].mediaBox.topRightY-Re[H].mediaBox.bottomLeftY-F(_)},Hl=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(_){return v(wr(_))},ns=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(_){return v(xr(_))},ar=n.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return sr(ar)},m.__private__.setStrokeColor=m.setDrawColor=function(_,P,K,tt){return ar=$i({ch1:_,ch2:P,ch3:K,ch4:tt,pdfColorType:"draw",precision:2}),J(ar),this};var h=n.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return sr(h)},m.__private__.setFillColor=m.setFillColor=function(_,P,K,tt){return h=$i({ch1:_,ch2:P,ch3:K,ch4:tt,pdfColorType:"fill",precision:2}),J(h),this};var g=n.textColor||"0 g",x=m.__private__.getTextColor=m.getTextColor=function(){return sr(g)};m.__private__.setTextColor=m.setTextColor=function(_,P,K,tt){return g=$i({ch1:_,ch2:P,ch3:K,ch4:tt,pdfColorType:"text",precision:3}),this};var C=n.charSpace,R=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(C||0)};m.__private__.setCharSpace=m.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return C=_,this};var N=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(_){var P=m.CapJoinStyles[_];if(P===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return N=P,J(P+" J"),this};var O=0;m.__private__.setLineJoin=m.setLineJoin=function(_){var P=m.CapJoinStyles[_];if(P===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return O=P,J(P+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(v(F(_))+" M"),this},m.GState=Sh,m.setGState=function(_){(_=typeof _=="string"?nn[qn[_]]:rt(null,_)).equals(Kn)||(J("/"+_.id+" gs"),Kn=_)};var rt=function(_,P){if(!_||!qn[_]){var K=!1;for(var tt in nn)if(nn.hasOwnProperty(tt)&&nn[tt].equals(P)){K=!0;break}if(K)P=nn[tt];else{var vt="GS"+(Object.keys(nn).length+1).toString(10);nn[vt]=P,P.id=vt}return _&&(qn[_]=P.id),Ee.publish("addGState",P),P}};m.addGState=function(_,P){return rt(_,P),this},m.saveGraphicsState=function(){return J("q"),ln.push({key:_e,size:Kt,color:g}),this},m.restoreGraphicsState=function(){J("Q");var _=ln.pop();return _e=_.key,Kt=_.size,g=_.color,Kn=null,this},m.setCurrentTransformationMatrix=function(_){return J(_.toString()+" cm"),this},m.comment=function(_){return J("#"+_),this};var Q=function(_,P){var K=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return K},set:function(Ct){isNaN(Ct)||(K=parseFloat(Ct))}});var tt=P||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return tt},set:function(Ct){isNaN(Ct)||(tt=parseFloat(Ct))}});var vt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return vt},set:function(Ct){vt=Ct.toString()}}),this},pt=function(_,P,K,tt){Q.call(this,_,P),this.type="rect";var vt=K||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return vt},set:function(Dt){isNaN(Dt)||(vt=parseFloat(Dt))}});var Ct=tt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ct},set:function(Dt){isNaN(Dt)||(Ct=parseFloat(Dt))}}),this},Rt=function(){this.page=An,this.currentPage=H,this.pages=$t.slice(0),this.pagesContext=Re.slice(0),this.x=Ke,this.y=we,this.matrix=on,this.width=Le(H),this.height=De(H),this.outputDestination=Ht,this.id="",this.objectNumber=-1};Rt.prototype.restore=function(){An=this.page,H=this.currentPage,Re=this.pagesContext,$t=this.pages,Ke=this.x,we=this.y,on=this.matrix,Ze(H,this.width),Jn(H,this.height),Ht=this.outputDestination};var Ot=function(_,P,K,tt,vt){On.push(new Rt),An=H=0,$t=[],Ke=_,we=P,on=vt,Ks([K,tt])},Tt=function(_){if(Qn[_])On.pop().restore();else{var P=new Rt,K="Xo"+(Object.keys(dn).length+1).toString(10);P.id=K,Qn[_]=K,dn[K]=P,Ee.publish("addFormObject",P),On.pop().restore()}};for(var Xt in m.beginFormObject=function(_,P,K,tt,vt){return Ot(_,P,K,tt,vt),this},m.endFormObject=function(_){return Tt(_),this},m.doFormObject=function(_,P){var K=dn[Qn[_]];return J("q"),J(P.toString()+" cm"),J("/"+K.id+" Do"),J("Q"),this},m.getFormObject=function(_){var P=dn[Qn[_]];return{x:P.x,y:P.y,width:P.width,height:P.height,matrix:P.matrix}},m.save=function(_,P){return _=_||"generated.pdf",(P=P||{}).returnPromise=P.returnPromise||!1,P.returnPromise===!1?(oa(br(Dr()),_),typeof oa.unload=="function"&&ze.setTimeout&&setTimeout(oa.unload,911),this):new Promise(function(K,tt){try{var vt=oa(br(Dr()),_);typeof oa.unload=="function"&&ze.setTimeout&&setTimeout(oa.unload,911),K(vt)}catch(Ct){tt(Ct.message)}})},Me.API)Me.API.hasOwnProperty(Xt)&&(Xt==="events"&&Me.API.events.length?function(_,P){var K,tt,vt;for(vt=P.length-1;vt!==-1;vt--)K=P[vt][0],tt=P[vt][1],_.subscribe.apply(_,[K].concat(typeof tt=="function"?[tt]:tt))}(Ee,Me.API.events):m[Xt]=Me.API[Xt]);var Le=m.getPageWidth=function(_){return(Re[_=_||H].mediaBox.topRightX-Re[_].mediaBox.bottomLeftX)/qt},Ze=m.setPageWidth=function(_,P){Re[_].mediaBox.topRightX=P*qt+Re[_].mediaBox.bottomLeftX},De=m.getPageHeight=function(_){return(Re[_=_||H].mediaBox.topRightY-Re[_].mediaBox.bottomLeftY)/qt},Jn=m.setPageHeight=function(_,P){Re[_].mediaBox.topRightY=P*qt+Re[_].mediaBox.bottomLeftY};return m.internal={pdfEscape:yi,getStyle:Ia,getFont:Yo,getFontSize:Gt,getCharSpace:R,getTextColor:x,getLineHeight:Pa,getLineHeightFactor:es,getLineWidth:ts,write:Ce,getHorizontalCoordinate:wr,getVerticalCoordinate:xr,getCoordinateString:Hl,getVerticalCoordinateString:ns,collections:{},newObject:pn,newAdditionalObject:Xs,newObjectDeferred:Hn,newObjectDeferredBegin:zi,getFilters:_r,putStream:gi,events:Ee,scaleFactor:qt,pageSize:{getWidth:function(){return Le(H)},setWidth:function(_){Ze(H,_)},getHeight:function(){return De(H)},setHeight:function(_){Jn(H,_)}},encryptionOptions:f,encryption:vi,getEncryptor:La,output:Rs,getNumberOfPages:Aa,pages:$t,out:J,f2:mt,f3:q,getPageInfo:Ta,getPageInfoByObjId:Be,getCurrentPageInfo:ql,getPDFVersion:S,Point:Q,Rectangle:pt,Matrix:xe,hasHotfix:Zs},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Le(H)},set:function(_){Ze(H,_)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return De(H)},set:function(_){Jn(H,_)},enumerable:!0,configurable:!0}),jl.call(m,Wt),_e="F1",Ea(r,e),Ee.publish("initialized"),m}tl.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},tl.prototype.toHexString=function(n){return n.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},tl.prototype.hexToBytes=function(n){for(var t=[],e=0;e<n.length;e+=2)t.push(String.fromCharCode(parseInt(n.substr(e,2),16)));return t.join("")},tl.prototype.processOwnerPassword=function(n,t){return rp(ip(t).substr(0,5),n)},tl.prototype.encryptor=function(n,t){var e=ip(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return rp(e,i)}},Sh.prototype.equals=function(n){var t,e="id,objectNumber,equals";if(!n||Pn(n)!==Pn(this))return!1;var i=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!n.hasOwnProperty(t)||this[t]!==n[t])return!1;i++}for(t in n)n.hasOwnProperty(t)&&e.indexOf(t)<0&&i--;return i===0},Me.API={events:[]},Me.version="2.5.1";var ni=Me.API,Wg=1,ba=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$a=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ve=function(n){return n.toFixed(2)},bo=function(n){return n.toFixed(5)};ni.__acroform__={};var ir=function(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n},fm=function(n){return n*Wg},us=function(n){var t=new m5,e=ve.internal.getHeight(n)||0,i=ve.internal.getWidth(n)||0;return t.BBox=[0,0,Number(Ve(i)),Number(Ve(e))],t},XA=ni.__acroform__.setBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<t},YA=ni.__acroform__.clearBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<t)},KA=ni.__acroform__.getBit=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<t)==0?0:1},si=ni.__acroform__.getBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return KA(n,t-1)},oi=ni.__acroform__.setBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return XA(n,t-1)},ai=ni.__acroform__.clearBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return YA(n,t-1)},ZA=ni.__acroform__.calculateCoordinates=function(n,t){var e=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,r=n[0],s=n[1],o=n[2],a=n[3],l={};return l.lowerLeft_X=e(r)||0,l.lowerLeft_Y=i(s+a)||0,l.upperRight_X=e(r+o)||0,l.upperRight_Y=i(s)||0,[Number(Ve(l.lowerLeft_X)),Number(Ve(l.lowerLeft_Y)),Number(Ve(l.upperRight_X)),Number(Ve(l.upperRight_Y))]},JA=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var t=[],e=n._V||n.DV,i=sp(n,e),r=n.scope.internal.getFont(n.fontName,n.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(n.scope.__private__.encodeColorString(n.color)),t.push("/"+r+" "+Ve(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=us(n);return s.scope=n.scope,s.stream=t.join(`
`),s}},sp=function(n,t){var e=n.fontSize===0?n.maxFontSize:n.fontSize,i={text:"",fontSize:""},r=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");r=n.multiline?r.map(function(q){return q.split(`
`)}):r.map(function(q){return[q]});var s=e,o=ve.internal.getHeight(n)||0;o=o<0?-o:o;var a=ve.internal.getWidth(n)||0;a=a<0?-a:a;var l=function(q,F,V){if(q+1<r.length){var W=F+" "+r[q+1][0];return Fc(W,n,V).width<=a-4}return!1};s++;t:for(;s>0;){t="",s--;var u,f,d=Fc("3",n,s).height,y=n.multiline?o-s:(o-d)/2,m=y+=2,w=0,S=0,L=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Fc(t,n,s=12).width+", FieldWidth:"+a+`
`;break}for(var E="",I=0,j=0;j<r.length;j++)if(r.hasOwnProperty(j)){var G=!1;if(r[j].length!==1&&L!==r[j].length-1){if((d+2)*(I+2)+2>o)continue t;E+=r[j][L],G=!0,S=j,j--}else{E=(E+=r[j][L]+" ").substr(E.length-1)==" "?E.substr(0,E.length-1):E;var Z=parseInt(j),at=l(Z,E,s),v=j>=r.length-1;if(at&&!v){E+=" ",L=0;continue}if(at||v){if(v)S=Z;else if(n.multiline&&(d+2)*(I+2)+2>o)continue t}else{if(!n.multiline||(d+2)*(I+2)+2>o)continue t;S=Z}}for(var B="",it=w;it<=S;it++){var mt=r[it];if(n.multiline){if(it===S){B+=mt[L]+" ",L=(L+1)%mt.length;continue}if(it===w){B+=mt[mt.length-1]+" ";continue}}B+=mt[0]+" "}switch(B=B.substr(B.length-1)==" "?B.substr(0,B.length-1):B,f=Fc(B,n,s).width,n.textAlign){case"right":u=a-f-2;break;case"center":u=(a-f)/2;break;case"left":default:u=2}t+=Ve(u)+" "+Ve(m)+` Td
`,t+="("+ba(B)+`) Tj
`,t+=-Ve(u)+` 0 Td
`,m=-(s+2),f=0,w=G?S:S+1,I++,E=""}break}return i.text=t,i.fontSize=s,i},Fc=function(n,t,e){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),r=t.scope.getStringUnitWidth(n,{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:r}},QA={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},tL=function(n,t){var e={type:"reference",object:n};t.internal.getPageInfo(n.page).pageContext.annotations.find(function(i){return i.type===e.type&&i.object===e.object})===void 0&&t.internal.getPageInfo(n.page).pageContext.annotations.push(e)},eL=function(n,t){for(var e in n)if(n.hasOwnProperty(e)){var i=e,r=n[e];t.internal.newObjectDeferredBegin(r.objId,!0),Pn(r)==="object"&&typeof r.putStream=="function"&&r.putStream(),delete n[i]}},nL=function(n,t){if(t.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Xr.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(QA)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Wg=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new y5,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in i)if(i.hasOwnProperty(r)){var s=i[r];s.objId=void 0,s.hasAnnotation&&tL(s,e)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(e){(function(i,r){var s=!i;for(var o in i||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(o)){var a=i[o],l=[],u=a.Rect;if(a.Rect&&(a.Rect=ZA(a.Rect,r)),r.internal.newObjectDeferredBegin(a.objId,!0),a.DA=ve.createDefaultAppearanceStream(a),Pn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var f=JA(a);l.push({key:"AP",value:"<</N "+f+">>"}),r.internal.acroformPlugin.xForms.push(f)}if(a.appearanceStreamContent){var d="";for(var y in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(y)){var m=a.appearanceStreamContent[y];if(d+="/"+y+" ",d+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var w=m[o];typeof w=="function"&&(w=w.call(r,a)),d+="/"+o+" "+w+" ",r.internal.acroformPlugin.xForms.indexOf(w)>=0||r.internal.acroformPlugin.xForms.push(w)}}else typeof(w=m)=="function"&&(w=w.call(r,a)),d+="/"+o+" "+w,r.internal.acroformPlugin.xForms.indexOf(w)>=0||r.internal.acroformPlugin.xForms.push(w);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}r.internal.putStream({additionalKeyValues:l,objectId:a.objId}),r.internal.out("endobj")}s&&eL(r.internal.acroformPlugin.xForms,r)})(e,n)}),n.internal.acroformPlugin.isInitialized=!0}},g5=ni.__acroform__.arrayToPdfArray=function(n,t,e){var i=function(o){return o};if(Array.isArray(n)){for(var r="[",s=0;s<n.length;s++)switch(s!==0&&(r+=" "),Pn(n[s])){case"boolean":case"number":case"object":r+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(t!==void 0&&e&&(i=e.internal.getEncryptor(t)),r+="("+ba(i(n[s].toString()))+")"):r+=n[s].toString()}return r+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},hd=function(n,t,e){var i=function(r){return r};return t!==void 0&&e&&(i=e.internal.getEncryptor(t)),(n=n||"").toString(),n="("+ba(i(n))+")"},gs=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};gs.prototype.toString=function(){return this.objId+" 0 R"},gs.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},gs.prototype.getKeyValueListForStream=function(){var n=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var i=t[e],r=this[i];r&&(Array.isArray(r)?n.push({key:i,value:g5(r,this.objId,this.scope)}):r instanceof gs?(r.scope=this.scope,n.push({key:i,value:r.objId+" 0 R"})):typeof r!="function"&&n.push({key:i,value:r}))}return n};var m5=function(){gs.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){n=e.trim()},get:function(){return n||null}})};ir(m5,gs);var y5=function(){gs.call(this);var n,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var e=function(i){return i};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+ba(e(n))+")"}},set:function(e){n=e}})};ir(y5,gs);var Xr=function n(){gs.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(E){if(isNaN(E))throw new Error('Invalid value "'+E+'" for attribute F supplied.');t=E}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(t,3))},set:function(E){Boolean(E)===!0?this.F=oi(t,3):this.F=ai(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(E){if(isNaN(E))throw new Error('Invalid value "'+E+'" for attribute Ff supplied.');e=E}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(E){i=E!==void 0?E:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(E){i[0]=E}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(E){i[1]=E}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(E){i[2]=E}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(E){i[3]=E}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(E){switch(E){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=E;break;default:throw new Error('Invalid value "'+E+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Ch)return;s="FieldObject"+n.FieldNum++}var E=function(I){return I};return this.scope&&(E=this.scope.internal.getEncryptor(this.objId)),"("+ba(E(s))+")"},set:function(E){s=E.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(E){s=E}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(E){o=E}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(E){a=E}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(E){l=E}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/Wg:u},set:function(E){u=E}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(E){f=E}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof Ch||this instanceof ma))return hd(d,this.objId,this.scope)},set:function(E){E=E.toString(),d=E}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Ei?y:hd(y,this.objId,this.scope)},set:function(E){E=E.toString(),y=this instanceof Ei?E:E.substr(0,1)==="("?$a(E.substr(1,E.length-2)):$a(E)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ei?$a(y.substr(1,y.length-1)):y},set:function(E){E=E.toString(),y=this instanceof Ei?"/"+E:E}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(E){this.V=E}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ei?m:hd(m,this.objId,this.scope)},set:function(E){E=E.toString(),m=this instanceof Ei?E:E.substr(0,1)==="("?$a(E.substr(1,E.length-2)):$a(E)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ei?$a(m.substr(1,m.length-1)):m},set:function(E){E=E.toString(),m=this instanceof Ei?"/"+E:E}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var w,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(E){E=Boolean(E),S=E}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(w)return w},set:function(E){w=E}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,1))},set:function(E){Boolean(E)===!0?this.Ff=oi(this.Ff,1):this.Ff=ai(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,2))},set:function(E){Boolean(E)===!0?this.Ff=oi(this.Ff,2):this.Ff=ai(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,3))},set:function(E){Boolean(E)===!0?this.Ff=oi(this.Ff,3):this.Ff=ai(this.Ff,3)}});var L=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(L!==null)return L},set:function(E){if([0,1,2].indexOf(E)===-1)throw new Error('Invalid value "'+E+'" for attribute Q supplied.');L=E}}),Object.defineProperty(this,"textAlign",{get:function(){var E;switch(L){case 0:default:E="left";break;case 1:E="center";break;case 2:E="right"}return E},configurable:!0,enumerable:!0,set:function(E){switch(E){case"right":case 2:L=2;break;case"center":case 1:L=1;break;case"left":case 0:default:L=0}}})};ir(Xr,gs);var gl=function(){Xr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){n=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return g5(t,this.objId,this.scope)},set:function(e){var i,r;r=[],typeof(i=e)=="string"&&(r=function(s,o,a){a||(a=1);for(var l,u=[];l=o.exec(s);)u.push(l[a]);return u}(i,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,i){for(i=i||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,18))},set:function(e){Boolean(e)===!0?this.Ff=oi(this.Ff,18):this.Ff=ai(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,19))},set:function(e){this.combo===!0&&(Boolean(e)===!0?this.Ff=oi(this.Ff,19):this.Ff=ai(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,20))},set:function(e){Boolean(e)===!0?(this.Ff=oi(this.Ff,20),t.sort()):this.Ff=ai(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,22))},set:function(e){Boolean(e)===!0?this.Ff=oi(this.Ff,22):this.Ff=ai(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,23))},set:function(e){Boolean(e)===!0?this.Ff=oi(this.Ff,23):this.Ff=ai(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,27))},set:function(e){Boolean(e)===!0?this.Ff=oi(this.Ff,27):this.Ff=ai(this.Ff,27)}}),this.hasAppearanceStream=!1};ir(gl,Xr);var ml=function(){gl.call(this),this.fontName="helvetica",this.combo=!1};ir(ml,gl);var yl=function(){ml.call(this),this.combo=!0};ir(yl,ml);var Gc=function(){yl.call(this),this.edit=!0};ir(Gc,yl);var Ei=function(){Xr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,15))},set:function(e){Boolean(e)===!0?this.Ff=oi(this.Ff,15):this.Ff=ai(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,16))},set:function(e){Boolean(e)===!0?this.Ff=oi(this.Ff,16):this.Ff=ai(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,17))},set:function(e){Boolean(e)===!0?this.Ff=oi(this.Ff,17):this.Ff=ai(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,26))},set:function(e){Boolean(e)===!0?this.Ff=oi(this.Ff,26):this.Ff=ai(this.Ff,26)}});var n,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(s){return s};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,r=[];for(i in r.push("<<"),t)r.push("/"+i+" ("+ba(e(t[i]))+")");return r.push(">>"),r.join(`
`)}},set:function(e){Pn(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}})};ir(Ei,Xr);var Wc=function(){Ei.call(this),this.pushButton=!0};ir(Wc,Ei);var vl=function(){Ei.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t!==void 0?t:[]}})};ir(vl,Ei);var Ch=function(){var n,t;Xr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(r){t=r}});var e,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),i)o.push("/"+s+" ("+ba(r(i[s]))+")");return o.push(">>"),o.join(`
`)},set:function(r){Pn(r)==="object"&&(i=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(r){typeof r=="string"&&(i.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ve.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ir(Ch,Xr),vl.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=n.createAppearanceStream(e.optionName),e.caption=n.getCA()}},vl.prototype.createOption=function(n){var t=new Ch;return t.Parent=this,t.optionName=n,this.Kids.push(t),iL.call(this.scope,t),t};var Vc=function(){Ei.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ve.CheckBox.createAppearanceStream()};ir(Vc,Ei);var ma=function(){Xr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,13))},set:function(t){Boolean(t)===!0?this.Ff=oi(this.Ff,13):this.Ff=ai(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,21))},set:function(t){Boolean(t)===!0?this.Ff=oi(this.Ff,21):this.Ff=ai(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,23))},set:function(t){Boolean(t)===!0?this.Ff=oi(this.Ff,23):this.Ff=ai(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,24))},set:function(t){Boolean(t)===!0?this.Ff=oi(this.Ff,24):this.Ff=ai(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,25))},set:function(t){Boolean(t)===!0?this.Ff=oi(this.Ff,25):this.Ff=ai(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,26))},set:function(t){Boolean(t)===!0?this.Ff=oi(this.Ff,26):this.Ff=ai(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){Number.isInteger(t)&&(n=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ir(ma,Xr);var Hc=function(){ma.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(si(this.Ff,14))},set:function(n){Boolean(n)===!0?this.Ff=oi(this.Ff,14):this.Ff=ai(this.Ff,14)}}),this.password=!0};ir(Hc,ma);var ve={CheckBox:{createAppearanceStream:function(){return{N:{On:ve.CheckBox.YesNormal},D:{On:ve.CheckBox.YesPushDown,Off:ve.CheckBox.OffPushDown}}},YesPushDown:function(n){var t=us(n);t.scope=n.scope;var e=[],i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),s=sp(n,n.caption);return e.push("0.749023 g"),e.push("0 0 "+Ve(ve.internal.getWidth(n))+" "+Ve(ve.internal.getHeight(n))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+i+" "+Ve(s.fontSize)+" Tf "+r),e.push("BT"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(n){var t=us(n);t.scope=n.scope;var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),r=[],s=ve.internal.getHeight(n),o=ve.internal.getWidth(n),a=sp(n,n.caption);return r.push("1 g"),r.push("0 0 "+Ve(o)+" "+Ve(s)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+Ve(o-1)+" "+Ve(s-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+e+" "+Ve(a.fontSize)+" Tf "+i),r.push(a.text),r.push("ET"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(n){var t=us(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+Ve(ve.internal.getWidth(n))+" "+Ve(ve.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(n){var t={D:{Off:ve.RadioButton.Circle.OffPushDown},N:{}};return t.N[n]=ve.RadioButton.Circle.YesNormal,t.D[n]=ve.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(n){var t=us(n);t.scope=n.scope;var e=[],i=ve.internal.getWidth(n)<=ve.internal.getHeight(n)?ve.internal.getWidth(n)/4:ve.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=ve.internal.Bezier_C,s=Number((i*r).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+bo(ve.internal.getWidth(n)/2)+" "+bo(ve.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),e.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),e.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),e.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=us(n);t.scope=n.scope;var e=[],i=ve.internal.getWidth(n)<=ve.internal.getHeight(n)?ve.internal.getWidth(n)/4:ve.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*ve.internal.Bezier_C).toFixed(5)),o=Number((i*ve.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+bo(ve.internal.getWidth(n)/2)+" "+bo(ve.internal.getHeight(n)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),e.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),e.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),e.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+bo(ve.internal.getWidth(n)/2)+" "+bo(ve.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),e.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),e.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),e.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(n){var t=us(n);t.scope=n.scope;var e=[],i=ve.internal.getWidth(n)<=ve.internal.getHeight(n)?ve.internal.getWidth(n)/4:ve.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*ve.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+bo(ve.internal.getWidth(n)/2)+" "+bo(ve.internal.getHeight(n)/2)+" cm"),e.push(r+" 0 m"),e.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),e.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),e.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),e.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(n){var t={D:{Off:ve.RadioButton.Cross.OffPushDown},N:{}};return t.N[n]=ve.RadioButton.Cross.YesNormal,t.D[n]=ve.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(n){var t=us(n);t.scope=n.scope;var e=[],i=ve.internal.calculateCross(n);return e.push("q"),e.push("1 1 "+Ve(ve.internal.getWidth(n)-2)+" "+Ve(ve.internal.getHeight(n)-2)+" re"),e.push("W"),e.push("n"),e.push(Ve(i.x1.x)+" "+Ve(i.x1.y)+" m"),e.push(Ve(i.x2.x)+" "+Ve(i.x2.y)+" l"),e.push(Ve(i.x4.x)+" "+Ve(i.x4.y)+" m"),e.push(Ve(i.x3.x)+" "+Ve(i.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(n){var t=us(n);t.scope=n.scope;var e=ve.internal.calculateCross(n),i=[];return i.push("0.749023 g"),i.push("0 0 "+Ve(ve.internal.getWidth(n))+" "+Ve(ve.internal.getHeight(n))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Ve(ve.internal.getWidth(n)-2)+" "+Ve(ve.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(Ve(e.x1.x)+" "+Ve(e.x1.y)+" m"),i.push(Ve(e.x2.x)+" "+Ve(e.x2.y)+" l"),i.push(Ve(e.x4.x)+" "+Ve(e.x4.y)+" m"),i.push(Ve(e.x3.x)+" "+Ve(e.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(n){var t=us(n);t.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+Ve(ve.internal.getWidth(n))+" "+Ve(ve.internal.getHeight(n))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(n){var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,e=n.scope.__private__.encodeColorString(n.color);return"/"+t+" "+n.fontSize+" Tf "+e}};ve.internal={Bezier_C:.551915024494,calculateCross:function(n){var t=ve.internal.getWidth(n),e=ve.internal.getHeight(n),i=Math.min(t,e);return{x1:{x:(t-i)/2,y:(e-i)/2+i},x2:{x:(t-i)/2+i,y:(e-i)/2},x3:{x:(t-i)/2,y:(e-i)/2},x4:{x:(t-i)/2+i,y:(e-i)/2+i}}}},ve.internal.getWidth=function(n){var t=0;return Pn(n)==="object"&&(t=fm(n.Rect[2])),t},ve.internal.getHeight=function(n){var t=0;return Pn(n)==="object"&&(t=fm(n.Rect[3])),t};var iL=ni.addField=function(n){if(nL(this,n),!(n instanceof Xr))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=n).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};ni.AcroFormChoiceField=gl,ni.AcroFormListBox=ml,ni.AcroFormComboBox=yl,ni.AcroFormEditBox=Gc,ni.AcroFormButton=Ei,ni.AcroFormPushButton=Wc,ni.AcroFormRadioButton=vl,ni.AcroFormCheckBox=Vc,ni.AcroFormTextField=ma,ni.AcroFormPasswordField=Hc,ni.AcroFormAppearance=ve,ni.AcroForm={ChoiceField:gl,ListBox:ml,ComboBox:yl,EditBox:Gc,Button:Ei,PushButton:Wc,RadioButton:vl,CheckBox:Vc,TextField:ma,PasswordField:Hc,Appearance:ve},Me.AcroForm={ChoiceField:gl,ListBox:ml,ComboBox:yl,EditBox:Gc,Button:Ei,PushButton:Wc,RadioButton:vl,CheckBox:Vc,TextField:ma,PasswordField:Hc,Appearance:ve};Me.AcroForm;function v5(n){return n.reduce(function(t,e,i){return t[e]=i,t},{})}(function(n){n.__addimage__={};var t="UNKNOWN",e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(q,F){var V,W,et,st,lt,ct=t;if((F=F||t)==="RGBA"||q.data!==void 0&&q.data instanceof Uint8ClampedArray&&"height"in q&&"width"in q)return"RGBA";if(at(q))for(lt in e)for(et=e[lt],V=0;V<et.length;V+=1){for(st=!0,W=0;W<et[V].length;W+=1)if(et[V][W]!==void 0&&et[V][W]!==q[W]){st=!1;break}if(st===!0){ct=lt;break}}else for(lt in e)for(et=e[lt],V=0;V<et.length;V+=1){for(st=!0,W=0;W<et[V].length;W+=1)if(et[V][W]!==void 0&&et[V][W]!==q.charCodeAt(W)){st=!1;break}if(st===!0){ct=lt;break}}return ct===t&&F!==t&&(ct=F),ct},r=function q(F){for(var V=this.internal.write,W=this.internal.putStream,et=(0,this.internal.getFilters)();et.indexOf("FlateEncode")!==-1;)et.splice(et.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var st=[];if(st.push({key:"Type",value:"/XObject"}),st.push({key:"Subtype",value:"/Image"}),st.push({key:"Width",value:F.width}),st.push({key:"Height",value:F.height}),F.colorSpace===L.INDEXED?st.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(st.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===L.DEVICE_CMYK&&st.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),st.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&st.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)){for(var lt="",ct=0,Et=F.transparency.length;ct<Et;ct++)lt+=F.transparency[ct]+" "+F.transparency[ct]+" ";st.push({key:"Mask",value:"["+lt+"]"})}F.sMask!==void 0&&st.push({key:"SMask",value:F.objectId+1+" 0 R"});var ot=F.filter!==void 0?["/"+F.filter]:void 0;if(W({data:F.data,additionalKeyValues:st,alreadyAppliedFilters:ot,objectId:F.objectId}),V("endobj"),"sMask"in F&&F.sMask!==void 0){var Yt="/Predictor "+F.predictor+" /Colors 1 /BitsPerComponent "+F.bitsPerComponent+" /Columns "+F.width,T={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:F.bitsPerComponent,decodeParameters:Yt,data:F.sMask};"filter"in F&&(T.filter=F.filter),q.call(this,T)}if(F.colorSpace===L.INDEXED){var H=this.internal.newObject();W({data:B(new Uint8Array(F.palette)),objectId:H}),V("endobj")}},s=function(){var q=this.internal.collections.addImage_images;for(var F in q)r.call(this,q[F])},o=function(){var q,F=this.internal.collections.addImage_images,V=this.internal.write;for(var W in F)V("/I"+(q=F[W]).index,q.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var q=this.internal.collections.addImage_images;return a.call(this),q},u=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(q){return typeof n["process"+q.toUpperCase()]=="function"},d=function(q){return Pn(q)==="object"&&q.nodeType===1},y=function(q,F){if(q.nodeName==="IMG"&&q.hasAttribute("src")){var V=""+q.getAttribute("src");if(V.indexOf("data:image/")===0)return fu(unescape(V).split("base64,").pop());var W=n.loadFile(V,!0);if(W!==void 0)return W}if(q.nodeName==="CANVAS"){if(q.width===0||q.height===0)throw new Error("Given canvas must have data. Canvas width: "+q.width+", height: "+q.height);var et;switch(F){case"PNG":et="image/png";break;case"WEBP":et="image/webp";break;case"JPEG":case"JPG":default:et="image/jpeg"}return fu(q.toDataURL(et,1).split("base64,").pop())}},m=function(q){var F=this.internal.collections.addImage_images;if(F){for(var V in F)if(q===F[V].alias)return F[V]}},w=function(q,F,V){return q||F||(q=-96,F=-96),q<0&&(q=-1*V.width*72/q/this.internal.scaleFactor),F<0&&(F=-1*V.height*72/F/this.internal.scaleFactor),q===0&&(q=F*V.width/V.height),F===0&&(F=q*V.height/V.width),[q,F]},S=function(q,F,V,W,et,st){var lt=w.call(this,V,W,et),ct=this.internal.getCoordinateString,Et=this.internal.getVerticalCoordinateString,ot=l.call(this);if(V=lt[0],W=lt[1],ot[et.index]=et,st){st*=Math.PI/180;var Yt=Math.cos(st),T=Math.sin(st),H=function(nt){return nt.toFixed(4)},Y=[H(Yt),H(T),H(-1*T),H(Yt),0,0,"cm"]}this.internal.write("q"),st?(this.internal.write([1,"0","0",1,ct(q),Et(F+W),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([ct(V),"0","0",ct(W),"0","0","cm"].join(" "))):this.internal.write([ct(V),"0","0",ct(W),ct(q),Et(F+W),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+et.index+" Do"),this.internal.write("Q")},L=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var E=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},I=n.__addimage__.sHashCode=function(q){var F,V,W=0;if(typeof q=="string")for(V=q.length,F=0;F<V;F++)W=(W<<5)-W+q.charCodeAt(F),W|=0;else if(at(q))for(V=q.byteLength/2,F=0;F<V;F++)W=(W<<5)-W+q[F],W|=0;return W},j=n.__addimage__.validateStringAsBase64=function(q){(q=q||"").toString().trim();var F=!0;return q.length===0&&(F=!1),q.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(q.substr(0,q.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(q.substr(-2))===!1&&(F=!1),F},G=n.__addimage__.extractImageFromDataUrl=function(q){var F=(q=q||"").split("base64,"),V=null;if(F.length===2){var W=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(F[0]);Array.isArray(W)&&(V={mimeType:W[1],charset:W[2],data:F[1]})}return V},Z=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(q){return Z()&&q instanceof ArrayBuffer};var at=n.__addimage__.isArrayBufferView=function(q){return Z()&&typeof Uint32Array<"u"&&(q instanceof Int8Array||q instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&q instanceof Uint8ClampedArray||q instanceof Int16Array||q instanceof Uint16Array||q instanceof Int32Array||q instanceof Uint32Array||q instanceof Float32Array||q instanceof Float64Array)},v=n.__addimage__.binaryStringToUint8Array=function(q){for(var F=q.length,V=new Uint8Array(F),W=0;W<F;W++)V[W]=q.charCodeAt(W);return V},B=n.__addimage__.arrayBufferToBinaryString=function(q){for(var F="",V=at(q)?q:new Uint8Array(q),W=0;W<V.length;W+=8192)F+=String.fromCharCode.apply(null,V.subarray(W,W+8192));return F};n.addImage=function(){var q,F,V,W,et,st,lt,ct,Et;if(typeof arguments[1]=="number"?(F=t,V=arguments[1],W=arguments[2],et=arguments[3],st=arguments[4],lt=arguments[5],ct=arguments[6],Et=arguments[7]):(F=arguments[1],V=arguments[2],W=arguments[3],et=arguments[4],st=arguments[5],lt=arguments[6],ct=arguments[7],Et=arguments[8]),Pn(q=arguments[0])==="object"&&!d(q)&&"imageData"in q){var ot=q;q=ot.imageData,F=ot.format||F||t,V=ot.x||V||0,W=ot.y||W||0,et=ot.w||ot.width||et,st=ot.h||ot.height||st,lt=ot.alias||lt,ct=ot.compression||ct,Et=ot.rotation||ot.angle||Et}var Yt=this.internal.getFilters();if(ct===void 0&&Yt.indexOf("FlateEncode")!==-1&&(ct="SLOW"),isNaN(V)||isNaN(W))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var T=it.call(this,q,F,lt,ct);return S.call(this,V,W,et,st,T,Et),this};var it=function(q,F,V,W){var et,st,lt;if(typeof q=="string"&&i(q)===t){q=unescape(q);var ct=mt(q,!1);(ct!==""||(ct=n.loadFile(q,!0))!==void 0)&&(q=ct)}if(d(q)&&(q=y(q,F)),F=i(q,F),!f(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((lt=V)==null||lt.length===0)&&(V=function(Et){return typeof Et=="string"||at(Et)?I(Et):at(Et.data)?I(Et.data):null}(q)),(et=m.call(this,V))||(Z()&&(q instanceof Uint8Array||F==="RGBA"||(st=q,q=v(q))),et=this["process"+F.toUpperCase()](q,u.call(this),V,function(Et){return Et&&typeof Et=="string"&&(Et=Et.toUpperCase()),Et in n.image_compression?Et:E.NONE}(W),st)),!et)throw new Error("An unknown error occurred whilst processing the image.");return et},mt=n.__addimage__.convertBase64ToBinaryString=function(q,F){var V;F=typeof F!="boolean"||F;var W,et="";if(typeof q=="string"){W=(V=G(q))!==null?V.data:q;try{et=fu(W)}catch(st){if(F)throw j(W)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+st.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return et};n.getImageProperties=function(q){var F,V,W="";if(d(q)&&(q=y(q)),typeof q=="string"&&i(q)===t&&((W=mt(q,!1))===""&&(W=n.loadFile(q)||""),q=W),V=i(q),!f(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(!Z()||q instanceof Uint8Array||(q=v(q)),!(F=this["process"+V.toUpperCase()](q)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=V,F}})(Me.API),function(n){var t=function(e){if(e!==void 0&&e!="")return!0};Me.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(e){for(var i,r,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(e.objId),u=e.pageContext.annotations,f=!1,d=0;d<u.length&&!f;d++)switch((i=u[d]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var y=0;y<u.length;y++){i=u[y];var m=this.internal.pdfEscape,w=this.internal.getEncryptor(e.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),L=this.internal.newAdditionalObject(),E=this.internal.getEncryptor(S.objId),I=i.title||"Note";s="<</Type /Annot /Subtype /Text "+(r="/Rect ["+o(i.bounds.x)+" "+a(i.bounds.y+i.bounds.h)+" "+o(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y)+"] ")+"/Contents ("+m(E(i.contents))+")",s+=" /Popup "+L.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(E(I))+") >>",S.content=s;var j=S.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+o(i.bounds.x+30)+" "+a(i.bounds.y+i.bounds.h)+" "+o(i.bounds.x+i.bounds.w+30)+" "+a(i.bounds.y)+"] ")+" /Parent "+j,i.open&&(s+=" /Open true"),s+=" >>",L.content=s,this.internal.write(S.objId,"0 R",L.objId,"0 R");break;case"freetext":r="/Rect ["+o(i.bounds.x)+" "+a(i.bounds.y)+" "+o(i.bounds.x+i.bounds.w)+" "+a(i.bounds.y+i.bounds.h)+"] ";var G=i.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+m(w(i.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+G+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(i.options.name){var Z=this.annotations._nameMap[i.options.name];i.options.pageNumber=Z.page,i.options.top=Z.y}else i.options.top||(i.options.top=0);if(r="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",s="",i.options.url)s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+m(w(i.options.url))+") >>";else if(i.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,s+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var at=a(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),s+=" /XYZ "+i.options.left+" "+at+" "+i.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(e){var i=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":i.pageContext.annotations.push(e)}},n.link=function(e,i,r,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(e),y:u(i),w:l(e+r),h:u(i+s)},options:o,type:"link"})},n.textWithLink=function(e,i,r,s){var o,a,l=this.getTextWidth(e),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var f=this.splitTextToSize(e,a).length;o=Math.ceil(u*f)}else a=l,o=u;return this.text(e,i,r,s),r+=.2*u,s.align==="center"&&(i-=l/2),s.align==="right"&&(i-=l),this.link(i,r-u,a,o,s),l},n.getTextWidth=function(e){var i=this.internal.getFontSize();return this.getStringUnitWidth(e)*i/this.internal.scaleFactor}}(Me.API),function(n){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(S){return t[S.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},a=n.__arabicParser__.isArabicEndLetter=function(S){return o(S)&&s(S)&&t[S.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(S){return o(S)&&r.indexOf(S.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return o(S)&&s(S)&&t[S.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(S){return o(S)&&s(S)&&t[S.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(S){return o(S)&&s(S)&&t[S.charCodeAt(0)].length>=3};var f=n.__arabicParser__.arabicLetterHasMedialForm=function(S){return o(S)&&s(S)&&t[S.charCodeAt(0)].length==4},d=n.__arabicParser__.resolveLigatures=function(S){var L=0,E=e,I="",j=0;for(L=0;L<S.length;L+=1)E[S.charCodeAt(L)]!==void 0?(j++,typeof(E=E[S.charCodeAt(L)])=="number"&&(I+=String.fromCharCode(E),E=e,j=0),L===S.length-1&&(E=e,I+=S.charAt(L-(j-1)),L-=j-1,j=0)):(E=e,I+=S.charAt(L-j),L-=j,j=0);return I};n.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&i[S.charCodeAt(0)]!==void 0};var y=n.__arabicParser__.getCorrectForm=function(S,L,E){return o(S)?s(S)===!1?-1:!u(S)||!o(L)&&!o(E)||!o(E)&&a(L)||a(S)&&!o(L)||a(S)&&l(L)||a(S)&&a(L)?0:f(S)&&o(L)&&!a(L)&&o(E)&&u(E)?3:a(S)||!o(E)?1:2:-1},m=function(S){var L=0,E=0,I=0,j="",G="",Z="",at=(S=S||"").split("\\s+"),v=[];for(L=0;L<at.length;L+=1){for(v.push(""),E=0;E<at[L].length;E+=1)j=at[L][E],G=at[L][E-1],Z=at[L][E+1],o(j)?(I=y(j,G,Z),v[L]+=I!==-1?String.fromCharCode(t[j.charCodeAt(0)][I]):j):v[L]+=j;v[L]=d(v[L])}return v.join(" ")},w=n.__arabicParser__.processArabic=n.processArabic=function(){var S,L=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,E=[];if(Array.isArray(L)){var I=0;for(E=[],I=0;I<L.length;I+=1)Array.isArray(L[I])?E.push([m(L[I][0]),L[I][1],L[I][2]]):E.push([m(L[I])]);S=E}else S=m(L);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};n.events.push(["preProcessText",w])}(Me.API),Me.API.autoPrint=function(n){var t;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(n){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(a){e=a}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,i){var r;if((e=e||"2d")!=="2d")return null;for(r in i)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=i[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Me.API),function(n){var t={left:0,top:0,bottom:0,right:0},e=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(S){l=S}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(S){u=S}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(S){f=S}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(S){d=S}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(S){y=S}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(S){m=S}});var w=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return w},set:function(S){w=S}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return i.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,u){i.call(this);var f=(u=u||{}).fontSize||this.getFontSize(),d=u.font||this.getFont(),y=u.scaleFactor||this.internal.scaleFactor,m=0,w=0,S=0,L=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var E=u.maxWidth;E>0?typeof l=="string"?l=this.splitTextToSize(l,E):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(j,G){return j.concat(L.splitTextToSize(G,E))},[])):l=Array.isArray(l)?l:[l];for(var I=0;I<l.length;I++)m<(S=this.getStringUnitWidth(l[I],{font:d})*f)&&(m=S);return m!==0&&(w=l.length),{w:m/=y,h:Math.max((w*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/y,0)}},n.cellAddPage=function(){i.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var u=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,d=this.internal.__cell__.margins||t,y=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,m&&y&&(this.printHeaderRow(l.lineNumber,!0),l.y+=y[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,e===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-f,l.y+f,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+f,{align:"center",baseline:"top",maxWidth:l.width-f-f}):this.text(l.text,l.x+f,l.y+f,{align:"left",baseline:"top",maxWidth:l.width-f-f})),this.internal.__cell__.lastCell=l,this};n.table=function(l,u,f,d,y){if(i.call(this),!f)throw new Error("No data for PDF table.");var m,w,S,L,E=[],I=[],j=[],G={},Z={},at=[],v=[],B=(y=y||{}).autoSize||!1,it=y.printHeaders!==!1,mt=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,q=y.margins||Object.assign({width:this.getPageWidth()},t),F=typeof y.padding=="number"?y.padding:3,V=y.headerBackgroundColor||"#c8c8c8",W=y.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=it,this.internal.__cell__.margins=q,this.internal.__cell__.table_font_size=mt,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=W,this.setFontSize(mt),d==null)I=E=Object.keys(f[0]),j=E.map(function(){return"left"});else if(Array.isArray(d)&&Pn(d[0])==="object")for(E=d.map(function(ot){return ot.name}),I=d.map(function(ot){return ot.prompt||ot.name||""}),j=d.map(function(ot){return ot.align||"left"}),m=0;m<d.length;m+=1)Z[d[m].name]=d[m].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(I=E=d,j=E.map(function(){return"left"}));if(B||Array.isArray(d)&&typeof d[0]=="string")for(m=0;m<E.length;m+=1){for(G[L=E[m]]=f.map(function(ot){return ot[L]}),this.setFont(void 0,"bold"),at.push(this.getTextDimensions(I[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),w=G[L],this.setFont(void 0,"normal"),S=0;S<w.length;S+=1)at.push(this.getTextDimensions(w[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Z[L]=Math.max.apply(null,at)+F+F,at=[]}if(it){var et={};for(m=0;m<E.length;m+=1)et[E[m]]={},et[E[m]].text=I[m],et[E[m]].align=j[m];var st=a.call(this,et,Z);v=E.map(function(ot){return new s(l,u,Z[ot],st,et[ot].text,void 0,et[ot].align)}),this.setTableHeaderRow(v),this.printHeaderRow(1,!1)}var lt=d.reduce(function(ot,Yt){return ot[Yt.name]=Yt.align,ot},{});for(m=0;m<f.length;m+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:m,data:f[m]},this);var ct=a.call(this,f[m],Z);for(S=0;S<E.length;S+=1){var Et=f[m][E[S]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:m,col:S,data:Et},this),o.call(this,new s(l,u,Z[E[S]],ct,Et,m+2,lt[E[S]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var f=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(l).map(function(m){var w=l[m];return this.splitTextToSize(w.hasOwnProperty("text")?w.text:w,u[m]-f-f)},this).map(function(m){return this.getLineHeightFactor()*m.length*d/y+f+f},this).reduce(function(m,w){return Math.max(m,w)},0)};n.setTableHeaderRow=function(l){i.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,u){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){f=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(f.y=this.internal.__cell__.margins.top||0,y.push(f)),f.lineNumber=l;var w=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(w)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),e=!1}}(Me.API);var _5={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},b5=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],op=v5(b5),w5=[100,200,300,400,500,600,700,800,900],rL=v5(w5);function ap(n){var t=n.family.replace(/"|'/g,"").toLowerCase(),e=function(s){return _5[s=s||"normal"]?s:"normal"}(n.style),i=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),r=function(s){return typeof op[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:t,style:e,weight:i,stretch:r,src:n.src||[],ref:n.ref||{name:t,style:[r,e,i].join(" ")}}}function dm(n,t,e,i){var r;for(r=e;r>=0&&r<t.length;r+=i)if(n[t[r]])return n[t[r]];for(r=e;r>=0&&r<t.length;r-=i)if(n[t[r]])return n[t[r]]}var sL={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},pm={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function gm(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function oL(n,t,e){for(var i=(e=e||{}).defaultFontFamily||"times",r=Object.assign({},sL,e.genericFontFamilies||{}),s=null,o=null,a=0;a<t.length;++a)if(r[(s=ap(t[a])).family]&&(s.family=r[s.family]),n.hasOwnProperty(s.family)){o=n[s.family];break}if(!(o=o||n[i]))throw new Error("Could not find a font-family for the rule '"+gm(s)+"' and default family '"+i+"'.");if(o=function(l,u){if(u[l])return u[l];var f=op[l],d=f<=op.normal?-1:1,y=dm(u,b5,f,d);if(!y)throw new Error("Could not find a matching font-stretch value for "+l);return y}(s.stretch,o),o=function(l,u){if(u[l])return u[l];for(var f=_5[l],d=0;d<f.length;++d)if(u[f[d]])return u[f[d]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var f=rL[l],d=dm(u,w5,f,l<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+l);return d}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+gm(s)+"'.");return o}function mm(n){return n.trimLeft()}function aL(n,t){for(var e=0;e<n.length;){if(n.charAt(e)===t)return[n.substring(0,e),n.substring(e+1)];e+=1}return null}function lL(n){var t=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],n.substring(t[0].length)]}var Mc,ym,vm,fd=["times"];(function(n){var t,e,i,r,s,o,a,l,u,f=function(T){return T=T||{},this.isStrokeTransparent=T.isStrokeTransparent||!1,this.strokeOpacity=T.strokeOpacity||1,this.strokeStyle=T.strokeStyle||"#000000",this.fillStyle=T.fillStyle||"#000000",this.isFillTransparent=T.isFillTransparent||!1,this.fillOpacity=T.fillOpacity||1,this.font=T.font||"10px sans-serif",this.textBaseline=T.textBaseline||"alphabetic",this.textAlign=T.textAlign||"left",this.lineWidth=T.lineWidth||1,this.lineJoin=T.lineJoin||"miter",this.lineCap=T.lineCap||"butt",this.path=T.path||[],this.transform=T.transform!==void 0?T.transform.clone():new l,this.globalCompositeOperation=T.globalCompositeOperation||"normal",this.globalAlpha=T.globalAlpha||1,this.clip_path=T.clip_path||[],this.currentPoint=T.currentPoint||new o,this.miterLimit=T.miterLimit||10,this.lastPoint=T.lastPoint||new o,this.lineDashOffset=T.lineDashOffset||0,this.lineDash=T.lineDash||[],this.margin=T.margin||[0,0,0,0],this.prevPageLastElemOffset=T.prevPageLastElemOffset||0,this.ignoreClearRect=typeof T.ignoreClearRect!="boolean"||T.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new d(this),t=this.internal.f2,e=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new f}]);var d=function(T){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=T;Object.defineProperty(this,"pdf",{get:function(){return H}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(Nt){Y=Boolean(Nt)}});var nt=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return nt},set:function(Nt){nt=Boolean(Nt)}});var dt=0;Object.defineProperty(this,"posX",{get:function(){return dt},set:function(Nt){isNaN(Nt)||(dt=Nt)}});var wt=0;Object.defineProperty(this,"posY",{get:function(){return wt},set:function(Nt){isNaN(Nt)||(wt=Nt)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Nt){var J;typeof Nt=="number"?J=[Nt,Nt,Nt,Nt]:((J=new Array(4))[0]=Nt[0],J[1]=Nt.length>=2?Nt[1]:J[0],J[2]=Nt.length>=3?Nt[2]:J[0],J[3]=Nt.length>=4?Nt[3]:J[1]),u.margin=J}});var _t=!1;Object.defineProperty(this,"autoPaging",{get:function(){return _t},set:function(Nt){_t=Nt}});var St=0;Object.defineProperty(this,"lastBreak",{get:function(){return St},set:function(Nt){St=Nt}});var bt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return bt},set:function(Nt){bt=Nt}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Nt){Nt instanceof f&&(u=Nt)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Nt){u.path=Nt}});var $t=[];Object.defineProperty(this,"ctxStack",{get:function(){return $t},set:function(Nt){$t=Nt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Nt){var J;J=y(Nt),this.ctx.fillStyle=J.style,this.ctx.isFillTransparent=J.a===0,this.ctx.fillOpacity=J.a,this.pdf.setFillColor(J.r,J.g,J.b,{a:J.a}),this.pdf.setTextColor(J.r,J.g,J.b,{a:J.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Nt){var J=y(Nt);this.ctx.strokeStyle=J.style,this.ctx.isStrokeTransparent=J.a===0,this.ctx.strokeOpacity=J.a,J.a===0?this.pdf.setDrawColor(255,255,255):(J.a,this.pdf.setDrawColor(J.r,J.g,J.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Nt){["butt","round","square"].indexOf(Nt)!==-1&&(this.ctx.lineCap=Nt,this.pdf.setLineCap(Nt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Nt){isNaN(Nt)||(this.ctx.lineWidth=Nt,this.pdf.setLineWidth(Nt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Nt){["bevel","round","miter"].indexOf(Nt)!==-1&&(this.ctx.lineJoin=Nt,this.pdf.setLineJoin(Nt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Nt){isNaN(Nt)||(this.ctx.miterLimit=Nt,this.pdf.setMiterLimit(Nt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Nt){this.ctx.textBaseline=Nt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Nt){["right","end","center","left","start"].indexOf(Nt)!==-1&&(this.ctx.textAlign=Nt)}});var Jt=null;function Ht(Nt,J){if(Jt===null){var Ce=function(Zt){var Wt=[];return Object.keys(Zt).forEach(function(Kt){Zt[Kt].forEach(function(ee){var Gt=null;switch(ee){case"bold":Gt={family:Kt,weight:"bold"};break;case"italic":Gt={family:Kt,style:"italic"};break;case"bolditalic":Gt={family:Kt,weight:"bold",style:"italic"};break;case"":case"normal":Gt={family:Kt}}Gt!==null&&(Gt.ref={name:Kt,style:ee},Wt.push(Gt))})}),Wt}(Nt.getFontList());Jt=function(Zt){for(var Wt={},Kt=0;Kt<Zt.length;++Kt){var ee=ap(Zt[Kt]),Gt=ee.family,le=ee.stretch,ie=ee.style,kt=ee.weight;Wt[Gt]=Wt[Gt]||{},Wt[Gt][le]=Wt[Gt][le]||{},Wt[Gt][le][ie]=Wt[Gt][le][ie]||{},Wt[Gt][le][ie][kt]=ee}return Wt}(Ce.concat(J))}return Jt}var ye=null;Object.defineProperty(this,"fontFaces",{get:function(){return ye},set:function(Nt){Jt=null,ye=Nt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Nt){var J;if(this.ctx.font=Nt,(J=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Nt))!==null){var Ce=J[1],Zt=(J[2],J[3]),Wt=J[4],Kt=(J[5],J[6]),ee=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Wt)[2];Wt=Math.floor(ee==="px"?parseFloat(Wt)*this.pdf.internal.scaleFactor:ee==="em"?parseFloat(Wt)*this.pdf.getFontSize():parseFloat(Wt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Wt);var Gt=function(re){var _e,qt,Ke=[],we=re.trim();if(we==="")return fd;if(we in pm)return[pm[we]];for(;we!=="";){switch(qt=null,_e=(we=mm(we)).charAt(0)){case'"':case"'":qt=aL(we.substring(1),_e);break;default:qt=lL(we)}if(qt===null||(Ke.push(qt[0]),(we=mm(qt[1]))!==""&&we.charAt(0)!==","))return fd;we=we.replace(/^,/,"")}return Ke}(Kt);if(this.fontFaces){var le=oL(Ht(this.pdf,this.fontFaces),Gt.map(function(re){return{family:re,stretch:"normal",weight:Zt,style:Ce}}));this.pdf.setFont(le.ref.name,le.ref.style)}else{var ie="";(Zt==="bold"||parseInt(Zt,10)>=700||Ce==="bold")&&(ie="bold"),Ce==="italic"&&(ie+="italic"),ie.length===0&&(ie="normal");for(var kt="",ne={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},me=0;me<Gt.length;me++){if(this.pdf.internal.getFont(Gt[me],ie,{noFallback:!0,disableWarning:!0})!==void 0){kt=Gt[me];break}if(ie==="bolditalic"&&this.pdf.internal.getFont(Gt[me],"bold",{noFallback:!0,disableWarning:!0})!==void 0)kt=Gt[me],ie="bold";else if(this.pdf.internal.getFont(Gt[me],"normal",{noFallback:!0,disableWarning:!0})!==void 0){kt=Gt[me],ie="normal";break}}if(kt===""){for(var de=0;de<Gt.length;de++)if(ne[Gt[de]]){kt=ne[Gt[de]];break}}kt=kt===""?"Times":kt,this.pdf.setFont(kt,ie)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Nt){this.ctx.globalCompositeOperation=Nt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Nt){this.ctx.globalAlpha=Nt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Nt){this.ctx.lineDashOffset=Nt,Yt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Nt){this.ctx.lineDash=Nt,Yt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Nt){this.ctx.ignoreClearRect=Boolean(Nt)}})};d.prototype.setLineDash=function(T){this.lineDash=T},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){G.call(this,"fill",!1)},d.prototype.stroke=function(){G.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(T,H){if(isNaN(T)||isNaN(H))throw Bn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new o(T,H));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(T,H)},d.prototype.closePath=function(){var T=new o(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&Pn(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){T=new o(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(T.x,T.y)},d.prototype.lineTo=function(T,H){if(isNaN(T)||isNaN(H))throw Bn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new o(T,H));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(Y.x,Y.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),G.call(this,null,!0)},d.prototype.quadraticCurveTo=function(T,H,Y,nt){if(isNaN(Y)||isNaN(nt)||isNaN(T)||isNaN(H))throw Bn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var dt=this.ctx.transform.applyToPoint(new o(Y,nt)),wt=this.ctx.transform.applyToPoint(new o(T,H));this.path.push({type:"qct",x1:wt.x,y1:wt.y,x:dt.x,y:dt.y}),this.ctx.lastPoint=new o(dt.x,dt.y)},d.prototype.bezierCurveTo=function(T,H,Y,nt,dt,wt){if(isNaN(dt)||isNaN(wt)||isNaN(T)||isNaN(H)||isNaN(Y)||isNaN(nt))throw Bn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var _t=this.ctx.transform.applyToPoint(new o(dt,wt)),St=this.ctx.transform.applyToPoint(new o(T,H)),bt=this.ctx.transform.applyToPoint(new o(Y,nt));this.path.push({type:"bct",x1:St.x,y1:St.y,x2:bt.x,y2:bt.y,x:_t.x,y:_t.y}),this.ctx.lastPoint=new o(_t.x,_t.y)},d.prototype.arc=function(T,H,Y,nt,dt,wt){if(isNaN(T)||isNaN(H)||isNaN(Y)||isNaN(nt)||isNaN(dt))throw Bn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(wt=Boolean(wt),!this.ctx.transform.isIdentity){var _t=this.ctx.transform.applyToPoint(new o(T,H));T=_t.x,H=_t.y;var St=this.ctx.transform.applyToPoint(new o(0,Y)),bt=this.ctx.transform.applyToPoint(new o(0,0));Y=Math.sqrt(Math.pow(St.x-bt.x,2)+Math.pow(St.y-bt.y,2))}Math.abs(dt-nt)>=2*Math.PI&&(nt=0,dt=2*Math.PI),this.path.push({type:"arc",x:T,y:H,radius:Y,startAngle:nt,endAngle:dt,counterclockwise:wt})},d.prototype.arcTo=function(T,H,Y,nt,dt){throw new Error("arcTo not implemented.")},d.prototype.rect=function(T,H,Y,nt){if(isNaN(T)||isNaN(H)||isNaN(Y)||isNaN(nt))throw Bn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(T,H),this.lineTo(T+Y,H),this.lineTo(T+Y,H+nt),this.lineTo(T,H+nt),this.lineTo(T,H),this.lineTo(T+Y,H),this.lineTo(T,H)},d.prototype.fillRect=function(T,H,Y,nt){if(isNaN(T)||isNaN(H)||isNaN(Y)||isNaN(nt))throw Bn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var dt={};this.lineCap!=="butt"&&(dt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(dt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(T,H,Y,nt),this.fill(),dt.hasOwnProperty("lineCap")&&(this.lineCap=dt.lineCap),dt.hasOwnProperty("lineJoin")&&(this.lineJoin=dt.lineJoin)}},d.prototype.strokeRect=function(T,H,Y,nt){if(isNaN(T)||isNaN(H)||isNaN(Y)||isNaN(nt))throw Bn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");w.call(this)||(this.beginPath(),this.rect(T,H,Y,nt),this.stroke())},d.prototype.clearRect=function(T,H,Y,nt){if(isNaN(T)||isNaN(H)||isNaN(Y)||isNaN(nt))throw Bn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(T,H,Y,nt))},d.prototype.save=function(T){T=typeof T!="boolean"||T;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),T){this.ctx.fontSize=this.pdf.internal.getFontSize();var nt=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=nt}},d.prototype.restore=function(T){T=typeof T!="boolean"||T;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(H),T&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(T){var H,Y,nt,dt;if(T.isCanvasGradient===!0&&(T=T.getColor()),!T)return{r:0,g:0,b:0,a:0,style:T};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(T))H=0,Y=0,nt=0,dt=0;else{var wt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(T);if(wt!==null)H=parseInt(wt[1]),Y=parseInt(wt[2]),nt=parseInt(wt[3]),dt=1;else if((wt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(T))!==null)H=parseInt(wt[1]),Y=parseInt(wt[2]),nt=parseInt(wt[3]),dt=parseFloat(wt[4]);else{if(dt=1,typeof T=="string"&&T.charAt(0)!=="#"){var _t=new f5(T);T=_t.ok?_t.toHex():"#000000"}T.length===4?(H=T.substring(1,2),H+=H,Y=T.substring(2,3),Y+=Y,nt=T.substring(3,4),nt+=nt):(H=T.substring(1,3),Y=T.substring(3,5),nt=T.substring(5,7)),H=parseInt(H,16),Y=parseInt(Y,16),nt=parseInt(nt,16)}}return{r:H,g:Y,b:nt,a:dt,style:T}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},w=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(T,H,Y,nt){if(isNaN(H)||isNaN(Y)||typeof T!="string")throw Bn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(nt=isNaN(nt)?void 0:nt,!m.call(this)){var dt=ct(this.ctx.transform.rotation),wt=this.ctx.transform.scaleX;F.call(this,{text:T,x:H,y:Y,scale:wt,angle:dt,align:this.textAlign,maxWidth:nt})}},d.prototype.strokeText=function(T,H,Y,nt){if(isNaN(H)||isNaN(Y)||typeof T!="string")throw Bn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!w.call(this)){nt=isNaN(nt)?void 0:nt;var dt=ct(this.ctx.transform.rotation),wt=this.ctx.transform.scaleX;F.call(this,{text:T,x:H,y:Y,scale:wt,renderingMode:"stroke",angle:dt,align:this.textAlign,maxWidth:nt})}},d.prototype.measureText=function(T){if(typeof T!="string")throw Bn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,Y=this.pdf.internal.scaleFactor,nt=H.internal.getFontSize(),dt=H.getStringUnitWidth(T)*nt/H.internal.scaleFactor,wt=function(_t){var St=(_t=_t||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return St}}),this};return new wt({width:dt*=Math.round(96*Y/72*1e4)/1e4})},d.prototype.scale=function(T,H){if(isNaN(T)||isNaN(H))throw Bn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new l(T,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},d.prototype.rotate=function(T){if(isNaN(T))throw Bn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new l(Math.cos(T),Math.sin(T),-Math.sin(T),Math.cos(T),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},d.prototype.translate=function(T,H){if(isNaN(T)||isNaN(H))throw Bn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new l(1,0,0,1,T,H);this.ctx.transform=this.ctx.transform.multiply(Y)},d.prototype.transform=function(T,H,Y,nt,dt,wt){if(isNaN(T)||isNaN(H)||isNaN(Y)||isNaN(nt)||isNaN(dt)||isNaN(wt))throw Bn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var _t=new l(T,H,Y,nt,dt,wt);this.ctx.transform=this.ctx.transform.multiply(_t)},d.prototype.setTransform=function(T,H,Y,nt,dt,wt){T=isNaN(T)?1:T,H=isNaN(H)?0:H,Y=isNaN(Y)?0:Y,nt=isNaN(nt)?1:nt,dt=isNaN(dt)?0:dt,wt=isNaN(wt)?0:wt,this.ctx.transform=new l(T,H,Y,nt,dt,wt)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(T,H,Y,nt,dt,wt,_t,St,bt){var $t=this.pdf.getImageProperties(T),Jt=1,Ht=1,ye=1,Nt=1;nt!==void 0&&St!==void 0&&(ye=St/nt,Nt=bt/dt,Jt=$t.width/nt*St/nt,Ht=$t.height/dt*bt/dt),wt===void 0&&(wt=H,_t=Y,H=0,Y=0),nt!==void 0&&St===void 0&&(St=nt,bt=dt),nt===void 0&&St===void 0&&(St=$t.width,bt=$t.height);for(var J,Ce=this.ctx.transform.decompose(),Zt=ct(Ce.rotate.shx),Wt=new l,Kt=(Wt=(Wt=(Wt=Wt.multiply(Ce.translate)).multiply(Ce.skew)).multiply(Ce.scale)).applyToRectangle(new a(wt-H*ye,_t-Y*Nt,nt*Jt,dt*Ht)),ee=L.call(this,Kt),Gt=[],le=0;le<ee.length;le+=1)Gt.indexOf(ee[le])===-1&&Gt.push(ee[le]);if(j(Gt),this.autoPaging)for(var ie=Gt[0],kt=Gt[Gt.length-1],ne=ie;ne<kt+1;ne++){this.pdf.setPage(ne);var me=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],de=ne===1?this.posY+this.margin[0]:this.margin[0],re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_e=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],qt=ne===1?0:re+(ne-2)*_e;if(this.ctx.clip_path.length!==0){var Ke=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(J,this.posX+this.margin[3],-qt+de+this.ctx.prevPageLastElemOffset),Z.call(this,"fill",!0),this.path=Ke}var we=JSON.parse(JSON.stringify(Kt));we=I([we],this.posX+this.margin[3],-qt+de+this.ctx.prevPageLastElemOffset)[0];var on=(ne>ie||ne<kt)&&S.call(this);on&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],me,_e,null).clip().discardPath()),this.pdf.addImage(T,"JPEG",we.x,we.y,we.w,we.h,null,null,Zt),on&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(T,"JPEG",Kt.x,Kt.y,Kt.w,Kt.h,null,null,Zt)};var L=function(T,H,Y){var nt=[];H=H||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var dt=this.posY+this.ctx.prevPageLastElemOffset;switch(T.type){default:case"mt":case"lt":nt.push(Math.floor((T.y+dt)/Y)+1);break;case"arc":nt.push(Math.floor((T.y+dt-T.radius)/Y)+1),nt.push(Math.floor((T.y+dt+T.radius)/Y)+1);break;case"qct":var wt=Et(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x,T.y);nt.push(Math.floor((wt.y+dt)/Y)+1),nt.push(Math.floor((wt.y+wt.h+dt)/Y)+1);break;case"bct":var _t=ot(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x2,T.y2,T.x,T.y);nt.push(Math.floor((_t.y+dt)/Y)+1),nt.push(Math.floor((_t.y+_t.h+dt)/Y)+1);break;case"rect":nt.push(Math.floor((T.y+dt)/Y)+1),nt.push(Math.floor((T.y+T.h+dt)/Y)+1)}for(var St=0;St<nt.length;St+=1)for(;this.pdf.internal.getNumberOfPages()<nt[St];)E.call(this);return nt},E=function(){var T=this.fillStyle,H=this.strokeStyle,Y=this.font,nt=this.lineCap,dt=this.lineWidth,wt=this.lineJoin;this.pdf.addPage(),this.fillStyle=T,this.strokeStyle=H,this.font=Y,this.lineCap=nt,this.lineWidth=dt,this.lineJoin=wt},I=function(T,H,Y){for(var nt=0;nt<T.length;nt++)switch(T[nt].type){case"bct":T[nt].x2+=H,T[nt].y2+=Y;case"qct":T[nt].x1+=H,T[nt].y1+=Y;case"mt":case"lt":case"arc":default:T[nt].x+=H,T[nt].y+=Y}return T},j=function(T){return T.sort(function(H,Y){return H-Y})},G=function(T,H){for(var Y,nt,dt=this.fillStyle,wt=this.strokeStyle,_t=this.lineCap,St=this.lineWidth,bt=Math.abs(St*this.ctx.transform.scaleX),$t=this.lineJoin,Jt=JSON.parse(JSON.stringify(this.path)),Ht=JSON.parse(JSON.stringify(this.path)),ye=[],Nt=0;Nt<Ht.length;Nt++)if(Ht[Nt].x!==void 0)for(var J=L.call(this,Ht[Nt]),Ce=0;Ce<J.length;Ce+=1)ye.indexOf(J[Ce])===-1&&ye.push(J[Ce]);for(var Zt=0;Zt<ye.length;Zt++)for(;this.pdf.internal.getNumberOfPages()<ye[Zt];)E.call(this);if(j(ye),this.autoPaging)for(var Wt=ye[0],Kt=ye[ye.length-1],ee=Wt;ee<Kt+1;ee++){this.pdf.setPage(ee),this.fillStyle=dt,this.strokeStyle=wt,this.lineCap=_t,this.lineWidth=bt,this.lineJoin=$t;var Gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],le=ee===1?this.posY+this.margin[0]:this.margin[0],ie=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ne=ee===1?0:ie+(ee-2)*kt;if(this.ctx.clip_path.length!==0){var me=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(Y,this.posX+this.margin[3],-ne+le+this.ctx.prevPageLastElemOffset),Z.call(this,T,!0),this.path=me}if(nt=JSON.parse(JSON.stringify(Jt)),this.path=I(nt,this.posX+this.margin[3],-ne+le+this.ctx.prevPageLastElemOffset),H===!1||ee===0){var de=(ee>Wt||ee<Kt)&&S.call(this);de&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Gt,kt,null).clip().discardPath()),Z.call(this,T,H),de&&this.pdf.restoreGraphicsState()}this.lineWidth=St}else this.lineWidth=bt,Z.call(this,T,H),this.lineWidth=St;this.path=Jt},Z=function(T,H){if((T!=="stroke"||H||!w.call(this))&&(T==="stroke"||H||!m.call(this))){for(var Y,nt,dt=[],wt=this.path,_t=0;_t<wt.length;_t++){var St=wt[_t];switch(St.type){case"begin":dt.push({begin:!0});break;case"close":dt.push({close:!0});break;case"mt":dt.push({start:St,deltas:[],abs:[]});break;case"lt":var bt=dt.length;if(wt[_t-1]&&!isNaN(wt[_t-1].x)&&(Y=[St.x-wt[_t-1].x,St.y-wt[_t-1].y],bt>0)){for(;bt>=0;bt--)if(dt[bt-1].close!==!0&&dt[bt-1].begin!==!0){dt[bt-1].deltas.push(Y),dt[bt-1].abs.push(St);break}}break;case"bct":Y=[St.x1-wt[_t-1].x,St.y1-wt[_t-1].y,St.x2-wt[_t-1].x,St.y2-wt[_t-1].y,St.x-wt[_t-1].x,St.y-wt[_t-1].y],dt[dt.length-1].deltas.push(Y);break;case"qct":var $t=wt[_t-1].x+2/3*(St.x1-wt[_t-1].x),Jt=wt[_t-1].y+2/3*(St.y1-wt[_t-1].y),Ht=St.x+2/3*(St.x1-St.x),ye=St.y+2/3*(St.y1-St.y),Nt=St.x,J=St.y;Y=[$t-wt[_t-1].x,Jt-wt[_t-1].y,Ht-wt[_t-1].x,ye-wt[_t-1].y,Nt-wt[_t-1].x,J-wt[_t-1].y],dt[dt.length-1].deltas.push(Y);break;case"arc":dt.push({deltas:[],abs:[],arc:!0}),Array.isArray(dt[dt.length-1].abs)&&dt[dt.length-1].abs.push(St)}}nt=H?null:T==="stroke"?"stroke":"fill";for(var Ce=!1,Zt=0;Zt<dt.length;Zt++)if(dt[Zt].arc)for(var Wt=dt[Zt].abs,Kt=0;Kt<Wt.length;Kt++){var ee=Wt[Kt];ee.type==="arc"?B.call(this,ee.x,ee.y,ee.radius,ee.startAngle,ee.endAngle,ee.counterclockwise,void 0,H,!Ce):V.call(this,ee.x,ee.y),Ce=!0}else if(dt[Zt].close===!0)this.pdf.internal.out("h"),Ce=!1;else if(dt[Zt].begin!==!0){var Gt=dt[Zt].start.x,le=dt[Zt].start.y;W.call(this,dt[Zt].deltas,Gt,le),Ce=!0}nt&&it.call(this,nt),H&&mt.call(this)}},at=function(T){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return T-Y;case"top":return T+H-Y;case"hanging":return T+H-2*Y;case"middle":return T+H/2-Y;case"ideographic":return T;case"alphabetic":default:return T}},v=function(T){return T+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var T=function(){};return T.colorStops=[],T.addColorStop=function(H,Y){this.colorStops.push([H,Y])},T.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},T.isCanvasGradient=!0,T},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var B=function(T,H,Y,nt,dt,wt,_t,St,bt){for(var $t=st.call(this,Y,nt,dt,wt),Jt=0;Jt<$t.length;Jt++){var Ht=$t[Jt];Jt===0&&(bt?q.call(this,Ht.x1+T,Ht.y1+H):V.call(this,Ht.x1+T,Ht.y1+H)),et.call(this,T,H,Ht.x2,Ht.y2,Ht.x3,Ht.y3,Ht.x4,Ht.y4)}St?mt.call(this):it.call(this,_t)},it=function(T){switch(T){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},mt=function(){this.pdf.clip(),this.pdf.discardPath()},q=function(T,H){this.pdf.internal.out(e(T)+" "+i(H)+" m")},F=function(T){var H;switch(T.align){case"right":case"end":H="right";break;case"center":H="center";break;case"left":case"start":default:H="left"}var Y=this.pdf.getTextDimensions(T.text),nt=at.call(this,T.y),dt=v.call(this,nt)-Y.h,wt=this.ctx.transform.applyToPoint(new o(T.x,nt)),_t=this.ctx.transform.decompose(),St=new l;St=(St=(St=St.multiply(_t.translate)).multiply(_t.skew)).multiply(_t.scale);for(var bt,$t,Jt,Ht=this.ctx.transform.applyToRectangle(new a(T.x,nt,Y.w,Y.h)),ye=St.applyToRectangle(new a(T.x,dt,Y.w,Y.h)),Nt=L.call(this,ye),J=[],Ce=0;Ce<Nt.length;Ce+=1)J.indexOf(Nt[Ce])===-1&&J.push(Nt[Ce]);if(j(J),this.autoPaging)for(var Zt=J[0],Wt=J[J.length-1],Kt=Zt;Kt<Wt+1;Kt++){this.pdf.setPage(Kt);var ee=Kt===1?this.posY+this.margin[0]:this.margin[0],Gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],le=this.pdf.internal.pageSize.height-this.margin[2],ie=le-this.margin[0],kt=this.pdf.internal.pageSize.width-this.margin[1],ne=kt-this.margin[3],me=Kt===1?0:Gt+(Kt-2)*ie;if(this.ctx.clip_path.length!==0){var de=this.path;bt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(bt,this.posX+this.margin[3],-1*me+ee),Z.call(this,"fill",!0),this.path=de}var re=I([JSON.parse(JSON.stringify(ye))],this.posX+this.margin[3],-me+ee+this.ctx.prevPageLastElemOffset)[0];T.scale>=.01&&($t=this.pdf.internal.getFontSize(),this.pdf.setFontSize($t*T.scale),Jt=this.lineWidth,this.lineWidth=Jt*T.scale);var _e=this.autoPaging!=="text";if(_e||re.y+re.h<=le){if(_e||re.y>=ee&&re.x<=kt){var qt=_e?T.text:this.pdf.splitTextToSize(T.text,T.maxWidth||kt-re.x)[0],Ke=I([JSON.parse(JSON.stringify(Ht))],this.posX+this.margin[3],-me+ee+this.ctx.prevPageLastElemOffset)[0],we=_e&&(Kt>Zt||Kt<Wt)&&S.call(this);we&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ne,ie,null).clip().discardPath()),this.pdf.text(qt,Ke.x,Ke.y,{angle:T.angle,align:H,renderingMode:T.renderingMode}),we&&this.pdf.restoreGraphicsState()}}else re.y<le&&(this.ctx.prevPageLastElemOffset+=le-re.y);T.scale>=.01&&(this.pdf.setFontSize($t),this.lineWidth=Jt)}else T.scale>=.01&&($t=this.pdf.internal.getFontSize(),this.pdf.setFontSize($t*T.scale),Jt=this.lineWidth,this.lineWidth=Jt*T.scale),this.pdf.text(T.text,wt.x+this.posX,wt.y+this.posY,{angle:T.angle,align:H,renderingMode:T.renderingMode,maxWidth:T.maxWidth}),T.scale>=.01&&(this.pdf.setFontSize($t),this.lineWidth=Jt)},V=function(T,H,Y,nt){Y=Y||0,nt=nt||0,this.pdf.internal.out(e(T+Y)+" "+i(H+nt)+" l")},W=function(T,H,Y){return this.pdf.lines(T,H,Y,null,null)},et=function(T,H,Y,nt,dt,wt,_t,St){this.pdf.internal.out([t(r(Y+T)),t(s(nt+H)),t(r(dt+T)),t(s(wt+H)),t(r(_t+T)),t(s(St+H)),"c"].join(" "))},st=function(T,H,Y,nt){for(var dt=2*Math.PI,wt=Math.PI/2;H>Y;)H-=dt;var _t=Math.abs(Y-H);_t<dt&&nt&&(_t=dt-_t);for(var St=[],bt=nt?-1:1,$t=H;_t>1e-5;){var Jt=$t+bt*Math.min(_t,wt);St.push(lt.call(this,T,$t,Jt)),_t-=Math.abs(Jt-$t),$t=Jt}return St},lt=function(T,H,Y){var nt=(Y-H)/2,dt=T*Math.cos(nt),wt=T*Math.sin(nt),_t=dt,St=-wt,bt=_t*_t+St*St,$t=bt+_t*dt+St*wt,Jt=4/3*(Math.sqrt(2*bt*$t)-$t)/(_t*wt-St*dt),Ht=_t-Jt*St,ye=St+Jt*_t,Nt=Ht,J=-ye,Ce=nt+H,Zt=Math.cos(Ce),Wt=Math.sin(Ce);return{x1:T*Math.cos(H),y1:T*Math.sin(H),x2:Ht*Zt-ye*Wt,y2:Ht*Wt+ye*Zt,x3:Nt*Zt-J*Wt,y3:Nt*Wt+J*Zt,x4:T*Math.cos(Y),y4:T*Math.sin(Y)}},ct=function(T){return 180*T/Math.PI},Et=function(T,H,Y,nt,dt,wt){var _t=T+.5*(Y-T),St=H+.5*(nt-H),bt=dt+.5*(Y-dt),$t=wt+.5*(nt-wt),Jt=Math.min(T,dt,_t,bt),Ht=Math.max(T,dt,_t,bt),ye=Math.min(H,wt,St,$t),Nt=Math.max(H,wt,St,$t);return new a(Jt,ye,Ht-Jt,Nt-ye)},ot=function(T,H,Y,nt,dt,wt,_t,St){var bt,$t,Jt,Ht,ye,Nt,J,Ce,Zt,Wt,Kt,ee,Gt,le,ie=Y-T,kt=nt-H,ne=dt-Y,me=wt-nt,de=_t-dt,re=St-wt;for($t=0;$t<41;$t++)Zt=(J=(Jt=T+(bt=$t/40)*ie)+bt*((ye=Y+bt*ne)-Jt))+bt*(ye+bt*(dt+bt*de-ye)-J),Wt=(Ce=(Ht=H+bt*kt)+bt*((Nt=nt+bt*me)-Ht))+bt*(Nt+bt*(wt+bt*re-Nt)-Ce),$t==0?(Kt=Zt,ee=Wt,Gt=Zt,le=Wt):(Kt=Math.min(Kt,Zt),ee=Math.min(ee,Wt),Gt=Math.max(Gt,Zt),le=Math.max(le,Wt));return new a(Math.round(Kt),Math.round(ee),Math.round(Gt-Kt),Math.round(le-ee))},Yt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var T,H,Y=(T=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:T,lineDashOffset:H}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(Me.API),function(n){var t=function(s){var o,a,l,u,f,d,y,m,w,S;for(/[^\x00-\xFF]/.test(s),a=[],l=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(f=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(d=(f=((f=((f=((f=(f-(S=f%85))/85)-(w=f%85))/85)-(m=f%85))/85)-(y=f%85))/85)%85,a.push(d+33,y+33,m+33,w+33,S+33)):a.push(122);return function(L,E){for(var I=E;I>0;I--)L.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},e=function(s){var o,a,l,u,f,d=String,y="length",m=255,w="charCodeAt",S="slice",L="replace";for(s[S](-2),s=s[S](0,-2)[L](/\s/g,"")[L]("z","!!!!!"),l=[],u=0,f=(s+=o="uuuuu"[S](s[y]%5||5))[y];f>u;u+=5)a=52200625*(s[w](u)-33)+614125*(s[w](u+1)-33)+7225*(s[w](u+2)-33)+85*(s[w](u+3)-33)+(s[w](u+4)-33),l.push(m&a>>24,m&a>>16,m&a>>8,m&a);return function(E,I){for(var j=I;j>0;j--)E.pop()}(l,o[y]),d.fromCharCode.apply(d,l)},i=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},r=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=ep(o)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,o){var a=0,l=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=e(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=r(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(Me.API),function(n){n.loadFile=function(t,e,i){return function(r,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,u,f){var d=new XMLHttpRequest,y=0,m=function(w){var S=w.length,L=[],E=String.fromCharCode;for(y=0;y<S;y+=1)L.push(E(255&w.charCodeAt(y)));return L.join("")};if(d.open("GET",l,!u),d.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(d.onload=function(){d.status===200?f(m(this.responseText)):f(void 0)}),d.send(null),u&&d.status===200)return m(d.responseText)}(r,s,o)}catch{}return a}(t,e,i)},n.loadImageFile=n.loadFile}(Me.API),function(n){function t(){return(ze.html2canvas?Promise.resolve(ze.html2canvas):Kd(()=>import("./html2canvas.esm.0eae2bf4.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function e(){return(ze.DOMPurify?Promise.resolve(ze.DOMPurify):Kd(()=>import("./purify.es.a8a3dac7.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var i=function(o){var a=Pn(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},r=function(o,a){var l=document.createElement(o);for(var u in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[u]=a.style[u];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(i(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(e).then(function(l){return this.set({src:r("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(u,f){for(var d=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),y=u.firstChild;y;y=y.nextSibling)f!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||d.appendChild(l(y,f));return u.nodeType===1&&(u.nodeName==="CANVAS"?(d.width=u.width,d.height=u.height,d.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(d.value=u.value),d.addEventListener("load",function(){d.scrollTop=u.scrollTop,d.scrollLeft=u.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(a){var l=this.opt.jsPDF,u=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var y=0;y<u.length;++y){var m=u[y],w=m.src.find(function(S){return S.format==="truetype"});w&&l.addFont(w.url,m.ref.name,m.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,l.context2d.save(!0),a(this.prop.container,d)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(i(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(i(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(o=o||Me.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,u){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,u){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(u,f){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(d){return l.updateProgress(null,u),d}).then(u,f).then(function(d){return l.updateProgress(1),d})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),f=l.call(u,o,a);return s.convert(f,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Me.getPageSize=function(o,a,l){if(Pn(o)==="object"){var u=o;o=u.orientation,a=u.unit||a,l=u.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var f,d=(""+l).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+a}var m,w=0,S=0;if(y.hasOwnProperty(d))w=y[d][1]/f,S=y[d][0]/f;else try{w=l[1],S=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",S>w&&(m=S,S=w,w=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",w>S&&(m=S,S=w,w=m)}return{width:S,height:w,unit:a,k:f,orientation:o}},n.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(ap):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(Me.API),Me.API.addJS=function(n){return vm=n,this.internal.events.subscribe("postPutResources",function(){Mc=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Mc+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ym=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+vm+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Mc!==void 0&&ym!==void 0&&this.internal.out("/Names <</JavaScript "+Mc+" 0 R>>")}),this},function(n){var t;n.events.push(["postPutResources",function(){var e=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),s=0;s<r.length;s++){var o=r[s],a=i.exec(o);if(a!=null){var l=a[1];e.internal.newObjectDeferredBegin(l,!1)}e.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,f=[];for(s=0;s<u;s++){var d=e.internal.newObject();f.push(d);var y=e.internal.getPageInfo(s+1);e.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var m=e.internal.newObject();for(e.internal.write("<< /Names [ "),s=0;s<f.length;s++)e.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+m+" 0 R"),e.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),n.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(i,r,s){var o={title:r,options:s,children:[]};return i==null&&(i=this.root),i.children.push(o),o},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(i){i.id=e.internal.newObjectDeferred();for(var r=0;r<i.children.length;r++)this.genIds_r(i.children[r])},e.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},e.outline.renderItems=function(i){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<i.children.length;s++){var o=i.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(i)),s>0&&this.line("/Prev "+this.makeRef(i.children[s-1])),s<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=e.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var u=0;u<i.children.length;u++)this.renderItems(i.children[u])},e.outline.line=function(i){this.ctx.val+=i+`\r
`},e.outline.makeRef=function(i){return i.id+" 0 R"},e.outline.makeString=function(i){return"("+e.internal.pdfEscape(i)+")"},e.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(i,r){for(var s=0;s<r.children.length;s++)i.count++,this.count_r(i,r.children[s]);return i.count}}])}(Me.API),function(n){var t=[192,193,194,195,196,197,198,199];n.processJPEG=function(e,i,r,s,o,a){var l,u=this.decode.DCT_DECODE,f=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=o||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(l=function(d){for(var y,m=256*d.charCodeAt(4)+d.charCodeAt(5),w=d.length,S={width:0,height:0,numcomponents:1},L=4;L<w;L+=2){if(L+=m,t.indexOf(d.charCodeAt(L+1))!==-1){y=256*d.charCodeAt(L+5)+d.charCodeAt(L+6),S={width:256*d.charCodeAt(L+7)+d.charCodeAt(L+8),height:y,numcomponents:d.charCodeAt(L+9)};break}m=256*d.charCodeAt(L+2)+d.charCodeAt(L+3)}return S}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}f={data:e,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:i,alias:r}}return f}}(Me.API);var Xa,Oc,_m,bm,wm,uL=function(){var n,t,e;function i(s){var o,a,l,u,f,d,y,m,w,S,L,E,I,j;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(o=this.readUInt32(),w=function(){var G,Z;for(Z=[],G=0;G<4;++G)Z.push(String.fromCharCode(this.data[this.pos++]));return Z}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),u=this.readUInt16()||100,d.delay=1e3*f/u,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(w==="fdAT"&&(this.pos+=4,o-=4),s=(d!=null?d.data:void 0)||this.imgData,E=0;0<=o?E<o:E>o;0<=o?++E:--E)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((S=l-this.transparency.indexed.length)>0)for(I=0;0<=S?I<S:I>S;0<=S?++I:--I)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":y=(L=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,L.slice(0,y)),this.text[m]=String.fromCharCode.apply(String,L.slice(y+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(j=this.colorType)===4||j===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function f(d,y,m,w){var S,L,E,I,j,G,Z,at,v,B,it,mt,q,F,V,W,et,st,lt,ct,Et,ot=Math.ceil((u.width-d)/m),Yt=Math.ceil((u.height-y)/w),T=u.width==ot&&u.height==Yt;for(F=o*ot,mt=T?a:new Uint8Array(F*Yt),G=s.length,q=0,L=0;q<Yt&&l<G;){switch(s[l++]){case 0:for(I=et=0;et<F;I=et+=1)mt[L++]=s[l++];break;case 1:for(I=st=0;st<F;I=st+=1)S=s[l++],j=I<o?0:mt[L-o],mt[L++]=(S+j)%256;break;case 2:for(I=lt=0;lt<F;I=lt+=1)S=s[l++],E=(I-I%o)/o,V=q&&mt[(q-1)*F+E*o+I%o],mt[L++]=(V+S)%256;break;case 3:for(I=ct=0;ct<F;I=ct+=1)S=s[l++],E=(I-I%o)/o,j=I<o?0:mt[L-o],V=q&&mt[(q-1)*F+E*o+I%o],mt[L++]=(S+Math.floor((j+V)/2))%256;break;case 4:for(I=Et=0;Et<F;I=Et+=1)S=s[l++],E=(I-I%o)/o,j=I<o?0:mt[L-o],q===0?V=W=0:(V=mt[(q-1)*F+E*o+I%o],W=E&&mt[(q-1)*F+(E-1)*o+I%o]),Z=j+V-W,at=Math.abs(Z-j),B=Math.abs(Z-V),it=Math.abs(Z-W),v=at<=B&&at<=it?j:B<=it?V:W,mt[L++]=(S+v)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!T){var H=((y+q*w)*u.width+d)*o,Y=q*F;for(I=0;I<ot;I+=1){for(var nt=0;nt<o;nt+=1)a[H++]=mt[Y++];H+=(m-1)*o}}q++}}return s=GA(s),u.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),a},i.prototype.decodePalette=function(){var s,o,a,l,u,f,d,y,m;for(a=this.palette,f=this.transparency.indexed||[],u=new Uint8Array((f.length||0)+a.length),l=0,s=0,o=d=0,y=a.length;d<y;o=d+=3)u[l++]=a[o],u[l++]=a[o+1],u[l++]=a[o+2],u[l++]=(m=f[s++])!=null?m:255;return u},i.prototype.copyToImageData=function(s,o){var a,l,u,f,d,y,m,w,S,L,E;if(l=this.colors,S=null,a=this.hasAlphaChannel,this.palette.length&&(S=(E=this._decodedPalette)!=null?E:this._decodedPalette=this.decodePalette(),l=4,a=!0),w=(u=s.data||s).length,d=S||o,f=y=0,l===1)for(;f<w;)m=S?4*o[f/4]:y,L=d[m++],u[f++]=L,u[f++]=L,u[f++]=L,u[f++]=a?d[m++]:255,y=m;else for(;f<w;)m=S?4*o[f/4]:y,u[f++]=d[m++],u[f++]=d[m++],u[f++]=d[m++],u[f++]=a?d[m++]:255,y=m},i.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var r=function(){if(Object.prototype.toString.call(ze)==="[object Window]"){try{t=ze.document.createElement("canvas"),e=t.getContext("2d")}catch{return!1}return!0}return!1};return r(),n=function(s){var o;if(r()===!0)return e.width=s.width,e.height=s.height,e.clearRect(0,0,s.width,s.height),e.putImageData(s,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(s){var o,a,l,u,f,d,y,m;if(this.animation){for(m=[],a=f=0,d=(y=this.animation.frames).length;f<d;a=++f)o=y[a],l=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,u),o.imageData=l,m.push(o.image=n(l));return m}},i.prototype.renderFrame=function(s,o){var a,l,u;return a=(l=this.animation.frames)[o],u=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},i.prototype.animate=function(s){var o,a,l,u,f,d,y=this;return a=0,d=this.animation,u=d.numFrames,l=d.frames,f=d.numPlays,(o=function(){var m,w;if(m=a++%u,w=l[m],y.renderFrame(s,m),u>1&&a/u<f)return y.animation._timeout=setTimeout(o,w.delay)})()},i.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},i.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function cL(n){var t=0;if(n[t++]!==71||n[t++]!==73||n[t++]!==70||n[t++]!==56||(n[t++]+1&253)!=56||n[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=n[t++]|n[t++]<<8,i=n[t++]|n[t++]<<8,r=n[t++],s=r>>7,o=1<<(7&r)+1;n[t++],n[t++];var a=null,l=null;s&&(a=t,l=o,t+=3*o);var u=!0,f=[],d=0,y=null,m=0,w=null;for(this.width=e,this.height=i;u&&t<n.length;)switch(n[t++]){case 33:switch(n[t++]){case 255:if(n[t]!==11||n[t+1]==78&&n[t+2]==69&&n[t+3]==84&&n[t+4]==83&&n[t+5]==67&&n[t+6]==65&&n[t+7]==80&&n[t+8]==69&&n[t+9]==50&&n[t+10]==46&&n[t+11]==48&&n[t+12]==3&&n[t+13]==1&&n[t+16]==0)t+=14,w=n[t++]|n[t++]<<8,t++;else for(t+=12;;){if(!((q=n[t++])>=0))throw Error("Invalid block size");if(q===0)break;t+=q}break;case 249:if(n[t++]!==4||n[t+4]!==0)throw new Error("Invalid graphics extension block.");var S=n[t++];d=n[t++]|n[t++]<<8,y=n[t++],(1&S)==0&&(y=null),m=S>>2&7,t++;break;case 254:for(;;){if(!((q=n[t++])>=0))throw Error("Invalid block size");if(q===0)break;t+=q}break;default:throw new Error("Unknown graphic control label: 0x"+n[t-1].toString(16))}break;case 44:var L=n[t++]|n[t++]<<8,E=n[t++]|n[t++]<<8,I=n[t++]|n[t++]<<8,j=n[t++]|n[t++]<<8,G=n[t++],Z=G>>6&1,at=1<<(7&G)+1,v=a,B=l,it=!1;G>>7&&(it=!0,v=t,B=at,t+=3*at);var mt=t;for(t++;;){var q;if(!((q=n[t++])>=0))throw Error("Invalid block size");if(q===0)break;t+=q}f.push({x:L,y:E,width:I,height:j,has_local_palette:it,palette_offset:v,palette_size:B,data_offset:mt,data_length:t-mt,transparent_index:y,interlaced:!!Z,delay:d,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return w},this.frameInfo=function(F){if(F<0||F>=f.length)throw new Error("Frame index out of range.");return f[F]},this.decodeAndBlitFrameBGRA=function(F,V){var W=this.frameInfo(F),et=W.width*W.height,st=new Uint8Array(et);xm(n,W.data_offset,st,et);var lt=W.palette_offset,ct=W.transparent_index;ct===null&&(ct=256);var Et=W.width,ot=e-Et,Yt=Et,T=4*(W.y*e+W.x),H=4*((W.y+W.height)*e+W.x),Y=T,nt=4*ot;W.interlaced===!0&&(nt+=4*e*7);for(var dt=8,wt=0,_t=st.length;wt<_t;++wt){var St=st[wt];if(Yt===0&&(Yt=Et,(Y+=nt)>=H&&(nt=4*ot+4*e*(dt-1),Y=T+(Et+ot)*(dt<<1),dt>>=1)),St===ct)Y+=4;else{var bt=n[lt+3*St],$t=n[lt+3*St+1],Jt=n[lt+3*St+2];V[Y++]=Jt,V[Y++]=$t,V[Y++]=bt,V[Y++]=255}--Yt}},this.decodeAndBlitFrameRGBA=function(F,V){var W=this.frameInfo(F),et=W.width*W.height,st=new Uint8Array(et);xm(n,W.data_offset,st,et);var lt=W.palette_offset,ct=W.transparent_index;ct===null&&(ct=256);var Et=W.width,ot=e-Et,Yt=Et,T=4*(W.y*e+W.x),H=4*((W.y+W.height)*e+W.x),Y=T,nt=4*ot;W.interlaced===!0&&(nt+=4*e*7);for(var dt=8,wt=0,_t=st.length;wt<_t;++wt){var St=st[wt];if(Yt===0&&(Yt=Et,(Y+=nt)>=H&&(nt=4*ot+4*e*(dt-1),Y=T+(Et+ot)*(dt<<1),dt>>=1)),St===ct)Y+=4;else{var bt=n[lt+3*St],$t=n[lt+3*St+1],Jt=n[lt+3*St+2];V[Y++]=bt,V[Y++]=$t,V[Y++]=Jt,V[Y++]=255}--Yt}}}function xm(n,t,e,i){for(var r=n[t++],s=1<<r,o=s+1,a=o+1,l=r+1,u=(1<<l)-1,f=0,d=0,y=0,m=n[t++],w=new Int32Array(4096),S=null;;){for(;f<16&&m!==0;)d|=n[t++]<<f,f+=8,m===1?m=n[t++]:--m;if(f<l)break;var L=d&u;if(d>>=l,f-=l,L!==s){if(L===o)break;for(var E=L<a?L:S,I=0,j=E;j>s;)j=w[j]>>8,++I;var G=j;if(y+I+(E!==L?1:0)>i)return void Bn.log("Warning, gif stream longer than expected.");e[y++]=G;var Z=y+=I;for(E!==L&&(e[y++]=G),j=E;I--;)j=w[j],e[--Z]=255&j,j>>=8;S!==null&&a<4096&&(w[a++]=S<<8|G,a>=u+1&&l<12&&(++l,u=u<<1|1)),S=L}else a=o+1,u=(1<<(l=r+1))-1,S=null}return y!==i&&Bn.log("Warning, gif stream shorter than expected."),e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function dd(n){var t,e,i,r,s,o=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),f=new Array(64),d=new Array(65535),y=new Array(65535),m=new Array(64),w=new Array(64),S=[],L=0,E=7,I=new Array(64),j=new Array(64),G=new Array(64),Z=new Array(256),at=new Array(2048),v=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],B=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],it=[0,1,2,3,4,5,6,7,8,9,10,11],mt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],q=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],et=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function st(T,H){for(var Y=0,nt=0,dt=new Array,wt=1;wt<=16;wt++){for(var _t=1;_t<=T[wt];_t++)dt[H[nt]]=[],dt[H[nt]][0]=Y,dt[H[nt]][1]=wt,nt++,Y++;Y*=2}return dt}function lt(T){for(var H=T[0],Y=T[1]-1;Y>=0;)H&1<<Y&&(L|=1<<E),Y--,--E<0&&(L==255?(ct(255),ct(0)):ct(L),E=7,L=0)}function ct(T){S.push(T)}function Et(T){ct(T>>8&255),ct(255&T)}function ot(T,H,Y,nt,dt){for(var wt,_t=dt[0],St=dt[240],bt=function(Wt,Kt){var ee,Gt,le,ie,kt,ne,me,de,re,_e,qt=0;for(re=0;re<8;++re){ee=Wt[qt],Gt=Wt[qt+1],le=Wt[qt+2],ie=Wt[qt+3],kt=Wt[qt+4],ne=Wt[qt+5],me=Wt[qt+6];var Ke=ee+(de=Wt[qt+7]),we=ee-de,on=Gt+me,ke=Gt-me,Ie=le+ne,ln=le-ne,Oe=ie+kt,fn=ie-kt,nn=Ke+Oe,qn=Ke-Oe,Kn=on+Ie,An=on-Ie;Wt[qt]=nn+Kn,Wt[qt+4]=nn-Kn;var Re=.707106781*(An+qn);Wt[qt+2]=qn+Re,Wt[qt+6]=qn-Re;var Ee=.382683433*((nn=fn+ln)-(An=ke+we)),Tn=.5411961*nn+Ee,dn=1.306562965*An+Ee,Qn=.707106781*(Kn=ln+ke),On=we+Qn,xe=we-Qn;Wt[qt+5]=xe+Tn,Wt[qt+3]=xe-Tn,Wt[qt+1]=On+dn,Wt[qt+7]=On-dn,qt+=8}for(qt=0,re=0;re<8;++re){ee=Wt[qt],Gt=Wt[qt+8],le=Wt[qt+16],ie=Wt[qt+24],kt=Wt[qt+32],ne=Wt[qt+40],me=Wt[qt+48];var Zn=ee+(de=Wt[qt+56]),vn=ee-de,xn=Gt+me,pn=Gt-me,Hn=le+ne,zi=le-ne,Xs=ie+kt,vr=ie-kt,rr=Zn+Xs,sr=Zn-Xs,$i=xn+Hn,_r=xn-Hn;Wt[qt]=rr+$i,Wt[qt+32]=rr-$i;var gi=.707106781*(_r+sr);Wt[qt+16]=sr+gi,Wt[qt+48]=sr-gi;var or=.382683433*((rr=vr+zi)-(_r=pn+vn)),Pr=.5411961*rr+or,Kr=1.306562965*_r+or,kr=.707106781*($i=zi+pn),Cs=vn+kr,Ys=vn-kr;Wt[qt+40]=Ys+Pr,Wt[qt+24]=Ys-Pr,Wt[qt+8]=Cs+Kr,Wt[qt+56]=Cs-Kr,qt++}for(re=0;re<64;++re)_e=Wt[re]*Kt[re],m[re]=_e>0?_e+.5|0:_e-.5|0;return m}(T,H),$t=0;$t<64;++$t)w[v[$t]]=bt[$t];var Jt=w[0]-Y;Y=w[0],Jt==0?lt(nt[0]):(lt(nt[y[wt=32767+Jt]]),lt(d[wt]));for(var Ht=63;Ht>0&&w[Ht]==0;)Ht--;if(Ht==0)return lt(_t),Y;for(var ye,Nt=1;Nt<=Ht;){for(var J=Nt;w[Nt]==0&&Nt<=Ht;)++Nt;var Ce=Nt-J;if(Ce>=16){ye=Ce>>4;for(var Zt=1;Zt<=ye;++Zt)lt(St);Ce&=15}wt=32767+w[Nt],lt(dt[(Ce<<4)+y[wt]]),lt(d[wt]),Nt++}return Ht!=63&&lt(_t),Y}function Yt(T){T=Math.min(Math.max(T,1),100),s!=T&&(function(H){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],nt=0;nt<64;nt++){var dt=o((Y[nt]*H+50)/100);dt=Math.min(Math.max(dt,1),255),a[v[nt]]=dt}for(var wt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],_t=0;_t<64;_t++){var St=o((wt[_t]*H+50)/100);St=Math.min(Math.max(St,1),255),l[v[_t]]=St}for(var bt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],$t=0,Jt=0;Jt<8;Jt++)for(var Ht=0;Ht<8;Ht++)u[$t]=1/(a[v[$t]]*bt[Jt]*bt[Ht]*8),f[$t]=1/(l[v[$t]]*bt[Jt]*bt[Ht]*8),$t++}(T<50?Math.floor(5e3/T):Math.floor(200-2*T)),s=T)}this.encode=function(T,H){H&&Yt(H),S=new Array,L=0,E=7,Et(65496),Et(65504),Et(16),ct(74),ct(70),ct(73),ct(70),ct(0),ct(1),ct(1),ct(0),Et(1),Et(1),ct(0),ct(0),function(){Et(65499),Et(132),ct(0);for(var Gt=0;Gt<64;Gt++)ct(a[Gt]);ct(1);for(var le=0;le<64;le++)ct(l[le])}(),function(Gt,le){Et(65472),Et(17),ct(8),Et(le),Et(Gt),ct(3),ct(1),ct(17),ct(0),ct(2),ct(17),ct(1),ct(3),ct(17),ct(1)}(T.width,T.height),function(){Et(65476),Et(418),ct(0);for(var Gt=0;Gt<16;Gt++)ct(B[Gt+1]);for(var le=0;le<=11;le++)ct(it[le]);ct(16);for(var ie=0;ie<16;ie++)ct(mt[ie+1]);for(var kt=0;kt<=161;kt++)ct(q[kt]);ct(1);for(var ne=0;ne<16;ne++)ct(F[ne+1]);for(var me=0;me<=11;me++)ct(V[me]);ct(17);for(var de=0;de<16;de++)ct(W[de+1]);for(var re=0;re<=161;re++)ct(et[re])}(),Et(65498),Et(12),ct(3),ct(1),ct(0),ct(2),ct(17),ct(3),ct(17),ct(0),ct(63),ct(0);var Y=0,nt=0,dt=0;L=0,E=7,this.encode.displayName="_encode_";for(var wt,_t,St,bt,$t,Jt,Ht,ye,Nt,J=T.data,Ce=T.width,Zt=T.height,Wt=4*Ce,Kt=0;Kt<Zt;){for(wt=0;wt<Wt;){for($t=Wt*Kt+wt,Ht=-1,ye=0,Nt=0;Nt<64;Nt++)Jt=$t+(ye=Nt>>3)*Wt+(Ht=4*(7&Nt)),Kt+ye>=Zt&&(Jt-=Wt*(Kt+1+ye-Zt)),wt+Ht>=Wt&&(Jt-=wt+Ht-Wt+4),_t=J[Jt++],St=J[Jt++],bt=J[Jt++],I[Nt]=(at[_t]+at[St+256>>0]+at[bt+512>>0]>>16)-128,j[Nt]=(at[_t+768>>0]+at[St+1024>>0]+at[bt+1280>>0]>>16)-128,G[Nt]=(at[_t+1280>>0]+at[St+1536>>0]+at[bt+1792>>0]>>16)-128;Y=ot(I,u,Y,t,i),nt=ot(j,f,nt,e,r),dt=ot(G,f,dt,e,r),wt+=32}Kt+=8}if(E>=0){var ee=[];ee[1]=E+1,ee[0]=(1<<E+1)-1,lt(ee)}return Et(65497),new Uint8Array(S)},n=n||50,function(){for(var T=String.fromCharCode,H=0;H<256;H++)Z[H]=T(H)}(),t=st(B,it),e=st(F,V),i=st(mt,q),r=st(W,et),function(){for(var T=1,H=2,Y=1;Y<=15;Y++){for(var nt=T;nt<H;nt++)y[32767+nt]=Y,d[32767+nt]=[],d[32767+nt][1]=Y,d[32767+nt][0]=nt;for(var dt=-(H-1);dt<=-T;dt++)y[32767+dt]=Y,d[32767+dt]=[],d[32767+dt][1]=Y,d[32767+dt][0]=H-1+dt;T<<=1,H<<=1}}(),function(){for(var T=0;T<256;T++)at[T]=19595*T,at[T+256>>0]=38470*T,at[T+512>>0]=7471*T+32768,at[T+768>>0]=-11059*T,at[T+1024>>0]=-21709*T,at[T+1280>>0]=32768*T+8421375,at[T+1536>>0]=-27439*T,at[T+1792>>0]=-5329*T}(),Yt(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function $r(n,t){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Sm(n){function t(B){if(!B)throw Error("assert :P")}function e(B,it,mt){for(var q=0;4>q;q++)if(B[it+q]!=mt.charCodeAt(q))return!0;return!1}function i(B,it,mt,q,F){for(var V=0;V<F;V++)B[it+V]=mt[q+V]}function r(B,it,mt,q){for(var F=0;F<q;F++)B[it+F]=mt}function s(B){return new Int32Array(B)}function o(B,it){for(var mt=[],q=0;q<B;q++)mt.push(new it);return mt}function a(B,it){var mt=[];return function q(F,V,W){for(var et=W[V],st=0;st<et&&(F.push(W.length>V+1?[]:new it),!(W.length<V+1));st++)q(F[st],V+1,W)}(mt,0,B),mt}var l=function(){var B=this;function it(c,p){for(var b=1<<p-1>>>0;c&b;)b>>>=1;return b?(c&b-1)+b:c}function mt(c,p,b,A,k){t(!(A%b));do c[p+(A-=b)]=k;while(0<A)}function q(c,p,b,A,k){if(t(2328>=k),512>=k)var M=s(512);else if((M=s(k))==null)return 0;return function(D,z,U,X,ht,At){var Lt,yt,Ut=z,Pt=1<<U,ft=s(16),gt=s(16);for(t(ht!=0),t(X!=null),t(D!=null),t(0<U),yt=0;yt<ht;++yt){if(15<X[yt])return 0;++ft[X[yt]]}if(ft[0]==ht)return 0;for(gt[1]=0,Lt=1;15>Lt;++Lt){if(ft[Lt]>1<<Lt)return 0;gt[Lt+1]=gt[Lt]+ft[Lt]}for(yt=0;yt<ht;++yt)Lt=X[yt],0<X[yt]&&(At[gt[Lt]++]=yt);if(gt[15]==1)return(X=new F).g=0,X.value=At[0],mt(D,Ut,1,Pt,X),Pt;var jt,Vt=-1,zt=Pt-1,pe=0,ae=1,Pe=1,he=1<<U;for(yt=0,Lt=1,ht=2;Lt<=U;++Lt,ht<<=1){if(ae+=Pe<<=1,0>(Pe-=ft[Lt]))return 0;for(;0<ft[Lt];--ft[Lt])(X=new F).g=Lt,X.value=At[yt++],mt(D,Ut+pe,ht,he,X),pe=it(pe,Lt)}for(Lt=U+1,ht=2;15>=Lt;++Lt,ht<<=1){if(ae+=Pe<<=1,0>(Pe-=ft[Lt]))return 0;for(;0<ft[Lt];--ft[Lt]){if(X=new F,(pe&zt)!=Vt){for(Ut+=he,jt=1<<(Vt=Lt)-U;15>Vt&&!(0>=(jt-=ft[Vt]));)++Vt,jt<<=1;Pt+=he=1<<(jt=Vt-U),D[z+(Vt=pe&zt)].g=jt+U,D[z+Vt].value=Ut-z-Vt}X.g=Lt-U,X.value=At[yt++],mt(D,Ut+(pe>>U),ht,he,X),pe=it(pe,Lt)}}return ae!=2*gt[15]-1?0:Pt}(c,p,b,A,k,M)}function F(){this.value=this.g=0}function V(){this.value=this.g=0}function W(){this.G=o(5,F),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ai,V)}function et(c,p,b,A){t(c!=null),t(p!=null),t(2147483648>A),c.Ca=254,c.I=0,c.b=-8,c.Ka=0,c.oa=p,c.pa=b,c.Jd=p,c.Yc=b+A,c.Zc=4<=A?b+A-4+1:b,wt(c)}function st(c,p){for(var b=0;0<p--;)b|=St(c,128)<<p;return b}function lt(c,p){var b=st(c,p);return _t(c)?-b:b}function ct(c,p,b,A){var k,M=0;for(t(c!=null),t(p!=null),t(4294967288>A),c.Sb=A,c.Ra=0,c.u=0,c.h=0,4<A&&(A=4),k=0;k<A;++k)M+=p[b+k]<<8*k;c.Ra=M,c.bb=A,c.oa=p,c.pa=b}function Et(c){for(;8<=c.u&&c.bb<c.Sb;)c.Ra>>>=8,c.Ra+=c.oa[c.pa+c.bb]<<Ui-8>>>0,++c.bb,c.u-=8;Y(c)&&(c.h=1,c.u=0)}function ot(c,p){if(t(0<=p),!c.h&&p<=rs){var b=H(c)&Yi[p];return c.u+=p,Et(c),b}return c.h=1,c.u=0}function Yt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function T(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(c){return c.Ra>>>(c.u&Ui-1)>>>0}function Y(c){return t(c.bb<=c.Sb),c.h||c.bb==c.Sb&&c.u>Ui}function nt(c,p){c.u=p,c.h=Y(c)}function dt(c){c.u>=no&&(t(c.u>=no),Et(c))}function wt(c){t(c!=null&&c.oa!=null),c.pa<c.Zc?(c.I=(c.oa[c.pa++]|c.I<<8)>>>0,c.b+=8):(t(c!=null&&c.oa!=null),c.pa<c.Yc?(c.b+=8,c.I=c.oa[c.pa++]|c.I<<8):c.Ka?c.b=0:(c.I<<=8,c.b+=8,c.Ka=1))}function _t(c){return st(c,1)}function St(c,p){var b=c.Ca;0>c.b&&wt(c);var A=c.b,k=b*p>>>8,M=(c.I>>>A>k)+0;for(M?(b-=k,c.I-=k+1<<A>>>0):b=k+1,A=b,k=0;256<=A;)k+=8,A>>=8;return A=7^k+ci[A],c.b-=A,c.Ca=(b<<A)-1,M}function bt(c,p,b){c[p+0]=b>>24&255,c[p+1]=b>>16&255,c[p+2]=b>>8&255,c[p+3]=b>>0&255}function $t(c,p){return c[p+0]<<0|c[p+1]<<8}function Jt(c,p){return $t(c,p)|c[p+2]<<16}function Ht(c,p){return $t(c,p)|$t(c,p+2)<<16}function ye(c,p){var b=1<<p;return t(c!=null),t(0<p),c.X=s(b),c.X==null?0:(c.Mb=32-p,c.Xa=p,1)}function Nt(c,p){t(c!=null),t(p!=null),t(c.Xa==p.Xa),i(p.X,0,c.X,0,1<<p.Xa)}function J(){this.X=[],this.Xa=this.Mb=0}function Ce(c,p,b,A){t(b!=null),t(A!=null);var k=b[0],M=A[0];return k==0&&(k=(c*M+p/2)/p),M==0&&(M=(p*k+c/2)/c),0>=k||0>=M?0:(b[0]=k,A[0]=M,1)}function Zt(c,p){return c+(1<<p)-1>>>p}function Wt(c,p){return((4278255360&c)+(4278255360&p)>>>0&4278255360)+((16711935&c)+(16711935&p)>>>0&16711935)>>>0}function Kt(c,p){B[p]=function(b,A,k,M,D,z,U){var X;for(X=0;X<D;++X){var ht=B[c](z[U+X-1],k,M+X);z[U+X]=Wt(b[A+X],ht)}}}function ee(){this.ud=this.hd=this.jd=0}function Gt(c,p){return((4278124286&(c^p))>>>1)+(c&p)>>>0}function le(c){return 0<=c&&256>c?c:0>c?0:255<c?255:void 0}function ie(c,p){return le(c+(c-p+.5>>1))}function kt(c,p,b){return Math.abs(p-b)-Math.abs(c-b)}function ne(c,p,b,A,k,M,D){for(A=M[D-1],b=0;b<k;++b)M[D+b]=A=Wt(c[p+b],A)}function me(c,p,b,A,k){var M;for(M=0;M<b;++M){var D=c[p+M],z=D>>8&255,U=16711935&(U=(U=16711935&D)+((z<<16)+z));A[k+M]=(4278255360&D)+U>>>0}}function de(c,p){p.jd=c>>0&255,p.hd=c>>8&255,p.ud=c>>16&255}function re(c,p,b,A,k,M){var D;for(D=0;D<A;++D){var z=p[b+D],U=z>>>8,X=z,ht=255&(ht=(ht=z>>>16)+((c.jd<<24>>24)*(U<<24>>24)>>>5));X=255&(X=(X=X+((c.hd<<24>>24)*(U<<24>>24)>>>5))+((c.ud<<24>>24)*(ht<<24>>24)>>>5)),k[M+D]=(4278255360&z)+(ht<<16)+X}}function _e(c,p,b,A,k){B[p]=function(M,D,z,U,X,ht,At,Lt,yt){for(U=At;U<Lt;++U)for(At=0;At<yt;++At)X[ht++]=k(z[A(M[D++])])},B[c]=function(M,D,z,U,X,ht,At){var Lt=8>>M.b,yt=M.Ea,Ut=M.K[0],Pt=M.w;if(8>Lt)for(M=(1<<M.b)-1,Pt=(1<<Lt)-1;D<z;++D){var ft,gt=0;for(ft=0;ft<yt;++ft)ft&M||(gt=A(U[X++])),ht[At++]=k(Ut[gt&Pt]),gt>>=Lt}else B["VP8LMapColor"+b](U,X,Ut,Pt,ht,At,D,z,yt)}}function qt(c,p,b,A,k){for(b=p+b;p<b;){var M=c[p++];A[k++]=M>>16&255,A[k++]=M>>8&255,A[k++]=M>>0&255}}function Ke(c,p,b,A,k){for(b=p+b;p<b;){var M=c[p++];A[k++]=M>>16&255,A[k++]=M>>8&255,A[k++]=M>>0&255,A[k++]=M>>24&255}}function we(c,p,b,A,k){for(b=p+b;p<b;){var M=(D=c[p++])>>16&240|D>>12&15,D=D>>0&240|D>>28&15;A[k++]=M,A[k++]=D}}function on(c,p,b,A,k){for(b=p+b;p<b;){var M=(D=c[p++])>>16&248|D>>13&7,D=D>>5&224|D>>3&31;A[k++]=M,A[k++]=D}}function ke(c,p,b,A,k){for(b=p+b;p<b;){var M=c[p++];A[k++]=M>>0&255,A[k++]=M>>8&255,A[k++]=M>>16&255}}function Ie(c,p,b,A,k,M){if(M==0)for(b=p+b;p<b;)bt(A,((M=c[p++])[0]>>24|M[1]>>8&65280|M[2]<<8&16711680|M[3]<<24)>>>0),k+=32;else i(A,k,c,p,b)}function ln(c,p){B[p][0]=B[c+"0"],B[p][1]=B[c+"1"],B[p][2]=B[c+"2"],B[p][3]=B[c+"3"],B[p][4]=B[c+"4"],B[p][5]=B[c+"5"],B[p][6]=B[c+"6"],B[p][7]=B[c+"7"],B[p][8]=B[c+"8"],B[p][9]=B[c+"9"],B[p][10]=B[c+"10"],B[p][11]=B[c+"11"],B[p][12]=B[c+"12"],B[p][13]=B[c+"13"],B[p][14]=B[c+"0"],B[p][15]=B[c+"0"]}function Oe(c){return c==hf||c==ff||c==ec||c==df}function fn(){this.eb=[],this.size=this.A=this.fb=0}function nn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function qn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new fn,this.f.kb=new nn,this.sd=null}function Kn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function An(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Re(c){return alert("todo:WebPSamplerProcessPlane"),c.T}function Ee(c,p){var b=c.T,A=p.ba.f.RGBA,k=A.eb,M=A.fb+c.ka*A.A,D=Er[p.ba.S],z=c.y,U=c.O,X=c.f,ht=c.N,At=c.ea,Lt=c.W,yt=p.cc,Ut=p.dc,Pt=p.Mc,ft=p.Nc,gt=c.ka,jt=c.ka+c.T,Vt=c.U,zt=Vt+1>>1;for(gt==0?D(z,U,null,null,X,ht,At,Lt,X,ht,At,Lt,k,M,null,null,Vt):(D(p.ec,p.fc,z,U,yt,Ut,Pt,ft,X,ht,At,Lt,k,M-A.A,k,M,Vt),++b);gt+2<jt;gt+=2)yt=X,Ut=ht,Pt=At,ft=Lt,ht+=c.Rc,Lt+=c.Rc,M+=2*A.A,D(z,(U+=2*c.fa)-c.fa,z,U,yt,Ut,Pt,ft,X,ht,At,Lt,k,M-A.A,k,M,Vt);return U+=c.fa,c.j+jt<c.o?(i(p.ec,p.fc,z,U,Vt),i(p.cc,p.dc,X,ht,zt),i(p.Mc,p.Nc,At,Lt,zt),b--):1&jt||D(z,U,null,null,X,ht,At,Lt,X,ht,At,Lt,k,M+A.A,null,null,Vt),b}function Tn(c,p,b){var A=c.F,k=[c.J];if(A!=null){var M=c.U,D=p.ba.S,z=D==tc||D==ec;p=p.ba.f.RGBA;var U=[0],X=c.ka;U[0]=c.T,c.Kb&&(X==0?--U[0]:(--X,k[0]-=c.width),c.j+c.ka+c.T==c.o&&(U[0]=c.o-c.j-X));var ht=p.eb;X=p.fb+X*p.A,c=Yu(A,k[0],c.width,M,U,ht,X+(z?0:3),p.A),t(b==U),c&&Oe(D)&&so(ht,X,z,M,U,p.A)}return 0}function dn(c){var p=c.ma,b=p.ba.S,A=11>b,k=b==Ju||b==Qu||b==tc||b==cf||b==12||Oe(b);if(p.memory=null,p.Ib=null,p.Jb=null,p.Nd=null,!Sr(p.Oa,c,k?11:12))return 0;if(k&&Oe(b)&&Dt(),c.da)alert("todo:use_scaling");else{if(A){if(p.Ib=Re,c.Kb){if(b=c.U+1>>1,p.memory=s(c.U+2*b),p.memory==null)return 0;p.ec=p.memory,p.fc=0,p.cc=p.ec,p.dc=p.fc+c.U,p.Mc=p.cc,p.Nc=p.dc+b,p.Ib=Ee,Dt()}}else alert("todo:EmitYUV");k&&(p.Jb=Tn,A&&vt())}if(A&&!a0){for(c=0;256>c;++c)U5[c]=89858*(c-128)+ic>>nc,V5[c]=-22014*(c-128)+ic,W5[c]=-45773*(c-128),G5[c]=113618*(c-128)+ic>>nc;for(c=Xl;c<mf;++c)p=76283*(c-16)+ic>>nc,H5[c-Xl]=qi(p,255),$5[c-Xl]=qi(p+8>>4,15);a0=1}return 1}function Qn(c){var p=c.ma,b=c.U,A=c.T;return t(!(1&c.ka)),0>=b||0>=A?0:(b=p.Ib(c,p),p.Jb!=null&&p.Jb(c,p,b),p.Dc+=b,1)}function On(c){c.ma.memory=null}function xe(c,p,b,A){return ot(c,8)!=47?0:(p[0]=ot(c,14)+1,b[0]=ot(c,14)+1,A[0]=ot(c,1),ot(c,3)!=0?0:!c.h)}function Zn(c,p){if(4>c)return c+1;var b=c-2>>1;return(2+(1&c)<<b)+ot(p,b)+1}function vn(c,p){return 120<p?p-120:1<=(b=((b=T5[p-1])>>4)*c+(8-(15&b)))?b:1;var b}function xn(c,p,b){var A=H(b),k=c[p+=255&A].g-8;return 0<k&&(nt(b,b.u+8),A=H(b),p+=c[p].value,p+=A&(1<<k)-1),nt(b,b.u+c[p].g),c[p].value}function pn(c,p,b){return b.g+=c.g,b.value+=c.value<<p>>>0,t(8>=b.g),c.g}function Hn(c,p,b){var A=c.xc;return t((p=A==0?0:c.vc[c.md*(b>>A)+(p>>A)])<c.Wb),c.Ya[p]}function zi(c,p,b,A){var k=c.ab,M=c.c*p,D=c.C;p=D+p;var z=b,U=A;for(A=c.Ta,b=c.Ua;0<k--;){var X=c.gc[k],ht=D,At=p,Lt=z,yt=U,Ut=(U=A,z=b,X.Ea);switch(t(ht<At),t(At<=X.nc),X.hc){case 2:ro(Lt,yt,(At-ht)*Ut,U,z);break;case 0:var Pt=ht,ft=At,gt=U,jt=z,Vt=(he=X).Ea;Pt==0&&(io(Lt,yt,null,null,1,gt,jt),ne(Lt,yt+1,0,0,Vt-1,gt,jt+1),yt+=Vt,jt+=Vt,++Pt);for(var zt=1<<he.b,pe=zt-1,ae=Zt(Vt,he.b),Pe=he.K,he=he.w+(Pt>>he.b)*ae;Pt<ft;){var Cn=Pe,In=he,yn=1;for(ss(Lt,yt,gt,jt-Vt,1,gt,jt);yn<Vt;){var an=(yn&~pe)+zt;an>Vt&&(an=Vt),(0,as[Cn[In++]>>8&15])(Lt,yt+ +yn,gt,jt+yn-Vt,an-yn,gt,jt+yn),yn=an}yt+=Vt,jt+=Vt,++Pt&pe||(he+=ae)}At!=X.nc&&i(U,z-Ut,U,z+(At-ht-1)*Ut,Ut);break;case 1:for(Ut=Lt,ft=yt,Vt=(Lt=X.Ea)-(jt=Lt&~(gt=(yt=1<<X.b)-1)),Pt=Zt(Lt,X.b),zt=X.K,X=X.w+(ht>>X.b)*Pt;ht<At;){for(pe=zt,ae=X,Pe=new ee,he=ft+jt,Cn=ft+Lt;ft<he;)de(pe[ae++],Pe),Ri(Pe,Ut,ft,yt,U,z),ft+=yt,z+=yt;ft<Cn&&(de(pe[ae++],Pe),Ri(Pe,Ut,ft,Vt,U,z),ft+=Vt,z+=Vt),++ht&gt||(X+=Pt)}break;case 3:if(Lt==U&&yt==z&&0<X.b){for(ft=U,Lt=Ut=z+(At-ht)*Ut-(jt=(At-ht)*Zt(X.Ea,X.b)),yt=U,gt=z,Pt=[],jt=(Vt=jt)-1;0<=jt;--jt)Pt[jt]=yt[gt+jt];for(jt=Vt-1;0<=jt;--jt)ft[Lt+jt]=Pt[jt];lr(X,ht,At,U,Ut,U,z)}else lr(X,ht,At,Lt,yt,U,z)}z=A,U=b}U!=b&&i(A,b,z,U,M)}function Xs(c,p){var b=c.V,A=c.Ba+c.c*c.C,k=p-c.C;if(t(p<=c.l.o),t(16>=k),0<k){var M=c.l,D=c.Ta,z=c.Ua,U=M.width;if(zi(c,k,b,A),k=z=[z],t((b=c.C)<(A=p)),t(M.v<M.va),A>M.o&&(A=M.o),b<M.j){var X=M.j-b;b=M.j,k[0]+=X*U}if(b>=A?b=0:(k[0]+=4*M.v,M.ka=b-M.j,M.U=M.va-M.v,M.T=A-b,b=1),b){if(z=z[0],11>(b=c.ca).S){var ht=b.f.RGBA,At=(A=b.S,k=M.U,M=M.T,X=ht.eb,ht.A),Lt=M;for(ht=ht.fb+c.Ma*ht.A;0<Lt--;){var yt=D,Ut=z,Pt=k,ft=X,gt=ht;switch(A){case Zu:Ki(yt,Ut,Pt,ft,gt);break;case Ju:$(yt,Ut,Pt,ft,gt);break;case hf:$(yt,Ut,Pt,ft,gt),so(ft,gt,0,Pt,1,0);break;case Zg:It(yt,Ut,Pt,ft,gt);break;case Qu:Ie(yt,Ut,Pt,ft,gt,1);break;case ff:Ie(yt,Ut,Pt,ft,gt,1),so(ft,gt,0,Pt,1,0);break;case tc:Ie(yt,Ut,Pt,ft,gt,0);break;case ec:Ie(yt,Ut,Pt,ft,gt,0),so(ft,gt,1,Pt,1,0);break;case cf:ut(yt,Ut,Pt,ft,gt);break;case df:ut(yt,Ut,Pt,ft,gt),Ma(ft,gt,Pt,1,0);break;case Jg:xt(yt,Ut,Pt,ft,gt);break;default:t(0)}z+=U,ht+=At}c.Ma+=M}else alert("todo:EmitRescaledRowsYUVA");t(c.Ma<=b.height)}}c.C=p,t(c.C<=c.i)}function vr(c){var p;if(0<c.ua)return 0;for(p=0;p<c.Wb;++p){var b=c.Ya[p].G,A=c.Ya[p].H;if(0<b[1][A[1]+0].g||0<b[2][A[2]+0].g||0<b[3][A[3]+0].g)return 0}return 1}function rr(c,p,b,A,k,M){if(c.Z!=0){var D=c.qd,z=c.rd;for(t(ao[c.Z]!=null);p<b;++p)ao[c.Z](D,z,A,k,A,k,M),D=A,z=k,k+=M;c.qd=D,c.rd=z}}function sr(c,p){var b=c.l.ma,A=b.Z==0||b.Z==1?c.l.j:c.C;if(A=c.C<A?A:c.C,t(p<=c.l.o),p>A){var k=c.l.width,M=b.ca,D=b.tb+k*A,z=c.V,U=c.Ba+c.c*A,X=c.gc;t(c.ab==1),t(X[0].hc==3),Zo(X[0],A,p,z,U,M,D),rr(b,A,p,M,D,k)}c.C=c.Ma=p}function $i(c,p,b,A,k,M,D){var z=c.$/A,U=c.$%A,X=c.m,ht=c.s,At=b+c.$,Lt=At;k=b+A*k;var yt=b+A*M,Ut=280+ht.ua,Pt=c.Pb?z:16777216,ft=0<ht.ua?ht.Wa:null,gt=ht.wc,jt=At<yt?Hn(ht,U,z):null;t(c.C<M),t(yt<=k);var Vt=!1;t:for(;;){for(;Vt||At<yt;){var zt=0;if(z>=Pt){var pe=At-b;t((Pt=c).Pb),Pt.wd=Pt.m,Pt.xd=pe,0<Pt.s.ua&&Nt(Pt.s.Wa,Pt.s.vb),Pt=z+R5}if(U&gt||(jt=Hn(ht,U,z)),t(jt!=null),jt.Qb&&(p[At]=jt.qb,Vt=!0),!Vt)if(dt(X),jt.jc){zt=X,pe=p;var ae=At,Pe=jt.pd[H(zt)&Ai-1];t(jt.jc),256>Pe.g?(nt(zt,zt.u+Pe.g),pe[ae]=Pe.value,zt=0):(nt(zt,zt.u+Pe.g-256),t(256<=Pe.value),zt=Pe.value),zt==0&&(Vt=!0)}else zt=xn(jt.G[0],jt.H[0],X);if(X.h)break;if(Vt||256>zt){if(!Vt)if(jt.nd)p[At]=(jt.qb|zt<<8)>>>0;else{if(dt(X),Vt=xn(jt.G[1],jt.H[1],X),dt(X),pe=xn(jt.G[2],jt.H[2],X),ae=xn(jt.G[3],jt.H[3],X),X.h)break;p[At]=(ae<<24|Vt<<16|zt<<8|pe)>>>0}if(Vt=!1,++At,++U>=A&&(U=0,++z,D!=null&&z<=M&&!(z%16)&&D(c,z),ft!=null))for(;Lt<At;)zt=p[Lt++],ft.X[(506832829*zt&4294967295)>>>ft.Mb]=zt}else if(280>zt){if(zt=Zn(zt-256,X),pe=xn(jt.G[4],jt.H[4],X),dt(X),pe=vn(A,pe=Zn(pe,X)),X.h)break;if(At-b<pe||k-At<zt)break t;for(ae=0;ae<zt;++ae)p[At+ae]=p[At+ae-pe];for(At+=zt,U+=zt;U>=A;)U-=A,++z,D!=null&&z<=M&&!(z%16)&&D(c,z);if(t(At<=k),U&gt&&(jt=Hn(ht,U,z)),ft!=null)for(;Lt<At;)zt=p[Lt++],ft.X[(506832829*zt&4294967295)>>>ft.Mb]=zt}else{if(!(zt<Ut))break t;for(Vt=zt-280,t(ft!=null);Lt<At;)zt=p[Lt++],ft.X[(506832829*zt&4294967295)>>>ft.Mb]=zt;zt=At,t(!(Vt>>>(pe=ft).Xa)),p[zt]=pe.X[Vt],Vt=!0}Vt||t(X.h==Y(X))}if(c.Pb&&X.h&&At<k)t(c.m.h),c.a=5,c.m=c.wd,c.$=c.xd,0<c.s.ua&&Nt(c.s.vb,c.s.Wa);else{if(X.h)break t;D!=null&&D(c,z>M?M:z),c.a=0,c.$=At-b}return 1}return c.a=3,0}function _r(c){t(c!=null),c.vc=null,c.yc=null,c.Ya=null;var p=c.Wa;p!=null&&(p.X=null),c.vb=null,t(c!=null)}function gi(){var c=new Tt;return c==null?null:(c.a=0,c.xb=e0,ln("Predictor","VP8LPredictors"),ln("Predictor","VP8LPredictors_C"),ln("PredictorAdd","VP8LPredictorsAdd"),ln("PredictorAdd","VP8LPredictorsAdd_C"),ro=me,Ri=re,Ki=qt,$=Ke,ut=we,xt=on,It=ke,B.VP8LMapColor32b=os,B.VP8LMapColor8b=Jo,c)}function or(c,p,b,A,k){var M=1,D=[c],z=[p],U=A.m,X=A.s,ht=null,At=0;t:for(;;){if(b)for(;M&&ot(U,1);){var Lt=D,yt=z,Ut=A,Pt=1,ft=Ut.m,gt=Ut.gc[Ut.ab],jt=ot(ft,2);if(Ut.Oc&1<<jt)M=0;else{switch(Ut.Oc|=1<<jt,gt.hc=jt,gt.Ea=Lt[0],gt.nc=yt[0],gt.K=[null],++Ut.ab,t(4>=Ut.ab),jt){case 0:case 1:gt.b=ot(ft,3)+2,Pt=or(Zt(gt.Ea,gt.b),Zt(gt.nc,gt.b),0,Ut,gt.K),gt.K=gt.K[0];break;case 3:var Vt,zt=ot(ft,8)+1,pe=16<zt?0:4<zt?1:2<zt?2:3;if(Lt[0]=Zt(gt.Ea,pe),gt.b=pe,Vt=Pt=or(zt,1,0,Ut,gt.K)){var ae,Pe=zt,he=gt,Cn=1<<(8>>he.b),In=s(Cn);if(In==null)Vt=0;else{var yn=he.K[0],an=he.w;for(In[0]=he.K[0][0],ae=1;ae<1*Pe;++ae)In[ae]=Wt(yn[an+ae],In[ae-1]);for(;ae<4*Cn;++ae)In[ae]=0;he.K[0]=null,he.K[0]=In,Vt=1}}Pt=Vt;break;case 2:break;default:t(0)}M=Pt}}if(D=D[0],z=z[0],M&&ot(U,1)&&!(M=1<=(At=ot(U,4))&&11>=At)){A.a=3;break t}var jn;if(jn=M)e:{var Mn,He,hi,Zi=A,fi=D,Ji=z,Rn=At,cr=b,hr=Zi.m,xi=Zi.s,Li=[null],Gi=1,Ar=0,ls=I5[Rn];n:for(;;){if(cr&&ot(hr,1)){var Si=ot(hr,3)+2,ks=Zt(fi,Si),Qo=Zt(Ji,Si),Oa=ks*Qo;if(!or(ks,Qo,0,Zi,Li))break n;for(Li=Li[0],xi.xc=Si,Mn=0;Mn<Oa;++Mn){var lo=Li[Mn]>>8&65535;Li[Mn]=lo,lo>=Gi&&(Gi=lo+1)}}if(hr.h)break n;for(He=0;5>He;++He){var ti=Qg[He];!He&&0<Rn&&(ti+=1<<Rn),Ar<ti&&(Ar=ti)}var yf=o(Gi*ls,F),c0=Gi,h0=o(c0,W);if(h0==null)var sc=null;else t(65536>=c0),sc=h0;var Yl=s(Ar);if(sc==null||Yl==null||yf==null){Zi.a=1;break n}var oc=yf;for(Mn=hi=0;Mn<Gi;++Mn){var Ur=sc[Mn],Da=Ur.G,ja=Ur.H,f0=0,ac=1,d0=0;for(He=0;5>He;++He){ti=Qg[He],Da[He]=oc,ja[He]=hi,!He&&0<Rn&&(ti+=1<<Rn);r:{var lc,vf=ti,uc=Zi,Kl=Yl,K5=oc,Z5=hi,_f=0,uo=uc.m,J5=ot(uo,1);if(r(Kl,0,0,vf),J5){var Q5=ot(uo,1)+1,tv=ot(uo,1),p0=ot(uo,tv==0?1:8);Kl[p0]=1,Q5==2&&(Kl[p0=ot(uo,8)]=1);var cc=1}else{var g0=s(19),m0=ot(uo,4)+4;if(19<m0){uc.a=3;var hc=0;break r}for(lc=0;lc<m0;++lc)g0[L5[lc]]=ot(uo,3);var bf=void 0,Zl=void 0,y0=uc,ev=g0,fc=vf,v0=Kl,wf=0,co=y0.m,_0=8,b0=o(128,F);i:for(;q(b0,0,7,ev,19);){if(ot(co,1)){var nv=2+2*ot(co,3);if((bf=2+ot(co,nv))>fc)break i}else bf=fc;for(Zl=0;Zl<fc&&bf--;){dt(co);var w0=b0[0+(127&H(co))];nt(co,co.u+w0.g);var za=w0.value;if(16>za)v0[Zl++]=za,za!=0&&(_0=za);else{var iv=za==16,x0=za-16,rv=E5[x0],S0=ot(co,C5[x0])+rv;if(Zl+S0>fc)break i;for(var sv=iv?_0:0;0<S0--;)v0[Zl++]=sv}}wf=1;break i}wf||(y0.a=3),cc=wf}(cc=cc&&!uo.h)&&(_f=q(K5,Z5,8,Kl,vf)),cc&&_f!=0?hc=_f:(uc.a=3,hc=0)}if(hc==0)break n;if(ac&&A5[He]==1&&(ac=oc[hi].g==0),f0+=oc[hi].g,hi+=hc,3>=He){var Jl,xf=Yl[0];for(Jl=1;Jl<ti;++Jl)Yl[Jl]>xf&&(xf=Yl[Jl]);d0+=xf}}if(Ur.nd=ac,Ur.Qb=0,ac&&(Ur.qb=(Da[3][ja[3]+0].value<<24|Da[1][ja[1]+0].value<<16|Da[2][ja[2]+0].value)>>>0,f0==0&&256>Da[0][ja[0]+0].value&&(Ur.Qb=1,Ur.qb+=Da[0][ja[0]+0].value<<8)),Ur.jc=!Ur.Qb&&6>d0,Ur.jc){var dc,Fs=Ur;for(dc=0;dc<Ai;++dc){var ho=dc,fo=Fs.pd[ho],pc=Fs.G[0][Fs.H[0]+ho];256<=pc.value?(fo.g=pc.g+256,fo.value=pc.value):(fo.g=0,fo.value=0,ho>>=pn(pc,8,fo),ho>>=pn(Fs.G[1][Fs.H[1]+ho],16,fo),ho>>=pn(Fs.G[2][Fs.H[2]+ho],0,fo),pn(Fs.G[3][Fs.H[3]+ho],24,fo))}}}xi.vc=Li,xi.Wb=Gi,xi.Ya=sc,xi.yc=yf,jn=1;break e}jn=0}if(!(M=jn)){A.a=3;break t}if(0<At){if(X.ua=1<<At,!ye(X.Wa,At)){A.a=1,M=0;break t}}else X.ua=0;var Sf=A,C0=D,ov=z,Cf=Sf.s,Ef=Cf.xc;if(Sf.c=C0,Sf.i=ov,Cf.md=Zt(C0,Ef),Cf.wc=Ef==0?-1:(1<<Ef)-1,b){A.xb=D5;break t}if((ht=s(D*z))==null){A.a=1,M=0;break t}M=(M=$i(A,ht,0,D,z,z,null))&&!U.h;break t}return M?(k!=null?k[0]=ht:(t(ht==null),t(b)),A.$=0,b||_r(X)):_r(X),M}function Pr(c,p){var b=c.c*c.i,A=b+p+16*p;return t(c.c<=p),c.V=s(A),c.V==null?(c.Ta=null,c.Ua=0,c.a=1,0):(c.Ta=c.V,c.Ua=c.Ba+b+p,1)}function Kr(c,p){var b=c.C,A=p-b,k=c.V,M=c.Ba+c.c*b;for(t(p<=c.l.o);0<A;){var D=16<A?16:A,z=c.l.ma,U=c.l.width,X=U*D,ht=z.ca,At=z.tb+U*b,Lt=c.Ta,yt=c.Ua;zi(c,D,k,M),Vg(Lt,yt,ht,At,X),rr(z,b,b+D,ht,At,U),A-=D,k+=D*c.c,b+=D}t(b==p),c.C=c.Ma=p}function kr(){this.ub=this.yd=this.td=this.Rb=0}function Cs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ys(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Zr(){this.Yb=function(){var c=[];return function p(b,A,k){for(var M=k[A],D=0;D<M&&(b.push(k.length>A+1?[]:0),!(k.length<A+1));D++)p(b[D],A+1,k)}(c,0,[3,11]),c}()}function wa(){this.jb=s(3),this.Wc=a([4,8],Zr),this.Xc=a([4,17],Zr)}function xa(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Es(){this.ld=this.La=this.dd=this.tc=0}function Go(){this.Na=this.la=0}function Ol(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function As(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Dl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Es),this.Y=0,this.ya=Array(new As),this.aa=0,this.l=new Ls}function Sa(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ca(){this.cb=this.a=0,this.sc="",this.m=new Yt,this.Od=new kr,this.Kc=new Cs,this.ed=new xa,this.Qa=new Ys,this.Ic=this.$c=this.Aa=0,this.D=new Dl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Yt),this.ia=0,this.pb=o(4,Ol),this.Pa=new wa,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Sa),this.Hd=0,this.rb=Array(new Go),this.sb=0,this.wa=Array(new Es),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new As),this.L=this.aa=0,this.gd=a([4,2],Es),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ls(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Wo(){var c=new Ca;return c!=null&&(c.a=0,c.sc="OK",c.cb=0,c.Xb=0,$l||($l=Ts)),c}function $n(c,p,b){return c.a==0&&(c.a=p,c.sc=b,c.cb=0),0}function mi(c,p,b){return 3<=b&&c[p+0]==157&&c[p+1]==1&&c[p+2]==42}function Fr(c,p){if(c==null)return 0;if(c.a=0,c.sc="OK",p==null)return $n(c,2,"null VP8Io passed to VP8GetHeaders()");var b=p.data,A=p.w,k=p.ha;if(4>k)return $n(c,7,"Truncated header.");var M=b[A+0]|b[A+1]<<8|b[A+2]<<16,D=c.Od;if(D.Rb=!(1&M),D.td=M>>1&7,D.yd=M>>4&1,D.ub=M>>5,3<D.td)return $n(c,3,"Incorrect keyframe parameters.");if(!D.yd)return $n(c,4,"Frame not displayable.");A+=3,k-=3;var z=c.Kc;if(D.Rb){if(7>k)return $n(c,7,"cannot parse picture header");if(!mi(b,A,k))return $n(c,3,"Bad code word");z.c=16383&(b[A+4]<<8|b[A+3]),z.Td=b[A+4]>>6,z.i=16383&(b[A+6]<<8|b[A+5]),z.Ud=b[A+6]>>6,A+=7,k-=7,c.za=z.c+15>>4,c.Ub=z.i+15>>4,p.width=z.c,p.height=z.i,p.Da=0,p.j=0,p.v=0,p.va=p.width,p.o=p.height,p.da=0,p.ib=p.width,p.hb=p.height,p.U=p.width,p.T=p.height,r((M=c.Pa).jb,0,255,M.jb.length),t((M=c.Qa)!=null),M.Cb=0,M.Bb=0,M.Fb=1,r(M.Zb,0,0,M.Zb.length),r(M.Lb,0,0,M.Lb)}if(D.ub>k)return $n(c,7,"bad partition length");et(M=c.m,b,A,D.ub),A+=D.ub,k-=D.ub,D.Rb&&(z.Ld=_t(M),z.Kd=_t(M)),z=c.Qa;var U,X=c.Pa;if(t(M!=null),t(z!=null),z.Cb=_t(M),z.Cb){if(z.Bb=_t(M),_t(M)){for(z.Fb=_t(M),U=0;4>U;++U)z.Zb[U]=_t(M)?lt(M,7):0;for(U=0;4>U;++U)z.Lb[U]=_t(M)?lt(M,6):0}if(z.Bb)for(U=0;3>U;++U)X.jb[U]=_t(M)?st(M,8):255}else z.Bb=0;if(M.Ka)return $n(c,3,"cannot parse segment header");if((z=c.ed).zd=_t(M),z.Tb=st(M,6),z.wb=st(M,3),z.Pc=_t(M),z.Pc&&_t(M)){for(X=0;4>X;++X)_t(M)&&(z.vd[X]=lt(M,6));for(X=0;4>X;++X)_t(M)&&(z.od[X]=lt(M,6))}if(c.L=z.Tb==0?0:z.zd?1:2,M.Ka)return $n(c,3,"cannot parse filter header");var ht=k;if(k=U=A,A=U+ht,z=ht,c.Xb=(1<<st(c.m,2))-1,ht<3*(X=c.Xb))b=7;else{for(U+=3*X,z-=3*X,ht=0;ht<X;++ht){var At=b[k+0]|b[k+1]<<8|b[k+2]<<16;At>z&&(At=z),et(c.Jc[+ht],b,U,At),U+=At,z-=At,k+=3}et(c.Jc[+X],b,U,z),b=U<A?0:5}if(b!=0)return $n(c,b,"cannot parse partitions");for(b=st(U=c.m,7),k=_t(U)?lt(U,4):0,A=_t(U)?lt(U,4):0,z=_t(U)?lt(U,4):0,X=_t(U)?lt(U,4):0,U=_t(U)?lt(U,4):0,ht=c.Qa,At=0;4>At;++At){if(ht.Cb){var Lt=ht.Zb[At];ht.Fb||(Lt+=b)}else{if(0<At){c.pb[At]=c.pb[0];continue}Lt=b}var yt=c.pb[At];yt.Sc[0]=pf[qi(Lt+k,127)],yt.Sc[1]=gf[qi(Lt+0,127)],yt.Eb[0]=2*pf[qi(Lt+A,127)],yt.Eb[1]=101581*gf[qi(Lt+z,127)]>>16,8>yt.Eb[1]&&(yt.Eb[1]=8),yt.Qc[0]=pf[qi(Lt+X,117)],yt.Qc[1]=gf[qi(Lt+U,127)],yt.lc=Lt+U}if(!D.Rb)return $n(c,4,"Not a key frame.");for(_t(M),D=c.Pa,b=0;4>b;++b){for(k=0;8>k;++k)for(A=0;3>A;++A)for(z=0;11>z;++z)X=St(M,M5[b][k][A][z])?st(M,8):k5[b][k][A][z],D.Wc[b][k].Yb[A][z]=X;for(k=0;17>k;++k)D.Xc[b][k]=D.Wc[b][O5[k]]}return c.kc=_t(M),c.kc&&(c.Bd=st(M,8)),c.cb=1}function Ts(c,p,b,A,k,M,D){var z=p[k].Yb[b];for(b=0;16>k;++k){if(!St(c,z[b+0]))return k;for(;!St(c,z[b+1]);)if(z=p[++k].Yb[0],b=0,k==16)return 16;var U=p[k+1].Yb;if(St(c,z[b+2])){var X=c,ht=0;if(St(X,(Lt=z)[(At=b)+3]))if(St(X,Lt[At+6])){for(z=0,At=2*(ht=St(X,Lt[At+8]))+(Lt=St(X,Lt[At+9+ht])),ht=0,Lt=N5[At];Lt[z];++z)ht+=ht+St(X,Lt[z]);ht+=3+(8<<At)}else St(X,Lt[At+7])?(ht=7+2*St(X,165),ht+=St(X,145)):ht=5+St(X,159);else ht=St(X,Lt[At+4])?3+St(X,Lt[At+5]):2;z=U[2]}else ht=1,z=U[1];U=D+P5[k],0>(X=c).b&&wt(X);var At,Lt=X.b,yt=(At=X.Ca>>1)-(X.I>>Lt)>>31;--X.b,X.Ca+=yt,X.Ca|=1,X.I-=(At+1&yt)<<Lt,M[U]=((ht^yt)-yt)*A[(0<k)+0]}return 16}function Vo(c){var p=c.rb[c.sb-1];p.la=0,p.Na=0,r(c.zc,0,0,c.zc.length),c.ja=0}function jl(c,p){if(c==null)return 0;if(p==null)return $n(c,2,"NULL VP8Io parameter in VP8Decode().");if(!c.cb&&!Fr(c,p))return 0;if(t(c.cb),p.ac==null||p.ac(p)){p.ob&&(c.L=0);var b=rc[c.L];if(c.L==2?(c.yb=0,c.zb=0):(c.yb=p.v-b>>4,c.zb=p.j-b>>4,0>c.yb&&(c.yb=0),0>c.zb&&(c.zb=0)),c.Va=p.o+15+b>>4,c.Hb=p.va+15+b>>4,c.Hb>c.za&&(c.Hb=c.za),c.Va>c.Ub&&(c.Va=c.Ub),0<c.L){var A=c.ed;for(b=0;4>b;++b){var k;if(c.Qa.Cb){var M=c.Qa.Lb[b];c.Qa.Fb||(M+=A.Tb)}else M=A.Tb;for(k=0;1>=k;++k){var D=c.gd[b][k],z=M;if(A.Pc&&(z+=A.vd[0],k&&(z+=A.od[0])),0<(z=0>z?0:63<z?63:z)){var U=z;0<A.wb&&(U=4<A.wb?U>>2:U>>1)>9-A.wb&&(U=9-A.wb),1>U&&(U=1),D.dd=U,D.tc=2*z+U,D.ld=40<=z?2:15<=z?1:0}else D.tc=0;D.La=k}}}b=0}else $n(c,6,"Frame setup failed"),b=c.a;if(b=b==0){if(b){c.$c=0,0<c.Aa||(c.Ic=Y5);t:{b=c.Ic,A=4*(U=c.za);var X=32*U,ht=U+1,At=0<c.L?U*(0<c.Aa?2:1):0,Lt=(c.Aa==2?2:1)*U;if((D=A+832+(k=3*(16*b+rc[c.L])/2*X)+(M=c.Fa!=null&&0<c.Fa.length?c.Kc.c*c.Kc.i:0))!=D)b=0;else{if(D>c.Vb){if(c.Vb=0,c.Ec=s(D),c.Fc=0,c.Ec==null){b=$n(c,1,"no memory during frame initialization.");break t}c.Vb=D}D=c.Ec,z=c.Fc,c.Ac=D,c.Bc=z,z+=A,c.Gd=o(X,Sa),c.Hd=0,c.rb=o(ht+1,Go),c.sb=1,c.wa=At?o(At,Es):null,c.Y=0,c.D.Nb=0,c.D.wa=c.wa,c.D.Y=c.Y,0<c.Aa&&(c.D.Y+=U),t(!0),c.oc=D,c.pc=z,z+=832,c.ya=o(Lt,As),c.aa=0,c.D.ya=c.ya,c.D.aa=c.aa,c.Aa==2&&(c.D.aa+=U),c.R=16*U,c.B=8*U,U=(X=rc[c.L])*c.R,X=X/2*c.B,c.sa=D,c.ta=z+U,c.qa=c.sa,c.ra=c.ta+16*b*c.R+X,c.Ha=c.qa,c.Ia=c.ra+8*b*c.B+X,c.$c=0,z+=k,c.mb=M?D:null,c.nb=M?z:null,t(z+M<=c.Fc+c.Vb),Vo(c),r(c.Ac,c.Bc,0,A),b=1}}if(b){if(p.ka=0,p.y=c.sa,p.O=c.ta,p.f=c.qa,p.N=c.ra,p.ea=c.Ha,p.Vd=c.Ia,p.fa=c.R,p.Rc=c.B,p.F=null,p.J=0,!Kg){for(b=-255;255>=b;++b)Hg[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)$g[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)Xg[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)Yg[255+b]=0>b?0:255<b?255:b;Kg=1}Ft=Bl,Qt=zl,ge=Ii,oe=Aa,qe=Jr,ce=Ea,Ae=h,Ne=g,We=R,be=N,bn=x,Dn=C,Un=O,en=rt,rn=es,Fn=wr,cn=xr,Ns=Hl,qr[0]=Xi,qr[1]=Mr,qr[2]=ql,qr[3]=Ul,qr[4]=Ia,qr[5]=Js,qr[6]=Ra,qr[7]=Xo,qr[8]=Wl,qr[9]=Gl,oo[0]=Zs,oo[1]=$o,oo[2]=Dr,oo[3]=br,oo[4]=vi,oo[5]=La,oo[6]=Ta,Ps[0]=zr,Ps[1]=Or,Ps[2]=Vl,Ps[3]=Qs,Ps[4]=Qr,Ps[5]=Yo,Ps[6]=to,b=1}else b=0}b&&(b=function(yt,Ut){for(yt.M=0;yt.M<yt.Va;++yt.M){var Pt,ft=yt.Jc[yt.M&yt.Xb],gt=yt.m,jt=yt;for(Pt=0;Pt<jt.za;++Pt){var Vt=gt,zt=jt,pe=zt.Ac,ae=zt.Bc+4*Pt,Pe=zt.zc,he=zt.ya[zt.aa+Pt];if(zt.Qa.Bb?he.$b=St(Vt,zt.Pa.jb[0])?2+St(Vt,zt.Pa.jb[2]):St(Vt,zt.Pa.jb[1]):he.$b=0,zt.kc&&(he.Ad=St(Vt,zt.Bd)),he.Za=!St(Vt,145)+0,he.Za){var Cn=he.Ob,In=0;for(zt=0;4>zt;++zt){var yn,an=Pe[0+zt];for(yn=0;4>yn;++yn){an=F5[pe[ae+yn]][an];for(var jn=t0[St(Vt,an[0])];0<jn;)jn=t0[2*jn+St(Vt,an[jn])];an=-jn,pe[ae+yn]=an}i(Cn,In,pe,ae,4),In+=4,Pe[0+zt]=an}}else an=St(Vt,156)?St(Vt,128)?1:3:St(Vt,163)?2:0,he.Ob[0]=an,r(pe,ae,an,4),r(Pe,0,an,4);he.Dd=St(Vt,142)?St(Vt,114)?St(Vt,183)?1:3:2:0}if(jt.m.Ka)return $n(yt,7,"Premature end-of-partition0 encountered.");for(;yt.ja<yt.za;++yt.ja){if(jt=ft,Vt=(gt=yt).rb[gt.sb-1],pe=gt.rb[gt.sb+gt.ja],Pt=gt.ya[gt.aa+gt.ja],ae=gt.kc?Pt.Ad:0)Vt.la=pe.la=0,Pt.Za||(Vt.Na=pe.Na=0),Pt.Hc=0,Pt.Gc=0,Pt.ia=0;else{var Mn,He;if(Vt=pe,pe=jt,ae=gt.Pa.Xc,Pe=gt.ya[gt.aa+gt.ja],he=gt.pb[Pe.$b],zt=Pe.ad,Cn=0,In=gt.rb[gt.sb-1],an=yn=0,r(zt,Cn,0,384),Pe.Za)var hi=0,Zi=ae[3];else{jn=s(16);var fi=Vt.Na+In.Na;if(fi=$l(pe,ae[1],fi,he.Eb,0,jn,0),Vt.Na=In.Na=(0<fi)+0,1<fi)Ft(jn,0,zt,Cn);else{var Ji=jn[0]+3>>3;for(jn=0;256>jn;jn+=16)zt[Cn+jn]=Ji}hi=1,Zi=ae[0]}var Rn=15&Vt.la,cr=15&In.la;for(jn=0;4>jn;++jn){var hr=1&cr;for(Ji=He=0;4>Ji;++Ji)Rn=Rn>>1|(hr=(fi=$l(pe,Zi,fi=hr+(1&Rn),he.Sc,hi,zt,Cn))>hi)<<7,He=He<<2|(3<fi?3:1<fi?2:zt[Cn+0]!=0),Cn+=16;Rn>>=4,cr=cr>>1|hr<<7,yn=(yn<<8|He)>>>0}for(Zi=Rn,hi=cr>>4,Mn=0;4>Mn;Mn+=2){for(He=0,Rn=Vt.la>>4+Mn,cr=In.la>>4+Mn,jn=0;2>jn;++jn){for(hr=1&cr,Ji=0;2>Ji;++Ji)fi=hr+(1&Rn),Rn=Rn>>1|(hr=0<(fi=$l(pe,ae[2],fi,he.Qc,0,zt,Cn)))<<3,He=He<<2|(3<fi?3:1<fi?2:zt[Cn+0]!=0),Cn+=16;Rn>>=2,cr=cr>>1|hr<<5}an|=He<<4*Mn,Zi|=Rn<<4<<Mn,hi|=(240&cr)<<Mn}Vt.la=Zi,In.la=hi,Pe.Hc=yn,Pe.Gc=an,Pe.ia=43690&an?0:he.ia,ae=!(yn|an)}if(0<gt.L&&(gt.wa[gt.Y+gt.ja]=gt.gd[Pt.$b][Pt.Za],gt.wa[gt.Y+gt.ja].La|=!ae),jt.Ka)return $n(yt,7,"Premature end-of-file encountered.")}if(Vo(yt),gt=Ut,jt=1,Pt=(ft=yt).D,Vt=0<ft.L&&ft.M>=ft.zb&&ft.M<=ft.Va,ft.Aa==0)t:{if(Pt.M=ft.M,Pt.uc=Vt,is(ft,Pt),jt=1,Pt=(He=ft.D).Nb,Vt=(an=rc[ft.L])*ft.R,pe=an/2*ft.B,jn=16*Pt*ft.R,Ji=8*Pt*ft.B,ae=ft.sa,Pe=ft.ta-Vt+jn,he=ft.qa,zt=ft.ra-pe+Ji,Cn=ft.Ha,In=ft.Ia-pe+Ji,cr=(Rn=He.M)==0,yn=Rn>=ft.Va-1,ft.Aa==2&&is(ft,He),He.uc)for(hr=(fi=ft).D.M,t(fi.D.uc),He=fi.yb;He<fi.Hb;++He){hi=He,Zi=hr;var xi=(Li=(ti=fi).D).Nb;Mn=ti.R;var Li=Li.wa[Li.Y+hi],Gi=ti.sa,Ar=ti.ta+16*xi*Mn+16*hi,ls=Li.dd,Si=Li.tc;if(Si!=0)if(t(3<=Si),ti.L==1)0<hi&&Fn(Gi,Ar,Mn,Si+4),Li.La&&Ns(Gi,Ar,Mn,Si),0<Zi&&rn(Gi,Ar,Mn,Si+4),Li.La&&cn(Gi,Ar,Mn,Si);else{var ks=ti.B,Qo=ti.qa,Oa=ti.ra+8*xi*ks+8*hi,lo=ti.Ha,ti=ti.Ia+8*xi*ks+8*hi;xi=Li.ld,0<hi&&(Ne(Gi,Ar,Mn,Si+4,ls,xi),be(Qo,Oa,lo,ti,ks,Si+4,ls,xi)),Li.La&&(Dn(Gi,Ar,Mn,Si,ls,xi),en(Qo,Oa,lo,ti,ks,Si,ls,xi)),0<Zi&&(Ae(Gi,Ar,Mn,Si+4,ls,xi),We(Qo,Oa,lo,ti,ks,Si+4,ls,xi)),Li.La&&(bn(Gi,Ar,Mn,Si,ls,xi),Un(Qo,Oa,lo,ti,ks,Si,ls,xi))}}if(ft.ia&&alert("todo:DitherRow"),gt.put!=null){if(He=16*Rn,Rn=16*(Rn+1),cr?(gt.y=ft.sa,gt.O=ft.ta+jn,gt.f=ft.qa,gt.N=ft.ra+Ji,gt.ea=ft.Ha,gt.W=ft.Ia+Ji):(He-=an,gt.y=ae,gt.O=Pe,gt.f=he,gt.N=zt,gt.ea=Cn,gt.W=In),yn||(Rn-=an),Rn>gt.o&&(Rn=gt.o),gt.F=null,gt.J=null,ft.Fa!=null&&0<ft.Fa.length&&He<Rn&&(gt.J=Jn(ft,gt,He,Rn-He),gt.F=ft.mb,gt.F==null&&gt.F.length==0)){jt=$n(ft,3,"Could not decode alpha data.");break t}He<gt.j&&(an=gt.j-He,He=gt.j,t(!(1&an)),gt.O+=ft.R*an,gt.N+=ft.B*(an>>1),gt.W+=ft.B*(an>>1),gt.F!=null&&(gt.J+=gt.width*an)),He<Rn&&(gt.O+=gt.v,gt.N+=gt.v>>1,gt.W+=gt.v>>1,gt.F!=null&&(gt.J+=gt.v),gt.ka=He-gt.j,gt.U=gt.va-gt.v,gt.T=Rn-He,jt=gt.put(gt))}Pt+1!=ft.Ic||yn||(i(ft.sa,ft.ta-Vt,ae,Pe+16*ft.R,Vt),i(ft.qa,ft.ra-pe,he,zt+8*ft.B,pe),i(ft.Ha,ft.Ia-pe,Cn,In+8*ft.B,pe))}if(!jt)return $n(yt,6,"Output aborted.")}return 1}(c,p)),p.bc!=null&&p.bc(p),b&=1}return b?(c.cb=0,b):0}function Bi(c,p,b,A,k){k=c[p+b+32*A]+(k>>3),c[p+b+32*A]=-256&k?0>k?0:255:k}function Is(c,p,b,A,k,M){Bi(c,p,0,b,A+k),Bi(c,p,1,b,A+M),Bi(c,p,2,b,A-M),Bi(c,p,3,b,A-k)}function yi(c){return(20091*c>>16)+c}function Ks(c,p,b,A){var k,M=0,D=s(16);for(k=0;4>k;++k){var z=c[p+0]+c[p+8],U=c[p+0]-c[p+8],X=(35468*c[p+4]>>16)-yi(c[p+12]),ht=yi(c[p+4])+(35468*c[p+12]>>16);D[M+0]=z+ht,D[M+1]=U+X,D[M+2]=U-X,D[M+3]=z-ht,M+=4,p++}for(k=M=0;4>k;++k)z=(c=D[M+0]+4)+D[M+8],U=c-D[M+8],X=(35468*D[M+4]>>16)-yi(D[M+12]),Bi(b,A,0,0,z+(ht=yi(D[M+4])+(35468*D[M+12]>>16))),Bi(b,A,1,0,U+X),Bi(b,A,2,0,U-X),Bi(b,A,3,0,z-ht),M++,A+=32}function Ea(c,p,b,A){var k=c[p+0]+4,M=35468*c[p+4]>>16,D=yi(c[p+4]),z=35468*c[p+1]>>16;Is(b,A,0,k+D,c=yi(c[p+1]),z),Is(b,A,1,k+M,c,z),Is(b,A,2,k-M,c,z),Is(b,A,3,k-D,c,z)}function zl(c,p,b,A,k){Ks(c,p,b,A),k&&Ks(c,p+16,b,A+4)}function Ii(c,p,b,A){Qt(c,p+0,b,A,1),Qt(c,p+32,b,A+128,1)}function Aa(c,p,b,A){var k;for(c=c[p+0]+4,k=0;4>k;++k)for(p=0;4>p;++p)Bi(b,A,p,k,c)}function Jr(c,p,b,A){c[p+0]&&oe(c,p+0,b,A),c[p+16]&&oe(c,p+16,b,A+4),c[p+32]&&oe(c,p+32,b,A+128),c[p+48]&&oe(c,p+48,b,A+128+4)}function Bl(c,p,b,A){var k,M=s(16);for(k=0;4>k;++k){var D=c[p+0+k]+c[p+12+k],z=c[p+4+k]+c[p+8+k],U=c[p+4+k]-c[p+8+k],X=c[p+0+k]-c[p+12+k];M[0+k]=D+z,M[8+k]=D-z,M[4+k]=X+U,M[12+k]=X-U}for(k=0;4>k;++k)D=(c=M[0+4*k]+3)+M[3+4*k],z=M[1+4*k]+M[2+4*k],U=M[1+4*k]-M[2+4*k],X=c-M[3+4*k],b[A+0]=D+z>>3,b[A+16]=X+U>>3,b[A+32]=D-z>>3,b[A+48]=X-U>>3,A+=64}function Ho(c,p,b){var A,k=p-32,M=ur,D=255-c[k-1];for(A=0;A<b;++A){var z,U=M,X=D+c[p-1];for(z=0;z<b;++z)c[p+z]=U[X+c[k+z]];p+=32}}function Mr(c,p){Ho(c,p,4)}function Or(c,p){Ho(c,p,8)}function $o(c,p){Ho(c,p,16)}function Dr(c,p){var b;for(b=0;16>b;++b)i(c,p+32*b,c,p-32,16)}function br(c,p){var b;for(b=16;0<b;--b)r(c,p,c[p-1],16),p+=32}function Rs(c,p,b){var A;for(A=0;16>A;++A)r(p,b+32*A,c,16)}function Zs(c,p){var b,A=16;for(b=0;16>b;++b)A+=c[p-1+32*b]+c[p+b-32];Rs(A>>5,c,p)}function vi(c,p){var b,A=8;for(b=0;16>b;++b)A+=c[p-1+32*b];Rs(A>>4,c,p)}function La(c,p){var b,A=8;for(b=0;16>b;++b)A+=c[p+b-32];Rs(A>>4,c,p)}function Ta(c,p){Rs(128,c,p)}function Be(c,p,b){return c+2*p+b+2>>2}function ql(c,p){var b,A=p-32;for(A=new Uint8Array([Be(c[A-1],c[A+0],c[A+1]),Be(c[A+0],c[A+1],c[A+2]),Be(c[A+1],c[A+2],c[A+3]),Be(c[A+2],c[A+3],c[A+4])]),b=0;4>b;++b)i(c,p+32*b,A,0,A.length)}function Ul(c,p){var b=c[p-1],A=c[p-1+32],k=c[p-1+64],M=c[p-1+96];bt(c,p+0,16843009*Be(c[p-1-32],b,A)),bt(c,p+32,16843009*Be(b,A,k)),bt(c,p+64,16843009*Be(A,k,M)),bt(c,p+96,16843009*Be(k,M,M))}function Xi(c,p){var b,A=4;for(b=0;4>b;++b)A+=c[p+b-32]+c[p-1+32*b];for(A>>=3,b=0;4>b;++b)r(c,p+32*b,A,4)}function Ia(c,p){var b=c[p-1+0],A=c[p-1+32],k=c[p-1+64],M=c[p-1-32],D=c[p+0-32],z=c[p+1-32],U=c[p+2-32],X=c[p+3-32];c[p+0+96]=Be(A,k,c[p-1+96]),c[p+1+96]=c[p+0+64]=Be(b,A,k),c[p+2+96]=c[p+1+64]=c[p+0+32]=Be(M,b,A),c[p+3+96]=c[p+2+64]=c[p+1+32]=c[p+0+0]=Be(D,M,b),c[p+3+64]=c[p+2+32]=c[p+1+0]=Be(z,D,M),c[p+3+32]=c[p+2+0]=Be(U,z,D),c[p+3+0]=Be(X,U,z)}function Ra(c,p){var b=c[p+1-32],A=c[p+2-32],k=c[p+3-32],M=c[p+4-32],D=c[p+5-32],z=c[p+6-32],U=c[p+7-32];c[p+0+0]=Be(c[p+0-32],b,A),c[p+1+0]=c[p+0+32]=Be(b,A,k),c[p+2+0]=c[p+1+32]=c[p+0+64]=Be(A,k,M),c[p+3+0]=c[p+2+32]=c[p+1+64]=c[p+0+96]=Be(k,M,D),c[p+3+32]=c[p+2+64]=c[p+1+96]=Be(M,D,z),c[p+3+64]=c[p+2+96]=Be(D,z,U),c[p+3+96]=Be(z,U,U)}function Js(c,p){var b=c[p-1+0],A=c[p-1+32],k=c[p-1+64],M=c[p-1-32],D=c[p+0-32],z=c[p+1-32],U=c[p+2-32],X=c[p+3-32];c[p+0+0]=c[p+1+64]=M+D+1>>1,c[p+1+0]=c[p+2+64]=D+z+1>>1,c[p+2+0]=c[p+3+64]=z+U+1>>1,c[p+3+0]=U+X+1>>1,c[p+0+96]=Be(k,A,b),c[p+0+64]=Be(A,b,M),c[p+0+32]=c[p+1+96]=Be(b,M,D),c[p+1+32]=c[p+2+96]=Be(M,D,z),c[p+2+32]=c[p+3+96]=Be(D,z,U),c[p+3+32]=Be(z,U,X)}function Xo(c,p){var b=c[p+0-32],A=c[p+1-32],k=c[p+2-32],M=c[p+3-32],D=c[p+4-32],z=c[p+5-32],U=c[p+6-32],X=c[p+7-32];c[p+0+0]=b+A+1>>1,c[p+1+0]=c[p+0+64]=A+k+1>>1,c[p+2+0]=c[p+1+64]=k+M+1>>1,c[p+3+0]=c[p+2+64]=M+D+1>>1,c[p+0+32]=Be(b,A,k),c[p+1+32]=c[p+0+96]=Be(A,k,M),c[p+2+32]=c[p+1+96]=Be(k,M,D),c[p+3+32]=c[p+2+96]=Be(M,D,z),c[p+3+64]=Be(D,z,U),c[p+3+96]=Be(z,U,X)}function Gl(c,p){var b=c[p-1+0],A=c[p-1+32],k=c[p-1+64],M=c[p-1+96];c[p+0+0]=b+A+1>>1,c[p+2+0]=c[p+0+32]=A+k+1>>1,c[p+2+32]=c[p+0+64]=k+M+1>>1,c[p+1+0]=Be(b,A,k),c[p+3+0]=c[p+1+32]=Be(A,k,M),c[p+3+32]=c[p+1+64]=Be(k,M,M),c[p+3+64]=c[p+2+64]=c[p+0+96]=c[p+1+96]=c[p+2+96]=c[p+3+96]=M}function Wl(c,p){var b=c[p-1+0],A=c[p-1+32],k=c[p-1+64],M=c[p-1+96],D=c[p-1-32],z=c[p+0-32],U=c[p+1-32],X=c[p+2-32];c[p+0+0]=c[p+2+32]=b+D+1>>1,c[p+0+32]=c[p+2+64]=A+b+1>>1,c[p+0+64]=c[p+2+96]=k+A+1>>1,c[p+0+96]=M+k+1>>1,c[p+3+0]=Be(z,U,X),c[p+2+0]=Be(D,z,U),c[p+1+0]=c[p+3+32]=Be(b,D,z),c[p+1+32]=c[p+3+64]=Be(A,b,D),c[p+1+64]=c[p+3+96]=Be(k,A,b),c[p+1+96]=Be(M,k,A)}function Vl(c,p){var b;for(b=0;8>b;++b)i(c,p+32*b,c,p-32,8)}function Qs(c,p){var b;for(b=0;8>b;++b)r(c,p,c[p-1],8),p+=32}function jr(c,p,b){var A;for(A=0;8>A;++A)r(p,b+32*A,c,8)}function zr(c,p){var b,A=8;for(b=0;8>b;++b)A+=c[p+b-32]+c[p-1+32*b];jr(A>>4,c,p)}function Yo(c,p){var b,A=4;for(b=0;8>b;++b)A+=c[p+b-32];jr(A>>3,c,p)}function Qr(c,p){var b,A=4;for(b=0;8>b;++b)A+=c[p-1+32*b];jr(A>>3,c,p)}function to(c,p){jr(128,c,p)}function ts(c,p,b){var A=c[p-b],k=c[p+0],M=3*(k-A)+uf[1020+c[p-2*b]-c[p+b]],D=Ku[112+(M+4>>3)];c[p-b]=ur[255+A+Ku[112+(M+3>>3)]],c[p+0]=ur[255+k-D]}function Na(c,p,b,A){var k=c[p+0],M=c[p+b];return Cr[255+c[p-2*b]-c[p-b]]>A||Cr[255+M-k]>A}function Pa(c,p,b,A){return 4*Cr[255+c[p-b]-c[p+0]]+Cr[255+c[p-2*b]-c[p+b]]<=A}function ka(c,p,b,A,k){var M=c[p-3*b],D=c[p-2*b],z=c[p-b],U=c[p+0],X=c[p+b],ht=c[p+2*b],At=c[p+3*b];return 4*Cr[255+z-U]+Cr[255+D-X]>A?0:Cr[255+c[p-4*b]-M]<=k&&Cr[255+M-D]<=k&&Cr[255+D-z]<=k&&Cr[255+At-ht]<=k&&Cr[255+ht-X]<=k&&Cr[255+X-U]<=k}function es(c,p,b,A){var k=2*A+1;for(A=0;16>A;++A)Pa(c,p+A,b,k)&&ts(c,p+A,b)}function wr(c,p,b,A){var k=2*A+1;for(A=0;16>A;++A)Pa(c,p+A*b,1,k)&&ts(c,p+A*b,1)}function xr(c,p,b,A){var k;for(k=3;0<k;--k)es(c,p+=4*b,b,A)}function Hl(c,p,b,A){var k;for(k=3;0<k;--k)wr(c,p+=4,b,A)}function ns(c,p,b,A,k,M,D,z){for(M=2*M+1;0<k--;){if(ka(c,p,b,M,D))if(Na(c,p,b,z))ts(c,p,b);else{var U=c,X=p,ht=b,At=U[X-2*ht],Lt=U[X-ht],yt=U[X+0],Ut=U[X+ht],Pt=U[X+2*ht],ft=27*(jt=uf[1020+3*(yt-Lt)+uf[1020+At-Ut]])+63>>7,gt=18*jt+63>>7,jt=9*jt+63>>7;U[X-3*ht]=ur[255+U[X-3*ht]+jt],U[X-2*ht]=ur[255+At+gt],U[X-ht]=ur[255+Lt+ft],U[X+0]=ur[255+yt-ft],U[X+ht]=ur[255+Ut-gt],U[X+2*ht]=ur[255+Pt-jt]}p+=A}}function ar(c,p,b,A,k,M,D,z){for(M=2*M+1;0<k--;){if(ka(c,p,b,M,D))if(Na(c,p,b,z))ts(c,p,b);else{var U=c,X=p,ht=b,At=U[X-ht],Lt=U[X+0],yt=U[X+ht],Ut=Ku[112+((Pt=3*(Lt-At))+4>>3)],Pt=Ku[112+(Pt+3>>3)],ft=Ut+1>>1;U[X-2*ht]=ur[255+U[X-2*ht]+ft],U[X-ht]=ur[255+At+Pt],U[X+0]=ur[255+Lt-Ut],U[X+ht]=ur[255+yt-ft]}p+=A}}function h(c,p,b,A,k,M){ns(c,p,b,1,16,A,k,M)}function g(c,p,b,A,k,M){ns(c,p,1,b,16,A,k,M)}function x(c,p,b,A,k,M){var D;for(D=3;0<D;--D)ar(c,p+=4*b,b,1,16,A,k,M)}function C(c,p,b,A,k,M){var D;for(D=3;0<D;--D)ar(c,p+=4,1,b,16,A,k,M)}function R(c,p,b,A,k,M,D,z){ns(c,p,k,1,8,M,D,z),ns(b,A,k,1,8,M,D,z)}function N(c,p,b,A,k,M,D,z){ns(c,p,1,k,8,M,D,z),ns(b,A,1,k,8,M,D,z)}function O(c,p,b,A,k,M,D,z){ar(c,p+4*k,k,1,8,M,D,z),ar(b,A+4*k,k,1,8,M,D,z)}function rt(c,p,b,A,k,M,D,z){ar(c,p+4,1,k,8,M,D,z),ar(b,A+4,1,k,8,M,D,z)}function Q(){this.ba=new qn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new An,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function pt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Rt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ot(){this.ua=0,this.Wa=new J,this.vb=new J,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new W,this.yc=new F}function Tt(){this.xb=this.a=0,this.l=new Ls,this.ca=new qn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new T,this.Pb=0,this.wd=new T,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ot,this.ab=0,this.gc=o(4,Rt),this.Oc=0}function Xt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ls,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Le(c,p,b,A,k,M,D){for(c=c==null?0:c[p+0],p=0;p<D;++p)k[M+p]=c+b[A+p]&255,c=k[M+p]}function Ze(c,p,b,A,k,M,D){var z;if(c==null)Le(null,null,b,A,k,M,D);else for(z=0;z<D;++z)k[M+z]=c[p+z]+b[A+z]&255}function De(c,p,b,A,k,M,D){if(c==null)Le(null,null,b,A,k,M,D);else{var z,U=c[p+0],X=U,ht=U;for(z=0;z<D;++z)X=ht+(U=c[p+z])-X,ht=b[A+z]+(-256&X?0>X?0:255:X)&255,X=U,k[M+z]=ht}}function Jn(c,p,b,A){var k=p.width,M=p.o;if(t(c!=null&&p!=null),0>b||0>=A||b+A>M)return null;if(!c.Cc){if(c.ga==null){var D;if(c.ga=new Xt,(D=c.ga==null)||(D=p.width*p.o,t(c.Gb.length==0),c.Gb=s(D),c.Uc=0,c.Gb==null?D=0:(c.mb=c.Gb,c.nb=c.Uc,c.rc=null,D=1),D=!D),!D){D=c.ga;var z=c.Fa,U=c.P,X=c.qc,ht=c.mb,At=c.nb,Lt=U+1,yt=X-1,Ut=D.l;if(t(z!=null&&ht!=null&&p!=null),ao[0]=null,ao[1]=Le,ao[2]=Ze,ao[3]=De,D.ca=ht,D.tb=At,D.c=p.width,D.i=p.height,t(0<D.c&&0<D.i),1>=X)p=0;else if(D.$a=z[U+0]>>0&3,D.Z=z[U+0]>>2&3,D.Lc=z[U+0]>>4&3,U=z[U+0]>>6&3,0>D.$a||1<D.$a||4<=D.Z||1<D.Lc||U)p=0;else if(Ut.put=Qn,Ut.ac=dn,Ut.bc=On,Ut.ma=D,Ut.width=p.width,Ut.height=p.height,Ut.Da=p.Da,Ut.v=p.v,Ut.va=p.va,Ut.j=p.j,Ut.o=p.o,D.$a)t:{t(D.$a==1),p=gi();e:for(;;){if(p==null){p=0;break t}if(t(D!=null),D.mc=p,p.c=D.c,p.i=D.i,p.l=D.l,p.l.ma=D,p.l.width=D.c,p.l.height=D.i,p.a=0,ct(p.m,z,Lt,yt),!or(D.c,D.i,1,p,null)||(p.ab==1&&p.gc[0].hc==3&&vr(p.s)?(D.ic=1,z=p.c*p.i,p.Ta=null,p.Ua=0,p.V=s(z),p.Ba=0,p.V==null?(p.a=1,p=0):p=1):(D.ic=0,p=Pr(p,D.c)),!p))break e;p=1;break t}D.mc=null,p=0}else p=yt>=D.c*D.i;D=!p}if(D)return null;c.ga.Lc!=1?c.Ga=0:A=M-b}t(c.ga!=null),t(b+A<=M);t:{if(p=(z=c.ga).c,M=z.l.o,z.$a==0){if(Lt=c.rc,yt=c.Vc,Ut=c.Fa,U=c.P+1+b*p,X=c.mb,ht=c.nb+b*p,t(U<=c.P+c.qc),z.Z!=0)for(t(ao[z.Z]!=null),D=0;D<A;++D)ao[z.Z](Lt,yt,Ut,U,X,ht,p),Lt=X,yt=ht,ht+=p,U+=p;else for(D=0;D<A;++D)i(X,ht,Ut,U,p),Lt=X,yt=ht,ht+=p,U+=p;c.rc=Lt,c.Vc=yt}else{if(t(z.mc!=null),p=b+A,t((D=z.mc)!=null),t(p<=D.i),D.C>=p)p=1;else if(z.ic||vt(),z.ic){z=D.V,Lt=D.Ba,yt=D.c;var Pt=D.i,ft=(Ut=1,U=D.$/yt,X=D.$%yt,ht=D.m,At=D.s,D.$),gt=yt*Pt,jt=yt*p,Vt=At.wc,zt=ft<jt?Hn(At,X,U):null;t(ft<=gt),t(p<=Pt),t(vr(At));e:for(;;){for(;!ht.h&&ft<jt;){if(X&Vt||(zt=Hn(At,X,U)),t(zt!=null),dt(ht),256>(Pt=xn(zt.G[0],zt.H[0],ht)))z[Lt+ft]=Pt,++ft,++X>=yt&&(X=0,++U<=p&&!(U%16)&&sr(D,U));else{if(!(280>Pt)){Ut=0;break e}Pt=Zn(Pt-256,ht);var pe,ae=xn(zt.G[4],zt.H[4],ht);if(dt(ht),!(ft>=(ae=vn(yt,ae=Zn(ae,ht)))&&gt-ft>=Pt)){Ut=0;break e}for(pe=0;pe<Pt;++pe)z[Lt+ft+pe]=z[Lt+ft+pe-ae];for(ft+=Pt,X+=Pt;X>=yt;)X-=yt,++U<=p&&!(U%16)&&sr(D,U);ft<jt&&X&Vt&&(zt=Hn(At,X,U))}t(ht.h==Y(ht))}sr(D,U>p?p:U);break e}!Ut||ht.h&&ft<gt?(Ut=0,D.a=ht.h?5:3):D.$=ft,p=Ut}else p=$i(D,D.V,D.Ba,D.c,D.i,p,Kr);if(!p){A=0;break t}}b+A>=M&&(c.Cc=1),A=1}if(!A)return null;if(c.Cc&&((A=c.ga)!=null&&(A.mc=null),c.ga=null,0<c.Ga))return alert("todo:WebPDequantizeLevels"),null}return c.nb+b*k}function _(c,p,b,A,k,M){for(;0<k--;){var D,z=c,U=p+(b?1:0),X=c,ht=p+(b?0:3);for(D=0;D<A;++D){var At=X[ht+4*D];At!=255&&(At*=32897,z[U+4*D+0]=z[U+4*D+0]*At>>23,z[U+4*D+1]=z[U+4*D+1]*At>>23,z[U+4*D+2]=z[U+4*D+2]*At>>23)}p+=M}}function P(c,p,b,A,k){for(;0<A--;){var M;for(M=0;M<b;++M){var D=c[p+2*M+0],z=15&(X=c[p+2*M+1]),U=4369*z,X=(240&X|X>>4)*U>>16;c[p+2*M+0]=(240&D|D>>4)*U>>16&240|(15&D|D<<4)*U>>16>>4&15,c[p+2*M+1]=240&X|z}p+=k}}function K(c,p,b,A,k,M,D,z){var U,X,ht=255;for(X=0;X<k;++X){for(U=0;U<A;++U){var At=c[p+U];M[D+4*U]=At,ht&=At}p+=b,D+=z}return ht!=255}function tt(c,p,b,A,k){var M;for(M=0;M<k;++M)b[A+M]=c[p+M]>>8}function vt(){so=_,Ma=P,Yu=K,Vg=tt}function Ct(c,p,b){B[c]=function(A,k,M,D,z,U,X,ht,At,Lt,yt,Ut,Pt,ft,gt,jt,Vt){var zt,pe=Vt-1>>1,ae=z[U+0]|X[ht+0]<<16,Pe=At[Lt+0]|yt[Ut+0]<<16;t(A!=null);var he=3*ae+Pe+131074>>2;for(p(A[k+0],255&he,he>>16,Pt,ft),M!=null&&(he=3*Pe+ae+131074>>2,p(M[D+0],255&he,he>>16,gt,jt)),zt=1;zt<=pe;++zt){var Cn=z[U+zt]|X[ht+zt]<<16,In=At[Lt+zt]|yt[Ut+zt]<<16,yn=ae+Cn+Pe+In+524296,an=yn+2*(Cn+Pe)>>3;he=an+ae>>1,ae=(yn=yn+2*(ae+In)>>3)+Cn>>1,p(A[k+2*zt-1],255&he,he>>16,Pt,ft+(2*zt-1)*b),p(A[k+2*zt-0],255&ae,ae>>16,Pt,ft+(2*zt-0)*b),M!=null&&(he=yn+Pe>>1,ae=an+In>>1,p(M[D+2*zt-1],255&he,he>>16,gt,jt+(2*zt-1)*b),p(M[D+2*zt+0],255&ae,ae>>16,gt,jt+(2*zt+0)*b)),ae=Cn,Pe=In}1&Vt||(he=3*ae+Pe+131074>>2,p(A[k+Vt-1],255&he,he>>16,Pt,ft+(Vt-1)*b),M!=null&&(he=3*Pe+ae+131074>>2,p(M[D+Vt-1],255&he,he>>16,gt,jt+(Vt-1)*b)))}}function Dt(){Er[Zu]=j5,Er[Ju]=n0,Er[Zg]=z5,Er[Qu]=i0,Er[tc]=r0,Er[cf]=s0,Er[Jg]=B5,Er[hf]=n0,Er[ff]=i0,Er[ec]=r0,Er[df]=s0}function ue(c){return c&~q5?0>c?0:255:c>>o0}function Se(c,p){return ue((19077*c>>8)+(26149*p>>8)-14234)}function Te(c,p,b){return ue((19077*c>>8)-(6419*p>>8)-(13320*b>>8)+8708)}function Ue(c,p){return ue((19077*c>>8)+(33050*p>>8)-17685)}function Ge(c,p,b,A,k){A[k+0]=Se(c,b),A[k+1]=Te(c,p,b),A[k+2]=Ue(c,p)}function _n(c,p,b,A,k){A[k+0]=Ue(c,p),A[k+1]=Te(c,p,b),A[k+2]=Se(c,b)}function Sn(c,p,b,A,k){var M=Te(c,p,b);p=M<<3&224|Ue(c,p)>>3,A[k+0]=248&Se(c,b)|M>>5,A[k+1]=p}function mn(c,p,b,A,k){var M=240&Ue(c,p)|15;A[k+0]=240&Se(c,b)|Te(c,p,b)>>4,A[k+1]=M}function ui(c,p,b,A,k){A[k+0]=255,Ge(c,p,b,A,k+1)}function kn(c,p,b,A,k){_n(c,p,b,A,k),A[k+3]=255}function ri(c,p,b,A,k){Ge(c,p,b,A,k),A[k+3]=255}function qi(c,p){return 0>c?0:c>p?p:c}function Br(c,p,b){B[c]=function(A,k,M,D,z,U,X,ht,At){for(var Lt=ht+(-2&At)*b;ht!=Lt;)p(A[k+0],M[D+0],z[U+0],X,ht),p(A[k+1],M[D+0],z[U+0],X,ht+b),k+=2,++D,++U,ht+=2*b;1&At&&p(A[k+0],M[D+0],z[U+0],X,ht)}}function Fa(c,p,b){return b==0?c==0?p==0?6:5:p==0?4:0:b}function un(c,p,b,A,k){switch(c>>>30){case 3:Qt(p,b,A,k,0);break;case 2:ce(p,b,A,k);break;case 1:oe(p,b,A,k)}}function is(c,p){var b,A,k=p.M,M=p.Nb,D=c.oc,z=c.pc+40,U=c.oc,X=c.pc+584,ht=c.oc,At=c.pc+600;for(b=0;16>b;++b)D[z+32*b-1]=129;for(b=0;8>b;++b)U[X+32*b-1]=129,ht[At+32*b-1]=129;for(0<k?D[z-1-32]=U[X-1-32]=ht[At-1-32]=129:(r(D,z-32-1,127,21),r(U,X-32-1,127,9),r(ht,At-32-1,127,9)),A=0;A<c.za;++A){var Lt=p.ya[p.aa+A];if(0<A){for(b=-1;16>b;++b)i(D,z+32*b-4,D,z+32*b+12,4);for(b=-1;8>b;++b)i(U,X+32*b-4,U,X+32*b+4,4),i(ht,At+32*b-4,ht,At+32*b+4,4)}var yt=c.Gd,Ut=c.Hd+A,Pt=Lt.ad,ft=Lt.Hc;if(0<k&&(i(D,z-32,yt[Ut].y,0,16),i(U,X-32,yt[Ut].f,0,8),i(ht,At-32,yt[Ut].ea,0,8)),Lt.Za){var gt=D,jt=z-32+16;for(0<k&&(A>=c.za-1?r(gt,jt,yt[Ut].y[15],4):i(gt,jt,yt[Ut+1].y,0,4)),b=0;4>b;b++)gt[jt+128+b]=gt[jt+256+b]=gt[jt+384+b]=gt[jt+0+b];for(b=0;16>b;++b,ft<<=2)gt=D,jt=z+l0[b],qr[Lt.Ob[b]](gt,jt),un(ft,Pt,16*+b,gt,jt)}else if(gt=Fa(A,k,Lt.Ob[0]),oo[gt](D,z),ft!=0)for(b=0;16>b;++b,ft<<=2)un(ft,Pt,16*+b,D,z+l0[b]);for(b=Lt.Gc,gt=Fa(A,k,Lt.Dd),Ps[gt](U,X),Ps[gt](ht,At),ft=Pt,gt=U,jt=X,255&(Lt=b>>0)&&(170&Lt?ge(ft,256,gt,jt):qe(ft,256,gt,jt)),Lt=ht,ft=At,255&(b>>=8)&&(170&b?ge(Pt,320,Lt,ft):qe(Pt,320,Lt,ft)),k<c.Ub-1&&(i(yt[Ut].y,0,D,z+480,16),i(yt[Ut].f,0,U,X+224,8),i(yt[Ut].ea,0,ht,At+224,8)),b=8*M*c.B,yt=c.sa,Ut=c.ta+16*A+16*M*c.R,Pt=c.qa,Lt=c.ra+8*A+b,ft=c.Ha,gt=c.Ia+8*A+b,b=0;16>b;++b)i(yt,Ut+b*c.R,D,z+32*b,16);for(b=0;8>b;++b)i(Pt,Lt+b*c.B,U,X+32*b,8),i(ft,gt+b*c.B,ht,At+32*b,8)}}function wi(c,p,b,A,k,M,D,z,U){var X=[0],ht=[0],At=0,Lt=U!=null?U.kd:0,yt=U!=null?U:new pt;if(c==null||12>b)return 7;yt.data=c,yt.w=p,yt.ha=b,p=[p],b=[b],yt.gb=[yt.gb];t:{var Ut=p,Pt=b,ft=yt.gb;if(t(c!=null),t(Pt!=null),t(ft!=null),ft[0]=0,12<=Pt[0]&&!e(c,Ut[0],"RIFF")){if(e(c,Ut[0]+8,"WEBP")){ft=3;break t}var gt=Ht(c,Ut[0]+4);if(12>gt||4294967286<gt){ft=3;break t}if(Lt&&gt>Pt[0]-8){ft=7;break t}ft[0]=gt,Ut[0]+=12,Pt[0]-=12}ft=0}if(ft!=0)return ft;for(gt=0<yt.gb[0],b=b[0];;){t:{var jt=c;Pt=p,ft=b;var Vt=X,zt=ht,pe=Ut=[0];if((he=At=[At])[0]=0,8>ft[0])ft=7;else{if(!e(jt,Pt[0],"VP8X")){if(Ht(jt,Pt[0]+4)!=10){ft=3;break t}if(18>ft[0]){ft=7;break t}var ae=Ht(jt,Pt[0]+8),Pe=1+Jt(jt,Pt[0]+12);if(2147483648<=Pe*(jt=1+Jt(jt,Pt[0]+15))){ft=3;break t}pe!=null&&(pe[0]=ae),Vt!=null&&(Vt[0]=Pe),zt!=null&&(zt[0]=jt),Pt[0]+=18,ft[0]-=18,he[0]=1}ft=0}}if(At=At[0],Ut=Ut[0],ft!=0)return ft;if(Pt=!!(2&Ut),!gt&&At)return 3;if(M!=null&&(M[0]=!!(16&Ut)),D!=null&&(D[0]=Pt),z!=null&&(z[0]=0),D=X[0],Ut=ht[0],At&&Pt&&U==null){ft=0;break}if(4>b){ft=7;break}if(gt&&At||!gt&&!At&&!e(c,p[0],"ALPH")){b=[b],yt.na=[yt.na],yt.P=[yt.P],yt.Sa=[yt.Sa];t:{ae=c,ft=p,gt=b;var he=yt.gb;Vt=yt.na,zt=yt.P,pe=yt.Sa,Pe=22,t(ae!=null),t(gt!=null),jt=ft[0];var Cn=gt[0];for(t(Vt!=null),t(pe!=null),Vt[0]=null,zt[0]=null,pe[0]=0;;){if(ft[0]=jt,gt[0]=Cn,8>Cn){ft=7;break t}var In=Ht(ae,jt+4);if(4294967286<In){ft=3;break t}var yn=8+In+1&-2;if(Pe+=yn,0<he&&Pe>he){ft=3;break t}if(!e(ae,jt,"VP8 ")||!e(ae,jt,"VP8L")){ft=0;break t}if(Cn[0]<yn){ft=7;break t}e(ae,jt,"ALPH")||(Vt[0]=ae,zt[0]=jt+8,pe[0]=In),jt+=yn,Cn-=yn}}if(b=b[0],yt.na=yt.na[0],yt.P=yt.P[0],yt.Sa=yt.Sa[0],ft!=0)break}b=[b],yt.Ja=[yt.Ja],yt.xa=[yt.xa];t:if(he=c,ft=p,gt=b,Vt=yt.gb[0],zt=yt.Ja,pe=yt.xa,ae=ft[0],jt=!e(he,ae,"VP8 "),Pe=!e(he,ae,"VP8L"),t(he!=null),t(gt!=null),t(zt!=null),t(pe!=null),8>gt[0])ft=7;else{if(jt||Pe){if(he=Ht(he,ae+4),12<=Vt&&he>Vt-12){ft=3;break t}if(Lt&&he>gt[0]-8){ft=7;break t}zt[0]=he,ft[0]+=8,gt[0]-=8,pe[0]=Pe}else pe[0]=5<=gt[0]&&he[ae+0]==47&&!(he[ae+4]>>5),zt[0]=gt[0];ft=0}if(b=b[0],yt.Ja=yt.Ja[0],yt.xa=yt.xa[0],p=p[0],ft!=0)break;if(4294967286<yt.Ja)return 3;if(z==null||Pt||(z[0]=yt.xa?2:1),D=[D],Ut=[Ut],yt.xa){if(5>b){ft=7;break}z=D,Lt=Ut,Pt=M,c==null||5>b?c=0:5<=b&&c[p+0]==47&&!(c[p+4]>>5)?(gt=[0],he=[0],Vt=[0],ct(zt=new T,c,p,b),xe(zt,gt,he,Vt)?(z!=null&&(z[0]=gt[0]),Lt!=null&&(Lt[0]=he[0]),Pt!=null&&(Pt[0]=Vt[0]),c=1):c=0):c=0}else{if(10>b){ft=7;break}z=Ut,c==null||10>b||!mi(c,p+3,b-3)?c=0:(Lt=c[p+0]|c[p+1]<<8|c[p+2]<<16,Pt=16383&(c[p+7]<<8|c[p+6]),c=16383&(c[p+9]<<8|c[p+8]),1&Lt||3<(Lt>>1&7)||!(Lt>>4&1)||Lt>>5>=yt.Ja||!Pt||!c?c=0:(D&&(D[0]=Pt),z&&(z[0]=c),c=1))}if(!c||(D=D[0],Ut=Ut[0],At&&(X[0]!=D||ht[0]!=Ut)))return 3;U!=null&&(U[0]=yt,U.offset=p-U.w,t(4294967286>p-U.w),t(U.offset==U.ha-b));break}return ft==0||ft==7&&At&&U==null?(M!=null&&(M[0]|=yt.na!=null&&0<yt.na.length),A!=null&&(A[0]=D),k!=null&&(k[0]=Ut),0):ft}function Sr(c,p,b){var A=p.width,k=p.height,M=0,D=0,z=A,U=k;if(p.Da=c!=null&&0<c.Da,p.Da&&(z=c.cd,U=c.bd,M=c.v,D=c.j,11>b||(M&=-2,D&=-2),0>M||0>D||0>=z||0>=U||M+z>A||D+U>k))return 0;if(p.v=M,p.j=D,p.va=M+z,p.o=D+U,p.U=z,p.T=U,p.da=c!=null&&0<c.da,p.da){if(!Ce(z,U,b=[c.ib],M=[c.hb]))return 0;p.ib=b[0],p.hb=M[0]}return p.ob=c!=null&&c.ob,p.Kb=c==null||!c.Sd,p.da&&(p.ob=p.ib<3*A/4&&p.hb<3*k/4,p.Kb=0),1}function Ko(c){if(c==null)return 2;if(11>c.S){var p=c.f.RGBA;p.fb+=(c.height-1)*p.A,p.A=-p.A}else p=c.f.kb,c=c.height,p.O+=(c-1)*p.fa,p.fa=-p.fa,p.N+=(c-1>>1)*p.Ab,p.Ab=-p.Ab,p.W+=(c-1>>1)*p.Db,p.Db=-p.Db,p.F!=null&&(p.J+=(c-1)*p.lb,p.lb=-p.lb);return 0}function eo(c,p,b,A){if(A==null||0>=c||0>=p)return 2;if(b!=null){if(b.Da){var k=b.cd,M=b.bd,D=-2&b.v,z=-2&b.j;if(0>D||0>z||0>=k||0>=M||D+k>c||z+M>p)return 2;c=k,p=M}if(b.da){if(!Ce(c,p,k=[b.ib],M=[b.hb]))return 2;c=k[0],p=M[0]}}A.width=c,A.height=p;t:{var U=A.width,X=A.height;if(c=A.S,0>=U||0>=X||!(c>=Zu&&13>c))c=2;else{if(0>=A.Rd&&A.sd==null){D=M=k=p=0;var ht=(z=U*u0[c])*X;if(11>c||(M=(X+1)/2*(p=(U+1)/2),c==12&&(D=(k=U)*X)),(X=s(ht+2*M+D))==null){c=1;break t}A.sd=X,11>c?((U=A.f.RGBA).eb=X,U.fb=0,U.A=z,U.size=ht):((U=A.f.kb).y=X,U.O=0,U.fa=z,U.Fd=ht,U.f=X,U.N=0+ht,U.Ab=p,U.Cd=M,U.ea=X,U.W=0+ht+M,U.Db=p,U.Ed=M,c==12&&(U.F=X,U.J=0+ht+2*M),U.Tc=D,U.lb=k)}if(p=1,k=A.S,M=A.width,D=A.height,k>=Zu&&13>k)if(11>k)c=A.f.RGBA,p&=(z=Math.abs(c.A))*(D-1)+M<=c.size,p&=z>=M*u0[k],p&=c.eb!=null;else{c=A.f.kb,z=(M+1)/2,ht=(D+1)/2,U=Math.abs(c.fa),X=Math.abs(c.Ab);var At=Math.abs(c.Db),Lt=Math.abs(c.lb),yt=Lt*(D-1)+M;p&=U*(D-1)+M<=c.Fd,p&=X*(ht-1)+z<=c.Cd,p=(p&=At*(ht-1)+z<=c.Ed)&U>=M&X>=z&At>=z,p&=c.y!=null,p&=c.f!=null,p&=c.ea!=null,k==12&&(p&=Lt>=M,p&=yt<=c.Tc,p&=c.F!=null)}else p=0;c=p?0:2}}return c!=0||b!=null&&b.fd&&(c=Ko(A)),c}var Ai=64,Yi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],rs=24,Ui=32,no=8,ci=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Kt("Predictor0","PredictorAdd0"),B.Predictor0=function(){return 4278190080},B.Predictor1=function(c){return c},B.Predictor2=function(c,p,b){return p[b+0]},B.Predictor3=function(c,p,b){return p[b+1]},B.Predictor4=function(c,p,b){return p[b-1]},B.Predictor5=function(c,p,b){return Gt(Gt(c,p[b+1]),p[b+0])},B.Predictor6=function(c,p,b){return Gt(c,p[b-1])},B.Predictor7=function(c,p,b){return Gt(c,p[b+0])},B.Predictor8=function(c,p,b){return Gt(p[b-1],p[b+0])},B.Predictor9=function(c,p,b){return Gt(p[b+0],p[b+1])},B.Predictor10=function(c,p,b){return Gt(Gt(c,p[b-1]),Gt(p[b+0],p[b+1]))},B.Predictor11=function(c,p,b){var A=p[b+0];return 0>=kt(A>>24&255,c>>24&255,(p=p[b-1])>>24&255)+kt(A>>16&255,c>>16&255,p>>16&255)+kt(A>>8&255,c>>8&255,p>>8&255)+kt(255&A,255&c,255&p)?A:c},B.Predictor12=function(c,p,b){var A=p[b+0];return(le((c>>24&255)+(A>>24&255)-((p=p[b-1])>>24&255))<<24|le((c>>16&255)+(A>>16&255)-(p>>16&255))<<16|le((c>>8&255)+(A>>8&255)-(p>>8&255))<<8|le((255&c)+(255&A)-(255&p)))>>>0},B.Predictor13=function(c,p,b){var A=p[b-1];return(ie((c=Gt(c,p[b+0]))>>24&255,A>>24&255)<<24|ie(c>>16&255,A>>16&255)<<16|ie(c>>8&255,A>>8&255)<<8|ie(c>>0&255,A>>0&255))>>>0};var io=B.PredictorAdd0;B.PredictorAdd1=ne,Kt("Predictor2","PredictorAdd2"),Kt("Predictor3","PredictorAdd3"),Kt("Predictor4","PredictorAdd4"),Kt("Predictor5","PredictorAdd5"),Kt("Predictor6","PredictorAdd6"),Kt("Predictor7","PredictorAdd7"),Kt("Predictor8","PredictorAdd8"),Kt("Predictor9","PredictorAdd9"),Kt("Predictor10","PredictorAdd10"),Kt("Predictor11","PredictorAdd11"),Kt("Predictor12","PredictorAdd12"),Kt("Predictor13","PredictorAdd13");var ss=B.PredictorAdd2;_e("ColorIndexInverseTransform","MapARGB","32b",function(c){return c>>8&255},function(c){return c}),_e("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(c){return c},function(c){return c>>8&255});var ro,lr=B.ColorIndexInverseTransform,os=B.MapARGB,Zo=B.VP8LColorIndexInverseTransformAlpha,Jo=B.MapAlpha,as=B.VP8LPredictorsAdd=[];as.length=16,(B.VP8LPredictors=[]).length=16,(B.VP8LPredictorsAdd_C=[]).length=16,(B.VP8LPredictors_C=[]).length=16;var Ri,Ki,$,ut,xt,It,Ft,Qt,ce,ge,oe,qe,Ae,Ne,We,be,bn,Dn,Un,en,rn,Fn,cn,Ns,so,Ma,Yu,Vg,Hg=s(511),$g=s(2041),Xg=s(225),Yg=s(767),Kg=0,uf=$g,Ku=Xg,ur=Yg,Cr=Hg,Zu=0,Ju=1,Zg=2,Qu=3,tc=4,cf=5,Jg=6,hf=7,ff=8,ec=9,df=10,C5=[2,3,7],E5=[3,3,11],Qg=[280,256,256,256,40],A5=[0,1,1,1,0],L5=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],T5=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],I5=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],R5=8,pf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],gf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],$l=null,N5=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],P5=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],t0=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],k5=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],F5=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],M5=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],O5=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],oo=[],qr=[],Ps=[],D5=1,e0=2,ao=[],Er=[];Ct("UpsampleRgbLinePair",Ge,3),Ct("UpsampleBgrLinePair",_n,3),Ct("UpsampleRgbaLinePair",ri,4),Ct("UpsampleBgraLinePair",kn,4),Ct("UpsampleArgbLinePair",ui,4),Ct("UpsampleRgba4444LinePair",mn,2),Ct("UpsampleRgb565LinePair",Sn,2);var j5=B.UpsampleRgbLinePair,z5=B.UpsampleBgrLinePair,n0=B.UpsampleRgbaLinePair,i0=B.UpsampleBgraLinePair,r0=B.UpsampleArgbLinePair,s0=B.UpsampleRgba4444LinePair,B5=B.UpsampleRgb565LinePair,nc=16,ic=1<<nc-1,Xl=-227,mf=482,o0=6,q5=(256<<o0)-1,a0=0,U5=s(256),G5=s(256),W5=s(256),V5=s(256),H5=s(mf-Xl),$5=s(mf-Xl);Br("YuvToRgbRow",Ge,3),Br("YuvToBgrRow",_n,3),Br("YuvToRgbaRow",ri,4),Br("YuvToBgraRow",kn,4),Br("YuvToArgbRow",ui,4),Br("YuvToRgba4444Row",mn,2),Br("YuvToRgb565Row",Sn,2);var l0=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],rc=[0,2,8],X5=[8,7,6,4,4,2,2,2,1,1,1,1],Y5=1;this.WebPDecodeRGBA=function(c,p,b,A,k){var M=Ju,D=new Q,z=new qn;D.ba=z,z.S=M,z.width=[z.width],z.height=[z.height];var U=z.width,X=z.height,ht=new Kn;if(ht==null||c==null)var At=2;else t(ht!=null),At=wi(c,p,b,ht.width,ht.height,ht.Pd,ht.Qd,ht.format,null);if(At!=0?U=0:(U!=null&&(U[0]=ht.width[0]),X!=null&&(X[0]=ht.height[0]),U=1),U){z.width=z.width[0],z.height=z.height[0],A!=null&&(A[0]=z.width),k!=null&&(k[0]=z.height);t:{if(A=new Ls,(k=new pt).data=c,k.w=p,k.ha=b,k.kd=1,p=[0],t(k!=null),((c=wi(k.data,k.w,k.ha,null,null,null,p,null,k))==0||c==7)&&p[0]&&(c=4),(p=c)==0){if(t(D!=null),A.data=k.data,A.w=k.w+k.offset,A.ha=k.ha-k.offset,A.put=Qn,A.ac=dn,A.bc=On,A.ma=D,k.xa){if((c=gi())==null){D=1;break t}if(function(Lt,yt){var Ut=[0],Pt=[0],ft=[0];e:for(;;){if(Lt==null)return 0;if(yt==null)return Lt.a=2,0;if(Lt.l=yt,Lt.a=0,ct(Lt.m,yt.data,yt.w,yt.ha),!xe(Lt.m,Ut,Pt,ft)){Lt.a=3;break e}if(Lt.xb=e0,yt.width=Ut[0],yt.height=Pt[0],!or(Ut[0],Pt[0],1,Lt,null))break e;return 1}return t(Lt.a!=0),0}(c,A)){if(A=(p=eo(A.width,A.height,D.Oa,D.ba))==0){e:{A=c;n:for(;;){if(A==null){A=0;break e}if(t(A.s.yc!=null),t(A.s.Ya!=null),t(0<A.s.Wb),t((b=A.l)!=null),t((k=b.ma)!=null),A.xb!=0){if(A.ca=k.ba,A.tb=k.tb,t(A.ca!=null),!Sr(k.Oa,b,Qu)){A.a=2;break n}if(!Pr(A,b.width)||b.da)break n;if((b.da||Oe(A.ca.S))&&vt(),11>A.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),A.ca.f.kb.F!=null&&vt()),A.Pb&&0<A.s.ua&&A.s.vb.X==null&&!ye(A.s.vb,A.s.Wa.Xa)){A.a=1;break n}A.xb=0}if(!$i(A,A.V,A.Ba,A.c,A.i,b.o,Xs))break n;k.Dc=A.Ma,A=1;break e}t(A.a!=0),A=0}A=!A}A&&(p=c.a)}else p=c.a}else{if((c=new Wo)==null){D=1;break t}if(c.Fa=k.na,c.P=k.P,c.qc=k.Sa,Fr(c,A)){if((p=eo(A.width,A.height,D.Oa,D.ba))==0){if(c.Aa=0,b=D.Oa,t((k=c)!=null),b!=null){if(0<(U=0>(U=b.Md)?0:100<U?255:255*U/100)){for(X=ht=0;4>X;++X)12>(At=k.pb[X]).lc&&(At.ia=U*X5[0>At.lc?0:At.lc]>>3),ht|=At.ia;ht&&(alert("todo:VP8InitRandom"),k.ia=1)}k.Ga=b.Id,100<k.Ga?k.Ga=100:0>k.Ga&&(k.Ga=0)}jl(c,A)||(p=c.a)}}else p=c.a}p==0&&D.Oa!=null&&D.Oa.fd&&(p=Ko(D.ba))}D=p}M=D!=0?null:11>M?z.f.RGBA.eb:z.f.kb.y}else M=null;return M};var u0=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(B,it){for(var mt="",q=0;q<4;q++)mt+=String.fromCharCode(B[it++]);return mt}function f(B,it){return(B[it+0]<<0|B[it+1]<<8|B[it+2]<<16)>>>0}function d(B,it){return(B[it+0]<<0|B[it+1]<<8|B[it+2]<<16|B[it+3]<<24)>>>0}new l;var y=[0],m=[0],w=[],S=new l,L=n,E=function(B,it){var mt={},q=0,F=!1,V=0,W=0;if(mt.frames=[],!function(H,Y,nt,dt){for(var wt=0;wt<dt;wt++)if(H[Y+wt]!=nt.charCodeAt(wt))return!0;return!1}(B,it,"RIFF",4)){var et,st;for(d(B,it+=4),it+=8;it<B.length;){var lt=u(B,it),ct=d(B,it+=4);it+=4;var Et=ct+(1&ct);switch(lt){case"VP8 ":case"VP8L":mt.frames[q]===void 0&&(mt.frames[q]={}),(T=mt.frames[q]).src_off=F?W:it-8,T.src_size=V+ct+8,q++,F&&(F=!1,V=0,W=0);break;case"VP8X":(T=mt.header={}).feature_flags=B[it];var ot=it+4;T.canvas_width=1+f(B,ot),ot+=3,T.canvas_height=1+f(B,ot),ot+=3;break;case"ALPH":F=!0,V=Et+8,W=it-8;break;case"ANIM":(T=mt.header).bgcolor=d(B,it),ot=it+4,T.loop_count=(et=B)[(st=ot)+0]<<0|et[st+1]<<8,ot+=2;break;case"ANMF":var Yt,T;(T=mt.frames[q]={}).offset_x=2*f(B,it),it+=3,T.offset_y=2*f(B,it),it+=3,T.width=1+f(B,it),it+=3,T.height=1+f(B,it),it+=3,T.duration=f(B,it),it+=3,Yt=B[it++],T.dispose=1&Yt,T.blend=Yt>>1&1}lt!="ANMF"&&(it+=Et)}return mt}}(L,0);E.response=L,E.rgbaoutput=!0,E.dataurl=!1;var I=E.header?E.header:null,j=E.frames?E.frames:null;if(I){I.loop_counter=I.loop_count,y=[I.canvas_height],m=[I.canvas_width];for(var G=0;G<j.length&&j[G].blend!=0;G++);}var Z=j[0],at=S.WebPDecodeRGBA(L,Z.src_off,Z.src_size,m,y);Z.rgba=at,Z.imgwidth=m[0],Z.imgheight=y[0];for(var v=0;v<m[0]*y[0]*4;v++)w[v]=at[v];return this.width=m,this.height=y,this.data=w,this}(function(n){var t=function(){return typeof ep=="function"},e=function(y,m,w,S){var L=4,E=o;switch(S){case n.image_compression.FAST:L=1,E=s;break;case n.image_compression.MEDIUM:L=6,E=a;break;case n.image_compression.SLOW:L=9,E=l}y=i(y,m,w,E);var I=ep(y,{level:L});return n.__addimage__.arrayBufferToBinaryString(I)},i=function(y,m,w,S){for(var L,E,I,j=y.length/m,G=new Uint8Array(y.length+j),Z=f(),at=0;at<j;at+=1){if(I=at*m,L=y.subarray(I,I+m),S)G.set(S(L,w,E),I+at);else{for(var v,B=Z.length,it=[];v<B;v+=1)it[v]=Z[v](L,w,E);var mt=d(it.concat());G.set(it[mt],I+at)}E=L}return G},r=function(y){var m=Array.apply([],y);return m.unshift(0),m},s=function(y,m){var w,S=[],L=y.length;S[0]=1;for(var E=0;E<L;E+=1)w=y[E-m]||0,S[E+1]=y[E]-w+256&255;return S},o=function(y,m,w){var S,L=[],E=y.length;L[0]=2;for(var I=0;I<E;I+=1)S=w&&w[I]||0,L[I+1]=y[I]-S+256&255;return L},a=function(y,m,w){var S,L,E=[],I=y.length;E[0]=3;for(var j=0;j<I;j+=1)S=y[j-m]||0,L=w&&w[j]||0,E[j+1]=y[j]+256-(S+L>>>1)&255;return E},l=function(y,m,w){var S,L,E,I,j=[],G=y.length;j[0]=4;for(var Z=0;Z<G;Z+=1)S=y[Z-m]||0,L=w&&w[Z]||0,E=w&&w[Z-m]||0,I=u(S,L,E),j[Z+1]=y[Z]-I+256&255;return j},u=function(y,m,w){if(y===m&&m===w)return y;var S=Math.abs(m-w),L=Math.abs(y-w),E=Math.abs(y+m-w-w);return S<=L&&S<=E?y:L<=E?m:w},f=function(){return[r,s,o,a,l]},d=function(y){var m=y.map(function(w){return w.reduce(function(S,L){return S+Math.abs(L)},0)});return m.indexOf(Math.min.apply(null,m))};n.processPNG=function(y,m,w,S){var L,E,I,j,G,Z,at,v,B,it,mt,q,F,V,W,et=this.decode.FLATE_DECODE,st="";if(this.__addimage__.isArrayBuffer(y)&&(y=new Uint8Array(y)),this.__addimage__.isArrayBufferView(y)){if(y=(I=new uL(y)).imgData,E=I.bits,L=I.colorSpace,G=I.colors,[4,6].indexOf(I.colorType)!==-1){if(I.bits===8){B=(v=I.pixelBitlength==32?new Uint32Array(I.decodePixels().buffer):I.pixelBitlength==16?new Uint16Array(I.decodePixels().buffer):new Uint8Array(I.decodePixels().buffer)).length,mt=new Uint8Array(B*I.colors),it=new Uint8Array(B);var lt,ct=I.pixelBitlength-I.bits;for(V=0,W=0;V<B;V++){for(F=v[V],lt=0;lt<ct;)mt[W++]=F>>>lt&255,lt+=I.bits;it[V]=F>>>lt&255}}if(I.bits===16){B=(v=new Uint32Array(I.decodePixels().buffer)).length,mt=new Uint8Array(B*(32/I.pixelBitlength)*I.colors),it=new Uint8Array(B*(32/I.pixelBitlength)),q=I.colors>1,V=0,W=0;for(var Et=0;V<B;)F=v[V++],mt[W++]=F>>>0&255,q&&(mt[W++]=F>>>16&255,F=v[V++],mt[W++]=F>>>0&255),it[Et++]=F>>>16&255;E=8}S!==n.image_compression.NONE&&t()?(y=e(mt,I.width*I.colors,I.colors,S),at=e(it,I.width,1,S)):(y=mt,at=it,et=void 0)}if(I.colorType===3&&(L=this.color_spaces.INDEXED,Z=I.palette,I.transparency.indexed)){var ot=I.transparency.indexed,Yt=0;for(V=0,B=ot.length;V<B;++V)Yt+=ot[V];if((Yt/=255)===B-1&&ot.indexOf(0)!==-1)j=[ot.indexOf(0)];else if(Yt!==B){for(v=I.decodePixels(),it=new Uint8Array(v.length),V=0,B=v.length;V<B;V++)it[V]=ot[v[V]];at=e(it,I.width,1)}}var T=function(H){var Y;switch(H){case n.image_compression.FAST:Y=11;break;case n.image_compression.MEDIUM:Y=13;break;case n.image_compression.SLOW:Y=14;break;default:Y=12}return Y}(S);return et===this.decode.FLATE_DECODE&&(st="/Predictor "+T+" "),st+="/Colors "+G+" /BitsPerComponent "+E+" /Columns "+I.width,(this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),(at&&this.__addimage__.isArrayBuffer(at)||this.__addimage__.isArrayBufferView(at))&&(at=this.__addimage__.arrayBufferToBinaryString(at)),{alias:w,data:y,index:m,filter:et,decodeParameters:st,transparency:j,palette:Z,sMask:at,predictor:T,width:I.width,height:I.height,bitsPerComponent:E,colorSpace:L}}}})(Me.API),function(n){n.processGIF89A=function(t,e,i,r){var s=new cL(t),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:a},f=new dd(100).encode(u,100);return n.processJPEG.call(this,f,e,i,r)},n.processGIF87A=n.processGIF89A}(Me.API),$r.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var t=0;t<n;t++){var e=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:r,green:i,blue:e,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},$r.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[n]()}catch(e){Bn.log("bit decode error:"+e)}},$r.prototype.bit1=function(){var n,t=Math.ceil(this.width/8),e=t%4;for(n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<t;r++)for(var s=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+8*r*4,a=0;a<8&&8*r+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}e!==0&&(this.pos+=4-e)}},$r.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),t=n%4,e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,r=0;r<n;r++){var s=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+2*r*4,a=s>>4,l=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*r+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},$r.prototype.bit8=function(){for(var n=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*i;if(r<this.palette.length){var o=this.palette[r];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},$r.prototype.bit15=function(){for(var n=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,a=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,u=s>>15?255:0,f=i*this.width*4+4*r;this.data[f]=l,this.data[f+1]=a,this.data[f+2]=o,this.data[f+3]=u}this.pos+=n}},$r.prototype.bit16=function(){for(var n=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&t)/t*255|0,l=(o>>5&e)/e*255|0,u=(o>>11)/t*255|0,f=r*this.width*4+4*s;this.data[f]=u,this.data[f+1]=l,this.data[f+2]=a,this.data[f+3]=255}this.pos+=n}},$r.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*e;this.data[o]=s,this.data[o+1]=r,this.data[o+2]=i,this.data[o+3]=255}this.pos+=this.width%4}},$r.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var t=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*e;this.data[a]=s,this.data[a+1]=r,this.data[a+2]=i,this.data[a+3]=o}},$r.prototype.getData=function(){return this.data},function(n){n.processBMP=function(t,e,i,r){var s=new $r(t,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new dd(100).encode(l,100);return n.processJPEG.call(this,u,e,i,r)}}(Me.API),Sm.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(t,e,i,r){var s=new Sm(t),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new dd(100).encode(l,100);return n.processJPEG.call(this,u,e,i,r)}}(Me.API),Me.API.processRGBA=function(n,t,e){for(var i=n.data,r=i.length,s=new Uint8Array(r/4*3),o=new Uint8Array(r/4),a=0,l=0,u=0;u<r;u+=4){var f=i[u],d=i[u+1],y=i[u+2],m=i[u+3];s[a++]=f,s[a++]=d,s[a++]=y,o[l++]=m}var w=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:w,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Me.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Xa=Me.API,Oc=Xa.getCharWidthsArray=function(n,t){var e,i,r=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:r.metadata.Unicode.widths,l=a.fof?a.fof:1,u=t.kerning?t.kerning:r.metadata.Unicode.kerning,f=u.fof?u.fof:1,d=t.doKerning!==!1,y=0,m=n.length,w=0,S=a[0]||l,L=[];for(e=0;e<m;e++)i=n.charCodeAt(e),typeof r.metadata.widthOfString=="function"?L.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(i))+o*(1e3/s)||0)/1e3):(y=d&&Pn(u[i])==="object"&&!isNaN(parseInt(u[i][w],10))?u[i][w]/f:0,L.push((a[i]||S)/l+y)),w=i;return L},_m=Xa.getStringUnitWidth=function(n,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),r=t.charSpace||this.internal.getCharSpace();return Xa.processArabic&&(n=Xa.processArabic(n)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(n,e,r)/e:Oc.apply(this,arguments).reduce(function(s,o){return s+o},0)},bm=function(n,t,e,i){for(var r=[],s=0,o=n.length,a=0;s!==o&&a+t[s]<e;)a+=t[s],s++;r.push(n.slice(0,s));var l=s;for(a=0;s!==o;)a+t[s]>i&&(r.push(n.slice(l,s)),a=0,l=s),a+=t[s],s++;return l!==s&&r.push(n.slice(l,s)),r},wm=function(n,t,e){e||(e={});var i,r,s,o,a,l,u,f=[],d=[f],y=e.textIndent||0,m=0,w=0,S=n.split(" "),L=Oc.apply(this,[" ",e])[0];if(l=e.lineIndent===-1?S[0].length+2:e.lineIndent||0){var E=Array(l).join(" "),I=[];S.map(function(G){(G=G.split(/\s*\n/)).length>1?I=I.concat(G.map(function(Z,at){return(at&&Z.length?`
`:"")+Z})):I.push(G[0])}),S=I,l=_m.apply(this,[E,e])}for(s=0,o=S.length;s<o;s++){var j=0;if(i=S[s],l&&i[0]==`
`&&(i=i.substr(1),j=1),y+m+(w=(r=Oc.apply(this,[i,e])).reduce(function(G,Z){return G+Z},0))>t||j){if(w>t){for(a=bm.apply(this,[i,r,t-(y+m),t]),f.push(a.shift()),f=[a.pop()];a.length;)d.push([a.shift()]);w=r.slice(i.length-(f[0]?f[0].length:0)).reduce(function(G,Z){return G+Z},0)}else f=[i];d.push(f),y=w+l,m=L}else f.push(i),y+=m+w,m=L}return u=l?function(G,Z){return(Z?E:"")+G.join(" ")}:function(G){return G.join(" ")},d.map(u)},Xa.splitTextToSize=function(n,t,e){var i,r=(e=e||{}).fontSize||this.internal.getFontSize(),s=function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var d=this.internal.getFont(f.fontName,f.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,e);i=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/r;s.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/r:0,s.lineIndent=e.lineIndent;var a,l,u=[];for(a=0,l=i.length;a<l;a++)u=u.concat(wm.apply(this,[i[a],o,s]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",e={},i={},r=0;r<t.length;r++)e[t[r]]="0123456789abcdef"[r],i["0123456789abcdef"[r]]=t[r];var s=function(d){return"0x"+parseInt(d,10).toString(16)},o=n.__fontmetrics__.compress=function(d){var y,m,w,S,L=["{"];for(var E in d){if(y=d[E],isNaN(parseInt(E,10))?m="'"+E+"'":(E=parseInt(E,10),m=(m=s(E).slice(2)).slice(0,-1)+i[m.slice(-1)]),typeof y=="number")y<0?(w=s(y).slice(3),S="-"):(w=s(y).slice(2),S=""),w=S+w.slice(0,-1)+i[w.slice(-1)];else{if(Pn(y)!=="object")throw new Error("Don't know what to do with value type "+Pn(y)+".");w=o(y)}L.push(m+w)}return L.push("}"),L.join("")},a=n.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,m,w,S,L={},E=1,I=L,j=[],G="",Z="",at=d.length-1,v=1;v<at;v+=1)(S=d[v])=="'"?y?(w=y.join(""),y=void 0):y=[]:y?y.push(S):S=="{"?(j.push([I,w]),I={},w=void 0):S=="}"?((m=j.pop())[0][m[1]]=I,w=void 0,I=m[0]):S=="-"?E=-1:w===void 0?e.hasOwnProperty(S)?(G+=e[S],w=parseInt(G,16)*E,E=1,G=""):G+=S:e.hasOwnProperty(S)?(Z+=e[S],I[w]=parseInt(Z,16)*E,E=1,w=void 0,Z=""):Z+=S;return L},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},f={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(d){var y=d.font,m=f.Unicode[y.postScriptName];m&&(y.metadata.Unicode={},y.metadata.Unicode.widths=m.widths,y.metadata.Unicode.kerning=m.kerning);var w=u.Unicode[y.postScriptName];w&&(y.metadata.Unicode.encoding=w,y.encoding=w.codePages[0])}])}(Me.API),function(n){var t=function(e){for(var i=e.length,r=new Uint8Array(i),s=0;s<i;s++)r[s]=e.charCodeAt(s);return r};n.API.events.push(["addFont",function(e){var i=void 0,r=e.font,s=e.instance;if(!r.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(i=s.existsFileInVFS(r.postScriptName)===!1?s.loadFile(r.postScriptName):s.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(fu(a)),o.metadata=n.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(r,i)}}])}(Me),function(n){function t(){return(ze.canvg?Promise.resolve(ze.canvg):Kd(()=>import("./index.es.440c474a.js"),[])).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}Me.API.addSvgAsImage=function(e,i,r,s,o,a,l,u){if(isNaN(i)||isNaN(r))throw Bn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Bn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=o;var d=f.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,f.width,f.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(w){return w.fromString(d,e,y)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(w){return w.render(y)}).then(function(){m.addImage(f.toDataURL("image/jpeg",1),i,r,s,o,l,u)})}}(),Me.API.putTotalPages=function(n){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(n,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(t,e);return this},Me.API.viewerPreferences=function(n,t){var e;n=n||{},t=t||!1;var i,r,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],u=0,f=0,d=0;function y(w,S){var L,E=!1;for(L=0;L<w.length;L+=1)w[L]===S&&(E=!0);return E}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,n==="reset"||t===!0){var m=a.length;for(d=0;d<m;d+=1)e[a[d]].value=e[a[d]].defaultValue,e[a[d]].explicitSet=!1}if(Pn(n)==="object"){for(r in n)if(s=n[r],y(a,r)&&s!==void 0){if(e[r].type==="boolean"&&typeof s=="boolean")e[r].value=s;else if(e[r].type==="name"&&y(e[r].valueSet,s))e[r].value=s;else if(e[r].type==="integer"&&Number.isInteger(s))e[r].value=s;else if(e[r].type==="array"){for(u=0;u<s.length;u+=1)if(i=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(f=0;f<s[u].length;f+=1)typeof s[u][f]!="number"&&(i=!1);i===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}e[r].value="["+l.join(" ")+"]"}else e[r].value=e[r].defaultValue;e[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var w,S=[];for(w in e)e[w].explicitSet===!0&&(e[w].type==="name"?S.push("/"+w+" /"+e[w].value):S.push("/"+w+" "+e[w].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(n){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(i)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+r.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(r+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(i,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}}(Me.API),function(n){var t=n.API,e=t.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],f=[""],d=0,y=s.length;d<y;++d){if(a=o.metadata.characterToGlyph(s.charCodeAt(d)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(d),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return f.join("");a=a.toString(16),f.push(u[4-a.length],a)}return f.join("")},i=function(s){var o,a,l,u,f,d,y;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,y=(a=Object.keys(s).sort(function(m,w){return m-w})).length;d<y;d++)o=a[d],l.length>=100&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,f=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var d=a.metadata.Unicode.widths,y=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),m="",w=0;w<y.length;w++)m+=String.fromCharCode(y[w]);var S=u();f({data:m,addLength1:!0,objectId:S}),l("endobj");var L=u();f({data:i(a.metadata.toUnicode),addLength1:!0,objectId:L}),l("endobj");var E=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+el(a.fontName)),l("/FontFile2 "+S+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var I=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+el(a.fontName)),l("/FontDescriptor "+E+" 0 R"),l("/W "+n.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+L+" 0 R"),l("/BaseFont /"+el(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+I+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,f=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var d=a.metadata.rawData,y="",m=0;m<d.length;m++)y+=String.fromCharCode(d[m]);var w=u();f({data:y,addLength1:!0,objectId:w}),l("endobj");var S=u();f({data:i(a.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var L=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+w+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+el(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var E=0;E<a.metadata.hmtx.widths.length;E++)a.metadata.hmtx.widths[E]=parseInt(a.metadata.hmtx.widths[E]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+el(a.fontName)+"/FontDescriptor "+L+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var r=function(s){var o,a=s.text||"",l=s.x,u=s.y,f=s.options||{},d=s.mutex||{},y=d.pdfEscape,m=d.activeFontKey,w=d.fonts,S=m,L="",E=0,I="",j=w[S].encoding;if(w[S].encoding!=="Identity-H")return{text:a,x:l,y:u,options:f,mutex:d};for(I=a,S=m,Array.isArray(a)&&(I=a[0]),E=0;E<I.length;E+=1)w[S].metadata.hasOwnProperty("cmap")&&(o=w[S].metadata.cmap.unicode.codeMap[I[E].charCodeAt(0)]),o||I[E].charCodeAt(0)<256&&w[S].metadata.hasOwnProperty("Unicode")?L+=I[E]:L+="";var G="";return parseInt(S.slice(1))<14||j==="WinAnsiEncoding"?G=y(L,S).split("").map(function(Z){return Z.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(G=e(L,w[S])),d.isHex=!0,{text:G,x:l,y:u,options:f,mutex:d}};t.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([r(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(r(Object.assign({},l,{text:o[u]})).text);s.text=a}else s.text=r(Object.assign({},l,{text:o})).text}])}(Me),function(n){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},n.addFileToVFS=function(e,i){return t.call(this),this.internal.vFS[e]=i,this},n.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}(Me.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(i){var r,s,o,a,l,u,f,d=t,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],w={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},L=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],E=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),I=!1,j=0;this.__bidiEngine__={};var G=function(q){var F=q.charCodeAt(),V=F>>8,W=S[V];return W!==void 0?d[256*W+(255&F)]:V===252||V===253?"AL":E.test(V)?"L":V===8?"R":"N"},Z=function(q){for(var F,V=0;V<q.length;V++){if((F=G(q.charAt(V)))==="L")return!1;if(F==="R")return!0}return!1},at=function(q,F,V,W){var et,st,lt,ct,Et=F[W];switch(Et){case"L":case"R":I=!1;break;case"N":case"AN":break;case"EN":I&&(Et="AN");break;case"AL":I=!0,Et="R";break;case"WS":Et="N";break;case"CS":W<1||W+1>=F.length||(et=V[W-1])!=="EN"&&et!=="AN"||(st=F[W+1])!=="EN"&&st!=="AN"?Et="N":I&&(st="AN"),Et=st===et?st:"N";break;case"ES":Et=(et=W>0?V[W-1]:"B")==="EN"&&W+1<F.length&&F[W+1]==="EN"?"EN":"N";break;case"ET":if(W>0&&V[W-1]==="EN"){Et="EN";break}if(I){Et="N";break}for(lt=W+1,ct=F.length;lt<ct&&F[lt]==="ET";)lt++;Et=lt<ct&&F[lt]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(ct=F.length,lt=W+1;lt<ct&&F[lt]==="NSM";)lt++;if(lt<ct){var ot=q[W],Yt=ot>=1425&&ot<=2303||ot===64286;if(et=F[lt],Yt&&(et==="R"||et==="AL")){Et="R";break}}}Et=W<1||(et=F[W-1])==="B"?"N":V[W-1];break;case"B":I=!1,r=!0,Et=j;break;case"S":s=!0,Et="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":I=!1;break;case"BN":Et="N"}return Et},v=function(q,F,V){var W=q.split("");return V&&B(W,V,{hiLevel:j}),W.reverse(),F&&F.reverse(),W.join("")},B=function(q,F,V){var W,et,st,lt,ct,Et=-1,ot=q.length,Yt=0,T=[],H=j?m:y,Y=[];for(I=!1,r=!1,s=!1,et=0;et<ot;et++)Y[et]=G(q[et]);for(st=0;st<ot;st++){if(ct=Yt,T[st]=at(q,Y,T,st),W=240&(Yt=H[ct][w[T[st]]]),Yt&=15,F[st]=lt=H[Yt][5],W>0)if(W===16){for(et=Et;et<st;et++)F[et]=1;Et=-1}else Et=-1;if(H[Yt][6])Et===-1&&(Et=st);else if(Et>-1){for(et=Et;et<st;et++)F[et]=lt;Et=-1}Y[st]==="B"&&(F[st]=0),V.hiLevel|=lt}s&&function(nt,dt,wt){for(var _t=0;_t<wt;_t++)if(nt[_t]==="S"){dt[_t]=j;for(var St=_t-1;St>=0&&nt[St]==="WS";St--)dt[St]=j}}(Y,F,ot)},it=function(q,F,V,W,et){if(!(et.hiLevel<q)){if(q===1&&j===1&&!r)return F.reverse(),void(V&&V.reverse());for(var st,lt,ct,Et,ot=F.length,Yt=0;Yt<ot;){if(W[Yt]>=q){for(ct=Yt+1;ct<ot&&W[ct]>=q;)ct++;for(Et=Yt,lt=ct-1;Et<lt;Et++,lt--)st=F[Et],F[Et]=F[lt],F[lt]=st,V&&(st=V[Et],V[Et]=V[lt],V[lt]=st);Yt=ct}Yt++}}},mt=function(q,F,V){var W=q.split(""),et={hiLevel:j};return V||(V=[]),B(W,V,et),function(st,lt,ct){if(ct.hiLevel!==0&&f)for(var Et,ot=0;ot<st.length;ot++)lt[ot]===1&&(Et=L.indexOf(st[ot]))>=0&&(st[ot]=L[Et+1])}(W,V,et),it(2,W,F,V,et),it(1,W,F,V,et),W.join("")};return this.__bidiEngine__.doBidiReorder=function(q,F,V){if(function(et,st){if(st)for(var lt=0;lt<et.length;lt++)st[lt]=lt;a===void 0&&(a=Z(et)),u===void 0&&(u=Z(et))}(q,F),o||!l||u)if(o&&l&&a^u)j=a?1:0,q=v(q,F,V);else if(!o&&l&&u)j=a?1:0,q=mt(q,F,V),q=v(q,F);else if(!o||a||l||u){if(o&&!l&&a^u)q=v(q,F),a?(j=0,q=mt(q,F,V)):(j=1,q=mt(q,F,V),q=v(q,F));else if(o&&a&&!l&&u)j=1,q=mt(q,F,V),q=v(q,F);else if(!o&&!l&&a^u){var W=f;a?(j=1,q=mt(q,F,V),j=0,f=!1,q=mt(q,F,V),f=W):(j=0,q=mt(q,F,V),q=v(q,F),j=1,f=!1,q=mt(q,F,V),f=W,q=v(q,F))}}else j=0,q=mt(q,F,V);else j=a?1:0,q=mt(q,F,V);return q},this.__bidiEngine__.setOptions=function(q){q&&(o=q.isInputVisual,l=q.isOutputVisual,a=q.isInputRtl,u=q.isOutputRtl,f=q.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(i){var r=i.text,s=(i.x,i.y,i.options||{}),o=(i.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,e.setOptions(s),Object.prototype.toString.call(r)==="[object Array]"){var a=0;for(o=[],a=0;a<r.length;a+=1)Object.prototype.toString.call(r[a])==="[object Array]"?o.push([e.doBidiReorder(r[a][0]),r[a][1],r[a][2]]):o.push([e.doBidiReorder(r[a])]);i.text=o}else i.text=e.doBidiReorder(r);e.setOptions({isInputVisual:!0})}])}(Me),Me.API.TTFFont=function(){function n(t){var e;if(this.rawData=t,e=this.contents=new Do(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new EL(this),this.registerTTF()}return n.open=function(t){return new n(t)},n.prototype.parse=function(){return this.directory=new hL(this.contents),this.head=new dL(this),this.name=new vL(this),this.cmap=new x5(this),this.toUnicode={},this.hhea=new pL(this),this.maxp=new _L(this),this.hmtx=new bL(this),this.post=new mL(this),this.os2=new gL(this),this.loca=new CL(this),this.glyf=new wL(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var t,e,i,r,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,a,l,u;for(u=[],o=0,a=(l=this.bbox).length;o<a;o++)t=l[o],u.push(Math.round(t*this.scaleFactor));return u}.call(this),this.stemV=0,this.post.exists?(i=255&(r=this.post.italic_angle),(32768&(e=r>>16))!=0&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},n.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},n.prototype.widthOfString=function(t,e,i){var r,s,o,a;for(o=0,s=0,a=(t=""+t).length;0<=a?s<a:s>a;s=0<=a?++s:--s)r=t.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(r))+i*(1e3/e)||0;return o*(e/1e3)},n.prototype.lineHeight=function(t,e){var i;return e==null&&(e=!1),i=e?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},n}();var Yr,Do=function(){function n(t){this.data=t!=null?t:[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(t){return this.data[this.pos++]=t},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},n.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},n.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},n.prototype.readString=function(t){var e,i;for(i=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)i[e]=String.fromCharCode(this.readByte());return i.join("")},n.prototype.writeString=function(t){var e,i,r;for(r=[],e=0,i=t.length;0<=i?e<i:e>i;e=0<=i?++e:--e)r.push(this.writeByte(t.charCodeAt(e)));return r},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(t){return this.writeInt16(t)},n.prototype.readLongLong=function(){var t,e,i,r,s,o,a,l;return t=this.readByte(),e=this.readByte(),i=this.readByte(),r=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^i)+4294967296*(255^r)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*t+281474976710656*e+1099511627776*i+4294967296*r+16777216*s+65536*o+256*a+l},n.prototype.writeLongLong=function(t){var e,i;return e=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(t){return this.writeInt32(t)},n.prototype.read=function(t){var e,i;for(e=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)e.push(this.readByte());return e},n.prototype.write=function(t){var e,i,r,s;for(s=[],i=0,r=t.length;i<r;i++)e=t[i],s.push(this.writeByte(e));return s},n}(),hL=function(){var n;function t(e){var i,r,s;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},r=0,s=this.tableCount;0<=s?r<s:r>s;r=0<=s?++r:--r)i={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(e){var i,r,s,o,a,l,u,f,d,y,m,w,S;for(S in m=Object.keys(e).length,l=Math.log(2),d=16*Math.floor(Math.log(m)/l),o=Math.floor(d/l),f=16*m-d,(r=new Do).writeInt(this.scalarType),r.writeShort(m),r.writeShort(d),r.writeShort(o),r.writeShort(f),s=16*m,u=r.pos+s,a=null,w=[],e)for(y=e[S],r.writeString(S),r.writeInt(n(y)),r.writeInt(u),r.writeInt(y.length),w=w.concat(y),S==="head"&&(a=u),u+=y.length;u%4;)w.push(0),u++;return r.write(w),i=2981146554-n(r.data),r.pos=a+8,r.writeUInt32(i),r.data},n=function(e){var i,r,s,o;for(e=S5.call(e);e.length%4;)e.push(0);for(s=new Do(e),r=0,i=0,o=e.length;i<o;i=i+=4)r+=s.readUInt32();return 4294967295&r},t}(),fL={}.hasOwnProperty,Ss=function(n,t){for(var e in t)fL.call(t,e)&&(n[e]=t[e]);function i(){this.constructor=n}return i.prototype=t.prototype,n.prototype=new i,n.__super__=t.prototype,n};Yr=function(){function n(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var dL=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ss(t,Yr),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var i;return(i=new Do).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(e),i.writeShort(this.glyphDataFormat),i.data},t}(),Cm=function(){function n(t,e){var i,r,s,o,a,l,u,f,d,y,m,w,S,L,E,I,j;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),d=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(m=t.readUInt16(),y=m/2,t.pos+=6,s=function(){var G,Z;for(Z=[],l=G=0;0<=y?G<y:G>y;l=0<=y?++G:--G)Z.push(t.readUInt16());return Z}(),t.pos+=2,S=function(){var G,Z;for(Z=[],l=G=0;0<=y?G<y:G>y;l=0<=y?++G:--G)Z.push(t.readUInt16());return Z}(),u=function(){var G,Z;for(Z=[],l=G=0;0<=y?G<y:G>y;l=0<=y?++G:--G)Z.push(t.readUInt16());return Z}(),f=function(){var G,Z;for(Z=[],l=G=0;0<=y?G<y:G>y;l=0<=y?++G:--G)Z.push(t.readUInt16());return Z}(),r=(this.length-t.pos+this.offset)/2,a=function(){var G,Z;for(Z=[],l=G=0;0<=r?G<r:G>r;l=0<=r?++G:--G)Z.push(t.readUInt16());return Z}(),l=E=0,j=s.length;E<j;l=++E)for(L=s[l],i=I=w=S[l];w<=L?I<=L:I>=L;i=w<=L?++I:--I)f[l]===0?o=i+u[l]:(o=a[f[l]/2+(i-w)-(y-l)]||0)!==0&&(o+=u[l]),this.codeMap[i]=65535&o}t.pos=d}return n.encode=function(t,e){var i,r,s,o,a,l,u,f,d,y,m,w,S,L,E,I,j,G,Z,at,v,B,it,mt,q,F,V,W,et,st,lt,ct,Et,ot,Yt,T,H,Y,nt,dt,wt,_t,St,bt,$t,Jt;switch(W=new Do,o=Object.keys(t).sort(function(Ht,ye){return Ht-ye}),e){case"macroman":for(S=0,L=function(){var Ht=[];for(w=0;w<256;++w)Ht.push(0);return Ht}(),I={0:0},s={},et=0,Et=o.length;et<Et;et++)I[St=t[r=o[et]]]==null&&(I[St]=++S),s[r]={old:t[r],new:I[t[r]]},L[r]=I[t[r]];return W.writeUInt16(1),W.writeUInt16(0),W.writeUInt32(12),W.writeUInt16(0),W.writeUInt16(262),W.writeUInt16(0),W.write(L),{charMap:s,subtable:W.data,maxGlyphID:S+1};case"unicode":for(F=[],d=[],j=0,I={},i={},E=u=null,st=0,ot=o.length;st<ot;st++)I[Z=t[r=o[st]]]==null&&(I[Z]=++j),i[r]={old:Z,new:I[Z]},a=I[Z]-r,E!=null&&a===u||(E&&d.push(E),F.push(r),u=a),E=r;for(E&&d.push(E),d.push(65535),F.push(65535),mt=2*(it=F.length),B=2*Math.pow(Math.log(it)/Math.LN2,2),y=Math.log(B/2)/Math.LN2,v=2*it-B,l=[],at=[],m=[],w=lt=0,Yt=F.length;lt<Yt;w=++lt){if(q=F[w],f=d[w],q===65535){l.push(0),at.push(0);break}if(q-(V=i[q].new)>=32768)for(l.push(0),at.push(2*(m.length+it-w)),r=ct=q;q<=f?ct<=f:ct>=f;r=q<=f?++ct:--ct)m.push(i[r].new);else l.push(V-q),at.push(0)}for(W.writeUInt16(3),W.writeUInt16(1),W.writeUInt32(12),W.writeUInt16(4),W.writeUInt16(16+8*it+2*m.length),W.writeUInt16(0),W.writeUInt16(mt),W.writeUInt16(B),W.writeUInt16(y),W.writeUInt16(v),wt=0,T=d.length;wt<T;wt++)r=d[wt],W.writeUInt16(r);for(W.writeUInt16(0),_t=0,H=F.length;_t<H;_t++)r=F[_t],W.writeUInt16(r);for(bt=0,Y=l.length;bt<Y;bt++)a=l[bt],W.writeUInt16(a);for($t=0,nt=at.length;$t<nt;$t++)G=at[$t],W.writeUInt16(G);for(Jt=0,dt=m.length;Jt<dt;Jt++)S=m[Jt],W.writeUInt16(S);return{charMap:i,subtable:W.data,maxGlyphID:j+1}}},n}(),x5=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ss(t,Yr),t.prototype.tag="cmap",t.prototype.parse=function(e){var i,r,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)i=new Cm(e,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},t.encode=function(e,i){var r,s;return i==null&&(i="macroman"),r=Cm.encode(e,i),(s=new Do).writeUInt16(0),s.writeUInt16(1),r.table=s.data.concat(r.subtable),r},t}(),pL=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ss(t,Yr),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),gL=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ss(t,Yr),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var i,r;for(r=[],i=0;i<10;++i)r.push(e.readByte());return r}(),this.charRange=function(){var i,r;for(r=[],i=0;i<4;++i)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var i,r;for(r=[],i=0;i<2;i=++i)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),mL=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ss(t,Yr),t.prototype.tag="post",t.prototype.parse=function(e){var i,r,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)i=e.readByte(),s.push(this.names.push(e.readString(i)));return s;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 196608:break;case 262144:return this.map=function(){var a,l,u;for(u=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)u.push(e.readUInt32());return u}.call(this)}},t}(),yL=function(n,t){this.raw=n,this.length=n.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},vL=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ss(t,Yr),t.prototype.tag="name",t.prototype.parse=function(e){var i,r,s,o,a,l,u,f,d,y,m;for(e.pos=this.offset,e.readShort(),i=e.readShort(),l=e.readShort(),r=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(u={},o=d=0,y=r.length;d<y;o=++d)s=r[o],e.pos=s.offset,f=e.readString(s.length),a=new yL(f,s),u[m=s.nameID]==null&&(u[m]=[]),u[s.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),_L=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ss(t,Yr),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),bL=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ss(t,Yr),t.prototype.tag="hmtx",t.prototype.parse=function(e){var i,r,s,o,a,l,u;for(e.pos=this.offset,this.metrics=[],i=0,l=this.file.hhea.numberOfMetrics;0<=l?i<l:i>l;i=0<=l?++i:--i)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,d;for(d=[],i=f=0;0<=s?f<s:f>s;i=0<=s?++f:--f)d.push(e.readInt16());return d}(),this.widths=function(){var f,d,y,m;for(m=[],f=0,d=(y=this.metrics).length;f<d;f++)o=y[f],m.push(o.advance);return m}.call(this),r=this.widths[this.widths.length-1],u=[],i=a=0;0<=s?a<s:a>s;i=0<=s?++a:--a)u.push(this.widths.push(r));return u},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),S5=[].slice,wL=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ss(t,Yr),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var i,r,s,o,a,l,u,f,d,y;return e in this.cache?this.cache[e]:(o=this.file.loca,i=this.file.contents,r=o.indexOf(e),(s=o.lengthOf(e))===0?this.cache[e]=null:(i.pos=this.offset+r,a=(l=new Do(i.read(s))).readShort(),f=l.readShort(),y=l.readShort(),u=l.readShort(),d=l.readShort(),this.cache[e]=a===-1?new SL(l,f,y,u,d):new xL(l,a,f,y,u,d),this.cache[e]))},t.prototype.encode=function(e,i,r){var s,o,a,l,u;for(a=[],o=[],l=0,u=i.length;l<u;l++)s=e[i[l]],o.push(a.length),s&&(a=a.concat(s.encode(r)));return o.push(a.length),{table:a,offsets:o}},t}(),xL=function(){function n(t,e,i,r,s,o){this.raw=t,this.numberOfContours=e,this.xMin=i,this.yMin=r,this.xMax=s,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),SL=function(){function n(t,e,i,r,s){var o,a;for(this.raw=t,this.xMin=e,this.yMin=i,this.xMax=r,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return n.prototype.encode=function(){var t,e,i;for(e=new Do(S5.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)e.pos=this.glyphOffsets[t];return e.data},n}(),CL=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Ss(t,Yr),t.prototype.tag="loca",t.prototype.parse=function(e){var i,r;return e.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?function(){var s,o;for(o=[],r=0,s=this.length;r<s;r+=2)o.push(2*e.readUInt16());return o}.call(this):function(){var s,o;for(o=[],r=0,s=this.length;r<s;r+=4)o.push(e.readUInt32());return o}.call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,i){for(var r=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<r.length;++a)if(r[a]=s,o<i.length&&i[o]==a){++o,r[a]=s;var l=this.offsets[a],u=this.offsets[a+1]-l;u>0&&(s+=u)}for(var f=new Array(4*r.length),d=0;d<r.length;++d)f[4*d+3]=255&r[d],f[4*d+2]=(65280&r[d])>>8,f[4*d+1]=(16711680&r[d])>>16,f[4*d]=(4278190080&r[d])>>24;return f},t}(),EL=function(){function n(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var t,e,i,r,s;for(e in r=this.font.cmap.tables[0].codeMap,t={},s=this.subset)i=s[e],t[e]=r[i];return t},n.prototype.glyphsFor=function(t){var e,i,r,s,o,a,l;for(r={},o=0,a=t.length;o<a;o++)r[s=t[o]]=this.font.glyf.glyphFor(s);for(s in e=[],r)(i=r[s])!=null&&i.compound&&e.push.apply(e,i.glyphIDs);if(e.length>0)for(s in l=this.glyphsFor(e))i=l[s],r[s]=i;return r},n.prototype.encode=function(t,e){var i,r,s,o,a,l,u,f,d,y,m,w,S,L,E;for(r in i=x5.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},E=i.charMap)m[(l=E[r]).old]=l.new;for(w in y=i.maxGlyphID,o)w in m||(m[w]=y++);return f=function(I){var j,G;for(j in G={},I)G[I[j]]=j;return G}(m),d=Object.keys(f).sort(function(I,j){return I-j}),S=function(){var I,j,G;for(G=[],I=0,j=d.length;I<j;I++)a=d[I],G.push(f[a]);return G}(),s=this.font.glyf.encode(o,S,m),u=this.font.loca.encode(s.offsets,S),L={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(L["OS/2"]=this.font.os2.raw()),this.font.directory.encode(L)},n}();Me.API.PDFObject=function(){var n;function t(){}return n=function(e,i){return(Array(i+1).join("0")+e).slice(-i)},t.convert=function(e){var i,r,s,o;if(Array.isArray(e))return"["+function(){var a,l,u;for(u=[],a=0,l=e.length;a<l;a++)i=e[a],u.push(t.convert(i));return u}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e!=null&&e.isString)return"("+e+")";if(e instanceof Date)return"(D:"+n(e.getUTCFullYear(),4)+n(e.getUTCMonth(),2)+n(e.getUTCDate(),2)+n(e.getUTCHours(),2)+n(e.getUTCMinutes(),2)+n(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(r in s=["<<"],e)o=e[r],s.push("/"+r+" "+t.convert(o));return s.push(">>"),s.join(`
`)}return""+e},t}();const AL=()=>{Mt("#download-trips").on("click",()=>{LL();const n=TL(),t=new Me("p","pt","a4",!0),e=t.internal.pageSize.getWidth(),i=t.internal.pageSize.getHeight();var r=20;const s=a=>{i<a&&(r=20,t.addPage())},o=()=>{r+=20};n.forEach(a=>{s(r+10);var l=Mt(`#trip-${a} .trip-title`).text();t.text(l,10,r),o(),Mt(`#trip-${a} .trip-images img.trip-imgs`).each(function(){var w=Mt(this).attr("src");s(r+200),t.addImage(w,"JPEG",100,r,e-200,200,void 0,"FAST"),r+=220});const u=Mt(`#trip-${a} .star-container .filled`).length;t.text(`Rating: ${u}`,10,r),o(),o();var f=Mt(`#trip-${a} .location`).text();s(r+10),t.text(f,10,r),o();var d=Mt(`#trip-${a} .description`).text();const y=t.splitTextToSize(d,e-10);for(var m=0;m<y.length;m++)s(r+10),t.text(y[m],10,r),m<y.length-1&&o();o(),t.line(0,r,e,r),s(r),o(),t.addPage(),r=20}),t.save("trips.pdf")})},LL=()=>{Mt("#download-trips").animate({fontSize:"1.5rem"},300,()=>{Mt("#download-trips").animate({fontSize:"1rem"},300)})},TL=()=>{const n=[];return Mt(".selected-trip").each(function(){const t=Mt(this).attr("id").split("-");n.push(t[t.length-1])}),n};AL();export{Pn as _,av as c};
